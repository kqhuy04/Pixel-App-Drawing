function eL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function rk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fv={exports:{}},nd={},pv={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U1;function tL(){if(U1)return Je;U1=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function I($,ee,G){this.props=$,this.context=ee,this.refs=C,this.updater=G||E}I.prototype.isReactComponent={},I.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},I.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function k(){}k.prototype=I.prototype;function R($,ee,G){this.props=$,this.context=ee,this.refs=C,this.updater=G||E}var M=R.prototype=new k;M.constructor=R,b(M,I.prototype),M.isPureReactComponent=!0;var F=Array.isArray,W=Object.prototype.hasOwnProperty,K={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A($,ee,G){var ne,fe={},pe=null,te=null;if(ee!=null)for(ne in ee.ref!==void 0&&(te=ee.ref),ee.key!==void 0&&(pe=""+ee.key),ee)W.call(ee,ne)&&!P.hasOwnProperty(ne)&&(fe[ne]=ee[ne]);var he=arguments.length-2;if(he===1)fe.children=G;else if(1<he){for(var _e=Array(he),we=0;we<he;we++)_e[we]=arguments[we+2];fe.children=_e}if($&&$.defaultProps)for(ne in he=$.defaultProps,he)fe[ne]===void 0&&(fe[ne]=he[ne]);return{$$typeof:n,type:$,key:pe,ref:te,props:fe,_owner:K.current}}function j($,ee){return{$$typeof:n,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function L($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function V($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(G){return ee[G]})}var B=/\/+/g;function O($,ee){return typeof $=="object"&&$!==null&&$.key!=null?V(""+$.key):ee.toString(36)}function ge($,ee,G,ne,fe){var pe=typeof $;(pe==="undefined"||pe==="boolean")&&($=null);var te=!1;if($===null)te=!0;else switch(pe){case"string":case"number":te=!0;break;case"object":switch($.$$typeof){case n:case e:te=!0}}if(te)return te=$,fe=fe(te),$=ne===""?"."+O(te,0):ne,F(fe)?(G="",$!=null&&(G=$.replace(B,"$&/")+"/"),ge(fe,ee,G,"",function(we){return we})):fe!=null&&(L(fe)&&(fe=j(fe,G+(!fe.key||te&&te.key===fe.key?"":(""+fe.key).replace(B,"$&/")+"/")+$)),ee.push(fe)),1;if(te=0,ne=ne===""?".":ne+":",F($))for(var he=0;he<$.length;he++){pe=$[he];var _e=ne+O(pe,he);te+=ge(pe,ee,G,_e,fe)}else if(_e=v($),typeof _e=="function")for($=_e.call($),he=0;!(pe=$.next()).done;)pe=pe.value,_e=ne+O(pe,he++),te+=ge(pe,ee,G,_e,fe);else if(pe==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return te}function de($,ee,G){if($==null)return $;var ne=[],fe=0;return ge($,ne,"","",function(pe){return ee.call(G,pe,fe++)}),ne}function ie($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(G){($._status===0||$._status===-1)&&($._status=1,$._result=G)},function(G){($._status===0||$._status===-1)&&($._status=2,$._result=G)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var se={current:null},z={transition:null},oe={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:z,ReactCurrentOwner:K};function le(){throw Error("act(...) is not supported in production builds of React.")}return Je.Children={map:de,forEach:function($,ee,G){de($,function(){ee.apply(this,arguments)},G)},count:function($){var ee=0;return de($,function(){ee++}),ee},toArray:function($){return de($,function(ee){return ee})||[]},only:function($){if(!L($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Je.Component=I,Je.Fragment=t,Je.Profiler=s,Je.PureComponent=R,Je.StrictMode=r,Je.Suspense=d,Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Je.act=le,Je.cloneElement=function($,ee,G){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ne=b({},$.props),fe=$.key,pe=$.ref,te=$._owner;if(ee!=null){if(ee.ref!==void 0&&(pe=ee.ref,te=K.current),ee.key!==void 0&&(fe=""+ee.key),$.type&&$.type.defaultProps)var he=$.type.defaultProps;for(_e in ee)W.call(ee,_e)&&!P.hasOwnProperty(_e)&&(ne[_e]=ee[_e]===void 0&&he!==void 0?he[_e]:ee[_e])}var _e=arguments.length-2;if(_e===1)ne.children=G;else if(1<_e){he=Array(_e);for(var we=0;we<_e;we++)he[we]=arguments[we+2];ne.children=he}return{$$typeof:n,type:$.type,key:fe,ref:pe,props:ne,_owner:te}},Je.createContext=function($){return $={$$typeof:a,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Je.createElement=A,Je.createFactory=function($){var ee=A.bind(null,$);return ee.type=$,ee},Je.createRef=function(){return{current:null}},Je.forwardRef=function($){return{$$typeof:c,render:$}},Je.isValidElement=L,Je.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:ie}},Je.memo=function($,ee){return{$$typeof:h,type:$,compare:ee===void 0?null:ee}},Je.startTransition=function($){var ee=z.transition;z.transition={};try{$()}finally{z.transition=ee}},Je.unstable_act=le,Je.useCallback=function($,ee){return se.current.useCallback($,ee)},Je.useContext=function($){return se.current.useContext($)},Je.useDebugValue=function(){},Je.useDeferredValue=function($){return se.current.useDeferredValue($)},Je.useEffect=function($,ee){return se.current.useEffect($,ee)},Je.useId=function(){return se.current.useId()},Je.useImperativeHandle=function($,ee,G){return se.current.useImperativeHandle($,ee,G)},Je.useInsertionEffect=function($,ee){return se.current.useInsertionEffect($,ee)},Je.useLayoutEffect=function($,ee){return se.current.useLayoutEffect($,ee)},Je.useMemo=function($,ee){return se.current.useMemo($,ee)},Je.useReducer=function($,ee,G){return se.current.useReducer($,ee,G)},Je.useRef=function($){return se.current.useRef($)},Je.useState=function($){return se.current.useState($)},Je.useSyncExternalStore=function($,ee,G){return se.current.useSyncExternalStore($,ee,G)},Je.useTransition=function(){return se.current.useTransition()},Je.version="18.3.1",Je}var z1;function Um(){return z1||(z1=1,pv.exports=tL()),pv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function nL(){if(B1)return nd;B1=1;var n=Um(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(c,d,h){var m,y={},v=null,E=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(E=d.ref);for(m in d)r.call(d,m)&&!o.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:v,ref:E,props:y,_owner:s.current}}return nd.Fragment=t,nd.jsx=a,nd.jsxs=a,nd}var $1;function rL(){return $1||($1=1,fv.exports=nL()),fv.exports}var f=rL(),ep={},mv={exports:{}},nr={},gv={exports:{}},yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1;function sL(){return H1||(H1=1,(function(n){function e(z,oe){var le=z.length;z.push(oe);e:for(;0<le;){var $=le-1>>>1,ee=z[$];if(0<s(ee,oe))z[$]=oe,z[le]=ee,le=$;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var oe=z[0],le=z.pop();if(le!==oe){z[0]=le;e:for(var $=0,ee=z.length,G=ee>>>1;$<G;){var ne=2*($+1)-1,fe=z[ne],pe=ne+1,te=z[pe];if(0>s(fe,le))pe<ee&&0>s(te,fe)?(z[$]=te,z[pe]=le,$=pe):(z[$]=fe,z[ne]=le,$=ne);else if(pe<ee&&0>s(te,le))z[$]=te,z[pe]=le,$=pe;else break e}}return oe}function s(z,oe){var le=z.sortIndex-oe.sortIndex;return le!==0?le:z.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var d=[],h=[],m=1,y=null,v=3,E=!1,b=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(z){for(var oe=t(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=z)r(h),oe.sortIndex=oe.expirationTime,e(d,oe);else break;oe=t(h)}}function F(z){if(C=!1,M(z),!b)if(t(d)!==null)b=!0,ie(W);else{var oe=t(h);oe!==null&&se(F,oe.startTime-z)}}function W(z,oe){b=!1,C&&(C=!1,k(A),A=-1),E=!0;var le=v;try{for(M(oe),y=t(d);y!==null&&(!(y.expirationTime>oe)||z&&!V());){var $=y.callback;if(typeof $=="function"){y.callback=null,v=y.priorityLevel;var ee=$(y.expirationTime<=oe);oe=n.unstable_now(),typeof ee=="function"?y.callback=ee:y===t(d)&&r(d),M(oe)}else r(d);y=t(d)}if(y!==null)var G=!0;else{var ne=t(h);ne!==null&&se(F,ne.startTime-oe),G=!1}return G}finally{y=null,v=le,E=!1}}var K=!1,P=null,A=-1,j=5,L=-1;function V(){return!(n.unstable_now()-L<j)}function B(){if(P!==null){var z=n.unstable_now();L=z;var oe=!0;try{oe=P(!0,z)}finally{oe?O():(K=!1,P=null)}}else K=!1}var O;if(typeof R=="function")O=function(){R(B)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,de=ge.port2;ge.port1.onmessage=B,O=function(){de.postMessage(null)}}else O=function(){I(B,0)};function ie(z){P=z,K||(K=!0,O())}function se(z,oe){A=I(function(){z(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){b||E||(b=!0,ie(W))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(z){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var le=v;v=oe;try{return z()}finally{v=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,oe){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var le=v;v=z;try{return oe()}finally{v=le}},n.unstable_scheduleCallback=function(z,oe,le){var $=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?$+le:$):le=$,z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,z={id:m++,callback:oe,priorityLevel:z,startTime:le,expirationTime:ee,sortIndex:-1},le>$?(z.sortIndex=le,e(h,z),t(d)===null&&z===t(h)&&(C?(k(A),A=-1):C=!0,se(F,le-$))):(z.sortIndex=ee,e(d,z),b||E||(b=!0,ie(W))),z},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(z){var oe=v;return function(){var le=v;v=oe;try{return z.apply(this,arguments)}finally{v=le}}}})(yv)),yv}var W1;function iL(){return W1||(W1=1,gv.exports=sL()),gv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1;function oL(){if(q1)return nr;q1=1;var n=Um(),e=iL();function t(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,l){a(i,l),a(i+"Capture",l)}function a(i,l){for(s[i]=l,i=0;i<l.length;i++)r.add(l[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(i){return d.call(y,i)?!0:d.call(m,i)?!1:h.test(i)?y[i]=!0:(m[i]=!0,!1)}function E(i,l,u,g){if(u!==null&&u.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,l,u,g){if(l===null||typeof l>"u"||E(i,l,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(i,l,u,g,_,x,N){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=i,this.type=l,this.sanitizeURL=x,this.removeEmptyString=N}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){I[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];I[l]=new C(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){I[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){I[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){I[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){I[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){I[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){I[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){I[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(k,R);I[l]=new C(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(k,R);I[l]=new C(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(k,R);I[l]=new C(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),I.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){I[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,l,u,g){var _=I.hasOwnProperty(l)?I[l]:null;(_!==null?_.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(b(l,u,_,g)&&(u=null),g||_===null?v(l)&&(u===null?i.removeAttribute(l):i.setAttribute(l,""+u)):_.mustUseProperty?i[_.propertyName]=u===null?_.type===3?!1:"":u:(l=_.attributeName,g=_.attributeNamespace,u===null?i.removeAttribute(l):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,g?i.setAttributeNS(g,l,u):i.setAttribute(l,u))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),K=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),z=Symbol.iterator;function oe(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var le=Object.assign,$;function ee(i){if($===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);$=l&&l[1]||""}return`
`+$+i}var G=!1;function ne(i,l){if(!i||G)return"";G=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Z){var g=Z}Reflect.construct(i,[],l)}else{try{l.call()}catch(Z){g=Z}i.call(l.prototype)}else{try{throw Error()}catch(Z){g=Z}i()}}catch(Z){if(Z&&g&&typeof Z.stack=="string"){for(var _=Z.stack.split(`
`),x=g.stack.split(`
`),N=_.length-1,U=x.length-1;1<=N&&0<=U&&_[N]!==x[U];)U--;for(;1<=N&&0<=U;N--,U--)if(_[N]!==x[U]){if(N!==1||U!==1)do if(N--,U--,0>U||_[N]!==x[U]){var H=`
`+_[N].replace(" at new "," at ");return i.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",i.displayName)),H}while(1<=N&&0<=U);break}}}finally{G=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function fe(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=ne(i.type,!1),i;case 11:return i=ne(i.type.render,!1),i;case 1:return i=ne(i.type,!0),i;default:return""}}function pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case K:return"Portal";case j:return"Profiler";case A:return"StrictMode";case O:return"Suspense";case ge:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case B:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case de:return l=i.displayName||null,l!==null?l:pe(i.type)||"Memo";case ie:l=i._payload,i=i._init;try{return pe(i(l))}catch{}}return null}function te(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(l);case 8:return l===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function he(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _e(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function we(i){var l=_e(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),g=""+i[l];if(!i.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,x=u.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return _.call(this)},set:function(N){g=""+N,x.call(this,N)}}),Object.defineProperty(i,l,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(N){g=""+N},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function Ce(i){i._valueTracker||(i._valueTracker=we(i))}function je(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var u=l.getValue(),g="";return i&&(g=_e(i)?i.checked?"true":"false":i.value),i=g,i!==u?(l.setValue(i),!0):!1}function ce(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function J(i,l){var u=l.checked;return le({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ae(i,l){var u=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;u=he(l.value!=null?l.value:u),i._wrapperState={initialChecked:g,initialValue:u,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function tt(i,l){l=l.checked,l!=null&&M(i,"checked",l,!1)}function dt(i,l){tt(i,l);var u=he(l.value),g=l.type;if(u!=null)g==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?Vr(i,l.type,u):l.hasOwnProperty("defaultValue")&&Vr(i,l.type,he(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function pt(i,l,u){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,u||l===i.value||(i.value=l),i.defaultValue=l}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Vr(i,l,u){(l!=="number"||ce(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var An=Array.isArray;function Gn(i,l,u,g){if(i=i.options,l){l={};for(var _=0;_<u.length;_++)l["$"+u[_]]=!0;for(u=0;u<i.length;u++)_=l.hasOwnProperty("$"+i[u].value),i[u].selected!==_&&(i[u].selected=_),_&&g&&(i[u].defaultSelected=!0)}else{for(u=""+he(u),l=null,_=0;_<i.length;_++){if(i[_].value===u){i[_].selected=!0,g&&(i[_].defaultSelected=!0);return}l!==null||i[_].disabled||(l=i[_])}l!==null&&(l.selected=!0)}}function uu(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function sl(i,l){var u=l.value;if(u==null){if(u=l.children,l=l.defaultValue,u!=null){if(l!=null)throw Error(t(92));if(An(u)){if(1<u.length)throw Error(t(93));u=u[0]}l=u}l==null&&(l=""),u=l}i._wrapperState={initialValue:he(u)}}function il(i,l){var u=he(l.value),g=he(l.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),l.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),g!=null&&(i.defaultValue=""+g)}function du(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function nn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rn(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?nn(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Hs,hu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,u,g,_){MSApp.execUnsafeLocalFunction(function(){return i(l,u,g,_)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(Hs=Hs||document.createElement("div"),Hs.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Hs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function bi(i,l){if(l){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=l;return}}i.textContent=l}var qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ko=["Webkit","ms","Moz","O"];Object.keys(qo).forEach(function(i){Ko.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),qo[l]=qo[i]})});function fu(i,l,u){return l==null||typeof l=="boolean"||l===""?"":u||typeof l!="number"||l===0||qo.hasOwnProperty(i)&&qo[i]?(""+l).trim():l+"px"}function pu(i,l){i=i.style;for(var u in l)if(l.hasOwnProperty(u)){var g=u.indexOf("--")===0,_=fu(u,l[u],g);u==="float"&&(u="cssFloat"),g?i.setProperty(u,_):i[u]=_}}var mu=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(i,l){if(l){if(mu[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function yu(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Go=null;function ol(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var al=null,wr=null,hs=null;function ll(i){if(i=zu(i)){if(typeof al!="function")throw Error(t(280));var l=i.stateNode;l&&(l=mf(l),al(i.stateNode,i.type,l))}}function fs(i){wr?hs?hs.push(i):hs=[i]:wr=i}function vu(){if(wr){var i=wr,l=hs;if(hs=wr=null,ll(i),l)for(i=0;i<l.length;i++)ll(l[i])}}function Qo(i,l){return i(l)}function _u(){}var Ws=!1;function wu(i,l,u){if(Ws)return i(l,u);Ws=!0;try{return Qo(i,l,u)}finally{Ws=!1,(wr!==null||hs!==null)&&(_u(),vu())}}function $t(i,l){var u=i.stateNode;if(u===null)return null;var g=mf(u);if(g===null)return null;u=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,l,typeof u));return u}var cl=!1;if(c)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){cl=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{cl=!1}function Yo(i,l,u,g,_,x,N,U,H){var Z=Array.prototype.slice.call(arguments,3);try{l.apply(u,Z)}catch(ye){this.onError(ye)}}var Xo=!1,ul=null,Ur=!1,xu=null,zg={onError:function(i){Xo=!0,ul=i}};function dl(i,l,u,g,_,x,N,U,H){Xo=!1,ul=null,Yo.apply(zg,arguments)}function Fh(i,l,u,g,_,x,N,U,H){if(dl.apply(this,arguments),Xo){if(Xo){var Z=ul;Xo=!1,ul=null}else throw Error(t(198));Ur||(Ur=!0,xu=Z)}}function zr(i){var l=i,u=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(u=l.return),i=l.return;while(i)}return l.tag===3?u:null}function Jo(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function Br(i){if(zr(i)!==i)throw Error(t(188))}function Uh(i){var l=i.alternate;if(!l){if(l=zr(i),l===null)throw Error(t(188));return l!==i?null:i}for(var u=i,g=l;;){var _=u.return;if(_===null)break;var x=_.alternate;if(x===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===u)return Br(_),i;if(x===g)return Br(_),l;x=x.sibling}throw Error(t(188))}if(u.return!==g.return)u=_,g=x;else{for(var N=!1,U=_.child;U;){if(U===u){N=!0,u=_,g=x;break}if(U===g){N=!0,g=_,u=x;break}U=U.sibling}if(!N){for(U=x.child;U;){if(U===u){N=!0,u=x,g=_;break}if(U===g){N=!0,g=x,u=_;break}U=U.sibling}if(!N)throw Error(t(189))}}if(u.alternate!==g)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:l}function Eu(i){return i=Uh(i),i!==null?hl(i):null}function hl(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=hl(i);if(l!==null)return l;i=i.sibling}return null}var fl=e.unstable_scheduleCallback,Tu=e.unstable_cancelCallback,zh=e.unstable_shouldYield,Bg=e.unstable_requestPaint,Et=e.unstable_now,Bh=e.unstable_getCurrentPriorityLevel,Zo=e.unstable_ImmediatePriority,Ii=e.unstable_UserBlockingPriority,xr=e.unstable_NormalPriority,Su=e.unstable_LowPriority,$h=e.unstable_IdlePriority,ea=null,ar=null;function Hh(i){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(ea,i,void 0,(i.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:qh,Cu=Math.log,Wh=Math.LN2;function qh(i){return i>>>=0,i===0?32:31-(Cu(i)/Wh|0)|0}var pl=64,ml=4194304;function ki(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ta(i,l){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,x=i.pingedLanes,N=u&268435455;if(N!==0){var U=N&~_;U!==0?g=ki(U):(x&=N,x!==0&&(g=ki(x)))}else N=u&~_,N!==0?g=ki(N):x!==0&&(g=ki(x));if(g===0)return 0;if(l!==0&&l!==g&&(l&_)===0&&(_=g&-g,x=l&-l,_>=x||_===16&&(x&4194240)!==0))return l;if((g&4)!==0&&(g|=u&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=g;0<l;)u=31-zn(l),_=1<<u,g|=i[u],l&=~_;return g}function $g(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(i,l){for(var u=i.suspendedLanes,g=i.pingedLanes,_=i.expirationTimes,x=i.pendingLanes;0<x;){var N=31-zn(x),U=1<<N,H=_[N];H===-1?((U&u)===0||(U&g)!==0)&&(_[N]=$g(U,l)):H<=l&&(i.expiredLanes|=U),x&=~U}}function lr(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function na(){var i=pl;return pl<<=1,(pl&4194240)===0&&(pl=64),i}function Ai(i){for(var l=[],u=0;31>u;u++)l.push(i);return l}function Ni(i,l,u){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-zn(l),i[l]=u}function vt(i,l){var u=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<u;){var _=31-zn(u),x=1<<_;l[_]=0,g[_]=-1,i[_]=-1,u&=~x}}function Pi(i,l){var u=i.entangledLanes|=l;for(i=i.entanglements;u;){var g=31-zn(u),_=1<<g;_&l|i[g]&l&&(i[g]|=l),u&=~_}}var at=0;function Ri(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Kh,gl,Gh,Qh,Yh,bu=!1,ps=[],En=null,$r=null,Hr=null,Di=new Map,Er=new Map,ms=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xh(i,l){switch(i){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Di.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(l.pointerId)}}function Qn(i,l,u,g,_,x){return i===null||i.nativeEvent!==x?(i={blockedOn:l,domEventName:u,eventSystemFlags:g,nativeEvent:x,targetContainers:[_]},l!==null&&(l=zu(l),l!==null&&gl(l)),i):(i.eventSystemFlags|=g,l=i.targetContainers,_!==null&&l.indexOf(_)===-1&&l.push(_),i)}function Wg(i,l,u,g,_){switch(l){case"focusin":return En=Qn(En,i,l,u,g,_),!0;case"dragenter":return $r=Qn($r,i,l,u,g,_),!0;case"mouseover":return Hr=Qn(Hr,i,l,u,g,_),!0;case"pointerover":var x=_.pointerId;return Di.set(x,Qn(Di.get(x)||null,i,l,u,g,_)),!0;case"gotpointercapture":return x=_.pointerId,Er.set(x,Qn(Er.get(x)||null,i,l,u,g,_)),!0}return!1}function Jh(i){var l=aa(i.target);if(l!==null){var u=zr(l);if(u!==null){if(l=u.tag,l===13){if(l=Jo(u),l!==null){i.blockedOn=l,Yh(i.priority,function(){Gh(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ks(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var u=yl(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);Go=g,u.target.dispatchEvent(g),Go=null}else return l=zu(u),l!==null&&gl(l),i.blockedOn=u,!1;l.shift()}return!0}function ra(i,l,u){Ks(i)&&u.delete(l)}function Zh(){bu=!1,En!==null&&Ks(En)&&(En=null),$r!==null&&Ks($r)&&($r=null),Hr!==null&&Ks(Hr)&&(Hr=null),Di.forEach(ra),Er.forEach(ra)}function Wr(i,l){i.blockedOn===l&&(i.blockedOn=null,bu||(bu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Zh)))}function qr(i){function l(_){return Wr(_,i)}if(0<ps.length){Wr(ps[0],i);for(var u=1;u<ps.length;u++){var g=ps[u];g.blockedOn===i&&(g.blockedOn=null)}}for(En!==null&&Wr(En,i),$r!==null&&Wr($r,i),Hr!==null&&Wr(Hr,i),Di.forEach(l),Er.forEach(l),u=0;u<ms.length;u++)g=ms[u],g.blockedOn===i&&(g.blockedOn=null);for(;0<ms.length&&(u=ms[0],u.blockedOn===null);)Jh(u),u.blockedOn===null&&ms.shift()}var Gs=F.ReactCurrentBatchConfig,Mi=!0;function At(i,l,u,g){var _=at,x=Gs.transition;Gs.transition=null;try{at=1,Iu(i,l,u,g)}finally{at=_,Gs.transition=x}}function qg(i,l,u,g){var _=at,x=Gs.transition;Gs.transition=null;try{at=4,Iu(i,l,u,g)}finally{at=_,Gs.transition=x}}function Iu(i,l,u,g){if(Mi){var _=yl(i,l,u,g);if(_===null)ry(i,l,g,sa,u),Xh(i,g);else if(Wg(_,i,l,u,g))g.stopPropagation();else if(Xh(i,g),l&4&&-1<Hg.indexOf(i)){for(;_!==null;){var x=zu(_);if(x!==null&&Kh(x),x=yl(i,l,u,g),x===null&&ry(i,l,g,sa,u),x===_)break;_=x}_!==null&&g.stopPropagation()}else ry(i,l,g,null,u)}}var sa=null;function yl(i,l,u,g){if(sa=null,i=ol(g),i=aa(i),i!==null)if(l=zr(i),l===null)i=null;else if(u=l.tag,u===13){if(i=Jo(l),i!==null)return i;i=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return sa=i,null}function ku(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bh()){case Zo:return 1;case Ii:return 4;case xr:case Su:return 16;case $h:return 536870912;default:return 16}default:return 16}}var cr=null,vl=null,Yn=null;function Au(){if(Yn)return Yn;var i,l=vl,u=l.length,g,_="value"in cr?cr.value:cr.textContent,x=_.length;for(i=0;i<u&&l[i]===_[i];i++);var N=u-i;for(g=1;g<=N&&l[u-g]===_[x-g];g++);return Yn=_.slice(i,1<g?1-g:void 0)}function _l(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function gs(){return!0}function Nu(){return!1}function Tn(i){function l(u,g,_,x,N){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var U in i)i.hasOwnProperty(U)&&(u=i[U],this[U]=u?u(x):x[U]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?gs:Nu,this.isPropagationStopped=Nu,this}return le(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gs)},persist:function(){},isPersistent:gs}),l}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=Tn(Kr),ys=le({},Kr,{view:0,detail:0}),Kg=Tn(ys),xl,Qs,ji,ia=le({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ji&&(ji&&i.type==="mousemove"?(xl=i.screenX-ji.screenX,Qs=i.screenY-ji.screenY):Qs=xl=0,ji=i),xl)},movementY:function(i){return"movementY"in i?i.movementY:Qs}}),El=Tn(ia),Pu=le({},ia,{dataTransfer:0}),ef=Tn(Pu),Tl=le({},ys,{relatedTarget:0}),Sl=Tn(Tl),tf=le({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ys=Tn(tf),nf=le({},Kr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rf=Tn(nf),sf=le({},Kr,{data:0}),Ru=Tn(sf),Cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},of={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function af(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=of[i])?!!l[i]:!1}function vs(){return af}var p=le({},ys,{key:function(i){if(i.key){var l=Cl[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=_l(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Bn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vs,charCode:function(i){return i.type==="keypress"?_l(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?_l(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Tn(p),T=le({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D=Tn(T),Q=le({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vs}),re=Tn(Q),Te=le({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gt=Tn(Te),sn=le({},ia,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),lt=Tn(sn),hn=[9,13,27,32],Gt=c&&"CompositionEvent"in window,Tr=null;c&&"documentMode"in document&&(Tr=document.documentMode);var ur=c&&"TextEvent"in window&&!Tr,oa=c&&(!Gt||Tr&&8<Tr&&11>=Tr),bl=" ",ME=!1;function jE(i,l){switch(i){case"keyup":return hn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LE(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Il=!1;function XM(i,l){switch(i){case"compositionend":return LE(l);case"keypress":return l.which!==32?null:(ME=!0,bl);case"textInput":return i=l.data,i===bl&&ME?null:i;default:return null}}function JM(i,l){if(Il)return i==="compositionend"||!Gt&&jE(i,l)?(i=Au(),Yn=vl=cr=null,Il=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return oa&&l.locale!=="ko"?null:l.data;default:return null}}var ZM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OE(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!ZM[i.type]:l==="textarea"}function VE(i,l,u,g){fs(g),l=hf(l,"onChange"),0<l.length&&(u=new wl("onChange","change",null,u,g),i.push({event:u,listeners:l}))}var Du=null,Mu=null;function ej(i){nT(i,0)}function lf(i){var l=Rl(i);if(je(l))return i}function tj(i,l){if(i==="change")return l}var FE=!1;if(c){var Gg;if(c){var Qg="oninput"in document;if(!Qg){var UE=document.createElement("div");UE.setAttribute("oninput","return;"),Qg=typeof UE.oninput=="function"}Gg=Qg}else Gg=!1;FE=Gg&&(!document.documentMode||9<document.documentMode)}function zE(){Du&&(Du.detachEvent("onpropertychange",BE),Mu=Du=null)}function BE(i){if(i.propertyName==="value"&&lf(Mu)){var l=[];VE(l,Mu,i,ol(i)),wu(ej,l)}}function nj(i,l,u){i==="focusin"?(zE(),Du=l,Mu=u,Du.attachEvent("onpropertychange",BE)):i==="focusout"&&zE()}function rj(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return lf(Mu)}function sj(i,l){if(i==="click")return lf(l)}function ij(i,l){if(i==="input"||i==="change")return lf(l)}function oj(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var Gr=typeof Object.is=="function"?Object.is:oj;function ju(i,l){if(Gr(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var u=Object.keys(i),g=Object.keys(l);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!d.call(l,_)||!Gr(i[_],l[_]))return!1}return!0}function $E(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function HE(i,l){var u=$E(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=l&&g>=l)return{node:u,offset:l-i};i=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=$E(u)}}function WE(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?WE(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function qE(){for(var i=window,l=ce();l instanceof i.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)i=l.contentWindow;else break;l=ce(i.document)}return l}function Yg(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function aj(i){var l=qE(),u=i.focusedElem,g=i.selectionRange;if(l!==u&&u&&u.ownerDocument&&WE(u.ownerDocument.documentElement,u)){if(g!==null&&Yg(u)){if(l=g.start,i=g.end,i===void 0&&(i=l),"selectionStart"in u)u.selectionStart=l,u.selectionEnd=Math.min(i,u.value.length);else if(i=(l=u.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var _=u.textContent.length,x=Math.min(g.start,_);g=g.end===void 0?x:Math.min(g.end,_),!i.extend&&x>g&&(_=g,g=x,x=_),_=HE(u,x);var N=HE(u,g);_&&N&&(i.rangeCount!==1||i.anchorNode!==_.node||i.anchorOffset!==_.offset||i.focusNode!==N.node||i.focusOffset!==N.offset)&&(l=l.createRange(),l.setStart(_.node,_.offset),i.removeAllRanges(),x>g?(i.addRange(l),i.extend(N.node,N.offset)):(l.setEnd(N.node,N.offset),i.addRange(l)))}}for(l=[],i=u;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<l.length;u++)i=l[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var lj=c&&"documentMode"in document&&11>=document.documentMode,kl=null,Xg=null,Lu=null,Jg=!1;function KE(i,l,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Jg||kl==null||kl!==ce(g)||(g=kl,"selectionStart"in g&&Yg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Lu&&ju(Lu,g)||(Lu=g,g=hf(Xg,"onSelect"),0<g.length&&(l=new wl("onSelect","select",null,l,u),i.push({event:l,listeners:g}),l.target=kl)))}function cf(i,l){var u={};return u[i.toLowerCase()]=l.toLowerCase(),u["Webkit"+i]="webkit"+l,u["Moz"+i]="moz"+l,u}var Al={animationend:cf("Animation","AnimationEnd"),animationiteration:cf("Animation","AnimationIteration"),animationstart:cf("Animation","AnimationStart"),transitionend:cf("Transition","TransitionEnd")},Zg={},GE={};c&&(GE=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function uf(i){if(Zg[i])return Zg[i];if(!Al[i])return i;var l=Al[i],u;for(u in l)if(l.hasOwnProperty(u)&&u in GE)return Zg[i]=l[u];return i}var QE=uf("animationend"),YE=uf("animationiteration"),XE=uf("animationstart"),JE=uf("transitionend"),ZE=new Map,eT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(i,l){ZE.set(i,l),o(l,[i])}for(var ey=0;ey<eT.length;ey++){var ty=eT[ey],cj=ty.toLowerCase(),uj=ty[0].toUpperCase()+ty.slice(1);Li(cj,"on"+uj)}Li(QE,"onAnimationEnd"),Li(YE,"onAnimationIteration"),Li(XE,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(JE,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function tT(i,l,u){var g=i.type||"unknown-event";i.currentTarget=u,Fh(g,l,void 0,i),i.currentTarget=null}function nT(i,l){l=(l&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],_=g.event;g=g.listeners;e:{var x=void 0;if(l)for(var N=g.length-1;0<=N;N--){var U=g[N],H=U.instance,Z=U.currentTarget;if(U=U.listener,H!==x&&_.isPropagationStopped())break e;tT(_,U,Z),x=H}else for(N=0;N<g.length;N++){if(U=g[N],H=U.instance,Z=U.currentTarget,U=U.listener,H!==x&&_.isPropagationStopped())break e;tT(_,U,Z),x=H}}}if(Ur)throw i=xu,Ur=!1,xu=null,i}function bt(i,l){var u=l[cy];u===void 0&&(u=l[cy]=new Set);var g=i+"__bubble";u.has(g)||(rT(l,i,2,!1),u.add(g))}function ny(i,l,u){var g=0;l&&(g|=4),rT(u,i,g,l)}var df="_reactListening"+Math.random().toString(36).slice(2);function Vu(i){if(!i[df]){i[df]=!0,r.forEach(function(u){u!=="selectionchange"&&(dj.has(u)||ny(u,!1,i),ny(u,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[df]||(l[df]=!0,ny("selectionchange",!1,l))}}function rT(i,l,u,g){switch(ku(l)){case 1:var _=At;break;case 4:_=qg;break;default:_=Iu}u=_.bind(null,l,u,i),_=void 0,!cl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(_=!0),g?_!==void 0?i.addEventListener(l,u,{capture:!0,passive:_}):i.addEventListener(l,u,!0):_!==void 0?i.addEventListener(l,u,{passive:_}):i.addEventListener(l,u,!1)}function ry(i,l,u,g,_){var x=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var N=g.tag;if(N===3||N===4){var U=g.stateNode.containerInfo;if(U===_||U.nodeType===8&&U.parentNode===_)break;if(N===4)for(N=g.return;N!==null;){var H=N.tag;if((H===3||H===4)&&(H=N.stateNode.containerInfo,H===_||H.nodeType===8&&H.parentNode===_))return;N=N.return}for(;U!==null;){if(N=aa(U),N===null)return;if(H=N.tag,H===5||H===6){g=x=N;continue e}U=U.parentNode}}g=g.return}wu(function(){var Z=x,ye=ol(u),ve=[];e:{var me=ZE.get(i);if(me!==void 0){var Ie=wl,Re=i;switch(i){case"keypress":if(_l(u)===0)break e;case"keydown":case"keyup":Ie=w;break;case"focusin":Re="focus",Ie=Sl;break;case"focusout":Re="blur",Ie=Sl;break;case"beforeblur":case"afterblur":Ie=Sl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=El;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=re;break;case QE:case YE:case XE:Ie=Ys;break;case JE:Ie=gt;break;case"scroll":Ie=Kg;break;case"wheel":Ie=lt;break;case"copy":case"cut":case"paste":Ie=rf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=D}var Le=(l&4)!==0,Ht=!Le&&i==="scroll",Y=Le?me!==null?me+"Capture":null:me;Le=[];for(var q=Z,X;q!==null;){X=q;var xe=X.stateNode;if(X.tag===5&&xe!==null&&(X=xe,Y!==null&&(xe=$t(q,Y),xe!=null&&Le.push(Fu(q,xe,X)))),Ht)break;q=q.return}0<Le.length&&(me=new Ie(me,Re,null,u,ye),ve.push({event:me,listeners:Le}))}}if((l&7)===0){e:{if(me=i==="mouseover"||i==="pointerover",Ie=i==="mouseout"||i==="pointerout",me&&u!==Go&&(Re=u.relatedTarget||u.fromElement)&&(aa(Re)||Re[Xs]))break e;if((Ie||me)&&(me=ye.window===ye?ye:(me=ye.ownerDocument)?me.defaultView||me.parentWindow:window,Ie?(Re=u.relatedTarget||u.toElement,Ie=Z,Re=Re?aa(Re):null,Re!==null&&(Ht=zr(Re),Re!==Ht||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Ie=null,Re=Z),Ie!==Re)){if(Le=El,xe="onMouseLeave",Y="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Le=D,xe="onPointerLeave",Y="onPointerEnter",q="pointer"),Ht=Ie==null?me:Rl(Ie),X=Re==null?me:Rl(Re),me=new Le(xe,q+"leave",Ie,u,ye),me.target=Ht,me.relatedTarget=X,xe=null,aa(ye)===Z&&(Le=new Le(Y,q+"enter",Re,u,ye),Le.target=X,Le.relatedTarget=Ht,xe=Le),Ht=xe,Ie&&Re)t:{for(Le=Ie,Y=Re,q=0,X=Le;X;X=Nl(X))q++;for(X=0,xe=Y;xe;xe=Nl(xe))X++;for(;0<q-X;)Le=Nl(Le),q--;for(;0<X-q;)Y=Nl(Y),X--;for(;q--;){if(Le===Y||Y!==null&&Le===Y.alternate)break t;Le=Nl(Le),Y=Nl(Y)}Le=null}else Le=null;Ie!==null&&sT(ve,me,Ie,Le,!1),Re!==null&&Ht!==null&&sT(ve,Ht,Re,Le,!0)}}e:{if(me=Z?Rl(Z):window,Ie=me.nodeName&&me.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&me.type==="file")var Oe=tj;else if(OE(me))if(FE)Oe=ij;else{Oe=rj;var Fe=nj}else(Ie=me.nodeName)&&Ie.toLowerCase()==="input"&&(me.type==="checkbox"||me.type==="radio")&&(Oe=sj);if(Oe&&(Oe=Oe(i,Z))){VE(ve,Oe,u,ye);break e}Fe&&Fe(i,me,Z),i==="focusout"&&(Fe=me._wrapperState)&&Fe.controlled&&me.type==="number"&&Vr(me,"number",me.value)}switch(Fe=Z?Rl(Z):window,i){case"focusin":(OE(Fe)||Fe.contentEditable==="true")&&(kl=Fe,Xg=Z,Lu=null);break;case"focusout":Lu=Xg=kl=null;break;case"mousedown":Jg=!0;break;case"contextmenu":case"mouseup":case"dragend":Jg=!1,KE(ve,u,ye);break;case"selectionchange":if(lj)break;case"keydown":case"keyup":KE(ve,u,ye)}var Ue;if(Gt)e:{switch(i){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Il?jE(i,u)&&(We="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(We="onCompositionStart");We&&(oa&&u.locale!=="ko"&&(Il||We!=="onCompositionStart"?We==="onCompositionEnd"&&Il&&(Ue=Au()):(cr=ye,vl="value"in cr?cr.value:cr.textContent,Il=!0)),Fe=hf(Z,We),0<Fe.length&&(We=new Ru(We,i,null,u,ye),ve.push({event:We,listeners:Fe}),Ue?We.data=Ue:(Ue=LE(u),Ue!==null&&(We.data=Ue)))),(Ue=ur?XM(i,u):JM(i,u))&&(Z=hf(Z,"onBeforeInput"),0<Z.length&&(ye=new Ru("onBeforeInput","beforeinput",null,u,ye),ve.push({event:ye,listeners:Z}),ye.data=Ue))}nT(ve,l)})}function Fu(i,l,u){return{instance:i,listener:l,currentTarget:u}}function hf(i,l){for(var u=l+"Capture",g=[];i!==null;){var _=i,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=$t(i,u),x!=null&&g.unshift(Fu(i,x,_)),x=$t(i,l),x!=null&&g.push(Fu(i,x,_))),i=i.return}return g}function Nl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function sT(i,l,u,g,_){for(var x=l._reactName,N=[];u!==null&&u!==g;){var U=u,H=U.alternate,Z=U.stateNode;if(H!==null&&H===g)break;U.tag===5&&Z!==null&&(U=Z,_?(H=$t(u,x),H!=null&&N.unshift(Fu(u,H,U))):_||(H=$t(u,x),H!=null&&N.push(Fu(u,H,U)))),u=u.return}N.length!==0&&i.push({event:l,listeners:N})}var hj=/\r\n?/g,fj=/\u0000|\uFFFD/g;function iT(i){return(typeof i=="string"?i:""+i).replace(hj,`
`).replace(fj,"")}function ff(i,l,u){if(l=iT(l),iT(i)!==l&&u)throw Error(t(425))}function pf(){}var sy=null,iy=null;function oy(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ay=typeof setTimeout=="function"?setTimeout:void 0,pj=typeof clearTimeout=="function"?clearTimeout:void 0,oT=typeof Promise=="function"?Promise:void 0,mj=typeof queueMicrotask=="function"?queueMicrotask:typeof oT<"u"?function(i){return oT.resolve(null).then(i).catch(gj)}:ay;function gj(i){setTimeout(function(){throw i})}function ly(i,l){var u=l,g=0;do{var _=u.nextSibling;if(i.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(g===0){i.removeChild(_),qr(l);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=_}while(u);qr(l)}function Oi(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function aT(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return i;l--}else u==="/$"&&l++}i=i.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),_s="__reactFiber$"+Pl,Uu="__reactProps$"+Pl,Xs="__reactContainer$"+Pl,cy="__reactEvents$"+Pl,yj="__reactListeners$"+Pl,vj="__reactHandles$"+Pl;function aa(i){var l=i[_s];if(l)return l;for(var u=i.parentNode;u;){if(l=u[Xs]||u[_s]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(i=aT(i);i!==null;){if(u=i[_s])return u;i=aT(i)}return l}i=u,u=i.parentNode}return null}function zu(i){return i=i[_s]||i[Xs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Rl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function mf(i){return i[Uu]||null}var uy=[],Dl=-1;function Vi(i){return{current:i}}function It(i){0>Dl||(i.current=uy[Dl],uy[Dl]=null,Dl--)}function Tt(i,l){Dl++,uy[Dl]=i.current,i.current=l}var Fi={},Nn=Vi(Fi),Xn=Vi(!1),la=Fi;function Ml(i,l){var u=i.type.contextTypes;if(!u)return Fi;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in u)_[x]=l[x];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=_),_}function Jn(i){return i=i.childContextTypes,i!=null}function gf(){It(Xn),It(Nn)}function lT(i,l,u){if(Nn.current!==Fi)throw Error(t(168));Tt(Nn,l),Tt(Xn,u)}function cT(i,l,u){var g=i.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var _ in g)if(!(_ in l))throw Error(t(108,te(i)||"Unknown",_));return le({},u,g)}function yf(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Fi,la=Nn.current,Tt(Nn,i),Tt(Xn,Xn.current),!0}function uT(i,l,u){var g=i.stateNode;if(!g)throw Error(t(169));u?(i=cT(i,l,la),g.__reactInternalMemoizedMergedChildContext=i,It(Xn),It(Nn),Tt(Nn,i)):It(Xn),Tt(Xn,u)}var Js=null,vf=!1,dy=!1;function dT(i){Js===null?Js=[i]:Js.push(i)}function _j(i){vf=!0,dT(i)}function Ui(){if(!dy&&Js!==null){dy=!0;var i=0,l=at;try{var u=Js;for(at=1;i<u.length;i++){var g=u[i];do g=g(!0);while(g!==null)}Js=null,vf=!1}catch(_){throw Js!==null&&(Js=Js.slice(i+1)),fl(Zo,Ui),_}finally{at=l,dy=!1}}return null}var jl=[],Ll=0,_f=null,wf=0,Sr=[],Cr=0,ca=null,Zs=1,ei="";function ua(i,l){jl[Ll++]=wf,jl[Ll++]=_f,_f=i,wf=l}function hT(i,l,u){Sr[Cr++]=Zs,Sr[Cr++]=ei,Sr[Cr++]=ca,ca=i;var g=Zs;i=ei;var _=32-zn(g)-1;g&=~(1<<_),u+=1;var x=32-zn(l)+_;if(30<x){var N=_-_%5;x=(g&(1<<N)-1).toString(32),g>>=N,_-=N,Zs=1<<32-zn(l)+_|u<<_|g,ei=x+i}else Zs=1<<x|u<<_|g,ei=i}function hy(i){i.return!==null&&(ua(i,1),hT(i,1,0))}function fy(i){for(;i===_f;)_f=jl[--Ll],jl[Ll]=null,wf=jl[--Ll],jl[Ll]=null;for(;i===ca;)ca=Sr[--Cr],Sr[Cr]=null,ei=Sr[--Cr],Sr[Cr]=null,Zs=Sr[--Cr],Sr[Cr]=null}var dr=null,hr=null,Nt=!1,Qr=null;function fT(i,l){var u=Ar(5,null,null,0);u.elementType="DELETED",u.stateNode=l,u.return=i,l=i.deletions,l===null?(i.deletions=[u],i.flags|=16):l.push(u)}function pT(i,l){switch(i.tag){case 5:var u=i.type;return l=l.nodeType!==1||u.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,dr=i,hr=Oi(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,dr=i,hr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(u=ca!==null?{id:Zs,overflow:ei}:null,i.memoizedState={dehydrated:l,treeContext:u,retryLane:1073741824},u=Ar(18,null,null,0),u.stateNode=l,u.return=i,i.child=u,dr=i,hr=null,!0):!1;default:return!1}}function py(i){return(i.mode&1)!==0&&(i.flags&128)===0}function my(i){if(Nt){var l=hr;if(l){var u=l;if(!pT(i,l)){if(py(i))throw Error(t(418));l=Oi(u.nextSibling);var g=dr;l&&pT(i,l)?fT(g,u):(i.flags=i.flags&-4097|2,Nt=!1,dr=i)}}else{if(py(i))throw Error(t(418));i.flags=i.flags&-4097|2,Nt=!1,dr=i}}}function mT(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;dr=i}function xf(i){if(i!==dr)return!1;if(!Nt)return mT(i),Nt=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!oy(i.type,i.memoizedProps)),l&&(l=hr)){if(py(i))throw gT(),Error(t(418));for(;l;)fT(i,l),l=Oi(l.nextSibling)}if(mT(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(l===0){hr=Oi(i.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++}i=i.nextSibling}hr=null}}else hr=dr?Oi(i.stateNode.nextSibling):null;return!0}function gT(){for(var i=hr;i;)i=Oi(i.nextSibling)}function Ol(){hr=dr=null,Nt=!1}function gy(i){Qr===null?Qr=[i]:Qr.push(i)}var wj=F.ReactCurrentBatchConfig;function Bu(i,l,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var g=u.stateNode}if(!g)throw Error(t(147,i));var _=g,x=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===x?l.ref:(l=function(N){var U=_.refs;N===null?delete U[x]:U[x]=N},l._stringRef=x,l)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ef(i,l){throw i=Object.prototype.toString.call(l),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function yT(i){var l=i._init;return l(i._payload)}function vT(i){function l(Y,q){if(i){var X=Y.deletions;X===null?(Y.deletions=[q],Y.flags|=16):X.push(q)}}function u(Y,q){if(!i)return null;for(;q!==null;)l(Y,q),q=q.sibling;return null}function g(Y,q){for(Y=new Map;q!==null;)q.key!==null?Y.set(q.key,q):Y.set(q.index,q),q=q.sibling;return Y}function _(Y,q){return Y=Gi(Y,q),Y.index=0,Y.sibling=null,Y}function x(Y,q,X){return Y.index=X,i?(X=Y.alternate,X!==null?(X=X.index,X<q?(Y.flags|=2,q):X):(Y.flags|=2,q)):(Y.flags|=1048576,q)}function N(Y){return i&&Y.alternate===null&&(Y.flags|=2),Y}function U(Y,q,X,xe){return q===null||q.tag!==6?(q=av(X,Y.mode,xe),q.return=Y,q):(q=_(q,X),q.return=Y,q)}function H(Y,q,X,xe){var Oe=X.type;return Oe===P?ye(Y,q,X.props.children,xe,X.key):q!==null&&(q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ie&&yT(Oe)===q.type)?(xe=_(q,X.props),xe.ref=Bu(Y,q,X),xe.return=Y,xe):(xe=qf(X.type,X.key,X.props,null,Y.mode,xe),xe.ref=Bu(Y,q,X),xe.return=Y,xe)}function Z(Y,q,X,xe){return q===null||q.tag!==4||q.stateNode.containerInfo!==X.containerInfo||q.stateNode.implementation!==X.implementation?(q=lv(X,Y.mode,xe),q.return=Y,q):(q=_(q,X.children||[]),q.return=Y,q)}function ye(Y,q,X,xe,Oe){return q===null||q.tag!==7?(q=va(X,Y.mode,xe,Oe),q.return=Y,q):(q=_(q,X),q.return=Y,q)}function ve(Y,q,X){if(typeof q=="string"&&q!==""||typeof q=="number")return q=av(""+q,Y.mode,X),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case W:return X=qf(q.type,q.key,q.props,null,Y.mode,X),X.ref=Bu(Y,null,q),X.return=Y,X;case K:return q=lv(q,Y.mode,X),q.return=Y,q;case ie:var xe=q._init;return ve(Y,xe(q._payload),X)}if(An(q)||oe(q))return q=va(q,Y.mode,X,null),q.return=Y,q;Ef(Y,q)}return null}function me(Y,q,X,xe){var Oe=q!==null?q.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Oe!==null?null:U(Y,q,""+X,xe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case W:return X.key===Oe?H(Y,q,X,xe):null;case K:return X.key===Oe?Z(Y,q,X,xe):null;case ie:return Oe=X._init,me(Y,q,Oe(X._payload),xe)}if(An(X)||oe(X))return Oe!==null?null:ye(Y,q,X,xe,null);Ef(Y,X)}return null}function Ie(Y,q,X,xe,Oe){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return Y=Y.get(X)||null,U(q,Y,""+xe,Oe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case W:return Y=Y.get(xe.key===null?X:xe.key)||null,H(q,Y,xe,Oe);case K:return Y=Y.get(xe.key===null?X:xe.key)||null,Z(q,Y,xe,Oe);case ie:var Fe=xe._init;return Ie(Y,q,X,Fe(xe._payload),Oe)}if(An(xe)||oe(xe))return Y=Y.get(X)||null,ye(q,Y,xe,Oe,null);Ef(q,xe)}return null}function Re(Y,q,X,xe){for(var Oe=null,Fe=null,Ue=q,We=q=0,mn=null;Ue!==null&&We<X.length;We++){Ue.index>We?(mn=Ue,Ue=null):mn=Ue.sibling;var ht=me(Y,Ue,X[We],xe);if(ht===null){Ue===null&&(Ue=mn);break}i&&Ue&&ht.alternate===null&&l(Y,Ue),q=x(ht,q,We),Fe===null?Oe=ht:Fe.sibling=ht,Fe=ht,Ue=mn}if(We===X.length)return u(Y,Ue),Nt&&ua(Y,We),Oe;if(Ue===null){for(;We<X.length;We++)Ue=ve(Y,X[We],xe),Ue!==null&&(q=x(Ue,q,We),Fe===null?Oe=Ue:Fe.sibling=Ue,Fe=Ue);return Nt&&ua(Y,We),Oe}for(Ue=g(Y,Ue);We<X.length;We++)mn=Ie(Ue,Y,We,X[We],xe),mn!==null&&(i&&mn.alternate!==null&&Ue.delete(mn.key===null?We:mn.key),q=x(mn,q,We),Fe===null?Oe=mn:Fe.sibling=mn,Fe=mn);return i&&Ue.forEach(function(Qi){return l(Y,Qi)}),Nt&&ua(Y,We),Oe}function Le(Y,q,X,xe){var Oe=oe(X);if(typeof Oe!="function")throw Error(t(150));if(X=Oe.call(X),X==null)throw Error(t(151));for(var Fe=Oe=null,Ue=q,We=q=0,mn=null,ht=X.next();Ue!==null&&!ht.done;We++,ht=X.next()){Ue.index>We?(mn=Ue,Ue=null):mn=Ue.sibling;var Qi=me(Y,Ue,ht.value,xe);if(Qi===null){Ue===null&&(Ue=mn);break}i&&Ue&&Qi.alternate===null&&l(Y,Ue),q=x(Qi,q,We),Fe===null?Oe=Qi:Fe.sibling=Qi,Fe=Qi,Ue=mn}if(ht.done)return u(Y,Ue),Nt&&ua(Y,We),Oe;if(Ue===null){for(;!ht.done;We++,ht=X.next())ht=ve(Y,ht.value,xe),ht!==null&&(q=x(ht,q,We),Fe===null?Oe=ht:Fe.sibling=ht,Fe=ht);return Nt&&ua(Y,We),Oe}for(Ue=g(Y,Ue);!ht.done;We++,ht=X.next())ht=Ie(Ue,Y,We,ht.value,xe),ht!==null&&(i&&ht.alternate!==null&&Ue.delete(ht.key===null?We:ht.key),q=x(ht,q,We),Fe===null?Oe=ht:Fe.sibling=ht,Fe=ht);return i&&Ue.forEach(function(Zj){return l(Y,Zj)}),Nt&&ua(Y,We),Oe}function Ht(Y,q,X,xe){if(typeof X=="object"&&X!==null&&X.type===P&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case W:e:{for(var Oe=X.key,Fe=q;Fe!==null;){if(Fe.key===Oe){if(Oe=X.type,Oe===P){if(Fe.tag===7){u(Y,Fe.sibling),q=_(Fe,X.props.children),q.return=Y,Y=q;break e}}else if(Fe.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ie&&yT(Oe)===Fe.type){u(Y,Fe.sibling),q=_(Fe,X.props),q.ref=Bu(Y,Fe,X),q.return=Y,Y=q;break e}u(Y,Fe);break}else l(Y,Fe);Fe=Fe.sibling}X.type===P?(q=va(X.props.children,Y.mode,xe,X.key),q.return=Y,Y=q):(xe=qf(X.type,X.key,X.props,null,Y.mode,xe),xe.ref=Bu(Y,q,X),xe.return=Y,Y=xe)}return N(Y);case K:e:{for(Fe=X.key;q!==null;){if(q.key===Fe)if(q.tag===4&&q.stateNode.containerInfo===X.containerInfo&&q.stateNode.implementation===X.implementation){u(Y,q.sibling),q=_(q,X.children||[]),q.return=Y,Y=q;break e}else{u(Y,q);break}else l(Y,q);q=q.sibling}q=lv(X,Y.mode,xe),q.return=Y,Y=q}return N(Y);case ie:return Fe=X._init,Ht(Y,q,Fe(X._payload),xe)}if(An(X))return Re(Y,q,X,xe);if(oe(X))return Le(Y,q,X,xe);Ef(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,q!==null&&q.tag===6?(u(Y,q.sibling),q=_(q,X),q.return=Y,Y=q):(u(Y,q),q=av(X,Y.mode,xe),q.return=Y,Y=q),N(Y)):u(Y,q)}return Ht}var Vl=vT(!0),_T=vT(!1),Tf=Vi(null),Sf=null,Fl=null,yy=null;function vy(){yy=Fl=Sf=null}function _y(i){var l=Tf.current;It(Tf),i._currentValue=l}function wy(i,l,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),i===u)break;i=i.return}}function Ul(i,l){Sf=i,yy=Fl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(Zn=!0),i.firstContext=null)}function br(i){var l=i._currentValue;if(yy!==i)if(i={context:i,memoizedValue:l,next:null},Fl===null){if(Sf===null)throw Error(t(308));Fl=i,Sf.dependencies={lanes:0,firstContext:i}}else Fl=Fl.next=i;return l}var da=null;function xy(i){da===null?da=[i]:da.push(i)}function wT(i,l,u,g){var _=l.interleaved;return _===null?(u.next=u,xy(l)):(u.next=_.next,_.next=u),l.interleaved=u,ti(i,g)}function ti(i,l){i.lanes|=l;var u=i.alternate;for(u!==null&&(u.lanes|=l),u=i,i=i.return;i!==null;)i.childLanes|=l,u=i.alternate,u!==null&&(u.childLanes|=l),u=i,i=i.return;return u.tag===3?u.stateNode:null}var zi=!1;function Ey(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xT(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ni(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Bi(i,l,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(ut&2)!==0){var _=g.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),g.pending=l,ti(i,u)}return _=g.interleaved,_===null?(l.next=l,xy(g)):(l.next=_.next,_.next=l),g.interleaved=l,ti(i,u)}function Cf(i,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194240)!==0)){var g=l.lanes;g&=i.pendingLanes,u|=g,l.lanes=u,Pi(i,u)}}function ET(i,l){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var N={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?_=x=N:x=x.next=N,u=u.next}while(u!==null);x===null?_=x=l:x=x.next=l}else _=x=l;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:g.shared,effects:g.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=l:i.next=l,u.lastBaseUpdate=l}function bf(i,l,u,g){var _=i.updateQueue;zi=!1;var x=_.firstBaseUpdate,N=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var H=U,Z=H.next;H.next=null,N===null?x=Z:N.next=Z,N=H;var ye=i.alternate;ye!==null&&(ye=ye.updateQueue,U=ye.lastBaseUpdate,U!==N&&(U===null?ye.firstBaseUpdate=Z:U.next=Z,ye.lastBaseUpdate=H))}if(x!==null){var ve=_.baseState;N=0,ye=Z=H=null,U=x;do{var me=U.lane,Ie=U.eventTime;if((g&me)===me){ye!==null&&(ye=ye.next={eventTime:Ie,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Re=i,Le=U;switch(me=l,Ie=u,Le.tag){case 1:if(Re=Le.payload,typeof Re=="function"){ve=Re.call(Ie,ve,me);break e}ve=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Le.payload,me=typeof Re=="function"?Re.call(Ie,ve,me):Re,me==null)break e;ve=le({},ve,me);break e;case 2:zi=!0}}U.callback!==null&&U.lane!==0&&(i.flags|=64,me=_.effects,me===null?_.effects=[U]:me.push(U))}else Ie={eventTime:Ie,lane:me,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ye===null?(Z=ye=Ie,H=ve):ye=ye.next=Ie,N|=me;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;me=U,U=me.next,me.next=null,_.lastBaseUpdate=me,_.shared.pending=null}}while(!0);if(ye===null&&(H=ve),_.baseState=H,_.firstBaseUpdate=Z,_.lastBaseUpdate=ye,l=_.shared.interleaved,l!==null){_=l;do N|=_.lane,_=_.next;while(_!==l)}else x===null&&(_.shared.lanes=0);pa|=N,i.lanes=N,i.memoizedState=ve}}function TT(i,l,u){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var g=i[l],_=g.callback;if(_!==null){if(g.callback=null,g=u,typeof _!="function")throw Error(t(191,_));_.call(g)}}}var $u={},ws=Vi($u),Hu=Vi($u),Wu=Vi($u);function ha(i){if(i===$u)throw Error(t(174));return i}function Ty(i,l){switch(Tt(Wu,l),Tt(Hu,i),Tt(ws,$u),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:rn(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=rn(l,i)}It(ws),Tt(ws,l)}function zl(){It(ws),It(Hu),It(Wu)}function ST(i){ha(Wu.current);var l=ha(ws.current),u=rn(l,i.type);l!==u&&(Tt(Hu,i),Tt(ws,u))}function Sy(i){Hu.current===i&&(It(ws),It(Hu))}var Rt=Vi(0);function If(i){for(var l=i;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Cy=[];function by(){for(var i=0;i<Cy.length;i++)Cy[i]._workInProgressVersionPrimary=null;Cy.length=0}var kf=F.ReactCurrentDispatcher,Iy=F.ReactCurrentBatchConfig,fa=0,Dt=null,on=null,fn=null,Af=!1,qu=!1,Ku=0,xj=0;function Pn(){throw Error(t(321))}function ky(i,l){if(l===null)return!1;for(var u=0;u<l.length&&u<i.length;u++)if(!Gr(i[u],l[u]))return!1;return!0}function Ay(i,l,u,g,_,x){if(fa=x,Dt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,kf.current=i===null||i.memoizedState===null?Cj:bj,i=u(g,_),qu){x=0;do{if(qu=!1,Ku=0,25<=x)throw Error(t(301));x+=1,fn=on=null,l.updateQueue=null,kf.current=Ij,i=u(g,_)}while(qu)}if(kf.current=Rf,l=on!==null&&on.next!==null,fa=0,fn=on=Dt=null,Af=!1,l)throw Error(t(300));return i}function Ny(){var i=Ku!==0;return Ku=0,i}function xs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Dt.memoizedState=fn=i:fn=fn.next=i,fn}function Ir(){if(on===null){var i=Dt.alternate;i=i!==null?i.memoizedState:null}else i=on.next;var l=fn===null?Dt.memoizedState:fn.next;if(l!==null)fn=l,on=i;else{if(i===null)throw Error(t(310));on=i,i={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},fn===null?Dt.memoizedState=fn=i:fn=fn.next=i}return fn}function Gu(i,l){return typeof l=="function"?l(i):l}function Py(i){var l=Ir(),u=l.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var g=on,_=g.baseQueue,x=u.pending;if(x!==null){if(_!==null){var N=_.next;_.next=x.next,x.next=N}g.baseQueue=_=x,u.pending=null}if(_!==null){x=_.next,g=g.baseState;var U=N=null,H=null,Z=x;do{var ye=Z.lane;if((fa&ye)===ye)H!==null&&(H=H.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),g=Z.hasEagerState?Z.eagerState:i(g,Z.action);else{var ve={lane:ye,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};H===null?(U=H=ve,N=g):H=H.next=ve,Dt.lanes|=ye,pa|=ye}Z=Z.next}while(Z!==null&&Z!==x);H===null?N=g:H.next=U,Gr(g,l.memoizedState)||(Zn=!0),l.memoizedState=g,l.baseState=N,l.baseQueue=H,u.lastRenderedState=g}if(i=u.interleaved,i!==null){_=i;do x=_.lane,Dt.lanes|=x,pa|=x,_=_.next;while(_!==i)}else _===null&&(u.lanes=0);return[l.memoizedState,u.dispatch]}function Ry(i){var l=Ir(),u=l.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var g=u.dispatch,_=u.pending,x=l.memoizedState;if(_!==null){u.pending=null;var N=_=_.next;do x=i(x,N.action),N=N.next;while(N!==_);Gr(x,l.memoizedState)||(Zn=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),u.lastRenderedState=x}return[x,g]}function CT(){}function bT(i,l){var u=Dt,g=Ir(),_=l(),x=!Gr(g.memoizedState,_);if(x&&(g.memoizedState=_,Zn=!0),g=g.queue,Dy(AT.bind(null,u,g,i),[i]),g.getSnapshot!==l||x||fn!==null&&fn.memoizedState.tag&1){if(u.flags|=2048,Qu(9,kT.bind(null,u,g,_,l),void 0,null),pn===null)throw Error(t(349));(fa&30)!==0||IT(u,l,_)}return _}function IT(i,l,u){i.flags|=16384,i={getSnapshot:l,value:u},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.stores=[i]):(u=l.stores,u===null?l.stores=[i]:u.push(i))}function kT(i,l,u,g){l.value=u,l.getSnapshot=g,NT(l)&&PT(i)}function AT(i,l,u){return u(function(){NT(l)&&PT(i)})}function NT(i){var l=i.getSnapshot;i=i.value;try{var u=l();return!Gr(i,u)}catch{return!0}}function PT(i){var l=ti(i,1);l!==null&&Zr(l,i,1,-1)}function RT(i){var l=xs();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gu,lastRenderedState:i},l.queue=i,i=i.dispatch=Sj.bind(null,Dt,i),[l.memoizedState,i]}function Qu(i,l,u,g){return i={tag:i,create:l,destroy:u,deps:g,next:null},l=Dt.updateQueue,l===null?(l={lastEffect:null,stores:null},Dt.updateQueue=l,l.lastEffect=i.next=i):(u=l.lastEffect,u===null?l.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,l.lastEffect=i)),i}function DT(){return Ir().memoizedState}function Nf(i,l,u,g){var _=xs();Dt.flags|=i,_.memoizedState=Qu(1|l,u,void 0,g===void 0?null:g)}function Pf(i,l,u,g){var _=Ir();g=g===void 0?null:g;var x=void 0;if(on!==null){var N=on.memoizedState;if(x=N.destroy,g!==null&&ky(g,N.deps)){_.memoizedState=Qu(l,u,x,g);return}}Dt.flags|=i,_.memoizedState=Qu(1|l,u,x,g)}function MT(i,l){return Nf(8390656,8,i,l)}function Dy(i,l){return Pf(2048,8,i,l)}function jT(i,l){return Pf(4,2,i,l)}function LT(i,l){return Pf(4,4,i,l)}function OT(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function VT(i,l,u){return u=u!=null?u.concat([i]):null,Pf(4,4,OT.bind(null,l,i),u)}function My(){}function FT(i,l){var u=Ir();l=l===void 0?null:l;var g=u.memoizedState;return g!==null&&l!==null&&ky(l,g[1])?g[0]:(u.memoizedState=[i,l],i)}function UT(i,l){var u=Ir();l=l===void 0?null:l;var g=u.memoizedState;return g!==null&&l!==null&&ky(l,g[1])?g[0]:(i=i(),u.memoizedState=[i,l],i)}function zT(i,l,u){return(fa&21)===0?(i.baseState&&(i.baseState=!1,Zn=!0),i.memoizedState=u):(Gr(u,l)||(u=na(),Dt.lanes|=u,pa|=u,i.baseState=!0),l)}function Ej(i,l){var u=at;at=u!==0&&4>u?u:4,i(!0);var g=Iy.transition;Iy.transition={};try{i(!1),l()}finally{at=u,Iy.transition=g}}function BT(){return Ir().memoizedState}function Tj(i,l,u){var g=qi(i);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},$T(i))HT(l,u);else if(u=wT(i,l,u,g),u!==null){var _=Hn();Zr(u,i,g,_),WT(u,l,g)}}function Sj(i,l,u){var g=qi(i),_={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if($T(i))HT(l,_);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var N=l.lastRenderedState,U=x(N,u);if(_.hasEagerState=!0,_.eagerState=U,Gr(U,N)){var H=l.interleaved;H===null?(_.next=_,xy(l)):(_.next=H.next,H.next=_),l.interleaved=_;return}}catch{}finally{}u=wT(i,l,_,g),u!==null&&(_=Hn(),Zr(u,i,g,_),WT(u,l,g))}}function $T(i){var l=i.alternate;return i===Dt||l!==null&&l===Dt}function HT(i,l){qu=Af=!0;var u=i.pending;u===null?l.next=l:(l.next=u.next,u.next=l),i.pending=l}function WT(i,l,u){if((u&4194240)!==0){var g=l.lanes;g&=i.pendingLanes,u|=g,l.lanes=u,Pi(i,u)}}var Rf={readContext:br,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},Cj={readContext:br,useCallback:function(i,l){return xs().memoizedState=[i,l===void 0?null:l],i},useContext:br,useEffect:MT,useImperativeHandle:function(i,l,u){return u=u!=null?u.concat([i]):null,Nf(4194308,4,OT.bind(null,l,i),u)},useLayoutEffect:function(i,l){return Nf(4194308,4,i,l)},useInsertionEffect:function(i,l){return Nf(4,2,i,l)},useMemo:function(i,l){var u=xs();return l=l===void 0?null:l,i=i(),u.memoizedState=[i,l],i},useReducer:function(i,l,u){var g=xs();return l=u!==void 0?u(l):l,g.memoizedState=g.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},g.queue=i,i=i.dispatch=Tj.bind(null,Dt,i),[g.memoizedState,i]},useRef:function(i){var l=xs();return i={current:i},l.memoizedState=i},useState:RT,useDebugValue:My,useDeferredValue:function(i){return xs().memoizedState=i},useTransition:function(){var i=RT(!1),l=i[0];return i=Ej.bind(null,i[1]),xs().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,u){var g=Dt,_=xs();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=l(),pn===null)throw Error(t(349));(fa&30)!==0||IT(g,l,u)}_.memoizedState=u;var x={value:u,getSnapshot:l};return _.queue=x,MT(AT.bind(null,g,x,i),[i]),g.flags|=2048,Qu(9,kT.bind(null,g,x,u,l),void 0,null),u},useId:function(){var i=xs(),l=pn.identifierPrefix;if(Nt){var u=ei,g=Zs;u=(g&~(1<<32-zn(g)-1)).toString(32)+u,l=":"+l+"R"+u,u=Ku++,0<u&&(l+="H"+u.toString(32)),l+=":"}else u=xj++,l=":"+l+"r"+u.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},bj={readContext:br,useCallback:FT,useContext:br,useEffect:Dy,useImperativeHandle:VT,useInsertionEffect:jT,useLayoutEffect:LT,useMemo:UT,useReducer:Py,useRef:DT,useState:function(){return Py(Gu)},useDebugValue:My,useDeferredValue:function(i){var l=Ir();return zT(l,on.memoizedState,i)},useTransition:function(){var i=Py(Gu)[0],l=Ir().memoizedState;return[i,l]},useMutableSource:CT,useSyncExternalStore:bT,useId:BT,unstable_isNewReconciler:!1},Ij={readContext:br,useCallback:FT,useContext:br,useEffect:Dy,useImperativeHandle:VT,useInsertionEffect:jT,useLayoutEffect:LT,useMemo:UT,useReducer:Ry,useRef:DT,useState:function(){return Ry(Gu)},useDebugValue:My,useDeferredValue:function(i){var l=Ir();return on===null?l.memoizedState=i:zT(l,on.memoizedState,i)},useTransition:function(){var i=Ry(Gu)[0],l=Ir().memoizedState;return[i,l]},useMutableSource:CT,useSyncExternalStore:bT,useId:BT,unstable_isNewReconciler:!1};function Yr(i,l){if(i&&i.defaultProps){l=le({},l),i=i.defaultProps;for(var u in i)l[u]===void 0&&(l[u]=i[u]);return l}return l}function jy(i,l,u,g){l=i.memoizedState,u=u(g,l),u=u==null?l:le({},l,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Df={isMounted:function(i){return(i=i._reactInternals)?zr(i)===i:!1},enqueueSetState:function(i,l,u){i=i._reactInternals;var g=Hn(),_=qi(i),x=ni(g,_);x.payload=l,u!=null&&(x.callback=u),l=Bi(i,x,_),l!==null&&(Zr(l,i,_,g),Cf(l,i,_))},enqueueReplaceState:function(i,l,u){i=i._reactInternals;var g=Hn(),_=qi(i),x=ni(g,_);x.tag=1,x.payload=l,u!=null&&(x.callback=u),l=Bi(i,x,_),l!==null&&(Zr(l,i,_,g),Cf(l,i,_))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var u=Hn(),g=qi(i),_=ni(u,g);_.tag=2,l!=null&&(_.callback=l),l=Bi(i,_,g),l!==null&&(Zr(l,i,g,u),Cf(l,i,g))}};function qT(i,l,u,g,_,x,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,x,N):l.prototype&&l.prototype.isPureReactComponent?!ju(u,g)||!ju(_,x):!0}function KT(i,l,u){var g=!1,_=Fi,x=l.contextType;return typeof x=="object"&&x!==null?x=br(x):(_=Jn(l)?la:Nn.current,g=l.contextTypes,x=(g=g!=null)?Ml(i,_):Fi),l=new l(u,x),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Df,i.stateNode=l,l._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_,i.__reactInternalMemoizedMaskedChildContext=x),l}function GT(i,l,u,g){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,g),l.state!==i&&Df.enqueueReplaceState(l,l.state,null)}function Ly(i,l,u,g){var _=i.stateNode;_.props=u,_.state=i.memoizedState,_.refs={},Ey(i);var x=l.contextType;typeof x=="object"&&x!==null?_.context=br(x):(x=Jn(l)?la:Nn.current,_.context=Ml(i,x)),_.state=i.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(jy(i,l,x,u),_.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(l=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),l!==_.state&&Df.enqueueReplaceState(_,_.state,null),bf(i,u,_,g),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308)}function Bl(i,l){try{var u="",g=l;do u+=fe(g),g=g.return;while(g);var _=u}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:l,stack:_,digest:null}}function Oy(i,l,u){return{value:i,source:null,stack:u??null,digest:l??null}}function Vy(i,l){try{console.error(l.value)}catch(u){setTimeout(function(){throw u})}}var kj=typeof WeakMap=="function"?WeakMap:Map;function QT(i,l,u){u=ni(-1,u),u.tag=3,u.payload={element:null};var g=l.value;return u.callback=function(){Uf||(Uf=!0,Zy=g),Vy(i,l)},u}function YT(i,l,u){u=ni(-1,u),u.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var _=l.value;u.payload=function(){return g(_)},u.callback=function(){Vy(i,l)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){Vy(i,l),typeof g!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})}),u}function XT(i,l,u){var g=i.pingCache;if(g===null){g=i.pingCache=new kj;var _=new Set;g.set(l,_)}else _=g.get(l),_===void 0&&(_=new Set,g.set(l,_));_.has(u)||(_.add(u),i=Bj.bind(null,i,l,u),l.then(i,i))}function JT(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function ZT(i,l,u,g,_){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(l=ni(-1,1),l.tag=2,Bi(u,l,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=_,i)}var Aj=F.ReactCurrentOwner,Zn=!1;function $n(i,l,u,g){l.child=i===null?_T(l,null,u,g):Vl(l,i.child,u,g)}function e1(i,l,u,g,_){u=u.render;var x=l.ref;return Ul(l,_),g=Ay(i,l,u,g,x,_),u=Ny(),i!==null&&!Zn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~_,ri(i,l,_)):(Nt&&u&&hy(l),l.flags|=1,$n(i,l,g,_),l.child)}function t1(i,l,u,g,_){if(i===null){var x=u.type;return typeof x=="function"&&!ov(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(l.tag=15,l.type=x,n1(i,l,x,g,_)):(i=qf(u.type,null,g,l,l.mode,_),i.ref=l.ref,i.return=l,l.child=i)}if(x=i.child,(i.lanes&_)===0){var N=x.memoizedProps;if(u=u.compare,u=u!==null?u:ju,u(N,g)&&i.ref===l.ref)return ri(i,l,_)}return l.flags|=1,i=Gi(x,g),i.ref=l.ref,i.return=l,l.child=i}function n1(i,l,u,g,_){if(i!==null){var x=i.memoizedProps;if(ju(x,g)&&i.ref===l.ref)if(Zn=!1,l.pendingProps=g=x,(i.lanes&_)!==0)(i.flags&131072)!==0&&(Zn=!0);else return l.lanes=i.lanes,ri(i,l,_)}return Fy(i,l,u,g,_)}function r1(i,l,u){var g=l.pendingProps,_=g.children,x=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Hl,fr),fr|=u;else{if((u&1073741824)===0)return i=x!==null?x.baseLanes|u:u,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Tt(Hl,fr),fr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:u,Tt(Hl,fr),fr|=g}else x!==null?(g=x.baseLanes|u,l.memoizedState=null):g=u,Tt(Hl,fr),fr|=g;return $n(i,l,_,u),l.child}function s1(i,l){var u=l.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(l.flags|=512,l.flags|=2097152)}function Fy(i,l,u,g,_){var x=Jn(u)?la:Nn.current;return x=Ml(l,x),Ul(l,_),u=Ay(i,l,u,g,x,_),g=Ny(),i!==null&&!Zn?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~_,ri(i,l,_)):(Nt&&g&&hy(l),l.flags|=1,$n(i,l,u,_),l.child)}function i1(i,l,u,g,_){if(Jn(u)){var x=!0;yf(l)}else x=!1;if(Ul(l,_),l.stateNode===null)jf(i,l),KT(l,u,g),Ly(l,u,g,_),g=!0;else if(i===null){var N=l.stateNode,U=l.memoizedProps;N.props=U;var H=N.context,Z=u.contextType;typeof Z=="object"&&Z!==null?Z=br(Z):(Z=Jn(u)?la:Nn.current,Z=Ml(l,Z));var ye=u.getDerivedStateFromProps,ve=typeof ye=="function"||typeof N.getSnapshotBeforeUpdate=="function";ve||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==g||H!==Z)&&GT(l,N,g,Z),zi=!1;var me=l.memoizedState;N.state=me,bf(l,g,N,_),H=l.memoizedState,U!==g||me!==H||Xn.current||zi?(typeof ye=="function"&&(jy(l,u,ye,g),H=l.memoizedState),(U=zi||qT(l,u,U,g,me,H,Z))?(ve||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(l.flags|=4194308)):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=H),N.props=g,N.state=H,N.context=Z,g=U):(typeof N.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{N=l.stateNode,xT(i,l),U=l.memoizedProps,Z=l.type===l.elementType?U:Yr(l.type,U),N.props=Z,ve=l.pendingProps,me=N.context,H=u.contextType,typeof H=="object"&&H!==null?H=br(H):(H=Jn(u)?la:Nn.current,H=Ml(l,H));var Ie=u.getDerivedStateFromProps;(ye=typeof Ie=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==ve||me!==H)&&GT(l,N,g,H),zi=!1,me=l.memoizedState,N.state=me,bf(l,g,N,_);var Re=l.memoizedState;U!==ve||me!==Re||Xn.current||zi?(typeof Ie=="function"&&(jy(l,u,Ie,g),Re=l.memoizedState),(Z=zi||qT(l,u,Z,g,me,Re,H)||!1)?(ye||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,Re,H),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,Re,H)),typeof N.componentDidUpdate=="function"&&(l.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof N.componentDidUpdate!="function"||U===i.memoizedProps&&me===i.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&me===i.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Re),N.props=g,N.state=Re,N.context=H,g=Z):(typeof N.componentDidUpdate!="function"||U===i.memoizedProps&&me===i.memoizedState||(l.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===i.memoizedProps&&me===i.memoizedState||(l.flags|=1024),g=!1)}return Uy(i,l,u,g,x,_)}function Uy(i,l,u,g,_,x){s1(i,l);var N=(l.flags&128)!==0;if(!g&&!N)return _&&uT(l,u,!1),ri(i,l,x);g=l.stateNode,Aj.current=l;var U=N&&typeof u.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,i!==null&&N?(l.child=Vl(l,i.child,null,x),l.child=Vl(l,null,U,x)):$n(i,l,U,x),l.memoizedState=g.state,_&&uT(l,u,!0),l.child}function o1(i){var l=i.stateNode;l.pendingContext?lT(i,l.pendingContext,l.pendingContext!==l.context):l.context&&lT(i,l.context,!1),Ty(i,l.containerInfo)}function a1(i,l,u,g,_){return Ol(),gy(_),l.flags|=256,$n(i,l,u,g),l.child}var zy={dehydrated:null,treeContext:null,retryLane:0};function By(i){return{baseLanes:i,cachePool:null,transitions:null}}function l1(i,l,u){var g=l.pendingProps,_=Rt.current,x=!1,N=(l.flags&128)!==0,U;if((U=N)||(U=i!==null&&i.memoizedState===null?!1:(_&2)!==0),U?(x=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(_|=1),Tt(Rt,_&1),i===null)return my(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(N=g.children,i=g.fallback,x?(g=l.mode,x=l.child,N={mode:"hidden",children:N},(g&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=N):x=Kf(N,g,0,null),i=va(i,g,u,null),x.return=l,i.return=l,x.sibling=i,l.child=x,l.child.memoizedState=By(u),l.memoizedState=zy,i):$y(l,N));if(_=i.memoizedState,_!==null&&(U=_.dehydrated,U!==null))return Nj(i,l,N,g,U,_,u);if(x){x=g.fallback,N=l.mode,_=i.child,U=_.sibling;var H={mode:"hidden",children:g.children};return(N&1)===0&&l.child!==_?(g=l.child,g.childLanes=0,g.pendingProps=H,l.deletions=null):(g=Gi(_,H),g.subtreeFlags=_.subtreeFlags&14680064),U!==null?x=Gi(U,x):(x=va(x,N,u,null),x.flags|=2),x.return=l,g.return=l,g.sibling=x,l.child=g,g=x,x=l.child,N=i.child.memoizedState,N=N===null?By(u):{baseLanes:N.baseLanes|u,cachePool:null,transitions:N.transitions},x.memoizedState=N,x.childLanes=i.childLanes&~u,l.memoizedState=zy,g}return x=i.child,i=x.sibling,g=Gi(x,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=u),g.return=l,g.sibling=null,i!==null&&(u=l.deletions,u===null?(l.deletions=[i],l.flags|=16):u.push(i)),l.child=g,l.memoizedState=null,g}function $y(i,l){return l=Kf({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function Mf(i,l,u,g){return g!==null&&gy(g),Vl(l,i.child,null,u),i=$y(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Nj(i,l,u,g,_,x,N){if(u)return l.flags&256?(l.flags&=-257,g=Oy(Error(t(422))),Mf(i,l,N,g)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(x=g.fallback,_=l.mode,g=Kf({mode:"visible",children:g.children},_,0,null),x=va(x,_,N,null),x.flags|=2,g.return=l,x.return=l,g.sibling=x,l.child=g,(l.mode&1)!==0&&Vl(l,i.child,null,N),l.child.memoizedState=By(N),l.memoizedState=zy,x);if((l.mode&1)===0)return Mf(i,l,N,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var U=g.dgst;return g=U,x=Error(t(419)),g=Oy(x,g,void 0),Mf(i,l,N,g)}if(U=(N&i.childLanes)!==0,Zn||U){if(g=pn,g!==null){switch(N&-N){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|N))!==0?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,ti(i,_),Zr(g,i,_,-1))}return iv(),g=Oy(Error(t(421))),Mf(i,l,N,g)}return _.data==="$?"?(l.flags|=128,l.child=i.child,l=$j.bind(null,i),_._reactRetry=l,null):(i=x.treeContext,hr=Oi(_.nextSibling),dr=l,Nt=!0,Qr=null,i!==null&&(Sr[Cr++]=Zs,Sr[Cr++]=ei,Sr[Cr++]=ca,Zs=i.id,ei=i.overflow,ca=l),l=$y(l,g.children),l.flags|=4096,l)}function c1(i,l,u){i.lanes|=l;var g=i.alternate;g!==null&&(g.lanes|=l),wy(i.return,l,u)}function Hy(i,l,u,g,_){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=u,x.tailMode=_)}function u1(i,l,u){var g=l.pendingProps,_=g.revealOrder,x=g.tail;if($n(i,l,g.children,u),g=Rt.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&c1(i,u,l);else if(i.tag===19)c1(i,u,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(Tt(Rt,g),(l.mode&1)===0)l.memoizedState=null;else switch(_){case"forwards":for(u=l.child,_=null;u!==null;)i=u.alternate,i!==null&&If(i)===null&&(_=u),u=u.sibling;u=_,u===null?(_=l.child,l.child=null):(_=u.sibling,u.sibling=null),Hy(l,!1,_,u,x);break;case"backwards":for(u=null,_=l.child,l.child=null;_!==null;){if(i=_.alternate,i!==null&&If(i)===null){l.child=_;break}i=_.sibling,_.sibling=u,u=_,_=i}Hy(l,!0,u,null,x);break;case"together":Hy(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function jf(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function ri(i,l,u){if(i!==null&&(l.dependencies=i.dependencies),pa|=l.lanes,(u&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(t(153));if(l.child!==null){for(i=l.child,u=Gi(i,i.pendingProps),l.child=u,u.return=l;i.sibling!==null;)i=i.sibling,u=u.sibling=Gi(i,i.pendingProps),u.return=l;u.sibling=null}return l.child}function Pj(i,l,u){switch(l.tag){case 3:o1(l),Ol();break;case 5:ST(l);break;case 1:Jn(l.type)&&yf(l);break;case 4:Ty(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,_=l.memoizedProps.value;Tt(Tf,g._currentValue),g._currentValue=_;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Tt(Rt,Rt.current&1),l.flags|=128,null):(u&l.child.childLanes)!==0?l1(i,l,u):(Tt(Rt,Rt.current&1),i=ri(i,l,u),i!==null?i.sibling:null);Tt(Rt,Rt.current&1);break;case 19:if(g=(u&l.childLanes)!==0,(i.flags&128)!==0){if(g)return u1(i,l,u);l.flags|=128}if(_=l.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Tt(Rt,Rt.current),g)break;return null;case 22:case 23:return l.lanes=0,r1(i,l,u)}return ri(i,l,u)}var d1,Wy,h1,f1;d1=function(i,l){for(var u=l.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wy=function(){},h1=function(i,l,u,g){var _=i.memoizedProps;if(_!==g){i=l.stateNode,ha(ws.current);var x=null;switch(u){case"input":_=J(i,_),g=J(i,g),x=[];break;case"select":_=le({},_,{value:void 0}),g=le({},g,{value:void 0}),x=[];break;case"textarea":_=uu(i,_),g=uu(i,g),x=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=pf)}gu(u,g);var N;u=null;for(Z in _)if(!g.hasOwnProperty(Z)&&_.hasOwnProperty(Z)&&_[Z]!=null)if(Z==="style"){var U=_[Z];for(N in U)U.hasOwnProperty(N)&&(u||(u={}),u[N]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(s.hasOwnProperty(Z)?x||(x=[]):(x=x||[]).push(Z,null));for(Z in g){var H=g[Z];if(U=_?.[Z],g.hasOwnProperty(Z)&&H!==U&&(H!=null||U!=null))if(Z==="style")if(U){for(N in U)!U.hasOwnProperty(N)||H&&H.hasOwnProperty(N)||(u||(u={}),u[N]="");for(N in H)H.hasOwnProperty(N)&&U[N]!==H[N]&&(u||(u={}),u[N]=H[N])}else u||(x||(x=[]),x.push(Z,u)),u=H;else Z==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,U=U?U.__html:void 0,H!=null&&U!==H&&(x=x||[]).push(Z,H)):Z==="children"?typeof H!="string"&&typeof H!="number"||(x=x||[]).push(Z,""+H):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(s.hasOwnProperty(Z)?(H!=null&&Z==="onScroll"&&bt("scroll",i),x||U===H||(x=[])):(x=x||[]).push(Z,H))}u&&(x=x||[]).push("style",u);var Z=x;(l.updateQueue=Z)&&(l.flags|=4)}},f1=function(i,l,u,g){u!==g&&(l.flags|=4)};function Yu(i,l){if(!Nt)switch(i.tailMode){case"hidden":l=i.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function Rn(i){var l=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(l)for(var _=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=g,i.childLanes=u,l}function Rj(i,l,u){var g=l.pendingProps;switch(fy(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(l),null;case 1:return Jn(l.type)&&gf(),Rn(l),null;case 3:return g=l.stateNode,zl(),It(Xn),It(Nn),by(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(xf(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Qr!==null&&(nv(Qr),Qr=null))),Wy(i,l),Rn(l),null;case 5:Sy(l);var _=ha(Wu.current);if(u=l.type,i!==null&&l.stateNode!=null)h1(i,l,u,g,_),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Rn(l),null}if(i=ha(ws.current),xf(l)){g=l.stateNode,u=l.type;var x=l.memoizedProps;switch(g[_s]=l,g[Uu]=x,i=(l.mode&1)!==0,u){case"dialog":bt("cancel",g),bt("close",g);break;case"iframe":case"object":case"embed":bt("load",g);break;case"video":case"audio":for(_=0;_<Ou.length;_++)bt(Ou[_],g);break;case"source":bt("error",g);break;case"img":case"image":case"link":bt("error",g),bt("load",g);break;case"details":bt("toggle",g);break;case"input":Ae(g,x),bt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!x.multiple},bt("invalid",g);break;case"textarea":sl(g,x),bt("invalid",g)}gu(u,x),_=null;for(var N in x)if(x.hasOwnProperty(N)){var U=x[N];N==="children"?typeof U=="string"?g.textContent!==U&&(x.suppressHydrationWarning!==!0&&ff(g.textContent,U,i),_=["children",U]):typeof U=="number"&&g.textContent!==""+U&&(x.suppressHydrationWarning!==!0&&ff(g.textContent,U,i),_=["children",""+U]):s.hasOwnProperty(N)&&U!=null&&N==="onScroll"&&bt("scroll",g)}switch(u){case"input":Ce(g),pt(g,x,!0);break;case"textarea":Ce(g),du(g);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(g.onclick=pf)}g=_,l.updateQueue=g,g!==null&&(l.flags|=4)}else{N=_.nodeType===9?_:_.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=nn(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=N.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=N.createElement(u,{is:g.is}):(i=N.createElement(u),u==="select"&&(N=i,g.multiple?N.multiple=!0:g.size&&(N.size=g.size))):i=N.createElementNS(i,u),i[_s]=l,i[Uu]=g,d1(i,l,!1,!1),l.stateNode=i;e:{switch(N=yu(u,g),u){case"dialog":bt("cancel",i),bt("close",i),_=g;break;case"iframe":case"object":case"embed":bt("load",i),_=g;break;case"video":case"audio":for(_=0;_<Ou.length;_++)bt(Ou[_],i);_=g;break;case"source":bt("error",i),_=g;break;case"img":case"image":case"link":bt("error",i),bt("load",i),_=g;break;case"details":bt("toggle",i),_=g;break;case"input":Ae(i,g),_=J(i,g),bt("invalid",i);break;case"option":_=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},_=le({},g,{value:void 0}),bt("invalid",i);break;case"textarea":sl(i,g),_=uu(i,g),bt("invalid",i);break;default:_=g}gu(u,_),U=_;for(x in U)if(U.hasOwnProperty(x)){var H=U[x];x==="style"?pu(i,H):x==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&hu(i,H)):x==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&bi(i,H):typeof H=="number"&&bi(i,""+H):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?H!=null&&x==="onScroll"&&bt("scroll",i):H!=null&&M(i,x,H,N))}switch(u){case"input":Ce(i),pt(i,g,!1);break;case"textarea":Ce(i),du(i);break;case"option":g.value!=null&&i.setAttribute("value",""+he(g.value));break;case"select":i.multiple=!!g.multiple,x=g.value,x!=null?Gn(i,!!g.multiple,x,!1):g.defaultValue!=null&&Gn(i,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(i.onclick=pf)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Rn(l),null;case 6:if(i&&l.stateNode!=null)f1(i,l,i.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(u=ha(Wu.current),ha(ws.current),xf(l)){if(g=l.stateNode,u=l.memoizedProps,g[_s]=l,(x=g.nodeValue!==u)&&(i=dr,i!==null))switch(i.tag){case 3:ff(g.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&ff(g.nodeValue,u,(i.mode&1)!==0)}x&&(l.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[_s]=l,l.stateNode=g}return Rn(l),null;case 13:if(It(Rt),g=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Nt&&hr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)gT(),Ol(),l.flags|=98560,x=!1;else if(x=xf(l),g!==null&&g.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[_s]=l}else Ol(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Rn(l),x=!1}else Qr!==null&&(nv(Qr),Qr=null),x=!0;if(!x)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=u,l):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(Rt.current&1)!==0?an===0&&(an=3):iv())),l.updateQueue!==null&&(l.flags|=4),Rn(l),null);case 4:return zl(),Wy(i,l),i===null&&Vu(l.stateNode.containerInfo),Rn(l),null;case 10:return _y(l.type._context),Rn(l),null;case 17:return Jn(l.type)&&gf(),Rn(l),null;case 19:if(It(Rt),x=l.memoizedState,x===null)return Rn(l),null;if(g=(l.flags&128)!==0,N=x.rendering,N===null)if(g)Yu(x,!1);else{if(an!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(N=If(i),N!==null){for(l.flags|=128,Yu(x,!1),g=N.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=u,u=l.child;u!==null;)x=u,i=g,x.flags&=14680066,N=x.alternate,N===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=N.childLanes,x.lanes=N.lanes,x.child=N.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=N.memoizedProps,x.memoizedState=N.memoizedState,x.updateQueue=N.updateQueue,x.type=N.type,i=N.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Tt(Rt,Rt.current&1|2),l.child}i=i.sibling}x.tail!==null&&Et()>Wl&&(l.flags|=128,g=!0,Yu(x,!1),l.lanes=4194304)}else{if(!g)if(i=If(N),i!==null){if(l.flags|=128,g=!0,u=i.updateQueue,u!==null&&(l.updateQueue=u,l.flags|=4),Yu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!N.alternate&&!Nt)return Rn(l),null}else 2*Et()-x.renderingStartTime>Wl&&u!==1073741824&&(l.flags|=128,g=!0,Yu(x,!1),l.lanes=4194304);x.isBackwards?(N.sibling=l.child,l.child=N):(u=x.last,u!==null?u.sibling=N:l.child=N,x.last=N)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Et(),l.sibling=null,u=Rt.current,Tt(Rt,g?u&1|2:u&1),l):(Rn(l),null);case 22:case 23:return sv(),g=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(fr&1073741824)!==0&&(Rn(l),l.subtreeFlags&6&&(l.flags|=8192)):Rn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function Dj(i,l){switch(fy(l),l.tag){case 1:return Jn(l.type)&&gf(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return zl(),It(Xn),It(Nn),by(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return Sy(l),null;case 13:if(It(Rt),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Ol()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return It(Rt),null;case 4:return zl(),null;case 10:return _y(l.type._context),null;case 22:case 23:return sv(),null;case 24:return null;default:return null}}var Lf=!1,Dn=!1,Mj=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function $l(i,l){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){Vt(i,l,g)}else u.current=null}function qy(i,l,u){try{u()}catch(g){Vt(i,l,g)}}var p1=!1;function jj(i,l){if(sy=Mi,i=qE(),Yg(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var N=0,U=-1,H=-1,Z=0,ye=0,ve=i,me=null;t:for(;;){for(var Ie;ve!==u||_!==0&&ve.nodeType!==3||(U=N+_),ve!==x||g!==0&&ve.nodeType!==3||(H=N+g),ve.nodeType===3&&(N+=ve.nodeValue.length),(Ie=ve.firstChild)!==null;)me=ve,ve=Ie;for(;;){if(ve===i)break t;if(me===u&&++Z===_&&(U=N),me===x&&++ye===g&&(H=N),(Ie=ve.nextSibling)!==null)break;ve=me,me=ve.parentNode}ve=Ie}u=U===-1||H===-1?null:{start:U,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(iy={focusedElem:i,selectionRange:u},Mi=!1,Ne=l;Ne!==null;)if(l=Ne,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,Ne=i;else for(;Ne!==null;){l=Ne;try{var Re=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Le=Re.memoizedProps,Ht=Re.memoizedState,Y=l.stateNode,q=Y.getSnapshotBeforeUpdate(l.elementType===l.type?Le:Yr(l.type,Le),Ht);Y.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var X=l.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(xe){Vt(l,l.return,xe)}if(i=l.sibling,i!==null){i.return=l.return,Ne=i;break}Ne=l.return}return Re=p1,p1=!1,Re}function Xu(i,l,u){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&i)===i){var x=_.destroy;_.destroy=void 0,x!==void 0&&qy(l,u,x)}_=_.next}while(_!==g)}}function Of(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&i)===i){var g=u.create;u.destroy=g()}u=u.next}while(u!==l)}}function Ky(i){var l=i.ref;if(l!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof l=="function"?l(i):l.current=i}}function m1(i){var l=i.alternate;l!==null&&(i.alternate=null,m1(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[_s],delete l[Uu],delete l[cy],delete l[yj],delete l[vj])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function g1(i){return i.tag===5||i.tag===3||i.tag===4}function y1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||g1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gy(i,l,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?u.nodeType===8?u.parentNode.insertBefore(i,l):u.insertBefore(i,l):(u.nodeType===8?(l=u.parentNode,l.insertBefore(i,u)):(l=u,l.appendChild(i)),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=pf));else if(g!==4&&(i=i.child,i!==null))for(Gy(i,l,u),i=i.sibling;i!==null;)Gy(i,l,u),i=i.sibling}function Qy(i,l,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,l?u.insertBefore(i,l):u.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(Qy(i,l,u),i=i.sibling;i!==null;)Qy(i,l,u),i=i.sibling}var Sn=null,Xr=!1;function $i(i,l,u){for(u=u.child;u!==null;)v1(i,l,u),u=u.sibling}function v1(i,l,u){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(ea,u)}catch{}switch(u.tag){case 5:Dn||$l(u,l);case 6:var g=Sn,_=Xr;Sn=null,$i(i,l,u),Sn=g,Xr=_,Sn!==null&&(Xr?(i=Sn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Sn.removeChild(u.stateNode));break;case 18:Sn!==null&&(Xr?(i=Sn,u=u.stateNode,i.nodeType===8?ly(i.parentNode,u):i.nodeType===1&&ly(i,u),qr(i)):ly(Sn,u.stateNode));break;case 4:g=Sn,_=Xr,Sn=u.stateNode.containerInfo,Xr=!0,$i(i,l,u),Sn=g,Xr=_;break;case 0:case 11:case 14:case 15:if(!Dn&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var x=_,N=x.destroy;x=x.tag,N!==void 0&&((x&2)!==0||(x&4)!==0)&&qy(u,l,N),_=_.next}while(_!==g)}$i(i,l,u);break;case 1:if(!Dn&&($l(u,l),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(U){Vt(u,l,U)}$i(i,l,u);break;case 21:$i(i,l,u);break;case 22:u.mode&1?(Dn=(g=Dn)||u.memoizedState!==null,$i(i,l,u),Dn=g):$i(i,l,u);break;default:$i(i,l,u)}}function _1(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Mj),l.forEach(function(g){var _=Hj.bind(null,i,g);u.has(g)||(u.add(g),g.then(_,_))})}}function Jr(i,l){var u=l.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g];try{var x=i,N=l,U=N;e:for(;U!==null;){switch(U.tag){case 5:Sn=U.stateNode,Xr=!1;break e;case 3:Sn=U.stateNode.containerInfo,Xr=!0;break e;case 4:Sn=U.stateNode.containerInfo,Xr=!0;break e}U=U.return}if(Sn===null)throw Error(t(160));v1(x,N,_),Sn=null,Xr=!1;var H=_.alternate;H!==null&&(H.return=null),_.return=null}catch(Z){Vt(_,l,Z)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)w1(l,i),l=l.sibling}function w1(i,l){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Jr(l,i),Es(i),g&4){try{Xu(3,i,i.return),Of(3,i)}catch(Le){Vt(i,i.return,Le)}try{Xu(5,i,i.return)}catch(Le){Vt(i,i.return,Le)}}break;case 1:Jr(l,i),Es(i),g&512&&u!==null&&$l(u,u.return);break;case 5:if(Jr(l,i),Es(i),g&512&&u!==null&&$l(u,u.return),i.flags&32){var _=i.stateNode;try{bi(_,"")}catch(Le){Vt(i,i.return,Le)}}if(g&4&&(_=i.stateNode,_!=null)){var x=i.memoizedProps,N=u!==null?u.memoizedProps:x,U=i.type,H=i.updateQueue;if(i.updateQueue=null,H!==null)try{U==="input"&&x.type==="radio"&&x.name!=null&&tt(_,x),yu(U,N);var Z=yu(U,x);for(N=0;N<H.length;N+=2){var ye=H[N],ve=H[N+1];ye==="style"?pu(_,ve):ye==="dangerouslySetInnerHTML"?hu(_,ve):ye==="children"?bi(_,ve):M(_,ye,ve,Z)}switch(U){case"input":dt(_,x);break;case"textarea":il(_,x);break;case"select":var me=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var Ie=x.value;Ie!=null?Gn(_,!!x.multiple,Ie,!1):me!==!!x.multiple&&(x.defaultValue!=null?Gn(_,!!x.multiple,x.defaultValue,!0):Gn(_,!!x.multiple,x.multiple?[]:"",!1))}_[Uu]=x}catch(Le){Vt(i,i.return,Le)}}break;case 6:if(Jr(l,i),Es(i),g&4){if(i.stateNode===null)throw Error(t(162));_=i.stateNode,x=i.memoizedProps;try{_.nodeValue=x}catch(Le){Vt(i,i.return,Le)}}break;case 3:if(Jr(l,i),Es(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{qr(l.containerInfo)}catch(Le){Vt(i,i.return,Le)}break;case 4:Jr(l,i),Es(i);break;case 13:Jr(l,i),Es(i),_=i.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(Jy=Et())),g&4&&_1(i);break;case 22:if(ye=u!==null&&u.memoizedState!==null,i.mode&1?(Dn=(Z=Dn)||ye,Jr(l,i),Dn=Z):Jr(l,i),Es(i),g&8192){if(Z=i.memoizedState!==null,(i.stateNode.isHidden=Z)&&!ye&&(i.mode&1)!==0)for(Ne=i,ye=i.child;ye!==null;){for(ve=Ne=ye;Ne!==null;){switch(me=Ne,Ie=me.child,me.tag){case 0:case 11:case 14:case 15:Xu(4,me,me.return);break;case 1:$l(me,me.return);var Re=me.stateNode;if(typeof Re.componentWillUnmount=="function"){g=me,u=me.return;try{l=g,Re.props=l.memoizedProps,Re.state=l.memoizedState,Re.componentWillUnmount()}catch(Le){Vt(g,u,Le)}}break;case 5:$l(me,me.return);break;case 22:if(me.memoizedState!==null){T1(ve);continue}}Ie!==null?(Ie.return=me,Ne=Ie):T1(ve)}ye=ye.sibling}e:for(ye=null,ve=i;;){if(ve.tag===5){if(ye===null){ye=ve;try{_=ve.stateNode,Z?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(U=ve.stateNode,H=ve.memoizedProps.style,N=H!=null&&H.hasOwnProperty("display")?H.display:null,U.style.display=fu("display",N))}catch(Le){Vt(i,i.return,Le)}}}else if(ve.tag===6){if(ye===null)try{ve.stateNode.nodeValue=Z?"":ve.memoizedProps}catch(Le){Vt(i,i.return,Le)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===i)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===i)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===i)break e;ye===ve&&(ye=null),ve=ve.return}ye===ve&&(ye=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:Jr(l,i),Es(i),g&4&&_1(i);break;case 21:break;default:Jr(l,i),Es(i)}}function Es(i){var l=i.flags;if(l&2){try{e:{for(var u=i.return;u!==null;){if(g1(u)){var g=u;break e}u=u.return}throw Error(t(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&(bi(_,""),g.flags&=-33);var x=y1(i);Qy(i,x,_);break;case 3:case 4:var N=g.stateNode.containerInfo,U=y1(i);Gy(i,U,N);break;default:throw Error(t(161))}}catch(H){Vt(i,i.return,H)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function Lj(i,l,u){Ne=i,x1(i)}function x1(i,l,u){for(var g=(i.mode&1)!==0;Ne!==null;){var _=Ne,x=_.child;if(_.tag===22&&g){var N=_.memoizedState!==null||Lf;if(!N){var U=_.alternate,H=U!==null&&U.memoizedState!==null||Dn;U=Lf;var Z=Dn;if(Lf=N,(Dn=H)&&!Z)for(Ne=_;Ne!==null;)N=Ne,H=N.child,N.tag===22&&N.memoizedState!==null?S1(_):H!==null?(H.return=N,Ne=H):S1(_);for(;x!==null;)Ne=x,x1(x),x=x.sibling;Ne=_,Lf=U,Dn=Z}E1(i)}else(_.subtreeFlags&8772)!==0&&x!==null?(x.return=_,Ne=x):E1(i)}}function E1(i){for(;Ne!==null;){var l=Ne;if((l.flags&8772)!==0){var u=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Dn||Of(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Dn)if(u===null)g.componentDidMount();else{var _=l.elementType===l.type?u.memoizedProps:Yr(l.type,u.memoizedProps);g.componentDidUpdate(_,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=l.updateQueue;x!==null&&TT(l,x,g);break;case 3:var N=l.updateQueue;if(N!==null){if(u=null,l.child!==null)switch(l.child.tag){case 5:u=l.child.stateNode;break;case 1:u=l.child.stateNode}TT(l,N,u)}break;case 5:var U=l.stateNode;if(u===null&&l.flags&4){u=U;var H=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Z=l.alternate;if(Z!==null){var ye=Z.memoizedState;if(ye!==null){var ve=ye.dehydrated;ve!==null&&qr(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dn||l.flags&512&&Ky(l)}catch(me){Vt(l,l.return,me)}}if(l===i){Ne=null;break}if(u=l.sibling,u!==null){u.return=l.return,Ne=u;break}Ne=l.return}}function T1(i){for(;Ne!==null;){var l=Ne;if(l===i){Ne=null;break}var u=l.sibling;if(u!==null){u.return=l.return,Ne=u;break}Ne=l.return}}function S1(i){for(;Ne!==null;){var l=Ne;try{switch(l.tag){case 0:case 11:case 15:var u=l.return;try{Of(4,l)}catch(H){Vt(l,u,H)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var _=l.return;try{g.componentDidMount()}catch(H){Vt(l,_,H)}}var x=l.return;try{Ky(l)}catch(H){Vt(l,x,H)}break;case 5:var N=l.return;try{Ky(l)}catch(H){Vt(l,N,H)}}}catch(H){Vt(l,l.return,H)}if(l===i){Ne=null;break}var U=l.sibling;if(U!==null){U.return=l.return,Ne=U;break}Ne=l.return}}var Oj=Math.ceil,Vf=F.ReactCurrentDispatcher,Yy=F.ReactCurrentOwner,kr=F.ReactCurrentBatchConfig,ut=0,pn=null,Qt=null,Cn=0,fr=0,Hl=Vi(0),an=0,Ju=null,pa=0,Ff=0,Xy=0,Zu=null,er=null,Jy=0,Wl=1/0,si=null,Uf=!1,Zy=null,Hi=null,zf=!1,Wi=null,Bf=0,ed=0,ev=null,$f=-1,Hf=0;function Hn(){return(ut&6)!==0?Et():$f!==-1?$f:$f=Et()}function qi(i){return(i.mode&1)===0?1:(ut&2)!==0&&Cn!==0?Cn&-Cn:wj.transition!==null?(Hf===0&&(Hf=na()),Hf):(i=at,i!==0||(i=window.event,i=i===void 0?16:ku(i.type)),i)}function Zr(i,l,u,g){if(50<ed)throw ed=0,ev=null,Error(t(185));Ni(i,u,g),((ut&2)===0||i!==pn)&&(i===pn&&((ut&2)===0&&(Ff|=u),an===4&&Ki(i,Cn)),tr(i,g),u===1&&ut===0&&(l.mode&1)===0&&(Wl=Et()+500,vf&&Ui()))}function tr(i,l){var u=i.callbackNode;qs(i,l);var g=ta(i,i===pn?Cn:0);if(g===0)u!==null&&Tu(u),i.callbackNode=null,i.callbackPriority=0;else if(l=g&-g,i.callbackPriority!==l){if(u!=null&&Tu(u),l===1)i.tag===0?_j(b1.bind(null,i)):dT(b1.bind(null,i)),mj(function(){(ut&6)===0&&Ui()}),u=null;else{switch(Ri(g)){case 1:u=Zo;break;case 4:u=Ii;break;case 16:u=xr;break;case 536870912:u=$h;break;default:u=xr}u=M1(u,C1.bind(null,i))}i.callbackPriority=l,i.callbackNode=u}}function C1(i,l){if($f=-1,Hf=0,(ut&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ql()&&i.callbackNode!==u)return null;var g=ta(i,i===pn?Cn:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||l)l=Wf(i,g);else{l=g;var _=ut;ut|=2;var x=k1();(pn!==i||Cn!==l)&&(si=null,Wl=Et()+500,ga(i,l));do try{Uj();break}catch(U){I1(i,U)}while(!0);vy(),Vf.current=x,ut=_,Qt!==null?l=0:(pn=null,Cn=0,l=an)}if(l!==0){if(l===2&&(_=lr(i),_!==0&&(g=_,l=tv(i,_))),l===1)throw u=Ju,ga(i,0),Ki(i,g),tr(i,Et()),u;if(l===6)Ki(i,g);else{if(_=i.current.alternate,(g&30)===0&&!Vj(_)&&(l=Wf(i,g),l===2&&(x=lr(i),x!==0&&(g=x,l=tv(i,x))),l===1))throw u=Ju,ga(i,0),Ki(i,g),tr(i,Et()),u;switch(i.finishedWork=_,i.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:ya(i,er,si);break;case 3:if(Ki(i,g),(g&130023424)===g&&(l=Jy+500-Et(),10<l)){if(ta(i,0)!==0)break;if(_=i.suspendedLanes,(_&g)!==g){Hn(),i.pingedLanes|=i.suspendedLanes&_;break}i.timeoutHandle=ay(ya.bind(null,i,er,si),l);break}ya(i,er,si);break;case 4:if(Ki(i,g),(g&4194240)===g)break;for(l=i.eventTimes,_=-1;0<g;){var N=31-zn(g);x=1<<N,N=l[N],N>_&&(_=N),g&=~x}if(g=_,g=Et()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*Oj(g/1960))-g,10<g){i.timeoutHandle=ay(ya.bind(null,i,er,si),g);break}ya(i,er,si);break;case 5:ya(i,er,si);break;default:throw Error(t(329))}}}return tr(i,Et()),i.callbackNode===u?C1.bind(null,i):null}function tv(i,l){var u=Zu;return i.current.memoizedState.isDehydrated&&(ga(i,l).flags|=256),i=Wf(i,l),i!==2&&(l=er,er=u,l!==null&&nv(l)),i}function nv(i){er===null?er=i:er.push.apply(er,i)}function Vj(i){for(var l=i;;){if(l.flags&16384){var u=l.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var _=u[g],x=_.getSnapshot;_=_.value;try{if(!Gr(x(),_))return!1}catch{return!1}}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ki(i,l){for(l&=~Xy,l&=~Ff,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var u=31-zn(l),g=1<<u;i[u]=-1,l&=~g}}function b1(i){if((ut&6)!==0)throw Error(t(327));ql();var l=ta(i,0);if((l&1)===0)return tr(i,Et()),null;var u=Wf(i,l);if(i.tag!==0&&u===2){var g=lr(i);g!==0&&(l=g,u=tv(i,g))}if(u===1)throw u=Ju,ga(i,0),Ki(i,l),tr(i,Et()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,ya(i,er,si),tr(i,Et()),null}function rv(i,l){var u=ut;ut|=1;try{return i(l)}finally{ut=u,ut===0&&(Wl=Et()+500,vf&&Ui())}}function ma(i){Wi!==null&&Wi.tag===0&&(ut&6)===0&&ql();var l=ut;ut|=1;var u=kr.transition,g=at;try{if(kr.transition=null,at=1,i)return i()}finally{at=g,kr.transition=u,ut=l,(ut&6)===0&&Ui()}}function sv(){fr=Hl.current,It(Hl)}function ga(i,l){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,pj(u)),Qt!==null)for(u=Qt.return;u!==null;){var g=u;switch(fy(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gf();break;case 3:zl(),It(Xn),It(Nn),by();break;case 5:Sy(g);break;case 4:zl();break;case 13:It(Rt);break;case 19:It(Rt);break;case 10:_y(g.type._context);break;case 22:case 23:sv()}u=u.return}if(pn=i,Qt=i=Gi(i.current,null),Cn=fr=l,an=0,Ju=null,Xy=Ff=pa=0,er=Zu=null,da!==null){for(l=0;l<da.length;l++)if(u=da[l],g=u.interleaved,g!==null){u.interleaved=null;var _=g.next,x=u.pending;if(x!==null){var N=x.next;x.next=_,g.next=N}u.pending=g}da=null}return i}function I1(i,l){do{var u=Qt;try{if(vy(),kf.current=Rf,Af){for(var g=Dt.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}Af=!1}if(fa=0,fn=on=Dt=null,qu=!1,Ku=0,Yy.current=null,u===null||u.return===null){an=1,Ju=l,Qt=null;break}e:{var x=i,N=u.return,U=u,H=l;if(l=Cn,U.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var Z=H,ye=U,ve=ye.tag;if((ye.mode&1)===0&&(ve===0||ve===11||ve===15)){var me=ye.alternate;me?(ye.updateQueue=me.updateQueue,ye.memoizedState=me.memoizedState,ye.lanes=me.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Ie=JT(N);if(Ie!==null){Ie.flags&=-257,ZT(Ie,N,U,x,l),Ie.mode&1&&XT(x,Z,l),l=Ie,H=Z;var Re=l.updateQueue;if(Re===null){var Le=new Set;Le.add(H),l.updateQueue=Le}else Re.add(H);break e}else{if((l&1)===0){XT(x,Z,l),iv();break e}H=Error(t(426))}}else if(Nt&&U.mode&1){var Ht=JT(N);if(Ht!==null){(Ht.flags&65536)===0&&(Ht.flags|=256),ZT(Ht,N,U,x,l),gy(Bl(H,U));break e}}x=H=Bl(H,U),an!==4&&(an=2),Zu===null?Zu=[x]:Zu.push(x),x=N;do{switch(x.tag){case 3:x.flags|=65536,l&=-l,x.lanes|=l;var Y=QT(x,H,l);ET(x,Y);break e;case 1:U=H;var q=x.type,X=x.stateNode;if((x.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Hi===null||!Hi.has(X)))){x.flags|=65536,l&=-l,x.lanes|=l;var xe=YT(x,U,l);ET(x,xe);break e}}x=x.return}while(x!==null)}N1(u)}catch(Oe){l=Oe,Qt===u&&u!==null&&(Qt=u=u.return);continue}break}while(!0)}function k1(){var i=Vf.current;return Vf.current=Rf,i===null?Rf:i}function iv(){(an===0||an===3||an===2)&&(an=4),pn===null||(pa&268435455)===0&&(Ff&268435455)===0||Ki(pn,Cn)}function Wf(i,l){var u=ut;ut|=2;var g=k1();(pn!==i||Cn!==l)&&(si=null,ga(i,l));do try{Fj();break}catch(_){I1(i,_)}while(!0);if(vy(),ut=u,Vf.current=g,Qt!==null)throw Error(t(261));return pn=null,Cn=0,an}function Fj(){for(;Qt!==null;)A1(Qt)}function Uj(){for(;Qt!==null&&!zh();)A1(Qt)}function A1(i){var l=D1(i.alternate,i,fr);i.memoizedProps=i.pendingProps,l===null?N1(i):Qt=l,Yy.current=null}function N1(i){var l=i;do{var u=l.alternate;if(i=l.return,(l.flags&32768)===0){if(u=Rj(u,l,fr),u!==null){Qt=u;return}}else{if(u=Dj(u,l),u!==null){u.flags&=32767,Qt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{an=6,Qt=null;return}}if(l=l.sibling,l!==null){Qt=l;return}Qt=l=i}while(l!==null);an===0&&(an=5)}function ya(i,l,u){var g=at,_=kr.transition;try{kr.transition=null,at=1,zj(i,l,u,g)}finally{kr.transition=_,at=g}return null}function zj(i,l,u,g){do ql();while(Wi!==null);if((ut&6)!==0)throw Error(t(327));u=i.finishedWork;var _=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=u.lanes|u.childLanes;if(vt(i,x),i===pn&&(Qt=pn=null,Cn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||zf||(zf=!0,M1(xr,function(){return ql(),null})),x=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||x){x=kr.transition,kr.transition=null;var N=at;at=1;var U=ut;ut|=4,Yy.current=null,jj(i,u),w1(u,i),aj(iy),Mi=!!sy,iy=sy=null,i.current=u,Lj(u),Bg(),ut=U,at=N,kr.transition=x}else i.current=u;if(zf&&(zf=!1,Wi=i,Bf=_),x=i.pendingLanes,x===0&&(Hi=null),Hh(u.stateNode),tr(i,Et()),l!==null)for(g=i.onRecoverableError,u=0;u<l.length;u++)_=l[u],g(_.value,{componentStack:_.stack,digest:_.digest});if(Uf)throw Uf=!1,i=Zy,Zy=null,i;return(Bf&1)!==0&&i.tag!==0&&ql(),x=i.pendingLanes,(x&1)!==0?i===ev?ed++:(ed=0,ev=i):ed=0,Ui(),null}function ql(){if(Wi!==null){var i=Ri(Bf),l=kr.transition,u=at;try{if(kr.transition=null,at=16>i?16:i,Wi===null)var g=!1;else{if(i=Wi,Wi=null,Bf=0,(ut&6)!==0)throw Error(t(331));var _=ut;for(ut|=4,Ne=i.current;Ne!==null;){var x=Ne,N=x.child;if((Ne.flags&16)!==0){var U=x.deletions;if(U!==null){for(var H=0;H<U.length;H++){var Z=U[H];for(Ne=Z;Ne!==null;){var ye=Ne;switch(ye.tag){case 0:case 11:case 15:Xu(8,ye,x)}var ve=ye.child;if(ve!==null)ve.return=ye,Ne=ve;else for(;Ne!==null;){ye=Ne;var me=ye.sibling,Ie=ye.return;if(m1(ye),ye===Z){Ne=null;break}if(me!==null){me.return=Ie,Ne=me;break}Ne=Ie}}}var Re=x.alternate;if(Re!==null){var Le=Re.child;if(Le!==null){Re.child=null;do{var Ht=Le.sibling;Le.sibling=null,Le=Ht}while(Le!==null)}}Ne=x}}if((x.subtreeFlags&2064)!==0&&N!==null)N.return=x,Ne=N;else e:for(;Ne!==null;){if(x=Ne,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Xu(9,x,x.return)}var Y=x.sibling;if(Y!==null){Y.return=x.return,Ne=Y;break e}Ne=x.return}}var q=i.current;for(Ne=q;Ne!==null;){N=Ne;var X=N.child;if((N.subtreeFlags&2064)!==0&&X!==null)X.return=N,Ne=X;else e:for(N=q;Ne!==null;){if(U=Ne,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Of(9,U)}}catch(Oe){Vt(U,U.return,Oe)}if(U===N){Ne=null;break e}var xe=U.sibling;if(xe!==null){xe.return=U.return,Ne=xe;break e}Ne=U.return}}if(ut=_,Ui(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(ea,i)}catch{}g=!0}return g}finally{at=u,kr.transition=l}}return!1}function P1(i,l,u){l=Bl(u,l),l=QT(i,l,1),i=Bi(i,l,1),l=Hn(),i!==null&&(Ni(i,1,l),tr(i,l))}function Vt(i,l,u){if(i.tag===3)P1(i,i,u);else for(;l!==null;){if(l.tag===3){P1(l,i,u);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Hi===null||!Hi.has(g))){i=Bl(u,i),i=YT(l,i,1),l=Bi(l,i,1),i=Hn(),l!==null&&(Ni(l,1,i),tr(l,i));break}}l=l.return}}function Bj(i,l,u){var g=i.pingCache;g!==null&&g.delete(l),l=Hn(),i.pingedLanes|=i.suspendedLanes&u,pn===i&&(Cn&u)===u&&(an===4||an===3&&(Cn&130023424)===Cn&&500>Et()-Jy?ga(i,0):Xy|=u),tr(i,l)}function R1(i,l){l===0&&((i.mode&1)===0?l=1:(l=ml,ml<<=1,(ml&130023424)===0&&(ml=4194304)));var u=Hn();i=ti(i,l),i!==null&&(Ni(i,l,u),tr(i,u))}function $j(i){var l=i.memoizedState,u=0;l!==null&&(u=l.retryLane),R1(i,u)}function Hj(i,l){var u=0;switch(i.tag){case 13:var g=i.stateNode,_=i.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),R1(i,u)}var D1;D1=function(i,l,u){if(i!==null)if(i.memoizedProps!==l.pendingProps||Xn.current)Zn=!0;else{if((i.lanes&u)===0&&(l.flags&128)===0)return Zn=!1,Pj(i,l,u);Zn=(i.flags&131072)!==0}else Zn=!1,Nt&&(l.flags&1048576)!==0&&hT(l,wf,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;jf(i,l),i=l.pendingProps;var _=Ml(l,Nn.current);Ul(l,u),_=Ay(null,l,g,i,_,u);var x=Ny();return l.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Jn(g)?(x=!0,yf(l)):x=!1,l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ey(l),_.updater=Df,l.stateNode=_,_._reactInternals=l,Ly(l,g,i,u),l=Uy(null,l,g,!0,x,u)):(l.tag=0,Nt&&x&&hy(l),$n(null,l,_,u),l=l.child),l;case 16:g=l.elementType;e:{switch(jf(i,l),i=l.pendingProps,_=g._init,g=_(g._payload),l.type=g,_=l.tag=qj(g),i=Yr(g,i),_){case 0:l=Fy(null,l,g,i,u);break e;case 1:l=i1(null,l,g,i,u);break e;case 11:l=e1(null,l,g,i,u);break e;case 14:l=t1(null,l,g,Yr(g.type,i),u);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Yr(g,_),Fy(i,l,g,_,u);case 1:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Yr(g,_),i1(i,l,g,_,u);case 3:e:{if(o1(l),i===null)throw Error(t(387));g=l.pendingProps,x=l.memoizedState,_=x.element,xT(i,l),bf(l,g,null,u);var N=l.memoizedState;if(g=N.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){_=Bl(Error(t(423)),l),l=a1(i,l,g,u,_);break e}else if(g!==_){_=Bl(Error(t(424)),l),l=a1(i,l,g,u,_);break e}else for(hr=Oi(l.stateNode.containerInfo.firstChild),dr=l,Nt=!0,Qr=null,u=_T(l,null,g,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ol(),g===_){l=ri(i,l,u);break e}$n(i,l,g,u)}l=l.child}return l;case 5:return ST(l),i===null&&my(l),g=l.type,_=l.pendingProps,x=i!==null?i.memoizedProps:null,N=_.children,oy(g,_)?N=null:x!==null&&oy(g,x)&&(l.flags|=32),s1(i,l),$n(i,l,N,u),l.child;case 6:return i===null&&my(l),null;case 13:return l1(i,l,u);case 4:return Ty(l,l.stateNode.containerInfo),g=l.pendingProps,i===null?l.child=Vl(l,null,g,u):$n(i,l,g,u),l.child;case 11:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Yr(g,_),e1(i,l,g,_,u);case 7:return $n(i,l,l.pendingProps,u),l.child;case 8:return $n(i,l,l.pendingProps.children,u),l.child;case 12:return $n(i,l,l.pendingProps.children,u),l.child;case 10:e:{if(g=l.type._context,_=l.pendingProps,x=l.memoizedProps,N=_.value,Tt(Tf,g._currentValue),g._currentValue=N,x!==null)if(Gr(x.value,N)){if(x.children===_.children&&!Xn.current){l=ri(i,l,u);break e}}else for(x=l.child,x!==null&&(x.return=l);x!==null;){var U=x.dependencies;if(U!==null){N=x.child;for(var H=U.firstContext;H!==null;){if(H.context===g){if(x.tag===1){H=ni(-1,u&-u),H.tag=2;var Z=x.updateQueue;if(Z!==null){Z=Z.shared;var ye=Z.pending;ye===null?H.next=H:(H.next=ye.next,ye.next=H),Z.pending=H}}x.lanes|=u,H=x.alternate,H!==null&&(H.lanes|=u),wy(x.return,u,l),U.lanes|=u;break}H=H.next}}else if(x.tag===10)N=x.type===l.type?null:x.child;else if(x.tag===18){if(N=x.return,N===null)throw Error(t(341));N.lanes|=u,U=N.alternate,U!==null&&(U.lanes|=u),wy(N,u,l),N=x.sibling}else N=x.child;if(N!==null)N.return=x;else for(N=x;N!==null;){if(N===l){N=null;break}if(x=N.sibling,x!==null){x.return=N.return,N=x;break}N=N.return}x=N}$n(i,l,_.children,u),l=l.child}return l;case 9:return _=l.type,g=l.pendingProps.children,Ul(l,u),_=br(_),g=g(_),l.flags|=1,$n(i,l,g,u),l.child;case 14:return g=l.type,_=Yr(g,l.pendingProps),_=Yr(g.type,_),t1(i,l,g,_,u);case 15:return n1(i,l,l.type,l.pendingProps,u);case 17:return g=l.type,_=l.pendingProps,_=l.elementType===g?_:Yr(g,_),jf(i,l),l.tag=1,Jn(g)?(i=!0,yf(l)):i=!1,Ul(l,u),KT(l,g,_),Ly(l,g,_,u),Uy(null,l,g,!0,i,u);case 19:return u1(i,l,u);case 22:return r1(i,l,u)}throw Error(t(156,l.tag))};function M1(i,l){return fl(i,l)}function Wj(i,l,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(i,l,u,g){return new Wj(i,l,u,g)}function ov(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qj(i){if(typeof i=="function")return ov(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===de)return 14}return 2}function Gi(i,l){var u=i.alternate;return u===null?(u=Ar(i.tag,l,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=l,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,l=i.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function qf(i,l,u,g,_,x){var N=2;if(g=i,typeof i=="function")ov(i)&&(N=1);else if(typeof i=="string")N=5;else e:switch(i){case P:return va(u.children,_,x,l);case A:N=8,_|=8;break;case j:return i=Ar(12,u,l,_|2),i.elementType=j,i.lanes=x,i;case O:return i=Ar(13,u,l,_),i.elementType=O,i.lanes=x,i;case ge:return i=Ar(19,u,l,_),i.elementType=ge,i.lanes=x,i;case se:return Kf(u,_,x,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:N=10;break e;case V:N=9;break e;case B:N=11;break e;case de:N=14;break e;case ie:N=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return l=Ar(N,u,l,_),l.elementType=i,l.type=g,l.lanes=x,l}function va(i,l,u,g){return i=Ar(7,i,g,l),i.lanes=u,i}function Kf(i,l,u,g){return i=Ar(22,i,g,l),i.elementType=se,i.lanes=u,i.stateNode={isHidden:!1},i}function av(i,l,u){return i=Ar(6,i,null,l),i.lanes=u,i}function lv(i,l,u){return l=Ar(4,i.children!==null?i.children:[],i.key,l),l.lanes=u,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function Kj(i,l,u,g,_){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ai(0),this.expirationTimes=Ai(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function cv(i,l,u,g,_,x,N,U,H){return i=new Kj(i,l,u,U,H),l===1?(l=1,x===!0&&(l|=8)):l=0,x=Ar(3,null,null,l),i.current=x,x.stateNode=i,x.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ey(x),i}function Gj(i,l,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:g==null?null:""+g,children:i,containerInfo:l,implementation:u}}function j1(i){if(!i)return Fi;i=i._reactInternals;e:{if(zr(i)!==i||i.tag!==1)throw Error(t(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Jn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Jn(u))return cT(i,u,l)}return l}function L1(i,l,u,g,_,x,N,U,H){return i=cv(u,g,!0,i,_,x,N,U,H),i.context=j1(null),u=i.current,g=Hn(),_=qi(u),x=ni(g,_),x.callback=l??null,Bi(u,x,_),i.current.lanes=_,Ni(i,_,g),tr(i,g),i}function Gf(i,l,u,g){var _=l.current,x=Hn(),N=qi(_);return u=j1(u),l.context===null?l.context=u:l.pendingContext=u,l=ni(x,N),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=Bi(_,l,N),i!==null&&(Zr(i,_,N,x),Cf(i,_,N)),N}function Qf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function O1(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<l?u:l}}function uv(i,l){O1(i,l),(i=i.alternate)&&O1(i,l)}function Qj(){return null}var V1=typeof reportError=="function"?reportError:function(i){console.error(i)};function dv(i){this._internalRoot=i}Yf.prototype.render=dv.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(t(409));Gf(i,l,null,null)},Yf.prototype.unmount=dv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;ma(function(){Gf(null,i,null,null)}),l[Xs]=null}};function Yf(i){this._internalRoot=i}Yf.prototype.unstable_scheduleHydration=function(i){if(i){var l=Qh();i={blockedOn:null,target:i,priority:l};for(var u=0;u<ms.length&&l!==0&&l<ms[u].priority;u++);ms.splice(u,0,i),u===0&&Jh(i)}};function hv(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Xf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function F1(){}function Yj(i,l,u,g,_){if(_){if(typeof g=="function"){var x=g;g=function(){var Z=Qf(N);x.call(Z)}}var N=L1(l,g,i,0,null,!1,!1,"",F1);return i._reactRootContainer=N,i[Xs]=N.current,Vu(i.nodeType===8?i.parentNode:i),ma(),N}for(;_=i.lastChild;)i.removeChild(_);if(typeof g=="function"){var U=g;g=function(){var Z=Qf(H);U.call(Z)}}var H=cv(i,0,!1,null,null,!1,!1,"",F1);return i._reactRootContainer=H,i[Xs]=H.current,Vu(i.nodeType===8?i.parentNode:i),ma(function(){Gf(l,H,u,g)}),H}function Jf(i,l,u,g,_){var x=u._reactRootContainer;if(x){var N=x;if(typeof _=="function"){var U=_;_=function(){var H=Qf(N);U.call(H)}}Gf(l,N,i,_)}else N=Yj(u,l,i,_,g);return Qf(N)}Kh=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var u=ki(l.pendingLanes);u!==0&&(Pi(l,u|1),tr(l,Et()),(ut&6)===0&&(Wl=Et()+500,Ui()))}break;case 13:ma(function(){var g=ti(i,1);if(g!==null){var _=Hn();Zr(g,i,1,_)}}),uv(i,1)}},gl=function(i){if(i.tag===13){var l=ti(i,134217728);if(l!==null){var u=Hn();Zr(l,i,134217728,u)}uv(i,134217728)}},Gh=function(i){if(i.tag===13){var l=qi(i),u=ti(i,l);if(u!==null){var g=Hn();Zr(u,i,l,g)}uv(i,l)}},Qh=function(){return at},Yh=function(i,l){var u=at;try{return at=i,l()}finally{at=u}},al=function(i,l,u){switch(l){case"input":if(dt(i,u),l=u.name,u.type==="radio"&&l!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<u.length;l++){var g=u[l];if(g!==i&&g.form===i.form){var _=mf(g);if(!_)throw Error(t(90));je(g),dt(g,_)}}}break;case"textarea":il(i,u);break;case"select":l=u.value,l!=null&&Gn(i,!!u.multiple,l,!1)}},Qo=rv,_u=ma;var Xj={usingClientEntryPoint:!1,Events:[zu,Rl,mf,fs,vu,rv]},td={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jj={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Eu(i),i===null?null:i.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||Qj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{ea=Zf.inject(Jj),ar=Zf}catch{}}return nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xj,nr.createPortal=function(i,l){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hv(l))throw Error(t(200));return Gj(i,l,null,u)},nr.createRoot=function(i,l){if(!hv(i))throw Error(t(299));var u=!1,g="",_=V1;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=cv(i,1,!1,null,null,u,!1,g,_),i[Xs]=l.current,Vu(i.nodeType===8?i.parentNode:i),new dv(l)},nr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Eu(l),i=i===null?null:i.stateNode,i},nr.flushSync=function(i){return ma(i)},nr.hydrate=function(i,l,u){if(!Xf(l))throw Error(t(200));return Jf(null,i,l,!0,u)},nr.hydrateRoot=function(i,l,u){if(!hv(i))throw Error(t(405));var g=u!=null&&u.hydratedSources||null,_=!1,x="",N=V1;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(N=u.onRecoverableError)),l=L1(l,null,i,1,u??null,_,!1,x,N),i[Xs]=l.current,Vu(i),g)for(i=0;i<g.length;i++)u=g[i],_=u._getVersion,_=_(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,_]:l.mutableSourceEagerHydrationData.push(u,_);return new Yf(l)},nr.render=function(i,l,u){if(!Xf(l))throw Error(t(200));return Jf(null,i,l,!1,u)},nr.unmountComponentAtNode=function(i){if(!Xf(i))throw Error(t(40));return i._reactRootContainer?(ma(function(){Jf(null,null,i,!1,function(){i._reactRootContainer=null,i[Xs]=null})}),!0):!1},nr.unstable_batchedUpdates=rv,nr.unstable_renderSubtreeIntoContainer=function(i,l,u,g){if(!Xf(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Jf(i,l,u,!1,g)},nr.version="18.3.1-next-f1338f8080-20240426",nr}var K1;function sk(){if(K1)return mv.exports;K1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mv.exports=oL(),mv.exports}var G1;function aL(){if(G1)return ep;G1=1;var n=sk();return ep.createRoot=n.createRoot,ep.hydrateRoot=n.hydrateRoot,ep}var lL=aL(),S=Um();const Zi=rk(S),ik=eL({__proto__:null,default:Zi},[S]),X0=S.createContext({});function J0(n){const e=S.useRef(null);return e.current===null&&(e.current=n()),e.current}const Z0=typeof window<"u",ok=Z0?S.useLayoutEffect:S.useEffect,zm=S.createContext(null);function ew(n,e){n.indexOf(e)===-1&&n.push(e)}function tw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fi=(n,e,t)=>t>e?e:t<n?n:t;let nw=()=>{};const pi={},ak=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function lk(n){return typeof n=="object"&&n!==null}const ck=n=>/^0[^.\s]+$/u.test(n);function rw(n){let e;return()=>(e===void 0&&(e=n()),e)}const jr=n=>n,cL=(n,e)=>t=>e(n(t)),dh=(...n)=>n.reduce(cL),Ld=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class sw{constructor(){this.subscriptions=[]}add(e){return ew(this.subscriptions,e),()=>tw(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,As=n=>n/1e3;function uk(n,e){return e?n*(1e3/e):0}const dk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,uL=1e-7,dL=12;function hL(n,e,t,r,s){let o,a,c=0;do a=e+(t-e)/2,o=dk(a,r,s)-n,o>0?t=a:e=a;while(Math.abs(o)>uL&&++c<dL);return a}function hh(n,e,t,r){if(n===e&&t===r)return jr;const s=o=>hL(o,0,1,n,t);return o=>o===0||o===1?o:dk(s(o),e,r)}const hk=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,fk=n=>e=>1-n(1-e),pk=hh(.33,1.53,.69,.99),iw=fk(pk),mk=hk(iw),gk=n=>(n*=2)<1?.5*iw(n):.5*(2-Math.pow(2,-10*(n-1))),ow=n=>1-Math.sin(Math.acos(n)),yk=fk(ow),vk=hk(ow),fL=hh(.42,0,1,1),pL=hh(0,0,.58,1),_k=hh(.42,0,.58,1),mL=n=>Array.isArray(n)&&typeof n[0]!="number",wk=n=>Array.isArray(n)&&typeof n[0]=="number",gL={linear:jr,easeIn:fL,easeInOut:_k,easeOut:pL,circIn:ow,circInOut:vk,circOut:yk,backIn:iw,backInOut:mk,backOut:pk,anticipate:gk},yL=n=>typeof n=="string",Q1=n=>{if(wk(n)){nw(n.length===4);const[e,t,r,s]=n;return hh(e,t,r,s)}else if(yL(n))return gL[n];return n},tp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function vL(n,e){let t=new Set,r=new Set,s=!1,o=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(m){a.has(m)&&(h.schedule(m),n()),m(c)}const h={schedule:(m,y=!1,v=!1)=>{const b=v&&s?t:r;return y&&a.add(m),b.has(m)||b.add(m),m},cancel:m=>{r.delete(m),a.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(d),t.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const _L=40;function xk(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,a=tp.reduce((M,F)=>(M[F]=vL(o),M),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:m,update:y,preRender:v,render:E,postRender:b}=a,C=()=>{const M=pi.useManualTiming?s.timestamp:performance.now();t=!1,pi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(M-s.timestamp,_L),1)),s.timestamp=M,s.isProcessing=!0,c.process(s),d.process(s),h.process(s),m.process(s),y.process(s),v.process(s),E.process(s),b.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(C))},I=()=>{t=!0,r=!0,s.isProcessing||n(C)};return{schedule:tp.reduce((M,F)=>{const W=a[F];return M[F]=(K,P=!1,A=!1)=>(t||I(),W.schedule(K,P,A)),M},{}),cancel:M=>{for(let F=0;F<tp.length;F++)a[tp[F]].cancel(M)},state:s,steps:a}}const{schedule:Pt,cancel:_o,state:bn,steps:vv}=xk(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let Sp;function wL(){Sp=void 0}const ir={now:()=>(Sp===void 0&&ir.set(bn.isProcessing||pi.useManualTiming?bn.timestamp:performance.now()),Sp),set:n=>{Sp=n,queueMicrotask(wL)}},Ek=n=>e=>typeof e=="string"&&e.startsWith(n),aw=Ek("--"),xL=Ek("var(--"),lw=n=>xL(n)?EL.test(n.split("/*")[0].trim()):!1,EL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Bc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Od={...Bc,transform:n=>fi(0,1,n)},np={...Bc,default:1},_d=n=>Math.round(n*1e5)/1e5,cw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TL(n){return n==null}const SL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uw=(n,e)=>t=>!!(typeof t=="string"&&SL.test(t)&&t.startsWith(n)||e&&!TL(t)&&Object.prototype.hasOwnProperty.call(t,e)),Tk=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,a,c]=r.match(cw);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},CL=n=>fi(0,255,n),_v={...Bc,transform:n=>Math.round(CL(n))},Ca={test:uw("rgb","red"),parse:Tk("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+_v.transform(n)+", "+_v.transform(e)+", "+_v.transform(t)+", "+_d(Od.transform(r))+")"};function bL(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const w_={test:uw("#"),parse:bL,transform:Ca.transform},fh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),eo=fh("deg"),Ns=fh("%"),He=fh("px"),IL=fh("vh"),kL=fh("vw"),Y1={...Ns,parse:n=>Ns.parse(n)/100,transform:n=>Ns.transform(n*100)},rc={test:uw("hsl","hue"),parse:Tk("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ns.transform(_d(e))+", "+Ns.transform(_d(t))+", "+_d(Od.transform(r))+")"},Xt={test:n=>Ca.test(n)||w_.test(n)||rc.test(n),parse:n=>Ca.test(n)?Ca.parse(n):rc.test(n)?rc.parse(n):w_.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ca.transform(n):rc.transform(n),getAnimatableNone:n=>{const e=Xt.parse(n);return e.alpha=0,Xt.transform(e)}},AL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NL(n){return isNaN(n)&&typeof n=="string"&&(n.match(cw)?.length||0)+(n.match(AL)?.length||0)>0}const Sk="number",Ck="color",PL="var",RL="var(",X1="${}",DL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vd(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(DL,d=>(Xt.test(d)?(r.color.push(o),s.push(Ck),t.push(Xt.parse(d))):d.startsWith(RL)?(r.var.push(o),s.push(PL),t.push(d)):(r.number.push(o),s.push(Sk),t.push(parseFloat(d))),++o,X1)).split(X1);return{values:t,split:c,indexes:r,types:s}}function bk(n){return Vd(n).values}function Ik(n){const{split:e,types:t}=Vd(n),r=e.length;return s=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],s[a]!==void 0){const c=t[a];c===Sk?o+=_d(s[a]):c===Ck?o+=Xt.transform(s[a]):o+=s[a]}return o}}const ML=n=>typeof n=="number"?0:Xt.test(n)?Xt.getAnimatableNone(n):n;function jL(n){const e=bk(n);return Ik(n)(e.map(ML))}const wo={test:NL,parse:bk,createTransformer:Ik,getAnimatableNone:jL};function wv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function LL({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,a=0;if(!e)s=o=a=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;s=wv(d,c,n+1/3),o=wv(d,c,n),a=wv(d,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Bp(n,e){return t=>t>0?e:n}const Mt=(n,e,t)=>n+(e-n)*t,xv=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},OL=[w_,Ca,rc],VL=n=>OL.find(e=>e.test(n));function J1(n){const e=VL(n);if(!e)return!1;let t=e.parse(n);return e===rc&&(t=LL(t)),t}const Z1=(n,e)=>{const t=J1(n),r=J1(e);if(!t||!r)return Bp(n,e);const s={...t};return o=>(s.red=xv(t.red,r.red,o),s.green=xv(t.green,r.green,o),s.blue=xv(t.blue,r.blue,o),s.alpha=Mt(t.alpha,r.alpha,o),Ca.transform(s))},x_=new Set(["none","hidden"]);function FL(n,e){return x_.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function UL(n,e){return t=>Mt(n,e,t)}function dw(n){return typeof n=="number"?UL:typeof n=="string"?lw(n)?Bp:Xt.test(n)?Z1:$L:Array.isArray(n)?kk:typeof n=="object"?Xt.test(n)?Z1:zL:Bp}function kk(n,e){const t=[...n],r=t.length,s=n.map((o,a)=>dw(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)t[a]=s[a](o);return t}}function zL(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=dw(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function BL(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],c=n.values[a]??0;t[s]=c,r[o]++}return t}const $L=(n,e)=>{const t=wo.createTransformer(e),r=Vd(n),s=Vd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?x_.has(n)&&!s.values.length||x_.has(e)&&!r.values.length?FL(n,e):dh(kk(BL(r,s),s.values),t):Bp(n,e)};function Ak(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Mt(n,e,t):dw(n)(n,e)}const HL=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Pt.update(e,t),stop:()=>_o(e),now:()=>bn.isProcessing?bn.timestamp:ir.now()}},Nk=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},$p=2e4;function hw(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<$p;)e+=t,r=n.next(e);return e>=$p?1/0:e}function WL(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(hw(r),$p);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:As(s)}}const qL=5;function Pk(n,e,t){const r=Math.max(e-qL,0);return uk(t-n(r),e-r)}const zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ev=.001;function KL({duration:n=zt.duration,bounce:e=zt.bounce,velocity:t=zt.velocity,mass:r=zt.mass}){let s,o,a=1-e;a=fi(zt.minDamping,zt.maxDamping,a),n=fi(zt.minDuration,zt.maxDuration,As(n)),a<1?(s=h=>{const m=h*a,y=m*n,v=m-t,E=E_(h,a),b=Math.exp(-y);return Ev-v/E*b},o=h=>{const y=h*a*n,v=y*t+t,E=Math.pow(a,2)*Math.pow(h,2)*n,b=Math.exp(-y),C=E_(Math.pow(h,2),a);return(-s(h)+Ev>0?-1:1)*((v-E)*b)/C}):(s=h=>{const m=Math.exp(-h*n),y=(h-t)*n+1;return-Ev+m*y},o=h=>{const m=Math.exp(-h*n),y=(t-h)*(n*n);return m*y});const c=5/n,d=QL(s,o,c);if(n=ks(n),isNaN(d))return{stiffness:zt.stiffness,damping:zt.damping,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const GL=12;function QL(n,e,t){let r=t;for(let s=1;s<GL;s++)r=r-n(r)/e(r);return r}function E_(n,e){return n*Math.sqrt(1-e*e)}const YL=["duration","bounce"],XL=["stiffness","damping","mass"];function eS(n,e){return e.some(t=>n[t]!==void 0)}function JL(n){let e={velocity:zt.velocity,stiffness:zt.stiffness,damping:zt.damping,mass:zt.mass,isResolvedFromDuration:!1,...n};if(!eS(n,XL)&&eS(n,YL))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*fi(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:zt.mass,stiffness:s,damping:o}}else{const t=KL(n);e={...e,...t,mass:zt.mass},e.isResolvedFromDuration=!0}return e}function Hp(n=zt.visualDuration,e=zt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:h,mass:m,duration:y,velocity:v,isResolvedFromDuration:E}=JL({...t,velocity:-As(t.velocity||0)}),b=v||0,C=h/(2*Math.sqrt(d*m)),I=a-o,k=As(Math.sqrt(d/m)),R=Math.abs(I)<5;r||(r=R?zt.restSpeed.granular:zt.restSpeed.default),s||(s=R?zt.restDelta.granular:zt.restDelta.default);let M;if(C<1){const W=E_(k,C);M=K=>{const P=Math.exp(-C*k*K);return a-P*((b+C*k*I)/W*Math.sin(W*K)+I*Math.cos(W*K))}}else if(C===1)M=W=>a-Math.exp(-k*W)*(I+(b+k*I)*W);else{const W=k*Math.sqrt(C*C-1);M=K=>{const P=Math.exp(-C*k*K),A=Math.min(W*K,300);return a-P*((b+C*k*I)*Math.sinh(A)+W*I*Math.cosh(A))/W}}const F={calculatedDuration:E&&y||null,next:W=>{const K=M(W);if(E)c.done=W>=y;else{let P=W===0?b:0;C<1&&(P=W===0?ks(b):Pk(M,W,K));const A=Math.abs(P)<=r,j=Math.abs(a-K)<=s;c.done=A&&j}return c.value=c.done?a:K,c},toString:()=>{const W=Math.min(hw(F),$p),K=Nk(P=>F.next(W*P).value,W,30);return W+"ms "+K},toTransition:()=>{}};return F}Hp.applyToOptions=n=>{const e=WL(n,100,Hp);return n.ease=e.ease,n.duration=ks(e.duration),n.type="keyframes",n};function T_({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:d,restDelta:h=.5,restSpeed:m}){const y=n[0],v={done:!1,value:y},E=A=>c!==void 0&&A<c||d!==void 0&&A>d,b=A=>c===void 0?d:d===void 0||Math.abs(c-A)<Math.abs(d-A)?c:d;let C=t*e;const I=y+C,k=a===void 0?I:a(I);k!==I&&(C=k-y);const R=A=>-C*Math.exp(-A/r),M=A=>k+R(A),F=A=>{const j=R(A),L=M(A);v.done=Math.abs(j)<=h,v.value=v.done?k:L};let W,K;const P=A=>{E(v.value)&&(W=A,K=Hp({keyframes:[v.value,b(v.value)],velocity:Pk(M,A,v.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return P(0),{calculatedDuration:null,next:A=>{let j=!1;return!K&&W===void 0&&(j=!0,F(A),P(A)),W!==void 0&&A>=W?K.next(A-W):(!j&&F(A),v)}}}function ZL(n,e,t){const r=[],s=t||pi.mix||Ak,o=n.length-1;for(let a=0;a<o;a++){let c=s(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||jr:e;c=dh(d,c)}r.push(c)}return r}function eO(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(nw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=ZL(e,r,s),d=c.length,h=m=>{if(a&&m<n[0])return e[0];let y=0;if(d>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const v=Ld(n[y],n[y+1],m);return c[y](v)};return t?m=>h(fi(n[0],n[o-1],m)):h}function tO(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Ld(0,e,r);n.push(Mt(t,1,s))}}function nO(n){const e=[0];return tO(e,n.length-1),e}function rO(n,e){return n.map(t=>t*e)}function sO(n,e){return n.map(()=>e||_k).splice(0,n.length-1)}function wd({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=mL(r)?r.map(Q1):Q1(r),o={done:!1,value:e[0]},a=rO(t&&t.length===e.length?t:nO(e),n),c=eO(a,e,{ease:Array.isArray(s)?s:sO(e,s)});return{calculatedDuration:n,next:d=>(o.value=c(d),o.done=d>=n,o)}}const iO=n=>n!==null;function fw(n,{repeat:e,repeatType:t="loop"},r,s=1){const o=n.filter(iO),c=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const oO={decay:T_,inertia:T_,tween:wd,keyframes:wd,spring:Hp};function Rk(n){typeof n.type=="string"&&(n.type=oO[n.type])}class pw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const aO=n=>n/100;class mw extends pw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==ir.now()&&this.tick(ir.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Rk(e);const{type:t=wd,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=e;let{keyframes:c}=e;const d=t||wd;d!==wd&&typeof c[0]!="number"&&(this.mixKeyframes=dh(aO,Ak(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=hw(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:y,repeatType:v,repeatDelay:E,type:b,onUpdate:C,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const k=this.currentTime-h*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?k<0:k>s;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,F=r;if(y){const A=Math.min(this.currentTime,s)/c;let j=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&j--,j=Math.min(j,y+1),!!(j%2)&&(v==="reverse"?(L=1-L,E&&(L-=E/c)):v==="mirror"&&(F=a)),M=fi(0,1,L)*c}const W=R?{done:!1,value:m[0]}:F.next(M);o&&(W.value=o(W.value));let{done:K}=W;!R&&d!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return P&&b!==T_&&(W.value=fw(m,this.options,I,this.speed)),C&&C(W.value),P&&this.finish(),W}then(e,t){return this.finished.then(e,t)}get duration(){return As(this.calculatedDuration)}get time(){return As(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ir.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=As(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=HL,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ir.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function lO(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ba=n=>n*180/Math.PI,S_=n=>{const e=ba(Math.atan2(n[1],n[0]));return C_(e)},cO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:S_,rotateZ:S_,skewX:n=>ba(Math.atan(n[1])),skewY:n=>ba(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},C_=n=>(n=n%360,n<0&&(n+=360),n),tS=S_,nS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),rS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),uO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nS,scaleY:rS,scale:n=>(nS(n)+rS(n))/2,rotateX:n=>C_(ba(Math.atan2(n[6],n[5]))),rotateY:n=>C_(ba(Math.atan2(-n[2],n[0]))),rotateZ:tS,rotate:tS,skewX:n=>ba(Math.atan(n[4])),skewY:n=>ba(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function b_(n){return n.includes("scale")?1:0}function I_(n,e){if(!n||n==="none")return b_(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=uO,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=cO,s=c}if(!s)return b_(e);const o=r[e],a=s[1].split(",").map(hO);return typeof o=="function"?o(a):a[o]}const dO=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return I_(t,e)};function hO(n){return parseFloat(n.trim())}const $c=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hc=new Set($c),sS=n=>n===Bc||n===He,fO=new Set(["x","y","z"]),pO=$c.filter(n=>!fO.has(n));function mO(n){const e=[];return pO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ma={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>I_(e,"x"),y:(n,{transform:e})=>I_(e,"y")};Ma.translateX=Ma.x;Ma.translateY=Ma.y;const ja=new Set;let k_=!1,A_=!1,N_=!1;function Dk(){if(A_){const n=Array.from(ja).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=mO(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,a])=>{r.getValue(o)?.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}A_=!1,k_=!1,ja.forEach(n=>n.complete(N_)),ja.clear()}function Mk(){ja.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(A_=!0)})}function gO(){N_=!0,Mk(),Dk(),N_=!1}class gw{constructor(e,t,r,s,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ja.add(this),k_||(k_=!0,Pt.read(Mk),Pt.resolveKeyframes(Dk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}lO(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ja.delete(this)}cancel(){this.state==="scheduled"&&(ja.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yO=n=>n.startsWith("--");function vO(n,e,t){yO(e)?n.style.setProperty(e,t):n.style[e]=t}const _O=rw(()=>window.ScrollTimeline!==void 0),wO={};function xO(n,e){const t=rw(n);return()=>wO[e]??t()}const jk=xO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dd=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,iS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dd([0,.65,.55,1]),circOut:dd([.55,0,1,.45]),backIn:dd([.31,.01,.66,-.59]),backOut:dd([.33,1.53,.69,.99])};function Lk(n,e){if(n)return typeof n=="function"?jk()?Nk(n,e):"ease-out":wk(n)?dd(n):Array.isArray(n)?n.map(t=>Lk(t,e)||iS.easeOut):iS[n]}function EO(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:c="easeOut",times:d}={},h=void 0){const m={[e]:t};d&&(m.offset=d);const y=Lk(c,s);Array.isArray(y)&&(m.easing=y);const v={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),n.animate(m,v)}function Ok(n){return typeof n=="function"&&"applyToOptions"in n}function TO({type:n,...e}){return Ok(n)&&jk()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class SO extends pw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,nw(typeof e.type!="string");const h=TO(e);this.animation=EO(t,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=fw(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):vO(t,r,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return As(Number(e))}get time(){return As(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ks(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&_O()?(this.animation.timeline=e,jr):t(this)}}const Vk={anticipate:gk,backInOut:mk,circInOut:vk};function CO(n){return n in Vk}function bO(n){typeof n.ease=="string"&&CO(n.ease)&&(n.ease=Vk[n.ease])}const oS=10;class IO extends SO{constructor(e){bO(e),Rk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:o,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new mw({...a,autoplay:!1}),d=ks(this.finishedTime??this.time);t.setWithVelocity(c.sample(d-oS).value,c.sample(d).value,oS),c.stop()}}const aS=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(wo.test(n)||n==="0")&&!n.startsWith("url("));function kO(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function AO(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],a=aS(s,e),c=aS(o,e);return!a||!c?!1:kO(n)||(t==="spring"||Ok(t))&&r}function P_(n){n.duration=0,n.type}const NO=new Set(["opacity","clipPath","filter","transform"]),PO=rw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function RO(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:o,type:a}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return PO()&&t&&NO.has(t)&&(t!=="transform"||!h)&&!d&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}const DO=40;class MO extends pw{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",keyframes:c,name:d,motionValue:h,element:m,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ir.now();const v={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:a,name:d,motionValue:h,element:m,...y},E=m?.KeyframeResolver||gw;this.keyframeResolver=new E(c,(b,C,I)=>this.onKeyframesResolved(b,C,v,!I),d,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:o,type:a,velocity:c,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=ir.now(),AO(e,o,a,c)||((pi.instantAnimations||!d)&&m?.(fw(e,r,t)),e[0]=e[e.length-1],P_(r),r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>DO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!h&&RO(v)?new IO({...v,element:v.motionValue.owner.current}):new mw(v);E.finished.then(()=>this.notifyFinished()).catch(jr),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),gO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const jO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LO(n){const e=jO.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function Fk(n,e,t=1){const[r,s]=LO(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return ak(a)?parseFloat(a):a}return lw(s)?Fk(s,e,t+1):s}function yw(n,e){return n?.[e]??n?.default??n}const Uk=new Set(["width","height","top","left","right","bottom",...$c]),OO={test:n=>n==="auto",parse:n=>n},zk=n=>e=>e.test(n),Bk=[Bc,He,Ns,eo,kL,IL,OO],lS=n=>Bk.find(zk(n));function VO(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ck(n):!0}const FO=new Set(["brightness","contrast","saturate","opacity"]);function UO(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(cw)||[];if(!r)return n;const s=t.replace(r,"");let o=FO.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const zO=/\b([a-z-]*)\(.*?\)/gu,R_={...wo,getAnimatableNone:n=>{const e=n.match(zO);return e?e.map(UO).join(" "):n}},cS={...Bc,transform:Math.round},BO={rotate:eo,rotateX:eo,rotateY:eo,rotateZ:eo,scale:np,scaleX:np,scaleY:np,scaleZ:np,skew:eo,skewX:eo,skewY:eo,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:Od,originX:Y1,originY:Y1,originZ:He},vw={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...BO,zIndex:cS,fillOpacity:Od,strokeOpacity:Od,numOctaves:cS},$O={...vw,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:R_,WebkitFilter:R_},$k=n=>$O[n];function Hk(n,e){let t=$k(n);return t!==R_&&(t=wo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const HO=new Set(["auto","none","0"]);function WO(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!HO.has(o)&&Vd(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=Hk(t,s)}class qO extends gw{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),lw(h))){const m=Fk(h,t.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Uk.has(r)||e.length!==2)return;const[s,o]=e,a=lS(s),c=lS(o);if(a!==c)if(sS(a)&&sS(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Ma[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||VO(e[s]))&&r.push(s);r.length&&WO(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ma[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Ma[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function KO(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=t?.[n]??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const Wk=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function qk(n){return lk(n)&&"offsetHeight"in n}const uS=30,GO=n=>!isNaN(parseFloat(n));class QO{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=ir.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ir.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sw);const r=this.events[e].add(t);return e==="change"?()=>{r(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ir.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>uS)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,uS);return uk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Sc(n,e){return new QO(n,e)}const{schedule:_w}=xk(queueMicrotask,!1),es={x:!1,y:!1};function Kk(){return es.x||es.y}function YO(n){return n==="x"||n==="y"?es[n]?null:(es[n]=!0,()=>{es[n]=!1}):es.x||es.y?null:(es.x=es.y=!0,()=>{es.x=es.y=!1})}function Gk(n,e){const t=KO(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function dS(n){return!(n.pointerType==="touch"||Kk())}function XO(n,e,t={}){const[r,s,o]=Gk(n,t),a=c=>{if(!dS(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const m=y=>{dS(y)&&(h(y),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,s)};return r.forEach(c=>{c.addEventListener("pointerenter",a,s)}),o}const Qk=(n,e)=>e?n===e?!0:Qk(n,e.parentElement):!1,ww=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,JO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZO(n){return JO.has(n.tagName)||n.tabIndex!==-1}const Cp=new WeakSet;function hS(n){return e=>{e.key==="Enter"&&n(e)}}function Tv(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eV=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=hS(()=>{if(Cp.has(t))return;Tv(t,"down");const s=hS(()=>{Tv(t,"up")}),o=()=>Tv(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function fS(n){return ww(n)&&!Kk()}function tV(n,e,t={}){const[r,s,o]=Gk(n,t),a=c=>{const d=c.currentTarget;if(!fS(c))return;Cp.add(d);const h=e(d,c),m=(E,b)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Cp.has(d)&&Cp.delete(d),fS(E)&&typeof h=="function"&&h(E,{success:b})},y=E=>{m(E,d===window||d===document||t.useGlobalTarget||Qk(d,E.target))},v=E=>{m(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),qk(c)&&(c.addEventListener("focus",h=>eV(h,s)),!ZO(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function Yk(n){return lk(n)&&"ownerSVGElement"in n}function nV(n){return Yk(n)&&n.tagName==="svg"}const Vn=n=>!!(n&&n.getVelocity),rV=[...Bk,Xt,wo],sV=n=>rV.find(zk(n)),xw=S.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class iV extends S.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=qk(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oV({children:n,isPresent:e,anchorX:t,root:r}){const s=S.useId(),o=S.useRef(null),a=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=S.useContext(xw);return S.useInsertionEffect(()=>{const{width:d,height:h,top:m,left:y,right:v}=a.current;if(e||!o.current||!d||!h)return;const E=t==="left"?`left: ${y}`:`right: ${v}`;o.current.dataset.motionPopId=s;const b=document.createElement("style");c&&(b.nonce=c);const C=r??document.head;return C.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${E}px !important;
            top: ${m}px !important;
          }
        `),()=>{C.contains(b)&&C.removeChild(b)}},[e]),f.jsx(iV,{isPresent:e,childRef:o,sizeRef:a,children:S.cloneElement(n,{ref:o})})}const aV=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:a,anchorX:c,root:d})=>{const h=J0(lV),m=S.useId();let y=!0,v=S.useMemo(()=>(y=!1,{id:m,initial:e,isPresent:t,custom:s,onExitComplete:E=>{h.set(E,!0);for(const b of h.values())if(!b)return;r&&r()},register:E=>(h.set(E,!1),()=>h.delete(E))}),[t,h,r]);return o&&y&&(v={...v}),S.useMemo(()=>{h.forEach((E,b)=>h.set(b,!1))},[t]),S.useEffect(()=>{!t&&!h.size&&r&&r()},[t]),a==="popLayout"&&(n=f.jsx(oV,{isPresent:t,anchorX:c,root:d,children:n})),f.jsx(zm.Provider,{value:v,children:n})};function lV(){return new Map}function Xk(n=!0){const e=S.useContext(zm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=S.useId();S.useEffect(()=>{if(n)return s(o)},[n]);const a=S.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,a]:[!0]}const rp=n=>n.key||"";function pS(n){const e=[];return S.Children.forEach(n,t=>{S.isValidElement(t)&&e.push(t)}),e}const as=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:a=!1,anchorX:c="left",root:d})=>{const[h,m]=Xk(a),y=S.useMemo(()=>pS(n),[n]),v=a&&!h?[]:y.map(rp),E=S.useRef(!0),b=S.useRef(y),C=J0(()=>new Map),[I,k]=S.useState(y),[R,M]=S.useState(y);ok(()=>{E.current=!1,b.current=y;for(let K=0;K<R.length;K++){const P=rp(R[K]);v.includes(P)?C.delete(P):C.get(P)!==!0&&C.set(P,!1)}},[R,v.length,v.join("-")]);const F=[];if(y!==I){let K=[...y];for(let P=0;P<R.length;P++){const A=R[P],j=rp(A);v.includes(j)||(K.splice(P,0,A),F.push(A))}return o==="wait"&&F.length&&(K=F),M(pS(K)),k(y),null}const{forceRender:W}=S.useContext(X0);return f.jsx(f.Fragment,{children:R.map(K=>{const P=rp(K),A=a&&!h?!1:y===R||v.includes(P),j=()=>{if(C.has(P))C.set(P,!0);else return;let L=!0;C.forEach(V=>{V||(L=!1)}),L&&(W?.(),M(b.current),a&&m?.(),r&&r())};return f.jsx(aV,{isPresent:A,initial:!E.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:d,onExitComplete:A?void 0:j,anchorX:c,children:K},P)})})},Jk=S.createContext({strict:!1}),mS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Cc={};for(const n in mS)Cc[n]={isEnabled:e=>mS[n].some(t=>!!e[t])};function cV(n){for(const e in n)Cc[e]={...Cc[e],...n[e]}}const uV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||uV.has(n)}let Zk=n=>!Wp(n);function dV(n){typeof n=="function"&&(Zk=e=>e.startsWith("on")?!Wp(e):n(e))}try{dV(require("@emotion/is-prop-valid").default)}catch{}function hV(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(Zk(s)||t===!0&&Wp(s)||!e&&!Wp(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const Bm=S.createContext({});function $m(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Fd(n){return typeof n=="string"||Array.isArray(n)}const Ew=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Tw=["initial",...Ew];function Hm(n){return $m(n.animate)||Tw.some(e=>Fd(n[e]))}function eA(n){return!!(Hm(n)||n.variants)}function fV(n,e){if(Hm(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Fd(t)?t:void 0,animate:Fd(r)?r:void 0}}return n.inherit!==!1?e:{}}function pV(n){const{initial:e,animate:t}=fV(n,S.useContext(Bm));return S.useMemo(()=>({initial:e,animate:t}),[gS(e),gS(t)])}function gS(n){return Array.isArray(n)?n.join(" "):n}const Ud={};function mV(n){for(const e in n)Ud[e]=n[e],aw(e)&&(Ud[e].isCSSVariable=!0)}function tA(n,{layout:e,layoutId:t}){return Hc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ud[n]||n==="opacity")}const gV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yV=$c.length;function vV(n,e,t){let r="",s=!0;for(let o=0;o<yV;o++){const a=$c[o],c=n[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||t){const h=Wk(c,vw[a]);if(!d){s=!1;const m=gV[a]||a;r+=`${m}(${h}) `}t&&(e[a]=h)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Sw(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let a=!1,c=!1;for(const d in e){const h=e[d];if(Hc.has(d)){a=!0;continue}else if(aw(d)){s[d]=h;continue}else{const m=Wk(h,vw[d]);d.startsWith("origin")?(c=!0,o[d]=m):r[d]=m}}if(e.transform||(a||t?r.transform=vV(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${d} ${h} ${m}`}}const Cw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nA(n,e,t){for(const r in e)!Vn(e[r])&&!tA(r,t)&&(n[r]=e[r])}function _V({transformTemplate:n},e){return S.useMemo(()=>{const t=Cw();return Sw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function wV(n,e){const t=n.style||{},r={};return nA(r,t,n),Object.assign(r,_V(n,e)),r}function xV(n,e){const t={},r=wV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const EV={offset:"stroke-dashoffset",array:"stroke-dasharray"},TV={offset:"strokeDashoffset",array:"strokeDasharray"};function SV(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?EV:TV;n[o.offset]=He.transform(-r);const a=He.transform(e),c=He.transform(t);n[o.array]=`${a} ${c}`}function rA(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:a=0,...c},d,h,m){if(Sw(n,c,h),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&SV(y,s,o,a,!1)}const sA=()=>({...Cw(),attrs:{}}),iA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function CV(n,e,t,r){const s=S.useMemo(()=>{const o=sA();return rA(o,e,iA(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};nA(o,n.style,n),s.style={...o,...s.style}}return s}const bV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bw(n){return typeof n!="string"||n.includes("-")?!1:!!(bV.indexOf(n)>-1||/[A-Z]/u.test(n))}function IV(n,e,t,{latestValues:r},s,o=!1){const c=(bw(n)?CV:xV)(e,r,s,n),d=hV(e,typeof n=="string",o),h=n!==S.Fragment?{...d,...c,ref:t}:{},{children:m}=e,y=S.useMemo(()=>Vn(m)?m.get():m,[m]);return S.createElement(n,{...h,children:y})}function yS(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Iw(n,e,t,r){if(typeof e=="function"){const[s,o]=yS(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=yS(r);e=e(t!==void 0?t:n.custom,s,o)}return e}function bp(n){return Vn(n)?n.get():n}function kV({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:AV(t,r,s,n),renderState:e()}}function AV(n,e,t,r){const s={},o=r(n,{});for(const v in o)s[v]=bp(o[v]);let{initial:a,animate:c}=n;const d=Hm(n),h=eA(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||a===!1;const y=m?c:a;if(y&&typeof y!="boolean"&&!$m(y)){const v=Array.isArray(y)?y:[y];for(let E=0;E<v.length;E++){const b=Iw(n,v[E]);if(b){const{transitionEnd:C,transition:I,...k}=b;for(const R in k){let M=k[R];if(Array.isArray(M)){const F=m?M.length-1:0;M=M[F]}M!==null&&(s[R]=M)}for(const R in C)s[R]=C[R]}}}return s}const oA=n=>(e,t)=>{const r=S.useContext(Bm),s=S.useContext(zm),o=()=>kV(n,e,r,s);return t?o():J0(o)};function kw(n,e,t){const{style:r}=n,s={};for(const o in r)(Vn(r[o])||e.style&&Vn(e.style[o])||tA(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const NV=oA({scrapeMotionValuesFromProps:kw,createRenderState:Cw});function aA(n,e,t){const r=kw(n,e,t);for(const s in n)if(Vn(n[s])||Vn(e[s])){const o=$c.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}const PV=oA({scrapeMotionValuesFromProps:aA,createRenderState:sA}),RV=Symbol.for("motionComponentSymbol");function sc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function DV(n,e,t){return S.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):sc(t)&&(t.current=r))},[e])}const Aw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MV="framerAppearId",lA="data-"+Aw(MV),cA=S.createContext({});function jV(n,e,t,r,s){const{visualElement:o}=S.useContext(Bm),a=S.useContext(Jk),c=S.useContext(zm),d=S.useContext(xw).reducedMotion,h=S.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,y=S.useContext(cA);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&LV(h.current,t,s,y);const v=S.useRef(!1);S.useInsertionEffect(()=>{m&&v.current&&m.update(t,c)});const E=t[lA],b=S.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return ok(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),b.current&&m.animationState&&m.animationState.animateChanges())}),S.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),b.current=!1),m.enteringChildren=void 0)}),m}function LV(n,e,t,r){const{layoutId:s,layout:o,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:uA(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||c&&sc(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function uA(n){if(n)return n.options.allowProjection!==!1?n.projection:uA(n.parent)}function Sv(n,{forwardMotionProps:e=!1}={},t,r){t&&cV(t);const s=bw(n)?PV:NV;function o(c,d){let h;const m={...S.useContext(xw),...c,layoutId:OV(c)},{isStatic:y}=m,v=pV(c),E=s(c,y);if(!y&&Z0){VV();const b=FV(m);h=b.MeasureLayout,v.visualElement=jV(n,E,m,r,b.ProjectionNode)}return f.jsxs(Bm.Provider,{value:v,children:[h&&v.visualElement?f.jsx(h,{visualElement:v.visualElement,...m}):null,IV(n,c,DV(E,v.visualElement,d),E,y,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=S.forwardRef(o);return a[RV]=n,a}function OV({layoutId:n}){const e=S.useContext(X0).id;return e&&n!==void 0?e+"-"+n:n}function VV(n,e){S.useContext(Jk).strict}function FV(n){const{drag:e,layout:t}=Cc;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function UV(n,e){if(typeof Proxy>"u")return Sv;const t=new Map,r=(o,a)=>Sv(o,a,n,e),s=(o,a)=>r(o,a);return new Proxy(s,{get:(o,a)=>a==="create"?r:(t.has(a)||t.set(a,Sv(a,void 0,n,e)),t.get(a))})}function dA({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function zV({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function BV(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Cv(n){return n===void 0||n===1}function D_({scale:n,scaleX:e,scaleY:t}){return!Cv(n)||!Cv(e)||!Cv(t)}function xa(n){return D_(n)||hA(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function hA(n){return vS(n.x)||vS(n.y)}function vS(n){return n&&n!=="0%"}function qp(n,e,t){const r=n-t,s=e*r;return t+s}function _S(n,e,t,r,s){return s!==void 0&&(n=qp(n,s,r)),qp(n,t,r)+e}function M_(n,e=0,t=1,r,s){n.min=_S(n.min,e,t,r,s),n.max=_S(n.max,e,t,r,s)}function fA(n,{x:e,y:t}){M_(n.x,e.translate,e.scale,e.originPoint),M_(n.y,t.translate,t.scale,t.originPoint)}const wS=.999999999999,xS=1.0000000000001;function $V(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,a;for(let c=0;c<s;c++){o=t[c],a=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&oc(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,fA(n,a)),r&&xa(o.latestValues)&&oc(n,o.latestValues))}e.x<xS&&e.x>wS&&(e.x=1),e.y<xS&&e.y>wS&&(e.y=1)}function ic(n,e){n.min=n.min+e,n.max=n.max+e}function ES(n,e,t,r,s=.5){const o=Mt(n.min,n.max,s);M_(n,e,t,o,r)}function oc(n,e){ES(n.x,e.x,e.scaleX,e.scale,e.originX),ES(n.y,e.y,e.scaleY,e.scale,e.originY)}function pA(n,e){return dA(BV(n.getBoundingClientRect(),e))}function HV(n,e,t){const r=pA(n,t),{scroll:s}=e;return s&&(ic(r.x,s.offset.x),ic(r.y,s.offset.y)),r}const TS=()=>({translate:0,scale:1,origin:0,originPoint:0}),ac=()=>({x:TS(),y:TS()}),SS=()=>({min:0,max:0}),Wt=()=>({x:SS(),y:SS()}),j_={current:null},mA={current:!1};function WV(){if(mA.current=!0,!!Z0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>j_.current=n.matches;n.addEventListener("change",e),e()}else j_.current=!1}const qV=new WeakMap;function KV(n,e,t){for(const r in e){const s=e[r],o=t[r];if(Vn(s))n.addValue(r,s);else if(Vn(o))n.addValue(r,Sc(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Sc(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const CS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GV{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=ir.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Pt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Hm(t),this.isVariantNode=eA(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in y){const E=y[v];d[v]!==void 0&&Vn(E)&&E.set(d[v])}}mount(e){this.current=e,qV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),mA.current||WV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j_.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_o(this.notifyUpdate),_o(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Hc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Cc){const t=Cc[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<CS.length;r++){const s=CS[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=e[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=KV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Sc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ak(r)||ck(r))?r=parseFloat(r):!sV(r)&&wo.test(t)&&(r=Hk(e,t)),this.setBaseTarget(e,Vn(r)?r.get():r)),Vn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=Iw(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new sw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){_w.render(this.render)}}class gA extends GV{constructor(){super(...arguments),this.KeyframeResolver=qO}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function yA(n,{style:e,vars:t},r,s){const o=n.style;let a;for(a in e)o[a]=e[a];s?.applyProjectionStyles(o,r);for(a in t)o.setProperty(a,t[a])}function QV(n){return window.getComputedStyle(n)}class YV extends gA{constructor(){super(...arguments),this.type="html",this.renderInstance=yA}readValueFromInstance(e,t){if(Hc.has(t))return this.projection?.isProjecting?b_(t):dO(e,t);{const r=QV(e),s=(aw(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return pA(e,t)}build(e,t,r){Sw(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return kw(e,t,r)}}const vA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function XV(n,e,t,r){yA(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(vA.has(s)?s:Aw(s),e.attrs[s])}class JV extends gA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Hc.has(t)){const r=$k(t);return r&&r.default||0}return t=vA.has(t)?t:Aw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return aA(e,t,r)}build(e,t,r){rA(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){XV(e,t,r,s)}mount(e){this.isSVGTag=iA(e.tagName),super.mount(e)}}const ZV=(n,e)=>bw(n)?new JV(e):new YV(e,{allowProjection:n!==S.Fragment});function uc(n,e,t){const r=n.getProps();return Iw(r,e,t!==void 0?t:r.custom,n)}const L_=n=>Array.isArray(n);function e4(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Sc(t))}function t4(n){return L_(n)?n[n.length-1]||0:n}function n4(n,e){const t=uc(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const a in o){const c=t4(o[a]);e4(n,a,c)}}function r4(n){return!!(Vn(n)&&n.add)}function O_(n,e){const t=n.getValue("willChange");if(r4(t))return t.add(e);if(!t&&pi.WillChange){const r=new pi.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function _A(n){return n.props[lA]}const s4=n=>n!==null;function i4(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(s4),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}const o4={type:"spring",stiffness:500,damping:25,restSpeed:10},a4=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),l4={type:"keyframes",duration:.8},c4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u4=(n,{keyframes:e})=>e.length>2?l4:Hc.has(n)?n.startsWith("scale")?a4(e[1]):o4:c4;function d4({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:c,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const Nw=(n,e,t,r={},s,o)=>a=>{const c=yw(r,n)||{},d=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ks(d);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:s};d4(c)||Object.assign(m,u4(n,m)),m.duration&&(m.duration=ks(m.duration)),m.repeatDelay&&(m.repeatDelay=ks(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(P_(m),m.delay===0&&(y=!0)),(pi.instantAnimations||pi.skipAnimations)&&(y=!0,P_(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=i4(m.keyframes,c);if(v!==void 0){Pt.update(()=>{m.onUpdate(v),m.onComplete()});return}}return c.isSync?new mw(m):new MO(m)};function h4({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function wA(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(o=r);const d=[],h=s&&n.animationState&&n.animationState.getState()[s];for(const m in c){const y=n.getValue(m,n.latestValues[m]??null),v=c[m];if(v===void 0||h&&h4(h,m))continue;const E={delay:t,...yw(o||{},m)},b=y.get();if(b!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===b&&!E.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const k=_A(n);if(k){const R=window.MotionHandoffAnimation(k,m,Pt);R!==null&&(E.startTime=R,C=!0)}}O_(n,m),y.start(Nw(m,y,v,n.shouldReduceMotion&&Uk.has(m)?{type:!1}:E,n,C));const I=y.animation;I&&d.push(I)}return a&&Promise.all(d).then(()=>{Pt.update(()=>{a&&n4(n,a)})}),d}function xA(n,e,t,r=0,s=1){const o=Array.from(n).sort((h,m)=>h.sortNodePosition(m)).indexOf(e),a=n.size,c=(a-1)*r;return typeof t=="function"?t(o,a):s===1?o*r:c-o*r}function V_(n,e,t={}){const r=uc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(wA(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:y}=s;return f4(n,e,d,h,m,y,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,h]=c==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function f4(n,e,t=0,r=0,s=0,o=1,a){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(V_(d,e,{...a,delay:t+(typeof r=="function"?0:r)+xA(n.variantChildren,d,r,s,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function p4(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>V_(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=V_(n,e,t);else{const s=typeof e=="function"?uc(n,e,t.custom):e;r=Promise.all(wA(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function EA(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const m4=Tw.length;function TA(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?TA(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<m4;t++){const r=Tw[t],s=n.props[r];(Fd(s)||s===!1)&&(e[r]=s)}return e}const g4=[...Ew].reverse(),y4=Ew.length;function v4(n){return e=>Promise.all(e.map(({animation:t,options:r})=>p4(n,t,r)))}function _4(n){let e=v4(n),t=bS(),r=!0;const s=d=>(h,m)=>{const y=uc(n,m,d==="exit"?n.presenceContext?.custom:void 0);if(y){const{transition:v,transitionEnd:E,...b}=y;h={...h,...b,...E}}return h};function o(d){e=d(n)}function a(d){const{props:h}=n,m=TA(n.parent)||{},y=[],v=new Set;let E={},b=1/0;for(let I=0;I<y4;I++){const k=g4[I],R=t[k],M=h[k]!==void 0?h[k]:m[k],F=Fd(M),W=k===d?R.isActive:null;W===!1&&(b=I);let K=M===m[k]&&M!==h[k]&&F;if(K&&r&&n.manuallyAnimateOnMount&&(K=!1),R.protectedKeys={...E},!R.isActive&&W===null||!M&&!R.prevProp||$m(M)||typeof M=="boolean")continue;const P=w4(R.prevProp,M);let A=P||k===d&&R.isActive&&!K&&F||I>b&&F,j=!1;const L=Array.isArray(M)?M:[M];let V=L.reduce(s(k),{});W===!1&&(V={});const{prevResolvedValues:B={}}=R,O={...B,...V},ge=se=>{A=!0,v.has(se)&&(j=!0,v.delete(se)),R.needsAnimating[se]=!0;const z=n.getValue(se);z&&(z.liveStyle=!1)};for(const se in O){const z=V[se],oe=B[se];if(E.hasOwnProperty(se))continue;let le=!1;L_(z)&&L_(oe)?le=!EA(z,oe):le=z!==oe,le?z!=null?ge(se):v.add(se):z!==void 0&&v.has(se)?ge(se):R.protectedKeys[se]=!0}R.prevProp=M,R.prevResolvedValues=V,R.isActive&&(E={...E,...V}),r&&n.blockInitialAnimation&&(A=!1);const de=K&&P;A&&(!de||j)&&y.push(...L.map(se=>{const z={type:k};if(typeof se=="string"&&r&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:oe}=n,le=uc(oe,se);if(oe.enteringChildren&&le){const{delayChildren:$}=le.transition||{};z.delay=xA(oe.enteringChildren,n,$)}}return{animation:se,options:z}}))}if(v.size){const I={};if(typeof h.initial!="boolean"){const k=uc(n,Array.isArray(h.initial)?h.initial[0]:h.initial);k&&k.transition&&(I.transition=k.transition)}v.forEach(k=>{const R=n.getBaseTarget(k),M=n.getValue(k);M&&(M.liveStyle=!0),I[k]=R??null}),y.push({animation:I})}let C=!!y.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(y):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();n.variantChildren?.forEach(y=>y.animationState?.setActive(d,h)),t[d].isActive=h;const m=a(d);for(const y in t)t[y].protectedKeys={};return m}return{animateChanges:a,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=bS(),r=!0}}}function w4(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!EA(e,n):!1}function _a(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bS(){return{animate:_a(!0),whileInView:_a(),whileHover:_a(),whileTap:_a(),whileDrag:_a(),whileFocus:_a(),exit:_a()}}class Lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x4 extends Lo{constructor(e){super(e),e.animationState||(e.animationState=_4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$m(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let E4=0;class T4 extends Lo{constructor(){super(...arguments),this.id=E4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const S4={animation:{Feature:x4},exit:{Feature:T4}};function zd(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function ph(n){return{point:{x:n.pageX,y:n.pageY}}}const C4=n=>e=>ww(e)&&n(e,ph(e));function xd(n,e,t,r){return zd(n,e,C4(t),r)}const SA=1e-4,b4=1-SA,I4=1+SA,CA=.01,k4=0-CA,A4=0+CA;function Wn(n){return n.max-n.min}function N4(n,e,t){return Math.abs(n-e)<=t}function IS(n,e,t,r=.5){n.origin=r,n.originPoint=Mt(e.min,e.max,n.origin),n.scale=Wn(t)/Wn(e),n.translate=Mt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=b4&&n.scale<=I4||isNaN(n.scale))&&(n.scale=1),(n.translate>=k4&&n.translate<=A4||isNaN(n.translate))&&(n.translate=0)}function Ed(n,e,t,r){IS(n.x,e.x,t.x,r?r.originX:void 0),IS(n.y,e.y,t.y,r?r.originY:void 0)}function kS(n,e,t){n.min=t.min+e.min,n.max=n.min+Wn(e)}function P4(n,e,t){kS(n.x,e.x,t.x),kS(n.y,e.y,t.y)}function AS(n,e,t){n.min=e.min-t.min,n.max=n.min+Wn(e)}function Td(n,e,t){AS(n.x,e.x,t.x),AS(n.y,e.y,t.y)}function Pr(n){return[n("x"),n("y")]}const bA=({current:n})=>n?n.ownerDocument.defaultView:null,NS=(n,e)=>Math.abs(n-e);function R4(n,e){const t=NS(n.x,e.x),r=NS(n.y,e.y);return Math.sqrt(t**2+r**2)}class IA{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Iv(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,b=R4(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!b)return;const{point:C}=v,{timestamp:I}=bn;this.history.push({...C,timestamp:I});const{onStart:k,onMove:R}=this.handlers;E||(k&&k(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,v)},this.handlePointerMove=(v,E)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=bv(E,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(v,E)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Iv(v.type==="pointercancel"?this.lastMoveEventInfo:bv(E,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,k),C&&C(v,k)},!ww(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const c=ph(e),d=bv(c,this.transformPagePoint),{point:h}=d,{timestamp:m}=bn;this.history=[{...h,timestamp:m}];const{onSessionStart:y}=t;y&&y(e,Iv(d,this.history)),this.removeListeners=dh(xd(this.contextWindow,"pointermove",this.handlePointerMove),xd(this.contextWindow,"pointerup",this.handlePointerUp),xd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_o(this.updatePoint)}}function bv(n,e){return e?{point:e(n.point)}:n}function PS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Iv({point:n},e){return{point:n,delta:PS(n,kA(e)),offset:PS(n,D4(e)),velocity:M4(e,.1)}}function D4(n){return n[0]}function kA(n){return n[n.length-1]}function M4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=kA(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ks(e)));)t--;if(!r)return{x:0,y:0};const o=As(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function j4(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Mt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Mt(t,n,r.max):Math.min(n,t)),n}function RS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function L4(n,{top:e,left:t,bottom:r,right:s}){return{x:RS(n.x,t,s),y:RS(n.y,e,r)}}function DS(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function O4(n,e){return{x:DS(n.x,e.x),y:DS(n.y,e.y)}}function V4(n,e){let t=.5;const r=Wn(n),s=Wn(e);return s>r?t=Ld(e.min,e.max-r,n.min):r>s&&(t=Ld(n.min,n.max-s,e.min)),fi(0,1,t)}function F4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const F_=.35;function U4(n=F_){return n===!1?n=0:n===!0&&(n=F_),{x:MS(n,"left","right"),y:MS(n,"top","bottom")}}function MS(n,e,t){return{min:jS(n,e),max:jS(n,t)}}function jS(n,e){return typeof n=="number"?n:n[e]||0}const z4=new WeakMap;class B4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Wt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ph(y).point)},a=(y,v)=>{const{drag:E,dragPropagation:b,onDragStart:C}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YO(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pr(k=>{let R=this.getAxisMotionValue(k).get()||0;if(Ns.test(R)){const{projection:M}=this.visualElement;if(M&&M.layout){const F=M.layout.layoutBox[k];F&&(R=Wn(F)*(parseFloat(R)/100))}}this.originPoint[k]=R}),C&&Pt.postRender(()=>C(y,v)),O_(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:C,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:k}=v;if(b&&this.currentDirection===null){this.currentDirection=$4(k),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,k),this.updateAxis("y",v.point,k),this.visualElement.render(),I&&I(y,v)},d=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Pr(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new IA(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:bA(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&Pt.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!sp(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=j4(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&sc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=L4(r.layoutBox,e):this.constraints=!1,this.elastic=U4(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Pr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=F4(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!sc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=HV(r,s.root,this.visualElement.getTransformPagePoint());let a=O4(s.layout.layoutBox,o);if(t){const c=t(zV(a));this.hasMutatedConstraints=!!c,c&&(a=dA(c))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=Pr(m=>{if(!sp(m,t,this.currentDirection))return;let y=d&&d[m]||{};a&&(y={min:0,max:0});const v=s?200:1e6,E=s?40:1e7,b={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,b)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return O_(this.visualElement,e),r.start(Nw(e,r,0,t,this.visualElement,!1))}stopAnimation(){Pr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Pr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pr(t=>{const{drag:r}=this.getProps();if(!sp(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[t];o.set(e[t]-Mt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!sc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pr(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();s[a]=V4({min:d,max:d},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Pr(a=>{if(!sp(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];c.set(Mt(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;z4.set(this.visualElement,this);const e=this.visualElement.current,t=xd(e,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();sc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Pt.read(r);const a=zd(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Pr(m=>{const y=this.getAxisMotionValue(m);y&&(this.originPoint[m]+=d[m].translate,y.set(y.get()+d[m].translate))}),this.visualElement.render())}));return()=>{a(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=F_,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:c}}}function sp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function $4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class H4 extends Lo{constructor(e){super(e),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new B4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const LS=n=>(e,t)=>{n&&Pt.postRender(()=>n(e,t))};class W4 extends Lo{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(e){this.session=new IA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:LS(e),onStart:LS(t),onMove:r,onEnd:(o,a)=>{delete this.session,s&&Pt.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=xd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const rd={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(He.test(n))n=parseFloat(n);else return n;const t=OS(n,e.target.x),r=OS(n,e.target.y);return`${t}% ${r}%`}},q4={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=wo.parse(n);if(s.length>5)return r;const o=wo.createTransformer(n),a=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;s[0+a]/=c,s[1+a]/=d;const h=Mt(c,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),o(s)}};let kv=!1;class K4 extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;mV(G4),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),kv&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,kv=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Pt.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),_w.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;kv=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AA(n){const[e,t]=Xk(),r=S.useContext(X0);return f.jsx(K4,{...n,layoutGroup:r,switchLayoutGroup:S.useContext(cA),isPresent:e,safeToRemove:t})}const G4={borderRadius:{...rd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rd,borderTopRightRadius:rd,borderBottomLeftRadius:rd,borderBottomRightRadius:rd,boxShadow:q4};function Q4(n,e,t){const r=Vn(n)?n:Sc(n);return r.start(Nw("",r,e,t)),r.animation}const Y4=(n,e)=>n.depth-e.depth;class X4{constructor(){this.children=[],this.isDirty=!1}add(e){ew(this.children,e),this.isDirty=!0}remove(e){tw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Y4),this.isDirty=!1,this.children.forEach(e)}}function J4(n,e){const t=ir.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(_o(r),n(o-e))};return Pt.setup(r,!0),()=>_o(r)}const NA=["TopLeft","TopRight","BottomLeft","BottomRight"],Z4=NA.length,VS=n=>typeof n=="string"?parseFloat(n):n,FS=n=>typeof n=="number"||He.test(n);function eF(n,e,t,r,s,o){s?(n.opacity=Mt(0,t.opacity??1,tF(r)),n.opacityExit=Mt(e.opacity??1,0,nF(r))):o&&(n.opacity=Mt(e.opacity??1,t.opacity??1,r));for(let a=0;a<Z4;a++){const c=`border${NA[a]}Radius`;let d=US(e,c),h=US(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||FS(d)===FS(h)?(n[c]=Math.max(Mt(VS(d),VS(h),r),0),(Ns.test(h)||Ns.test(d))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=Mt(e.rotate||0,t.rotate||0,r))}function US(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const tF=PA(0,.5,yk),nF=PA(.5,.95,jr);function PA(n,e,t){return r=>r<n?0:r>e?1:t(Ld(n,e,r))}function zS(n,e){n.min=e.min,n.max=e.max}function Nr(n,e){zS(n.x,e.x),zS(n.y,e.y)}function BS(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function $S(n,e,t,r,s){return n-=e,n=qp(n,1/t,r),s!==void 0&&(n=qp(n,1/s,r)),n}function rF(n,e=0,t=1,r=.5,s,o=n,a=n){if(Ns.test(e)&&(e=parseFloat(e),e=Mt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=Mt(o.min,o.max,r);n===o&&(c-=e),n.min=$S(n.min,e,t,c,s),n.max=$S(n.max,e,t,c,s)}function HS(n,e,[t,r,s],o,a){rF(n,e[t],e[r],e[s],e.scale,o,a)}const sF=["x","scaleX","originX"],iF=["y","scaleY","originY"];function WS(n,e,t,r){HS(n.x,e,sF,t?t.x:void 0,r?r.x:void 0),HS(n.y,e,iF,t?t.y:void 0,r?r.y:void 0)}function qS(n){return n.translate===0&&n.scale===1}function RA(n){return qS(n.x)&&qS(n.y)}function KS(n,e){return n.min===e.min&&n.max===e.max}function oF(n,e){return KS(n.x,e.x)&&KS(n.y,e.y)}function GS(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function DA(n,e){return GS(n.x,e.x)&&GS(n.y,e.y)}function QS(n){return Wn(n.x)/Wn(n.y)}function YS(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class aF{constructor(){this.members=[]}add(e){ew(this.members,e),e.scheduleRender()}remove(e){if(tw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lF(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,a=t?.z||0;if((s||o||a)&&(r=`translate3d(${s}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:m,rotateX:y,rotateY:v,skewX:E,skewY:b}=t;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),y&&(r+=`rotateX(${y}deg) `),v&&(r+=`rotateY(${v}deg) `),E&&(r+=`skewX(${E}deg) `),b&&(r+=`skewY(${b}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Av=["","X","Y","Z"],cF=1e3;let uF=0;function Nv(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function MA(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=_A(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Pt,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&MA(r)}function jA({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},c=e?.()){this.id=uF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fF),this.nodes.forEach(yF),this.nodes.forEach(vF),this.nodes.forEach(pF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new X4)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new sw),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Yk(a)&&!nV(a),this.instance=a;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let m,y=0;const v=()=>this.root.updateBlockedByResize=!1;Pt.read(()=>{y=window.innerWidth}),n(a,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,m&&m(),m=J4(v,250),Ip.hasAnimatedSinceResize&&(Ip.hasAnimatedSinceResize=!1,this.nodes.forEach(ZS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||TF,{onLayoutAnimationStart:C,onLayoutAnimationComplete:I}=h.getProps(),k=!this.targetLayout||!DA(this.targetLayout,E),R=!y&&v;if(this.options.layoutRoot||this.resumeFrom||R||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...yw(b,"layout"),onPlay:C,onComplete:I};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(m,R)}else y||ZS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_o(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_F),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(XS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gF),this.nodes.forEach(dF),this.nodes.forEach(hF)):this.nodes.forEach(JS),this.clearAllSnapshots();const c=ir.now();bn.delta=fi(0,1e3/60,c-bn.timestamp),bn.timestamp=c,bn.isProcessing=!0,vv.update.process(bn),vv.preRender.process(bn),vv.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_w.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mF),this.sharedNodes.forEach(wF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wn(this.snapshot.measuredBox.x)&&!Wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RA(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||xa(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),SF(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Wt();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(CF))){const{scroll:h}=this.root;h&&(ic(c.x,h.offset.x),ic(c.y,h.offset.y))}return c}removeElementScroll(a){const c=Wt();if(Nr(c,a),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:y}=h;h!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&Nr(c,a),ic(c.x,m.offset.x),ic(c.y,m.offset.y))}return c}applyTransform(a,c=!1){const d=Wt();Nr(d,a);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&oc(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),xa(m.latestValues)&&oc(d,m.latestValues)}return xa(this.latestValues)&&oc(d,this.latestValues),d}removeTransform(a){const c=Wt();Nr(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!xa(h.latestValues))continue;D_(h.latestValues)&&h.updateSnapshot();const m=Wt(),y=h.measurePageBox();Nr(m,y),WS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return xa(this.latestValues)&&WS(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=bn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wt(),this.relativeTargetOrigin=Wt(),Td(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Wt(),this.targetWithTransforms=Wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nr(this.target,this.layout.layoutBox),fA(this.target,this.targetDelta)):Nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Wt(),this.relativeTargetOrigin=Wt(),Td(this.relativeTargetOrigin,this.target,v.target),Nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||D_(this.parent.latestValues)||hA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Nr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;$V(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Wt());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BS(this.prevProjectionDelta.x,this.projectionDelta.x),BS(this.prevProjectionDelta.y,this.projectionDelta.y)),Ed(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!YS(this.projectionDelta.x,this.prevProjectionDelta.x)||!YS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ac(),this.projectionDelta=ac(),this.projectionDeltaWithTransform=ac()}setAnimationOrigin(a,c=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},y=ac();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Wt(),E=d?d.source:void 0,b=this.layout?this.layout.source:void 0,C=E!==b,I=this.getStack(),k=!I||I.members.length<=1,R=!!(C&&!k&&this.options.crossfade===!0&&!this.path.some(EF));this.animationProgress=0;let M;this.mixTargetDelta=F=>{const W=F/1e3;eC(y.x,a.x,W),eC(y.y,a.y,W),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Td(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xF(this.relativeTarget,this.relativeTargetOrigin,v,W),M&&oF(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Wt()),Nr(M,this.relativeTarget)),C&&(this.animationValues=m,eF(m,h,this.latestValues,W,R,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_o(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{Ip.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Sc(0)),this.currentAnimation=Q4(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:m}=a;if(!(!c||!d||!h)){if(this!==a&&this.layout&&h&&LA(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Wt();const y=Wn(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+y;const v=Wn(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Nr(c,d),oc(c,m),Ed(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new aF),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Nv("z",a,h,this.animationValues);for(let m=0;m<Av.length;m++)Nv(`rotate${Av[m]}`,a,h,this.animationValues),Nv(`skew${Av[m]}`,a,h,this.animationValues);a.render();for(const m in h)a.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=bp(c?.pointerEvents)||"",a.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=bp(c?.pointerEvents)||""),this.hasProjected&&!xa(this.latestValues)&&(a.transform=d?d({},""):"none",this.hasProjected=!1);return}a.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let y=lF(this.projectionDeltaWithTransform,this.treeScale,m);d&&(y=d(m,y)),a.transform=y;const{x:v,y:E}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,h.animationValues?a.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:a.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in Ud){if(m[b]===void 0)continue;const{correct:C,applyTo:I,isCSSVariable:k}=Ud[b],R=y==="none"?m[b]:C(m[b],h);if(I){const M=I.length;for(let F=0;F<M;F++)a[I[F]]=R}else k?this.options.visualElement.renderState.vars[b]=R:a[b]=R}this.options.layoutId&&(a.pointerEvents=h===this?bp(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(XS),this.root.sharedNodes.clear()}}}function dF(n){n.updateLayout()}function hF(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?Pr(m=>{const y=o?e.measuredBox[m]:e.layoutBox[m],v=Wn(y);y.min=t[m].min,y.max=y.min+v}):LA(s,e.layoutBox,t)&&Pr(m=>{const y=o?e.measuredBox[m]:e.layoutBox[m],v=Wn(t[m]);y.max=y.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+v)});const a=ac();Ed(a,t,e.layoutBox);const c=ac();o?Ed(c,n.applyTransform(r,!0),e.measuredBox):Ed(c,t,e.layoutBox);const d=!RA(a);let h=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const E=Wt();Td(E,e.layoutBox,y.layoutBox);const b=Wt();Td(b,t,v.layoutBox),DA(E,b)||(h=!0),m.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=E,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function fF(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function pF(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function mF(n){n.clearSnapshot()}function XS(n){n.clearMeasurements()}function JS(n){n.isLayoutDirty=!1}function gF(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function ZS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function yF(n){n.resolveTargetDelta()}function vF(n){n.calcProjection()}function _F(n){n.resetSkewAndRotation()}function wF(n){n.removeLeadSnapshot()}function eC(n,e,t){n.translate=Mt(e.translate,0,t),n.scale=Mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function tC(n,e,t,r){n.min=Mt(e.min,t.min,r),n.max=Mt(e.max,t.max,r)}function xF(n,e,t,r){tC(n.x,e.x,t.x,r),tC(n.y,e.y,t.y,r)}function EF(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const TF={duration:.45,ease:[.4,0,.1,1]},nC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),rC=nC("applewebkit/")&&!nC("chrome/")?Math.round:jr;function sC(n){n.min=rC(n.min),n.max=rC(n.max)}function SF(n){sC(n.x),sC(n.y)}function LA(n,e,t){return n==="position"||n==="preserve-aspect"&&!N4(QS(e),QS(t),.2)}function CF(n){return n!==n.root&&n.scroll?.wasRoot}const bF=jA({attachResizeListener:(n,e)=>zd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pv={current:void 0},OA=jA({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Pv.current){const n=new bF({});n.mount(window),n.setOptions({layoutScroll:!0}),Pv.current=n}return Pv.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),IF={pan:{Feature:W4},drag:{Feature:H4,ProjectionNode:OA,MeasureLayout:AA}};function iC(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&Pt.postRender(()=>o(e,ph(e)))}class kF extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=XO(e,(t,r)=>(iC(this.node,r,"Start"),s=>iC(this.node,s,"End"))))}unmount(){}}class AF extends Lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dh(zd(this.node.current,"focus",()=>this.onFocus()),zd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function oC(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&Pt.postRender(()=>o(e,ph(e)))}class NF extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=tV(e,(t,r)=>(oC(this.node,r,"Start"),(s,{success:o})=>oC(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const U_=new WeakMap,Rv=new WeakMap,PF=n=>{const e=U_.get(n.target);e&&e(n)},RF=n=>{n.forEach(PF)};function DF({root:n,...e}){const t=n||document;Rv.has(t)||Rv.set(t,{});const r=Rv.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(RF,{root:n,...e})),r[s]}function MF(n,e,t){const r=DF(e);return U_.set(n,t),r.observe(n),()=>{U_.delete(n),r.unobserve(n)}}const jF={some:0,all:1};class LF extends Lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:jF[s]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),v=h?m:y;v&&v(d)};return MF(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(OF(e,t))&&this.startObserver()}unmount(){}}function OF({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const VF={inView:{Feature:LF},tap:{Feature:NF},focus:{Feature:AF},hover:{Feature:kF}},FF={layout:{ProjectionNode:OA,MeasureLayout:AA}},UF={...S4,...VF,...IF,...FF},qe=UV(UF,ZV);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BF=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),aC=n=>{const e=BF(n);return e.charAt(0).toUpperCase()+e.slice(1)},VA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=S.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...c},d)=>S.createElement("svg",{ref:d,...$F,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:VA("lucide",s),...c},[...a.map(([h,m])=>S.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(n,e)=>{const t=S.forwardRef(({className:r,...s},o)=>S.createElement(HF,{ref:o,iconNode:e,className:VA(`lucide-${zF(aC(n))}`,`lucide-${n}`,r),...s}));return t.displayName=aC(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],qF=Pe("award",WF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],GF=Pe("bell",KF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pw=Pe("calendar",QF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],XF=Pe("check",YF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rw=Pe("chevron-down",JF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],e3=Pe("chevron-up",ZF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Dw=Pe("circle-alert",t3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],r3=Pe("circle-check-big",n3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],lC=Pe("circle-help",s3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o3=Pe("circle",i3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],FA=Pe("clock",a3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],UA=Pe("crown",l3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],bs=Pe("download",c3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],d3=Pe("droplets",u3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],f3=Pe("eraser",h3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wm=Pe("eye-off",p3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mh=Pe("eye",m3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],y3=Pe("file-image",g3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_3=Pe("folder",v3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],x3=Pe("funnel",w3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],T3=Pe("globe",E3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],C3=Pe("grid-3x3",S3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],gh=Pe("heart",b3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zA=Pe("image",I3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A3=Pe("info",k3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yi=Pe("loader-circle",N3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cC=Pe("lock",P3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],BA=Pe("log-out",R3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],$A=Pe("mail",D3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],j3=Pe("menu",M3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Mw=Pe("message-circle",L3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M5 12h14",key:"1ays0h"}]],V3=Pe("minus",O3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],HA=Pe("moon",F3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],z3=Pe("move",U3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],$3=Pe("paint-bucket",B3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],Fa=Pe("palette",H3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],WA=Pe("pen-line",W3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],K3=Pe("pencil",q3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Dv=Pe("play",G3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],z_=Pe("plus",Q3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],X3=Pe("redo",Y3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Z3=Pe("refresh-cw",J3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],t6=Pe("rotate-ccw",e6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],r6=Pe("rotate-cw",n6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qm=Pe("save",s6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],jw=Pe("search",i6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],a6=Pe("send",o6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kp=Pe("settings",l6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Xa=Pe("share-2",c6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],d6=Pe("shield",u6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],f6=Pe("sliders-horizontal",h6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sa=Pe("sparkles",p6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],g6=Pe("square",m6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Lw=Pe("star",y6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],qA=Pe("sun",v6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],w6=Pe("tag",_6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],KA=Pe("trash-2",x6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],T6=Pe("trending-up",E6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C6=Pe("triangle-alert",S6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],xo=Pe("trophy",b6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],k6=Pe("undo",I6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Mv=Pe("upload",A6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ia=Pe("user",N6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Gp=Pe("users",P6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],D6=Pe("wand-sparkles",R6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lr=Pe("x",M6);function uC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function GA(...n){return e=>{let t=!1;const r=n.map(s=>{const o=uC(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():uC(n[s],null)}}}}function wt(...n){return S.useCallback(GA(...n),n)}function Bd(n){const e=j6(n),t=S.forwardRef((r,s)=>{const{children:o,...a}=r,c=S.Children.toArray(o),d=c.find(O6);if(d){const h=d.props.children,m=c.map(y=>y===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:y);return f.jsx(e,{...a,ref:s,children:S.isValidElement(h)?S.cloneElement(h,void 0,m):null})}return f.jsx(e,{...a,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var QA=Bd("Slot");function j6(n){const e=S.forwardRef((t,r)=>{const{children:s,...o}=t;if(S.isValidElement(s)){const a=F6(s),c=V6(o,s.props);return s.type!==S.Fragment&&(c.ref=r?GA(r,a):a),S.cloneElement(s,c)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var L6=Symbol("radix.slottable");function O6(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===L6}function V6(n,e){const t={...e};for(const r in e){const s=n[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?t[r]=(...c)=>{const d=o(...c);return s(...c),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...o}:r==="className"&&(t[r]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function F6(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function YA(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=YA(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function XA(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=YA(n))&&(r&&(r+=" "),r+=e);return r}const dC=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,hC=XA,JA=(n,e)=>t=>{var r;if(e?.variants==null)return hC(n,t?.class,t?.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(h=>{const m=t?.[h],y=o?.[h];if(m===null)return null;const v=dC(m)||dC(y);return s[h][v]}),c=t&&Object.entries(t).reduce((h,m)=>{let[y,v]=m;return v===void 0||(h[y]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:y,className:v,...E}=m;return Object.entries(E).every(b=>{let[C,I]=b;return Array.isArray(I)?I.includes({...o,...c}[C]):{...o,...c}[C]===I})?[...h,y,v]:h},[]);return hC(n,a,d,t?.class,t?.className)},Ow="-",U6=n=>{const e=B6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const c=a.split(Ow);return c[0]===""&&c.length!==1&&c.shift(),ZA(c,e)||z6(a)},getConflictingClassGroupIds:(a,c)=>{const d=t[a]||[];return c&&r[a]?[...d,...r[a]]:d}}},ZA=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?ZA(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(Ow);return e.validators.find(({validator:a})=>a(o))?.classGroupId},fC=/^\[(.+)\]$/,z6=n=>{if(fC.test(n)){const e=fC.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},B6=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)B_(t[s],r,s,e);return r},B_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:pC(e,s);o.classGroupId=t;return}if(typeof s=="function"){if($6(s)){B_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,a])=>{B_(a,pC(e,o),t,r)})})},pC=(n,e)=>{let t=n;return e.split(Ow).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},$6=n=>n.isThemeGetter,H6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,a)=>{t.set(o,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let a=t.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){t.has(o)?t.set(o,a):s(o,a)}}},$_="!",H_=":",W6=H_.length,q6=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let a=0,c=0,d=0,h;for(let b=0;b<s.length;b++){let C=s[b];if(a===0&&c===0){if(C===H_){o.push(s.slice(d,b)),d=b+W6;continue}if(C==="/"){h=b;continue}}C==="["?a++:C==="]"?a--:C==="("?c++:C===")"&&c--}const m=o.length===0?s:s.substring(d),y=K6(m),v=y!==m,E=h&&h>d?h-d:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:E}};if(e){const s=e+H_,o=r;r=a=>a.startsWith(s)?o(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},K6=n=>n.endsWith($_)?n.substring(0,n.length-1):n.startsWith($_)?n.substring(1):n,G6=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...o.sort(),a),o=[]):o.push(a)}),s.push(...o.sort()),s}},Q6=n=>({cache:H6(n.cacheSize),parseClassName:q6(n),sortModifiers:G6(n),...U6(n)}),Y6=/\s+/,X6=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,a=[],c=n.trim().split(Y6);let d="";for(let h=c.length-1;h>=0;h-=1){const m=c[h],{isExternal:y,modifiers:v,hasImportantModifier:E,baseClassName:b,maybePostfixModifierPosition:C}=t(m);if(y){d=m+(d.length>0?" "+d:d);continue}let I=!!C,k=r(I?b.substring(0,C):b);if(!k){if(!I){d=m+(d.length>0?" "+d:d);continue}if(k=r(b),!k){d=m+(d.length>0?" "+d:d);continue}I=!1}const R=o(v).join(":"),M=E?R+$_:R,F=M+k;if(a.includes(F))continue;a.push(F);const W=s(k,I);for(let K=0;K<W.length;++K){const P=W[K];a.push(M+P)}d=m+(d.length>0?" "+d:d)}return d};function J6(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=eN(e))&&(r&&(r+=" "),r+=t);return r}const eN=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=eN(n[r]))&&(t&&(t+=" "),t+=e);return t};function Z6(n,...e){let t,r,s,o=a;function a(d){const h=e.reduce((m,y)=>y(m),n());return t=Q6(h),r=t.cache.get,s=t.cache.set,o=c,c(d)}function c(d){const h=r(d);if(h)return h;const m=X6(d,t);return s(d,m),m}return function(){return o(J6.apply(null,arguments))}}const ln=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},tN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,nN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,e5=/^\d+\/\d+$/,t5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,r5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,s5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kl=n=>e5.test(n),Qe=n=>!!n&&!Number.isNaN(Number(n)),Xi=n=>!!n&&Number.isInteger(Number(n)),jv=n=>n.endsWith("%")&&Qe(n.slice(0,-1)),ii=n=>t5.test(n),o5=()=>!0,a5=n=>n5.test(n)&&!r5.test(n),rN=()=>!1,l5=n=>s5.test(n),c5=n=>i5.test(n),u5=n=>!De(n)&&!Me(n),d5=n=>Wc(n,oN,rN),De=n=>tN.test(n),wa=n=>Wc(n,aN,a5),Lv=n=>Wc(n,g5,Qe),mC=n=>Wc(n,sN,rN),h5=n=>Wc(n,iN,c5),ip=n=>Wc(n,lN,l5),Me=n=>nN.test(n),sd=n=>qc(n,aN),f5=n=>qc(n,y5),gC=n=>qc(n,sN),p5=n=>qc(n,oN),m5=n=>qc(n,iN),op=n=>qc(n,lN,!0),Wc=(n,e,t)=>{const r=tN.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},qc=(n,e,t=!1)=>{const r=nN.exec(n);return r?r[1]?e(r[1]):t:!1},sN=n=>n==="position"||n==="percentage",iN=n=>n==="image"||n==="url",oN=n=>n==="length"||n==="size"||n==="bg-size",aN=n=>n==="length",g5=n=>n==="number",y5=n=>n==="family-name",lN=n=>n==="shadow",v5=()=>{const n=ln("color"),e=ln("font"),t=ln("text"),r=ln("font-weight"),s=ln("tracking"),o=ln("leading"),a=ln("breakpoint"),c=ln("container"),d=ln("spacing"),h=ln("radius"),m=ln("shadow"),y=ln("inset-shadow"),v=ln("text-shadow"),E=ln("drop-shadow"),b=ln("blur"),C=ln("perspective"),I=ln("aspect"),k=ln("ease"),R=ln("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],W=()=>[...F(),Me,De],K=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],A=()=>[Me,De,d],j=()=>[Kl,"full","auto",...A()],L=()=>[Xi,"none","subgrid",Me,De],V=()=>["auto",{span:["full",Xi,Me,De]},Xi,Me,De],B=()=>[Xi,"auto",Me,De],O=()=>["auto","min","max","fr",Me,De],ge=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],de=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...A()],se=()=>[Kl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],z=()=>[n,Me,De],oe=()=>[...F(),gC,mC,{position:[Me,De]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",p5,d5,{size:[Me,De]}],ee=()=>[jv,sd,wa],G=()=>["","none","full",h,Me,De],ne=()=>["",Qe,sd,wa],fe=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[Qe,jv,gC,mC],he=()=>["","none",b,Me,De],_e=()=>["none",Qe,Me,De],we=()=>["none",Qe,Me,De],Ce=()=>[Qe,Me,De],je=()=>[Kl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ii],breakpoint:[ii],color:[o5],container:[ii],"drop-shadow":[ii],ease:["in","out","in-out"],font:[u5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ii],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ii],shadow:[ii],spacing:["px",Qe],text:[ii],"text-shadow":[ii],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kl,De,Me,I]}],container:["container"],columns:[{columns:[Qe,De,Me,c]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:W()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Xi,"auto",Me,De]}],basis:[{basis:[Kl,"full","auto",c,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Qe,Kl,"auto","initial","none",De]}],grow:[{grow:["",Qe,Me,De]}],shrink:[{shrink:["",Qe,Me,De]}],order:[{order:[Xi,"first","last","none",Me,De]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":O()}],"auto-rows":[{"auto-rows":O()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...ge(),"normal"]}],"justify-items":[{"justify-items":[...de(),"normal"]}],"justify-self":[{"justify-self":["auto",...de()]}],"align-content":[{content:["normal",...ge()]}],"align-items":[{items:[...de(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...de(),{baseline:["","last"]}]}],"place-content":[{"place-content":ge()}],"place-items":[{"place-items":[...de(),"baseline"]}],"place-self":[{"place-self":["auto",...de()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[c,"screen",...se()]}],"min-w":[{"min-w":[c,"screen","none",...se()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",t,sd,wa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Me,Lv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jv,De]}],"font-family":[{font:[f5,De,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Me,De]}],"line-clamp":[{"line-clamp":[Qe,"none",Me,Lv]}],leading:[{leading:[o,...A()]}],"list-image":[{"list-image":["none",Me,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Qe,"from-font","auto",Me,wa]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Qe,"auto",Me,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xi,Me,De],radial:["",Me,De],conic:[Xi,Me,De]},m5,h5]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Qe,Me,De]}],"outline-w":[{outline:["",Qe,sd,wa]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",m,op,ip]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",y,op,ip]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Qe,wa]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",v,op,ip]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Qe,Me,De]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Me,De]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":F()}],"mask-image-conic-pos":[{"mask-conic":[Qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,De]}],filter:[{filter:["","none",Me,De]}],blur:[{blur:he()}],brightness:[{brightness:[Qe,Me,De]}],contrast:[{contrast:[Qe,Me,De]}],"drop-shadow":[{"drop-shadow":["","none",E,op,ip]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Qe,Me,De]}],"hue-rotate":[{"hue-rotate":[Qe,Me,De]}],invert:[{invert:["",Qe,Me,De]}],saturate:[{saturate:[Qe,Me,De]}],sepia:[{sepia:["",Qe,Me,De]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,De]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[Qe,Me,De]}],"backdrop-contrast":[{"backdrop-contrast":[Qe,Me,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Qe,Me,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Qe,Me,De]}],"backdrop-invert":[{"backdrop-invert":["",Qe,Me,De]}],"backdrop-opacity":[{"backdrop-opacity":[Qe,Me,De]}],"backdrop-saturate":[{"backdrop-saturate":[Qe,Me,De]}],"backdrop-sepia":[{"backdrop-sepia":["",Qe,Me,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Qe,"initial",Me,De]}],ease:[{ease:["linear","initial",k,Me,De]}],delay:[{delay:[Qe,Me,De]}],animate:[{animate:["none",R,Me,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,Me,De]}],"perspective-origin":[{"perspective-origin":W()}],rotate:[{rotate:_e()}],"rotate-x":[{"rotate-x":_e()}],"rotate-y":[{"rotate-y":_e()}],"rotate-z":[{"rotate-z":_e()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[Me,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:W()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,De]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Qe,sd,wa,Lv]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_5=Z6(v5);function Ot(...n){return _5(XA(n))}const w5=JA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Se({className:n,variant:e,size:t,asChild:r=!1,...s}){const o=r?QA:"button";return f.jsx(o,{"data-slot":"button",className:Ot(w5({variant:e,size:t,className:n})),...s})}const x5=({width:n,height:e,pixelSize:t,selectedColor:r,tool:s,brushSize:o=1,onPixelChange:a,onStateChange:c,onColorPick:d,initialPixels:h})=>{const m=S.useRef(null),[y,v]=S.useState(!1),[E,b]=S.useState(null),[C,I]=S.useState(()=>{const G=h||Array(e).fill(null).map(()=>Array(n).fill("#ffffff")),ne={pixels:G.map(fe=>[...fe]),timestamp:Date.now()};return{pixels:G,history:[ne],historyIndex:0,canUndo:!1,canRedo:!1}});S.useEffect(()=>{if(h){const G={pixels:h.map(ne=>[...ne]),timestamp:Date.now()};I({pixels:h.map(ne=>[...ne]),history:[G],historyIndex:0,canUndo:!1,canRedo:!1})}else{const G=Array(e).fill(null).map(()=>Array(n).fill("#ffffff")),ne={pixels:G.map(fe=>[...fe]),timestamp:Date.now()};I({pixels:G,history:[ne],historyIndex:0,canUndo:!1,canRedo:!1})}},[n,e,h]);const{pixels:k,history:R,historyIndex:M}=C,F=S.useCallback((G,ne,fe)=>{const pe=k[ne][G];if(pe===fe)return;const te=[[G,ne]],he=new Set,_e=k.map(we=>[...we]);for(;te.length>0;){const[we,Ce]=te.pop(),je=`${we},${Ce}`;he.has(je)||we<0||we>=n||Ce<0||Ce>=e||_e[Ce][we]===pe&&(he.add(je),_e[Ce][we]=fe,te.push([we+1,Ce],[we-1,Ce],[we,Ce+1],[we,Ce-1]))}return _e},[k,n,e]),W=S.useCallback((G,ne,fe,pe,te)=>{const he=k.map(J=>[...J]);let _e=Math.abs(fe-G),we=Math.abs(pe-ne),Ce=G<fe?1:-1,je=ne<pe?1:-1,ce=_e-we;for(;G>=0&&G<n&&ne>=0&&ne<e&&(he[ne][G]=te),!(G===fe&&ne===pe);){let J=2*ce;J>-we&&(ce-=we,G+=Ce),J<_e&&(ce+=_e,ne+=je)}return he},[k,n,e]),K=S.useCallback((G,ne,fe,pe,te)=>{const he=k.map(ce=>[...ce]),_e=Math.min(G,fe),we=Math.max(G,fe),Ce=Math.min(ne,pe),je=Math.max(ne,pe);for(let ce=Ce;ce<=je;ce++)for(let J=_e;J<=we;J++)J>=0&&J<n&&ce>=0&&ce<e&&(he[ce][J]=te);return he},[k,n,e]),P=S.useCallback((G,ne,fe,pe)=>{const te=k.map(Ce=>[...Ce]);let he=fe,_e=0,we=0;for(;he>=_e;)[[G+he,ne+_e],[G+_e,ne+he],[G-_e,ne+he],[G-he,ne+_e],[G-he,ne-_e],[G-_e,ne-he],[G+_e,ne-he],[G+he,ne-_e]].forEach(([je,ce])=>{je>=0&&je<n&&ce>=0&&ce<e&&(te[ce][je]=pe)}),we<=0&&(_e+=1,we+=2*_e+1),we>0&&(he-=1,we-=2*he+1);return te},[k,n,e]),A=S.useCallback((G,ne,fe,pe=10)=>{const te=k.map(he=>[...he]);for(let he=0;he<pe;he++){const _e=Math.random()*2*Math.PI,we=Math.random()*3,Ce=Math.round(G+Math.cos(_e)*we),je=Math.round(ne+Math.sin(_e)*we);Ce>=0&&Ce<n&&je>=0&&je<e&&(te[je][Ce]=fe)}return te},[k,n,e]),j=S.useCallback(G=>{I(ne=>{const fe={pixels:G.map(he=>[...he]),timestamp:Date.now()},pe=ne.history.slice(0,ne.historyIndex+1);pe.push(fe),pe.length>50&&pe.shift();const te={pixels:G,history:pe,historyIndex:pe.length-1,canUndo:pe.length>1,canRedo:!1};return c?.(te),te})},[c]),L=S.useCallback(()=>{I(G=>{if(G.historyIndex>0){const ne=G.historyIndex-1,fe={...G,pixels:G.history[ne].pixels.map(pe=>[...pe]),historyIndex:ne,canUndo:ne>0,canRedo:!0};return c?.(fe),fe}return G})},[c]),V=S.useCallback(()=>{I(G=>{if(G.historyIndex<G.history.length-1){const ne=G.historyIndex+1,fe={...G,pixels:G.history[ne].pixels.map(pe=>[...pe]),historyIndex:ne,canUndo:!0,canRedo:ne<G.history.length-1};return c?.(fe),fe}return G})},[c]);S.useEffect(()=>{window.canvasUndo=L,window.canvasRedo=V,window.canvasGetState=()=>C},[L,V,C]);const B=S.useCallback((G,ne,fe)=>{const pe=m.current;if(!pe)return;const te=pe.getContext("2d");te&&(te.fillStyle=fe,te.fillRect(G*t,ne*t,t,t),te.strokeStyle="#e5e7eb",te.lineWidth=.5,te.strokeRect(G*t,ne*t,t,t))},[t]),O=S.useCallback(()=>{const G=m.current;if(!G)return;const ne=G.getContext("2d");if(ne){ne.clearRect(0,0,G.width,G.height);for(let fe=0;fe<e;fe++)for(let pe=0;pe<n;pe++)B(pe,fe,k[fe][pe]);E&&(s==="line"||s==="rectangle"||s==="circle")&&(ne.fillStyle="#ff0000",ne.fillRect(E.x*t-2,E.y*t-2,4,4))}},[k,n,e,B,E,s,t]);S.useEffect(()=>{O()},[O]);const ge=S.useCallback(G=>{const ne=m.current;if(!ne)return;const fe=ne.getBoundingClientRect(),pe="touches"in G?G.touches[0].clientX:G.clientX,te="touches"in G?G.touches[0].clientY:G.clientY,he=Math.floor((pe-fe.left)/t),_e=Math.floor((te-fe.top)/t);if(he>=0&&he<n&&_e>=0&&_e<e){let we;if(s==="fill")we=F(he,_e,r),we&&j(we);else if(s==="eyedropper"){const Ce=k[_e][he];d?.(Ce);return}else if(s==="spray")we=A(he,_e,r),we&&j(we);else if(s==="line"||s==="rectangle"||s==="circle")if(E){let Ce;const je=r;if(s==="line")Ce=W(E.x,E.y,he,_e,je);else if(s==="rectangle")Ce=K(E.x,E.y,he,_e,je);else if(s==="circle"){const ce=Math.sqrt(Math.pow(he-E.x,2)+Math.pow(_e-E.y,2));Ce=P(E.x,E.y,Math.round(ce),je)}Ce&&j(Ce),b(null)}else{b({x:he,y:_e});return}else{if(s==="move")return;{const Ce=s==="eraser"?"#ffffff":r;we=k.map(je=>[...je]);for(let je=-Math.floor(o/2);je<=Math.floor(o/2);je++)for(let ce=-Math.floor(o/2);ce<=Math.floor(o/2);ce++){const J=he+ce,Ae=_e+je;J>=0&&J<n&&Ae>=0&&Ae<e&&(we[Ae][J]=Ce)}y?I(je=>({...je,pixels:we})):j(we)}}a?.(he,_e,k[_e][he])}},[n,e,t,r,s,o,a,d,F,A,W,K,P,j,k,y,E]),de=G=>{v(!0),ge(G)},ie=G=>{y&&ge(G)},se=()=>{v(!1),(s==="line"||s==="rectangle"||s==="circle")&&b(null)},z=G=>{G.preventDefault(),v(!0),ge(G)},oe=G=>{G.preventDefault(),y&&ge(G)},le=G=>{G.preventDefault(),v(!1),(s==="line"||s==="rectangle"||s==="circle")&&b(null)},$=S.useCallback(()=>{const G=m.current;if(!G)return"";const ne=G.getContext("2d");if(!ne)return"";ne.clearRect(0,0,G.width,G.height);for(let fe=0;fe<e;fe++)for(let pe=0;pe<n;pe++)ne.fillStyle=k[fe][pe],ne.fillRect(pe*t,fe*t,t,t);return G.toDataURL("image/png")},[k,n,e,t]),ee=S.useCallback((G=.9)=>{const ne=m.current;if(!ne)return"";const fe=ne.getContext("2d");if(!fe)return"";fe.fillStyle="#ffffff",fe.fillRect(0,0,ne.width,ne.height);for(let pe=0;pe<e;pe++)for(let te=0;te<n;te++)fe.fillStyle=k[pe][te],fe.fillRect(te*t,pe*t,t,t);return ne.toDataURL("image/jpeg",G)},[k,n,e,t]);return S.useEffect(()=>{window.canvasExportPNG=$,window.canvasExportJPEG=ee},[$,ee]),f.jsx("div",{className:"flex justify-center items-center bg-gray-100 p-4 rounded-lg",children:f.jsx("canvas",{ref:m,width:n*t,height:e*t,className:"border-2 border-gray-300 cursor-crosshair bg-white",onMouseDown:de,onMouseMove:ie,onMouseUp:se,onMouseLeave:se,onTouchStart:z,onTouchMove:oe,onTouchEnd:le,style:{touchAction:"none"}})})},E5=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#800000","#008000","#000080","#808000","#800080","#008080","#C0C0C0","#808080","#9999FF","#993366","#FFFFCC","#CCFFFF","#660066","#FF8080","#0066CC","#CCCCFF","#FFA500","#FFB6C1","#20B2AA","#87CEEB","#DDA0DD","#F0E68C","#B0E0E6","#FFDAB9","#00CCFF","#CCFFCC","#FFFF99","#99CCFF","#FF99CC","#CC99FF","#FFCC99","#E6E6FA"],W_=({selectedColor:n,onColorSelect:e})=>f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"mb-3 text-center",children:"Bảng màu"}),f.jsx("div",{className:"grid grid-cols-8 gap-2 max-w-64 mx-auto",children:E5.map((t,r)=>f.jsx(qe.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:`w-8 h-8 rounded-md border-2 ${n===t?"border-gray-800 ring-2 ring-blue-500":"border-gray-300"}`,style:{backgroundColor:t},onClick:()=>e(t),initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:r*.02}},t))}),f.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2",children:[f.jsx("span",{className:"text-sm",children:"Màu đã chọn:"}),f.jsx("div",{className:"w-8 h-8 rounded-md border-2 border-gray-300",style:{backgroundColor:n}})]})]});function Qp(n,[e,t]){return Math.min(t,Math.max(e,n))}function rt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Oo(n,e=[]){let t=[];function r(o,a){const c=S.createContext(a),d=t.length;t=[...t,a];const h=y=>{const{scope:v,children:E,...b}=y,C=v?.[n]?.[d]||c,I=S.useMemo(()=>b,Object.values(b));return f.jsx(C.Provider,{value:I,children:E})};h.displayName=o+"Provider";function m(y,v){const E=v?.[n]?.[d]||c,b=S.useContext(E);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[h,m]}const s=()=>{const o=t.map(a=>S.createContext(a));return function(c){const d=c?.[n]||o;return S.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return s.scopeName=n,[r,T5(s,...e)]}function T5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((c,{useScope:d,scopeName:h})=>{const y=d(o)[`__scope${h}`];return{...c,...y}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var dn=globalThis?.document?S.useLayoutEffect:()=>{},S5=ik[" useInsertionEffect ".trim().toString()]||dn;function bc({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,o,a]=C5({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:s;{const m=S.useRef(n!==void 0);S.useEffect(()=>{const y=m.current;y!==c&&console.warn(`${r} is changing from ${y?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const h=S.useCallback(m=>{if(c){const y=b5(m)?m(n):m;y!==n&&a.current?.(y)}else o(m)},[c,n,o,a]);return[d,h]}function C5({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),o=S.useRef(e);return S5(()=>{o.current=e},[e]),S.useEffect(()=>{s.current!==t&&(o.current?.(t),s.current=t)},[t,s]),[t,r,o]}function b5(n){return typeof n=="function"}var I5=S.createContext(void 0);function Km(n){const e=S.useContext(I5);return n||e||"ltr"}function Vw(n){const e=S.useRef({value:n,previous:n});return S.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function Fw(n){const[e,t]=S.useState(void 0);return dn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,c;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,c=h.blockSize}else a=n.offsetWidth,c=n.offsetHeight;t({width:a,height:c})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var yh=sk();const k5=rk(yh);var A5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xe=A5.reduce((n,e)=>{const t=Bd(`Primitive.${e}`),r=S.forwardRef((s,o)=>{const{asChild:a,...c}=s,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(d,{...c,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function N5(n,e){n&&yh.flushSync(()=>n.dispatchEvent(e))}function Uw(n){const e=n+"CollectionProvider",[t,r]=Oo(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=C=>{const{scope:I,children:k}=C,R=Zi.useRef(null),M=Zi.useRef(new Map).current;return f.jsx(s,{scope:I,itemMap:M,collectionRef:R,children:k})};a.displayName=e;const c=n+"CollectionSlot",d=Bd(c),h=Zi.forwardRef((C,I)=>{const{scope:k,children:R}=C,M=o(c,k),F=wt(I,M.collectionRef);return f.jsx(d,{ref:F,children:R})});h.displayName=c;const m=n+"CollectionItemSlot",y="data-radix-collection-item",v=Bd(m),E=Zi.forwardRef((C,I)=>{const{scope:k,children:R,...M}=C,F=Zi.useRef(null),W=wt(I,F),K=o(m,k);return Zi.useEffect(()=>(K.itemMap.set(F,{ref:F,...M}),()=>void K.itemMap.delete(F))),f.jsx(v,{[y]:"",ref:W,children:R})});E.displayName=m;function b(C){const I=o(n+"CollectionConsumer",C);return Zi.useCallback(()=>{const R=I.collectionRef.current;if(!R)return[];const M=Array.from(R.querySelectorAll(`[${y}]`));return Array.from(I.itemMap.values()).sort((K,P)=>M.indexOf(K.ref.current)-M.indexOf(P.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:a,Slot:h,ItemSlot:E},b,r]}var cN=["PageUp","PageDown"],uN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Kc="Slider",[q_,P5,R5]=Uw(Kc),[hN,IJ]=Oo(Kc,[R5]),[D5,Gm]=hN(Kc),fN=S.forwardRef((n,e)=>{const{name:t,min:r=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[r],value:m,onValueChange:y=()=>{},onValueCommit:v=()=>{},inverted:E=!1,form:b,...C}=n,I=S.useRef(new Set),k=S.useRef(0),M=a==="horizontal"?M5:j5,[F=[],W]=bc({prop:m,defaultProp:h,onChange:V=>{[...I.current][k.current]?.focus(),y(V)}}),K=S.useRef(F);function P(V){const B=U5(F,V);L(V,B)}function A(V){L(V,k.current)}function j(){const V=K.current[k.current];F[k.current]!==V&&v(F)}function L(V,B,{commit:O}={commit:!1}){const ge=H5(o),de=W5(Math.round((V-r)/o)*o+r,ge),ie=Qp(de,[r,s]);W((se=[])=>{const z=V5(se,ie,B);if($5(z,d*o)){k.current=z.indexOf(ie);const oe=String(z)!==String(se);return oe&&O&&v(z),oe?z:se}else return se})}return f.jsx(D5,{scope:n.__scopeSlider,name:t,disabled:c,min:r,max:s,valueIndexToChangeRef:k,thumbs:I.current,values:F,orientation:a,form:b,children:f.jsx(q_.Provider,{scope:n.__scopeSlider,children:f.jsx(q_.Slot,{scope:n.__scopeSlider,children:f.jsx(M,{"aria-disabled":c,"data-disabled":c?"":void 0,...C,ref:e,onPointerDown:rt(C.onPointerDown,()=>{c||(K.current=F)}),min:r,max:s,inverted:E,onSlideStart:c?void 0:P,onSlideMove:c?void 0:A,onSlideEnd:c?void 0:j,onHomeKeyDown:()=>!c&&L(r,0,{commit:!0}),onEndKeyDown:()=>!c&&L(s,F.length-1,{commit:!0}),onStepKeyDown:({event:V,direction:B})=>{if(!c){const de=cN.includes(V.key)||V.shiftKey&&uN.includes(V.key)?10:1,ie=k.current,se=F[ie],z=o*de*B;L(se+z,ie,{commit:!0})}}})})})})});fN.displayName=Kc;var[pN,mN]=hN(Kc,{startEdge:"left",endEdge:"right",size:"width",direction:1}),M5=S.forwardRef((n,e)=>{const{min:t,max:r,dir:s,inverted:o,onSlideStart:a,onSlideMove:c,onSlideEnd:d,onStepKeyDown:h,...m}=n,[y,v]=S.useState(null),E=wt(e,M=>v(M)),b=S.useRef(void 0),C=Km(s),I=C==="ltr",k=I&&!o||!I&&o;function R(M){const F=b.current||y.getBoundingClientRect(),W=[0,F.width],P=zw(W,k?[t,r]:[r,t]);return b.current=F,P(M-F.left)}return f.jsx(pN,{scope:n.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:f.jsx(gN,{dir:C,"data-orientation":"horizontal",...m,ref:E,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:M=>{const F=R(M.clientX);a?.(F)},onSlideMove:M=>{const F=R(M.clientX);c?.(F)},onSlideEnd:()=>{b.current=void 0,d?.()},onStepKeyDown:M=>{const W=dN[k?"from-left":"from-right"].includes(M.key);h?.({event:M,direction:W?-1:1})}})})}),j5=S.forwardRef((n,e)=>{const{min:t,max:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:d,...h}=n,m=S.useRef(null),y=wt(e,m),v=S.useRef(void 0),E=!s;function b(C){const I=v.current||m.current.getBoundingClientRect(),k=[0,I.height],M=zw(k,E?[r,t]:[t,r]);return v.current=I,M(C-I.top)}return f.jsx(pN,{scope:n.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:f.jsx(gN,{"data-orientation":"vertical",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const I=b(C.clientY);o?.(I)},onSlideMove:C=>{const I=b(C.clientY);a?.(I)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:C=>{const k=dN[E?"from-bottom":"from-top"].includes(C.key);d?.({event:C,direction:k?-1:1})}})})}),gN=S.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:d,...h}=n,m=Gm(Kc,t);return f.jsx(Xe.span,{...h,ref:e,onKeyDown:rt(n.onKeyDown,y=>{y.key==="Home"?(a(y),y.preventDefault()):y.key==="End"?(c(y),y.preventDefault()):cN.concat(uN).includes(y.key)&&(d(y),y.preventDefault())}),onPointerDown:rt(n.onPointerDown,y=>{const v=y.target;v.setPointerCapture(y.pointerId),y.preventDefault(),m.thumbs.has(v)?v.focus():r(y)}),onPointerMove:rt(n.onPointerMove,y=>{y.target.hasPointerCapture(y.pointerId)&&s(y)}),onPointerUp:rt(n.onPointerUp,y=>{const v=y.target;v.hasPointerCapture(y.pointerId)&&(v.releasePointerCapture(y.pointerId),o(y))})})}),yN="SliderTrack",vN=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=Gm(yN,t);return f.jsx(Xe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});vN.displayName=yN;var K_="SliderRange",_N=S.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,s=Gm(K_,t),o=mN(K_,t),a=S.useRef(null),c=wt(e,a),d=s.values.length,h=s.values.map(v=>EN(v,s.min,s.max)),m=d>1?Math.min(...h):0,y=100-Math.max(...h);return f.jsx(Xe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...n.style,[o.startEdge]:m+"%",[o.endEdge]:y+"%"}})});_N.displayName=K_;var G_="SliderThumb",wN=S.forwardRef((n,e)=>{const t=P5(n.__scopeSlider),[r,s]=S.useState(null),o=wt(e,c=>s(c)),a=S.useMemo(()=>r?t().findIndex(c=>c.ref.current===r):-1,[t,r]);return f.jsx(L5,{...n,ref:o,index:a})}),L5=S.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:s,...o}=n,a=Gm(G_,t),c=mN(G_,t),[d,h]=S.useState(null),m=wt(e,R=>h(R)),y=d?a.form||!!d.closest("form"):!0,v=Fw(d),E=a.values[r],b=E===void 0?0:EN(E,a.min,a.max),C=F5(r,a.values.length),I=v?.[c.size],k=I?z5(I,b,c.direction):0;return S.useEffect(()=>{if(d)return a.thumbs.add(d),()=>{a.thumbs.delete(d)}},[d,a.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${b}% + ${k}px)`},children:[f.jsx(q_.ItemSlot,{scope:n.__scopeSlider,children:f.jsx(Xe.span,{role:"slider","aria-label":n["aria-label"]||C,"aria-valuemin":a.min,"aria-valuenow":E,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:m,style:E===void 0?{display:"none"}:n.style,onFocus:rt(n.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),y&&f.jsx(xN,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:E},r)]})});wN.displayName=G_;var O5="RadioBubbleInput",xN=S.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const s=S.useRef(null),o=wt(s,r),a=Vw(e);return S.useEffect(()=>{const c=s.current;if(!c)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const y=new Event("input",{bubbles:!0});m.call(c,e),c.dispatchEvent(y)}},[a,e]),f.jsx(Xe.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});xN.displayName=O5;function V5(n=[],e,t){const r=[...n];return r[t]=e,r.sort((s,o)=>s-o)}function EN(n,e,t){const o=100/(t-e)*(n-e);return Qp(o,[0,100])}function F5(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function U5(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),r=Math.min(...t);return t.indexOf(r)}function z5(n,e,t){const r=n/2,o=zw([0,50],[0,r]);return(r-o(e)*t)*t}function B5(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function $5(n,e){if(e>0){const t=B5(n);return Math.min(...t)>=e}return!0}function zw(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function H5(n){return(String(n).split(".")[1]||"").length}function W5(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var q5=fN,K5=vN,G5=_N,Q5=wN;function Yp({className:n,defaultValue:e,value:t,min:r=0,max:s=100,...o}){const a=S.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[r,s],[t,e,r,s]);return f.jsxs(q5,{"data-slot":"slider",defaultValue:e,value:t,min:r,max:s,className:Ot("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...o,children:[f.jsx(K5,{"data-slot":"slider-track",className:Ot("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:f.jsx(G5,{"data-slot":"slider-range",className:Ot("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(c,d)=>f.jsx(Q5,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}var Y5="Label",TN=S.forwardRef((n,e)=>f.jsx(Xe.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));TN.displayName=Y5;var X5=TN;function it({className:n,...e}){return f.jsx(X5,{"data-slot":"label",className:Ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}function mi(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function J5(n,e=globalThis?.document){const t=mi(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Z5="DismissableLayer",Q_="dismissableLayer.update",eU="dismissableLayer.pointerDownOutside",tU="dismissableLayer.focusOutside",yC,SN=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),CN=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:c,...d}=n,h=S.useContext(SN),[m,y]=S.useState(null),v=m?.ownerDocument??globalThis?.document,[,E]=S.useState({}),b=wt(e,P=>y(P)),C=Array.from(h.layers),[I]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),k=C.indexOf(I),R=m?C.indexOf(m):-1,M=h.layersWithOutsidePointerEventsDisabled.size>0,F=R>=k,W=sU(P=>{const A=P.target,j=[...h.branches].some(L=>L.contains(A));!F||j||(s?.(P),a?.(P),P.defaultPrevented||c?.())},v),K=iU(P=>{const A=P.target;[...h.branches].some(L=>L.contains(A))||(o?.(P),a?.(P),P.defaultPrevented||c?.())},v);return J5(P=>{R===h.layers.size-1&&(r?.(P),!P.defaultPrevented&&c&&(P.preventDefault(),c()))},v),S.useEffect(()=>{if(m)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(yC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),vC(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=yC)}},[m,v,t,h]),S.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),vC())},[m,h]),S.useEffect(()=>{const P=()=>E({});return document.addEventListener(Q_,P),()=>document.removeEventListener(Q_,P)},[]),f.jsx(Xe.div,{...d,ref:b,style:{pointerEvents:M?F?"auto":"none":void 0,...n.style},onFocusCapture:rt(n.onFocusCapture,K.onFocusCapture),onBlurCapture:rt(n.onBlurCapture,K.onBlurCapture),onPointerDownCapture:rt(n.onPointerDownCapture,W.onPointerDownCapture)})});CN.displayName=Z5;var nU="DismissableLayerBranch",rU=S.forwardRef((n,e)=>{const t=S.useContext(SN),r=S.useRef(null),s=wt(e,r);return S.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),f.jsx(Xe.div,{...n,ref:s})});rU.displayName=nU;function sU(n,e=globalThis?.document){const t=mi(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const o=c=>{if(c.target&&!r.current){let d=function(){bN(eU,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function iU(n,e=globalThis?.document){const t=mi(n),r=S.useRef(!1);return S.useEffect(()=>{const s=o=>{o.target&&!r.current&&bN(tU,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vC(){const n=new CustomEvent(Q_);document.dispatchEvent(n)}function bN(n,e,t,{discrete:r}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?N5(s,o):s.dispatchEvent(o)}var Ov=0;function oU(){S.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??_C()),document.body.insertAdjacentElement("beforeend",n[1]??_C()),Ov++,()=>{Ov===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ov--}},[])}function _C(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Vv="focusScope.autoFocusOnMount",Fv="focusScope.autoFocusOnUnmount",wC={bubbles:!1,cancelable:!0},aU="FocusScope",IN=S.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=n,[c,d]=S.useState(null),h=mi(s),m=mi(o),y=S.useRef(null),v=wt(e,C=>d(C)),E=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let C=function(M){if(E.paused||!c)return;const F=M.target;c.contains(F)?y.current=F:to(y.current,{select:!0})},I=function(M){if(E.paused||!c)return;const F=M.relatedTarget;F!==null&&(c.contains(F)||to(y.current,{select:!0}))},k=function(M){if(document.activeElement===document.body)for(const W of M)W.removedNodes.length>0&&to(c)};document.addEventListener("focusin",C),document.addEventListener("focusout",I);const R=new MutationObserver(k);return c&&R.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",I),R.disconnect()}}},[r,c,E.paused]),S.useEffect(()=>{if(c){EC.add(E);const C=document.activeElement;if(!c.contains(C)){const k=new CustomEvent(Vv,wC);c.addEventListener(Vv,h),c.dispatchEvent(k),k.defaultPrevented||(lU(fU(kN(c)),{select:!0}),document.activeElement===C&&to(c))}return()=>{c.removeEventListener(Vv,h),setTimeout(()=>{const k=new CustomEvent(Fv,wC);c.addEventListener(Fv,m),c.dispatchEvent(k),k.defaultPrevented||to(C??document.body,{select:!0}),c.removeEventListener(Fv,m),EC.remove(E)},0)}}},[c,h,m,E]);const b=S.useCallback(C=>{if(!t&&!r||E.paused)return;const I=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,k=document.activeElement;if(I&&k){const R=C.currentTarget,[M,F]=cU(R);M&&F?!C.shiftKey&&k===F?(C.preventDefault(),t&&to(M,{select:!0})):C.shiftKey&&k===M&&(C.preventDefault(),t&&to(F,{select:!0})):k===R&&C.preventDefault()}},[t,r,E.paused]);return f.jsx(Xe.div,{tabIndex:-1,...a,ref:v,onKeyDown:b})});IN.displayName=aU;function lU(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(to(r,{select:e}),document.activeElement!==t)return}function cU(n){const e=kN(n),t=xC(e,n),r=xC(e.reverse(),n);return[t,r]}function kN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function xC(n,e){for(const t of n)if(!uU(t,{upTo:e}))return t}function uU(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function dU(n){return n instanceof HTMLInputElement&&"select"in n}function to(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&dU(n)&&e&&n.select()}}var EC=hU();function hU(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=TC(n,e),n.unshift(e)},remove(e){n=TC(n,e),n[0]?.resume()}}}function TC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function fU(n){return n.filter(e=>e.tagName!=="A")}var pU=ik[" useId ".trim().toString()]||(()=>{}),mU=0;function vh(n){const[e,t]=S.useState(pU());return dn(()=>{t(r=>r??String(mU++))},[n]),n||(e?`radix-${e}`:"")}const gU=["top","right","bottom","left"],Eo=Math.min,gr=Math.max,Xp=Math.round,ap=Math.floor,Ps=n=>({x:n,y:n}),yU={left:"right",right:"left",bottom:"top",top:"bottom"},vU={start:"end",end:"start"};function Y_(n,e,t){return gr(n,Eo(e,t))}function gi(n,e){return typeof n=="function"?n(e):n}function yi(n){return n.split("-")[0]}function Gc(n){return n.split("-")[1]}function Bw(n){return n==="x"?"y":"x"}function $w(n){return n==="y"?"height":"width"}const _U=new Set(["top","bottom"]);function Is(n){return _U.has(yi(n))?"y":"x"}function Hw(n){return Bw(Is(n))}function wU(n,e,t){t===void 0&&(t=!1);const r=Gc(n),s=Hw(n),o=$w(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Jp(a)),[a,Jp(a)]}function xU(n){const e=Jp(n);return[X_(n),e,X_(e)]}function X_(n){return n.replace(/start|end/g,e=>vU[e])}const SC=["left","right"],CC=["right","left"],EU=["top","bottom"],TU=["bottom","top"];function SU(n,e,t){switch(n){case"top":case"bottom":return t?e?CC:SC:e?SC:CC;case"left":case"right":return e?EU:TU;default:return[]}}function CU(n,e,t,r){const s=Gc(n);let o=SU(yi(n),t==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(X_)))),o}function Jp(n){return n.replace(/left|right|bottom|top/g,e=>yU[e])}function bU(n){return{top:0,right:0,bottom:0,left:0,...n}}function AN(n){return typeof n!="number"?bU(n):{top:n,right:n,bottom:n,left:n}}function Zp(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function bC(n,e,t){let{reference:r,floating:s}=n;const o=Is(e),a=Hw(e),c=$w(a),d=yi(e),h=o==="y",m=r.x+r.width/2-s.width/2,y=r.y+r.height/2-s.height/2,v=r[c]/2-s[c]/2;let E;switch(d){case"top":E={x:m,y:r.y-s.height};break;case"bottom":E={x:m,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y};break;case"left":E={x:r.x-s.width,y};break;default:E={x:r.x,y:r.y}}switch(Gc(e)){case"start":E[a]-=v*(t&&h?-1:1);break;case"end":E[a]+=v*(t&&h?-1:1);break}return E}const IU=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=t,c=o.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:m,y}=bC(h,r,d),v=r,E={},b=0;for(let C=0;C<c.length;C++){const{name:I,fn:k}=c[C],{x:R,y:M,data:F,reset:W}=await k({x:m,y,initialPlacement:r,placement:v,strategy:s,middlewareData:E,rects:h,platform:a,elements:{reference:n,floating:e}});m=R??m,y=M??y,E={...E,[I]:{...E[I],...F}},W&&b<=50&&(b++,typeof W=="object"&&(W.placement&&(v=W.placement),W.rects&&(h=W.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):W.rects),{x:m,y}=bC(h,v,d)),C=-1)}return{x:m,y,placement:v,strategy:s,middlewareData:E}};async function $d(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:c,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:y="floating",altBoundary:v=!1,padding:E=0}=gi(e,n),b=AN(E),I=c[v?y==="floating"?"reference":"floating":y],k=Zp(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(I)))==null||t?I:I.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:h,rootBoundary:m,strategy:d})),R=y==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),F=await(o.isElement==null?void 0:o.isElement(M))?await(o.getScale==null?void 0:o.getScale(M))||{x:1,y:1}:{x:1,y:1},W=Zp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:R,offsetParent:M,strategy:d}):R);return{top:(k.top-W.top+b.top)/F.y,bottom:(W.bottom-k.bottom+b.bottom)/F.y,left:(k.left-W.left+b.left)/F.x,right:(W.right-k.right+b.right)/F.x}}const kU=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:o,platform:a,elements:c,middlewareData:d}=e,{element:h,padding:m=0}=gi(n,e)||{};if(h==null)return{};const y=AN(m),v={x:t,y:r},E=Hw(s),b=$w(E),C=await a.getDimensions(h),I=E==="y",k=I?"top":"left",R=I?"bottom":"right",M=I?"clientHeight":"clientWidth",F=o.reference[b]+o.reference[E]-v[E]-o.floating[b],W=v[E]-o.reference[E],K=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let P=K?K[M]:0;(!P||!await(a.isElement==null?void 0:a.isElement(K)))&&(P=c.floating[M]||o.floating[b]);const A=F/2-W/2,j=P/2-C[b]/2-1,L=Eo(y[k],j),V=Eo(y[R],j),B=L,O=P-C[b]-V,ge=P/2-C[b]/2+A,de=Y_(B,ge,O),ie=!d.arrow&&Gc(s)!=null&&ge!==de&&o.reference[b]/2-(ge<B?L:V)-C[b]/2<0,se=ie?ge<B?ge-B:ge-O:0;return{[E]:v[E]+se,data:{[E]:de,centerOffset:ge-de-se,...ie&&{alignmentOffset:se}},reset:ie}}}),AU=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:m=!0,crossAxis:y=!0,fallbackPlacements:v,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:C=!0,...I}=gi(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const k=yi(s),R=Is(c),M=yi(c)===c,F=await(d.isRTL==null?void 0:d.isRTL(h.floating)),W=v||(M||!C?[Jp(c)]:xU(c)),K=b!=="none";!v&&K&&W.push(...CU(c,C,b,F));const P=[c,...W],A=await $d(e,I),j=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&j.push(A[k]),y){const ge=wU(s,a,F);j.push(A[ge[0]],A[ge[1]])}if(L=[...L,{placement:s,overflows:j}],!j.every(ge=>ge<=0)){var V,B;const ge=(((V=o.flip)==null?void 0:V.index)||0)+1,de=P[ge];if(de&&(!(y==="alignment"?R!==Is(de):!1)||L.every(z=>Is(z.placement)===R?z.overflows[0]>0:!0)))return{data:{index:ge,overflows:L},reset:{placement:de}};let ie=(B=L.filter(se=>se.overflows[0]<=0).sort((se,z)=>se.overflows[1]-z.overflows[1])[0])==null?void 0:B.placement;if(!ie)switch(E){case"bestFit":{var O;const se=(O=L.filter(z=>{if(K){const oe=Is(z.placement);return oe===R||oe==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(oe=>oe>0).reduce((oe,le)=>oe+le,0)]).sort((z,oe)=>z[1]-oe[1])[0])==null?void 0:O[0];se&&(ie=se);break}case"initialPlacement":ie=c;break}if(s!==ie)return{reset:{placement:ie}}}return{}}}};function IC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function kC(n){return gU.some(e=>n[e]>=0)}const NU=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=gi(n,e);switch(r){case"referenceHidden":{const o=await $d(e,{...s,elementContext:"reference"}),a=IC(o,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:kC(a)}}}case"escaped":{const o=await $d(e,{...s,altBoundary:!0}),a=IC(o,t.floating);return{data:{escapedOffsets:a,escaped:kC(a)}}}default:return{}}}}},NN=new Set(["left","top"]);async function PU(n,e){const{placement:t,platform:r,elements:s}=n,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=yi(t),c=Gc(t),d=Is(t)==="y",h=NN.has(a)?-1:1,m=o&&d?-1:1,y=gi(e,n);let{mainAxis:v,crossAxis:E,alignmentAxis:b}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:y.mainAxis||0,crossAxis:y.crossAxis||0,alignmentAxis:y.alignmentAxis};return c&&typeof b=="number"&&(E=c==="end"?b*-1:b),d?{x:E*m,y:v*h}:{x:v*h,y:E*m}}const RU=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:o,placement:a,middlewareData:c}=e,d=await PU(e,n);return a===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:o+d.y,data:{...d,placement:a}}}}},DU=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:c={fn:I=>{let{x:k,y:R}=I;return{x:k,y:R}}},...d}=gi(n,e),h={x:t,y:r},m=await $d(e,d),y=Is(yi(s)),v=Bw(y);let E=h[v],b=h[y];if(o){const I=v==="y"?"top":"left",k=v==="y"?"bottom":"right",R=E+m[I],M=E-m[k];E=Y_(R,E,M)}if(a){const I=y==="y"?"top":"left",k=y==="y"?"bottom":"right",R=b+m[I],M=b-m[k];b=Y_(R,b,M)}const C=c.fn({...e,[v]:E,[y]:b});return{...C,data:{x:C.x-t,y:C.y-r,enabled:{[v]:o,[y]:a}}}}}},MU=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=gi(n,e),m={x:t,y:r},y=Is(s),v=Bw(y);let E=m[v],b=m[y];const C=gi(c,e),I=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(d){const M=v==="y"?"height":"width",F=o.reference[v]-o.floating[M]+I.mainAxis,W=o.reference[v]+o.reference[M]-I.mainAxis;E<F?E=F:E>W&&(E=W)}if(h){var k,R;const M=v==="y"?"width":"height",F=NN.has(yi(s)),W=o.reference[y]-o.floating[M]+(F&&((k=a.offset)==null?void 0:k[y])||0)+(F?0:I.crossAxis),K=o.reference[y]+o.reference[M]+(F?0:((R=a.offset)==null?void 0:R[y])||0)-(F?I.crossAxis:0);b<W?b=W:b>K&&(b=K)}return{[v]:E,[y]:b}}}},jU=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:o,platform:a,elements:c}=e,{apply:d=()=>{},...h}=gi(n,e),m=await $d(e,h),y=yi(s),v=Gc(s),E=Is(s)==="y",{width:b,height:C}=o.floating;let I,k;y==="top"||y==="bottom"?(I=y,k=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(k=y,I=v==="end"?"top":"bottom");const R=C-m.top-m.bottom,M=b-m.left-m.right,F=Eo(C-m[I],R),W=Eo(b-m[k],M),K=!e.middlewareData.shift;let P=F,A=W;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=M),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=R),K&&!v){const L=gr(m.left,0),V=gr(m.right,0),B=gr(m.top,0),O=gr(m.bottom,0);E?A=b-2*(L!==0||V!==0?L+V:gr(m.left,m.right)):P=C-2*(B!==0||O!==0?B+O:gr(m.top,m.bottom))}await d({...e,availableWidth:A,availableHeight:P});const j=await a.getDimensions(c.floating);return b!==j.width||C!==j.height?{reset:{rects:!0}}:{}}}};function Qm(){return typeof window<"u"}function Qc(n){return PN(n)?(n.nodeName||"").toLowerCase():"#document"}function _r(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Bs(n){var e;return(e=(PN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function PN(n){return Qm()?n instanceof Node||n instanceof _r(n).Node:!1}function ls(n){return Qm()?n instanceof Element||n instanceof _r(n).Element:!1}function Fs(n){return Qm()?n instanceof HTMLElement||n instanceof _r(n).HTMLElement:!1}function AC(n){return!Qm()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof _r(n).ShadowRoot}const LU=new Set(["inline","contents"]);function _h(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=cs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!LU.has(s)}const OU=new Set(["table","td","th"]);function VU(n){return OU.has(Qc(n))}const FU=[":popover-open",":modal"];function Ym(n){return FU.some(e=>{try{return n.matches(e)}catch{return!1}})}const UU=["transform","translate","scale","rotate","perspective"],zU=["transform","translate","scale","rotate","perspective","filter"],BU=["paint","layout","strict","content"];function Ww(n){const e=qw(),t=ls(n)?cs(n):n;return UU.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||zU.some(r=>(t.willChange||"").includes(r))||BU.some(r=>(t.contain||"").includes(r))}function $U(n){let e=To(n);for(;Fs(e)&&!Ic(e);){if(Ww(e))return e;if(Ym(e))return null;e=To(e)}return null}function qw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const HU=new Set(["html","body","#document"]);function Ic(n){return HU.has(Qc(n))}function cs(n){return _r(n).getComputedStyle(n)}function Xm(n){return ls(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function To(n){if(Qc(n)==="html")return n;const e=n.assignedSlot||n.parentNode||AC(n)&&n.host||Bs(n);return AC(e)?e.host:e}function RN(n){const e=To(n);return Ic(e)?n.ownerDocument?n.ownerDocument.body:n.body:Fs(e)&&_h(e)?e:RN(e)}function Hd(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=RN(n),o=s===((r=n.ownerDocument)==null?void 0:r.body),a=_r(s);if(o){const c=J_(a);return e.concat(a,a.visualViewport||[],_h(s)?s:[],c&&t?Hd(c):[])}return e.concat(s,Hd(s,[],t))}function J_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function DN(n){const e=cs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fs(n),o=s?n.offsetWidth:t,a=s?n.offsetHeight:r,c=Xp(t)!==o||Xp(r)!==a;return c&&(t=o,r=a),{width:t,height:r,$:c}}function Kw(n){return ls(n)?n:n.contextElement}function dc(n){const e=Kw(n);if(!Fs(e))return Ps(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:o}=DN(e);let a=(o?Xp(t.width):t.width)/r,c=(o?Xp(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const WU=Ps(0);function MN(n){const e=_r(n);return!qw()||!e.visualViewport?WU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function qU(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==_r(n)?!1:e}function Ua(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=Kw(n);let a=Ps(1);e&&(r?ls(r)&&(a=dc(r)):a=dc(n));const c=qU(o,t,r)?MN(o):Ps(0);let d=(s.left+c.x)/a.x,h=(s.top+c.y)/a.y,m=s.width/a.x,y=s.height/a.y;if(o){const v=_r(o),E=r&&ls(r)?_r(r):r;let b=v,C=J_(b);for(;C&&r&&E!==b;){const I=dc(C),k=C.getBoundingClientRect(),R=cs(C),M=k.left+(C.clientLeft+parseFloat(R.paddingLeft))*I.x,F=k.top+(C.clientTop+parseFloat(R.paddingTop))*I.y;d*=I.x,h*=I.y,m*=I.x,y*=I.y,d+=M,h+=F,b=_r(C),C=J_(b)}}return Zp({width:m,height:y,x:d,y:h})}function Jm(n,e){const t=Xm(n).scrollLeft;return e?e.left+t:Ua(Bs(n)).left+t}function jN(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Jm(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function KU(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const o=s==="fixed",a=Bs(r),c=e?Ym(e.floating):!1;if(r===a||c&&o)return t;let d={scrollLeft:0,scrollTop:0},h=Ps(1);const m=Ps(0),y=Fs(r);if((y||!y&&!o)&&((Qc(r)!=="body"||_h(a))&&(d=Xm(r)),Fs(r))){const E=Ua(r);h=dc(r),m.x=E.x+r.clientLeft,m.y=E.y+r.clientTop}const v=a&&!y&&!o?jN(a,d):Ps(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+m.x+v.x,y:t.y*h.y-d.scrollTop*h.y+m.y+v.y}}function GU(n){return Array.from(n.getClientRects())}function QU(n){const e=Bs(n),t=Xm(n),r=n.ownerDocument.body,s=gr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=gr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+Jm(n);const c=-t.scrollTop;return cs(r).direction==="rtl"&&(a+=gr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:c}}const NC=25;function YU(n,e){const t=_r(n),r=Bs(n),s=t.visualViewport;let o=r.clientWidth,a=r.clientHeight,c=0,d=0;if(s){o=s.width,a=s.height;const m=qw();(!m||m&&e==="fixed")&&(c=s.offsetLeft,d=s.offsetTop)}const h=Jm(r);if(h<=0){const m=r.ownerDocument,y=m.body,v=getComputedStyle(y),E=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,b=Math.abs(r.clientWidth-y.clientWidth-E);b<=NC&&(o-=b)}else h<=NC&&(o+=h);return{width:o,height:a,x:c,y:d}}const XU=new Set(["absolute","fixed"]);function JU(n,e){const t=Ua(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,o=Fs(n)?dc(n):Ps(1),a=n.clientWidth*o.x,c=n.clientHeight*o.y,d=s*o.x,h=r*o.y;return{width:a,height:c,x:d,y:h}}function PC(n,e,t){let r;if(e==="viewport")r=YU(n,t);else if(e==="document")r=QU(Bs(n));else if(ls(e))r=JU(e,t);else{const s=MN(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Zp(r)}function LN(n,e){const t=To(n);return t===e||!ls(t)||Ic(t)?!1:cs(t).position==="fixed"||LN(t,e)}function ZU(n,e){const t=e.get(n);if(t)return t;let r=Hd(n,[],!1).filter(c=>ls(c)&&Qc(c)!=="body"),s=null;const o=cs(n).position==="fixed";let a=o?To(n):n;for(;ls(a)&&!Ic(a);){const c=cs(a),d=Ww(a);!d&&c.position==="fixed"&&(s=null),(o?!d&&!s:!d&&c.position==="static"&&!!s&&XU.has(s.position)||_h(a)&&!d&&LN(n,a))?r=r.filter(m=>m!==a):s=c,a=To(a)}return e.set(n,r),r}function e9(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?Ym(e)?[]:ZU(e,this._c):[].concat(t),r],c=a[0],d=a.reduce((h,m)=>{const y=PC(e,m,s);return h.top=gr(y.top,h.top),h.right=Eo(y.right,h.right),h.bottom=Eo(y.bottom,h.bottom),h.left=gr(y.left,h.left),h},PC(e,c,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function t9(n){const{width:e,height:t}=DN(n);return{width:e,height:t}}function n9(n,e,t){const r=Fs(e),s=Bs(e),o=t==="fixed",a=Ua(n,!0,o,e);let c={scrollLeft:0,scrollTop:0};const d=Ps(0);function h(){d.x=Jm(s)}if(r||!r&&!o)if((Qc(e)!=="body"||_h(s))&&(c=Xm(e)),r){const E=Ua(e,!0,o,e);d.x=E.x+e.clientLeft,d.y=E.y+e.clientTop}else s&&h();o&&!r&&s&&h();const m=s&&!r&&!o?jN(s,c):Ps(0),y=a.left+c.scrollLeft-d.x-m.x,v=a.top+c.scrollTop-d.y-m.y;return{x:y,y:v,width:a.width,height:a.height}}function Uv(n){return cs(n).position==="static"}function RC(n,e){if(!Fs(n)||cs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Bs(n)===t&&(t=t.ownerDocument.body),t}function ON(n,e){const t=_r(n);if(Ym(n))return t;if(!Fs(n)){let s=To(n);for(;s&&!Ic(s);){if(ls(s)&&!Uv(s))return s;s=To(s)}return t}let r=RC(n,e);for(;r&&VU(r)&&Uv(r);)r=RC(r,e);return r&&Ic(r)&&Uv(r)&&!Ww(r)?t:r||$U(n)||t}const r9=async function(n){const e=this.getOffsetParent||ON,t=this.getDimensions,r=await t(n.floating);return{reference:n9(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function s9(n){return cs(n).direction==="rtl"}const i9={convertOffsetParentRelativeRectToViewportRelativeRect:KU,getDocumentElement:Bs,getClippingRect:e9,getOffsetParent:ON,getElementRects:r9,getClientRects:GU,getDimensions:t9,getScale:dc,isElement:ls,isRTL:s9};function VN(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function o9(n,e){let t=null,r;const s=Bs(n);function o(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function a(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const h=n.getBoundingClientRect(),{left:m,top:y,width:v,height:E}=h;if(c||e(),!v||!E)return;const b=ap(y),C=ap(s.clientWidth-(m+v)),I=ap(s.clientHeight-(y+E)),k=ap(m),M={rootMargin:-b+"px "+-C+"px "+-I+"px "+-k+"px",threshold:gr(0,Eo(1,d))||1};let F=!0;function W(K){const P=K[0].intersectionRatio;if(P!==d){if(!F)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!VN(h,n.getBoundingClientRect())&&a(),F=!1}try{t=new IntersectionObserver(W,{...M,root:s.ownerDocument})}catch{t=new IntersectionObserver(W,M)}t.observe(n)}return a(!0),o}function a9(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=Kw(n),m=s||o?[...h?Hd(h):[],...Hd(e)]:[];m.forEach(k=>{s&&k.addEventListener("scroll",t,{passive:!0}),o&&k.addEventListener("resize",t)});const y=h&&c?o9(h,t):null;let v=-1,E=null;a&&(E=new ResizeObserver(k=>{let[R]=k;R&&R.target===h&&E&&(E.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var M;(M=E)==null||M.observe(e)})),t()}),h&&!d&&E.observe(h),E.observe(e));let b,C=d?Ua(n):null;d&&I();function I(){const k=Ua(n);C&&!VN(C,k)&&t(),C=k,b=requestAnimationFrame(I)}return t(),()=>{var k;m.forEach(R=>{s&&R.removeEventListener("scroll",t),o&&R.removeEventListener("resize",t)}),y?.(),(k=E)==null||k.disconnect(),E=null,d&&cancelAnimationFrame(b)}}const l9=RU,c9=DU,u9=AU,d9=jU,h9=NU,DC=kU,f9=MU,p9=(n,e,t)=>{const r=new Map,s={platform:i9,...t},o={...s.platform,_c:r};return IU(n,e,{...s,platform:o})};var m9=typeof document<"u",g9=function(){},kp=m9?S.useLayoutEffect:g9;function em(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!em(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const o=s[r];if(!(o==="_owner"&&n.$$typeof)&&!em(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function FN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function MC(n,e){const t=FN(n);return Math.round(e*t)/t}function zv(n){const e=S.useRef(n);return kp(()=>{e.current=n}),e}function y9(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:c=!0,whileElementsMounted:d,open:h}=n,[m,y]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,E]=S.useState(r);em(v,r)||E(r);const[b,C]=S.useState(null),[I,k]=S.useState(null),R=S.useCallback(z=>{z!==K.current&&(K.current=z,C(z))},[]),M=S.useCallback(z=>{z!==P.current&&(P.current=z,k(z))},[]),F=o||b,W=a||I,K=S.useRef(null),P=S.useRef(null),A=S.useRef(m),j=d!=null,L=zv(d),V=zv(s),B=zv(h),O=S.useCallback(()=>{if(!K.current||!P.current)return;const z={placement:e,strategy:t,middleware:v};V.current&&(z.platform=V.current),p9(K.current,P.current,z).then(oe=>{const le={...oe,isPositioned:B.current!==!1};ge.current&&!em(A.current,le)&&(A.current=le,yh.flushSync(()=>{y(le)}))})},[v,e,t,V,B]);kp(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,y(z=>({...z,isPositioned:!1})))},[h]);const ge=S.useRef(!1);kp(()=>(ge.current=!0,()=>{ge.current=!1}),[]),kp(()=>{if(F&&(K.current=F),W&&(P.current=W),F&&W){if(L.current)return L.current(F,W,O);O()}},[F,W,O,L,j]);const de=S.useMemo(()=>({reference:K,floating:P,setReference:R,setFloating:M}),[R,M]),ie=S.useMemo(()=>({reference:F,floating:W}),[F,W]),se=S.useMemo(()=>{const z={position:t,left:0,top:0};if(!ie.floating)return z;const oe=MC(ie.floating,m.x),le=MC(ie.floating,m.y);return c?{...z,transform:"translate("+oe+"px, "+le+"px)",...FN(ie.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:oe,top:le}},[t,c,ie.floating,m.x,m.y]);return S.useMemo(()=>({...m,update:O,refs:de,elements:ie,floatingStyles:se}),[m,O,de,ie,se])}const v9=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?DC({element:r.current,padding:s}).fn(t):{}:r?DC({element:r,padding:s}).fn(t):{}}}},_9=(n,e)=>({...l9(n),options:[n,e]}),w9=(n,e)=>({...c9(n),options:[n,e]}),x9=(n,e)=>({...f9(n),options:[n,e]}),E9=(n,e)=>({...u9(n),options:[n,e]}),T9=(n,e)=>({...d9(n),options:[n,e]}),S9=(n,e)=>({...h9(n),options:[n,e]}),C9=(n,e)=>({...v9(n),options:[n,e]});var b9="Arrow",UN=S.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...o}=n;return f.jsx(Xe.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});UN.displayName=b9;var I9=UN,Gw="Popper",[zN,BN]=Oo(Gw),[k9,$N]=zN(Gw),HN=n=>{const{__scopePopper:e,children:t}=n,[r,s]=S.useState(null);return f.jsx(k9,{scope:e,anchor:r,onAnchorChange:s,children:t})};HN.displayName=Gw;var WN="PopperAnchor",qN=S.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,o=$N(WN,t),a=S.useRef(null),c=wt(e,a),d=S.useRef(null);return S.useEffect(()=>{const h=d.current;d.current=r?.current||a.current,h!==d.current&&o.onAnchorChange(d.current)}),r?null:f.jsx(Xe.div,{...s,ref:c})});qN.displayName=WN;var Qw="PopperContent",[A9,N9]=zN(Qw),KN=S.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:E="optimized",onPlaced:b,...C}=n,I=$N(Qw,t),[k,R]=S.useState(null),M=wt(e,te=>R(te)),[F,W]=S.useState(null),K=Fw(F),P=K?.width??0,A=K?.height??0,j=r+(o!=="center"?"-"+o:""),L=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},V=Array.isArray(h)?h:[h],B=V.length>0,O={padding:L,boundary:V.filter(R9),altBoundary:B},{refs:ge,floatingStyles:de,placement:ie,isPositioned:se,middlewareData:z}=y9({strategy:"fixed",placement:j,whileElementsMounted:(...te)=>a9(...te,{animationFrame:E==="always"}),elements:{reference:I.anchor},middleware:[_9({mainAxis:s+A,alignmentAxis:a}),d&&w9({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?x9():void 0,...O}),d&&E9({...O}),T9({...O,apply:({elements:te,rects:he,availableWidth:_e,availableHeight:we})=>{const{width:Ce,height:je}=he.reference,ce=te.floating.style;ce.setProperty("--radix-popper-available-width",`${_e}px`),ce.setProperty("--radix-popper-available-height",`${we}px`),ce.setProperty("--radix-popper-anchor-width",`${Ce}px`),ce.setProperty("--radix-popper-anchor-height",`${je}px`)}}),F&&C9({element:F,padding:c}),D9({arrowWidth:P,arrowHeight:A}),v&&S9({strategy:"referenceHidden",...O})]}),[oe,le]=YN(ie),$=mi(b);dn(()=>{se&&$?.()},[se,$]);const ee=z.arrow?.x,G=z.arrow?.y,ne=z.arrow?.centerOffset!==0,[fe,pe]=S.useState();return dn(()=>{k&&pe(window.getComputedStyle(k).zIndex)},[k]),f.jsx("div",{ref:ge.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:se?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:f.jsx(A9,{scope:t,placedSide:oe,onArrowChange:W,arrowX:ee,arrowY:G,shouldHideArrow:ne,children:f.jsx(Xe.div,{"data-side":oe,"data-align":le,...C,ref:M,style:{...C.style,animation:se?void 0:"none"}})})})});KN.displayName=Qw;var GN="PopperArrow",P9={top:"bottom",right:"left",bottom:"top",left:"right"},QN=S.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,o=N9(GN,r),a=P9[o.placedSide];return f.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:f.jsx(I9,{...s,ref:t,style:{...s.style,display:"block"}})})});QN.displayName=GN;function R9(n){return n!==null}var D9=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,c=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[h,m]=YN(t),y={start:"0%",center:"50%",end:"100%"}[m],v=(s.arrow?.x??0)+c/2,E=(s.arrow?.y??0)+d/2;let b="",C="";return h==="bottom"?(b=a?y:`${v}px`,C=`${-d}px`):h==="top"?(b=a?y:`${v}px`,C=`${r.floating.height+d}px`):h==="right"?(b=`${-d}px`,C=a?y:`${E}px`):h==="left"&&(b=`${r.floating.width+d}px`,C=a?y:`${E}px`),{data:{x:b,y:C}}}});function YN(n){const[e,t="center"]=n.split("-");return[e,t]}var M9=HN,j9=qN,L9=KN,O9=QN,V9="Portal",XN=S.forwardRef((n,e)=>{const{container:t,...r}=n,[s,o]=S.useState(!1);dn(()=>o(!0),[]);const a=t||s&&globalThis?.document?.body;return a?k5.createPortal(f.jsx(Xe.div,{...r,ref:e}),a):null});XN.displayName=V9;var JN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),F9="VisuallyHidden",U9=S.forwardRef((n,e)=>f.jsx(Xe.span,{...n,ref:e,style:{...JN,...n.style}}));U9.displayName=F9;var z9=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Gl=new WeakMap,lp=new WeakMap,cp={},Bv=0,ZN=function(n){return n&&(n.host||ZN(n.parentNode))},B9=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=ZN(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},$9=function(n,e,t,r){var s=B9(e,Array.isArray(n)?n:[n]);cp[t]||(cp[t]=new WeakMap);var o=cp[t],a=[],c=new Set,d=new Set(s),h=function(y){!y||c.has(y)||(c.add(y),h(y.parentNode))};s.forEach(h);var m=function(y){!y||d.has(y)||Array.prototype.forEach.call(y.children,function(v){if(c.has(v))m(v);else try{var E=v.getAttribute(r),b=E!==null&&E!=="false",C=(Gl.get(v)||0)+1,I=(o.get(v)||0)+1;Gl.set(v,C),o.set(v,I),a.push(v),C===1&&b&&lp.set(v,!0),I===1&&v.setAttribute(t,"true"),b||v.setAttribute(r,"true")}catch(k){console.error("aria-hidden: cannot operate on ",v,k)}})};return m(e),c.clear(),Bv++,function(){a.forEach(function(y){var v=Gl.get(y)-1,E=o.get(y)-1;Gl.set(y,v),o.set(y,E),v||(lp.has(y)||y.removeAttribute(r),lp.delete(y)),E||y.removeAttribute(t)}),Bv--,Bv||(Gl=new WeakMap,Gl=new WeakMap,lp=new WeakMap,cp={})}},H9=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=z9(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),$9(r,s,t,"aria-hidden")):function(){return null}},Ss=function(){return Ss=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ss.apply(this,arguments)};function eP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function W9(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Ap="right-scroll-bar-position",Np="width-before-scroll-bar",q9="with-scroll-bars-hidden",K9="--removed-body-scroll-bar-size";function $v(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function G9(n,e){var t=S.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var Q9=typeof window<"u"?S.useLayoutEffect:S.useEffect,jC=new WeakMap;function Y9(n,e){var t=G9(null,function(r){return n.forEach(function(s){return $v(s,r)})});return Q9(function(){var r=jC.get(t);if(r){var s=new Set(r),o=new Set(n),a=t.current;s.forEach(function(c){o.has(c)||$v(c,null)}),o.forEach(function(c){s.has(c)||$v(c,a)})}jC.set(t,n)},[n]),t}function X9(n){return n}function J9(n,e){e===void 0&&(e=X9);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var a=e(o,r);return t.push(a),function(){t=t.filter(function(c){return c!==a})}},assignSyncMedium:function(o){for(r=!0;t.length;){var a=t;t=[],a.forEach(o)}t={push:function(c){return o(c)},filter:function(){return t}}},assignMedium:function(o){r=!0;var a=[];if(t.length){var c=t;t=[],c.forEach(o),a=t}var d=function(){var m=a;a=[],m.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(m){a.push(m),h()},filter:function(m){return a=a.filter(m),t}}}};return s}function Z9(n){n===void 0&&(n={});var e=J9(null);return e.options=Ss({async:!0,ssr:!1},n),e}var tP=function(n){var e=n.sideCar,t=eP(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Ss({},t))};tP.isSideCarExport=!0;function ez(n,e){return n.useMedium(e),tP}var nP=Z9(),Hv=function(){},Zm=S.forwardRef(function(n,e){var t=S.useRef(null),r=S.useState({onScrollCapture:Hv,onWheelCapture:Hv,onTouchMoveCapture:Hv}),s=r[0],o=r[1],a=n.forwardProps,c=n.children,d=n.className,h=n.removeScrollBar,m=n.enabled,y=n.shards,v=n.sideCar,E=n.noRelative,b=n.noIsolation,C=n.inert,I=n.allowPinchZoom,k=n.as,R=k===void 0?"div":k,M=n.gapMode,F=eP(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),W=v,K=Y9([t,e]),P=Ss(Ss({},F),s);return S.createElement(S.Fragment,null,m&&S.createElement(W,{sideCar:nP,removeScrollBar:h,shards:y,noRelative:E,noIsolation:b,inert:C,setCallbacks:o,allowPinchZoom:!!I,lockRef:t,gapMode:M}),a?S.cloneElement(S.Children.only(c),Ss(Ss({},P),{ref:K})):S.createElement(R,Ss({},P,{className:d,ref:K}),c))});Zm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zm.classNames={fullWidth:Np,zeroRight:Ap};var tz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nz(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=tz();return e&&n.setAttribute("nonce",e),n}function rz(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function sz(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var iz=function(){var n=0,e=null;return{add:function(t){n==0&&(e=nz())&&(rz(e,t),sz(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oz=function(){var n=iz();return function(e,t){S.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},rP=function(){var n=oz(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},az={left:0,top:0,right:0,gap:0},Wv=function(n){return parseInt(n||"",10)||0},lz=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Wv(t),Wv(r),Wv(s)]},cz=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return az;var e=lz(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},uz=rP(),hc="data-scroll-locked",dz=function(n,e,t,r){var s=n.left,o=n.top,a=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(q9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(hc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ap,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Np,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Ap," .").concat(Ap,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Np," .").concat(Np,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hc,`] {
    `).concat(K9,": ").concat(c,`px;
  }
`)},LC=function(){var n=parseInt(document.body.getAttribute(hc)||"0",10);return isFinite(n)?n:0},hz=function(){S.useEffect(function(){return document.body.setAttribute(hc,(LC()+1).toString()),function(){var n=LC()-1;n<=0?document.body.removeAttribute(hc):document.body.setAttribute(hc,n.toString())}},[])},fz=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;hz();var o=S.useMemo(function(){return cz(s)},[s]);return S.createElement(uz,{styles:dz(o,!e,s,t?"":"!important")})},Z_=!1;if(typeof window<"u")try{var up=Object.defineProperty({},"passive",{get:function(){return Z_=!0,!0}});window.addEventListener("test",up,up),window.removeEventListener("test",up,up)}catch{Z_=!1}var Ql=Z_?{passive:!1}:!1,pz=function(n){return n.tagName==="TEXTAREA"},sP=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!pz(n)&&t[e]==="visible")},mz=function(n){return sP(n,"overflowY")},gz=function(n){return sP(n,"overflowX")},OC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=iP(n,r);if(s){var o=oP(n,r),a=o[1],c=o[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},yz=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},vz=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},iP=function(n,e){return n==="v"?mz(e):gz(e)},oP=function(n,e){return n==="v"?yz(e):vz(e)},_z=function(n,e){return n==="h"&&e==="rtl"?-1:1},wz=function(n,e,t,r,s){var o=_z(n,window.getComputedStyle(e).direction),a=o*r,c=t.target,d=e.contains(c),h=!1,m=a>0,y=0,v=0;do{if(!c)break;var E=oP(n,c),b=E[0],C=E[1],I=E[2],k=C-I-o*b;(b||k)&&iP(n,c)&&(y+=k,v+=b);var R=c.parentNode;c=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(m&&Math.abs(y)<1||!m&&Math.abs(v)<1)&&(h=!0),h},dp=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},VC=function(n){return[n.deltaX,n.deltaY]},FC=function(n){return n&&"current"in n?n.current:n},xz=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Ez=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},Tz=0,Yl=[];function Sz(n){var e=S.useRef([]),t=S.useRef([0,0]),r=S.useRef(),s=S.useState(Tz++)[0],o=S.useState(rP)[0],a=S.useRef(n);S.useEffect(function(){a.current=n},[n]),S.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var C=W9([n.lockRef.current],(n.shards||[]).map(FC),!0).filter(Boolean);return C.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var c=S.useCallback(function(C,I){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!a.current.allowPinchZoom;var k=dp(C),R=t.current,M="deltaX"in C?C.deltaX:R[0]-k[0],F="deltaY"in C?C.deltaY:R[1]-k[1],W,K=C.target,P=Math.abs(M)>Math.abs(F)?"h":"v";if("touches"in C&&P==="h"&&K.type==="range")return!1;var A=OC(P,K);if(!A)return!0;if(A?W=P:(W=P==="v"?"h":"v",A=OC(P,K)),!A)return!1;if(!r.current&&"changedTouches"in C&&(M||F)&&(r.current=W),!W)return!0;var j=r.current||W;return wz(j,I,C,j==="h"?M:F)},[]),d=S.useCallback(function(C){var I=C;if(!(!Yl.length||Yl[Yl.length-1]!==o)){var k="deltaY"in I?VC(I):dp(I),R=e.current.filter(function(W){return W.name===I.type&&(W.target===I.target||I.target===W.shadowParent)&&xz(W.delta,k)})[0];if(R&&R.should){I.cancelable&&I.preventDefault();return}if(!R){var M=(a.current.shards||[]).map(FC).filter(Boolean).filter(function(W){return W.contains(I.target)}),F=M.length>0?c(I,M[0]):!a.current.noIsolation;F&&I.cancelable&&I.preventDefault()}}},[]),h=S.useCallback(function(C,I,k,R){var M={name:C,delta:I,target:k,should:R,shadowParent:Cz(k)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(F){return F!==M})},1)},[]),m=S.useCallback(function(C){t.current=dp(C),r.current=void 0},[]),y=S.useCallback(function(C){h(C.type,VC(C),C.target,c(C,n.lockRef.current))},[]),v=S.useCallback(function(C){h(C.type,dp(C),C.target,c(C,n.lockRef.current))},[]);S.useEffect(function(){return Yl.push(o),n.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Ql),document.addEventListener("touchmove",d,Ql),document.addEventListener("touchstart",m,Ql),function(){Yl=Yl.filter(function(C){return C!==o}),document.removeEventListener("wheel",d,Ql),document.removeEventListener("touchmove",d,Ql),document.removeEventListener("touchstart",m,Ql)}},[]);var E=n.removeScrollBar,b=n.inert;return S.createElement(S.Fragment,null,b?S.createElement(o,{styles:Ez(s)}):null,E?S.createElement(fz,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function Cz(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const bz=ez(nP,Sz);var aP=S.forwardRef(function(n,e){return S.createElement(Zm,Ss({},n,{ref:e,sideCar:bz}))});aP.classNames=Zm.classNames;var Iz=[" ","Enter","ArrowUp","ArrowDown"],kz=[" ","Enter"],za="Select",[eg,tg,Az]=Uw(za),[Yc,kJ]=Oo(za,[Az,BN]),ng=BN(),[Nz,Vo]=Yc(za),[Pz,Rz]=Yc(za),lP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:c,onValueChange:d,dir:h,name:m,autoComplete:y,disabled:v,required:E,form:b}=n,C=ng(e),[I,k]=S.useState(null),[R,M]=S.useState(null),[F,W]=S.useState(!1),K=Km(h),[P,A]=bc({prop:r,defaultProp:s??!1,onChange:o,caller:za}),[j,L]=bc({prop:a,defaultProp:c,onChange:d,caller:za}),V=S.useRef(null),B=I?b||!!I.closest("form"):!0,[O,ge]=S.useState(new Set),de=Array.from(O).map(ie=>ie.props.value).join(";");return f.jsx(M9,{...C,children:f.jsxs(Nz,{required:E,scope:e,trigger:I,onTriggerChange:k,valueNode:R,onValueNodeChange:M,valueNodeHasChildren:F,onValueNodeHasChildrenChange:W,contentId:vh(),value:j,onValueChange:L,open:P,onOpenChange:A,dir:K,triggerPointerDownPosRef:V,disabled:v,children:[f.jsx(eg.Provider,{scope:e,children:f.jsx(Pz,{scope:n.__scopeSelect,onNativeOptionAdd:S.useCallback(ie=>{ge(se=>new Set(se).add(ie))},[]),onNativeOptionRemove:S.useCallback(ie=>{ge(se=>{const z=new Set(se);return z.delete(ie),z})},[]),children:t})}),B?f.jsxs(NP,{"aria-hidden":!0,required:E,tabIndex:-1,name:m,autoComplete:y,value:j,onChange:ie=>L(ie.target.value),disabled:v,form:b,children:[j===void 0?f.jsx("option",{value:""}):null,Array.from(O)]},de):null]})})};lP.displayName=za;var cP="SelectTrigger",uP=S.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,o=ng(t),a=Vo(cP,t),c=a.disabled||r,d=wt(e,a.onTriggerChange),h=tg(t),m=S.useRef("touch"),[y,v,E]=RP(C=>{const I=h().filter(M=>!M.disabled),k=I.find(M=>M.value===a.value),R=DP(I,C,k);R!==void 0&&a.onValueChange(R.value)}),b=C=>{c||(a.onOpenChange(!0),E()),C&&(a.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return f.jsx(j9,{asChild:!0,...o,children:f.jsx(Xe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":PP(a.value)?"":void 0,...s,ref:d,onClick:rt(s.onClick,C=>{C.currentTarget.focus(),m.current!=="mouse"&&b(C)}),onPointerDown:rt(s.onPointerDown,C=>{m.current=C.pointerType;const I=C.target;I.hasPointerCapture(C.pointerId)&&I.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(b(C),C.preventDefault())}),onKeyDown:rt(s.onKeyDown,C=>{const I=y.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&v(C.key),!(I&&C.key===" ")&&Iz.includes(C.key)&&(b(),C.preventDefault())})})})});uP.displayName=cP;var dP="SelectValue",hP=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:o,placeholder:a="",...c}=n,d=Vo(dP,t),{onValueNodeHasChildrenChange:h}=d,m=o!==void 0,y=wt(e,d.onValueNodeChange);return dn(()=>{h(m)},[h,m]),f.jsx(Xe.span,{...c,ref:y,style:{pointerEvents:"none"},children:PP(d.value)?f.jsx(f.Fragment,{children:a}):o})});hP.displayName=dP;var Dz="SelectIcon",fP=S.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return f.jsx(Xe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});fP.displayName=Dz;var Mz="SelectPortal",pP=n=>f.jsx(XN,{asChild:!0,...n});pP.displayName=Mz;var Ba="SelectContent",mP=S.forwardRef((n,e)=>{const t=Vo(Ba,n.__scopeSelect),[r,s]=S.useState();if(dn(()=>{s(new DocumentFragment)},[]),!t.open){const o=r;return o?yh.createPortal(f.jsx(gP,{scope:n.__scopeSelect,children:f.jsx(eg.Slot,{scope:n.__scopeSelect,children:f.jsx("div",{children:n.children})})}),o):null}return f.jsx(yP,{...n,ref:e})});mP.displayName=Ba;var ts=10,[gP,Fo]=Yc(Ba),jz="SelectContentImpl",Lz=Bd("SelectContent.RemoveScroll"),yP=S.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:E,sticky:b,hideWhenDetached:C,avoidCollisions:I,...k}=n,R=Vo(Ba,t),[M,F]=S.useState(null),[W,K]=S.useState(null),P=wt(e,te=>F(te)),[A,j]=S.useState(null),[L,V]=S.useState(null),B=tg(t),[O,ge]=S.useState(!1),de=S.useRef(!1);S.useEffect(()=>{if(M)return H9(M)},[M]),oU();const ie=S.useCallback(te=>{const[he,..._e]=B().map(je=>je.ref.current),[we]=_e.slice(-1),Ce=document.activeElement;for(const je of te)if(je===Ce||(je?.scrollIntoView({block:"nearest"}),je===he&&W&&(W.scrollTop=0),je===we&&W&&(W.scrollTop=W.scrollHeight),je?.focus(),document.activeElement!==Ce))return},[B,W]),se=S.useCallback(()=>ie([A,M]),[ie,A,M]);S.useEffect(()=>{O&&se()},[O,se]);const{onOpenChange:z,triggerPointerDownPosRef:oe}=R;S.useEffect(()=>{if(M){let te={x:0,y:0};const he=we=>{te={x:Math.abs(Math.round(we.pageX)-(oe.current?.x??0)),y:Math.abs(Math.round(we.pageY)-(oe.current?.y??0))}},_e=we=>{te.x<=10&&te.y<=10?we.preventDefault():M.contains(we.target)||z(!1),document.removeEventListener("pointermove",he),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",_e,{capture:!0})}}},[M,z,oe]),S.useEffect(()=>{const te=()=>z(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[z]);const[le,$]=RP(te=>{const he=B().filter(Ce=>!Ce.disabled),_e=he.find(Ce=>Ce.ref.current===document.activeElement),we=DP(he,te,_e);we&&setTimeout(()=>we.ref.current.focus())}),ee=S.useCallback((te,he,_e)=>{const we=!de.current&&!_e;(R.value!==void 0&&R.value===he||we)&&(j(te),we&&(de.current=!0))},[R.value]),G=S.useCallback(()=>M?.focus(),[M]),ne=S.useCallback((te,he,_e)=>{const we=!de.current&&!_e;(R.value!==void 0&&R.value===he||we)&&V(te)},[R.value]),fe=r==="popper"?e0:vP,pe=fe===e0?{side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:y,collisionBoundary:v,collisionPadding:E,sticky:b,hideWhenDetached:C,avoidCollisions:I}:{};return f.jsx(gP,{scope:t,content:M,viewport:W,onViewportChange:K,itemRefCallback:ee,selectedItem:A,onItemLeave:G,itemTextRefCallback:ne,focusSelectedItem:se,selectedItemText:L,position:r,isPositioned:O,searchRef:le,children:f.jsx(aP,{as:Lz,allowPinchZoom:!0,children:f.jsx(IN,{asChild:!0,trapped:R.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:rt(s,te=>{R.trigger?.focus({preventScroll:!0}),te.preventDefault()}),children:f.jsx(CN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:f.jsx(fe,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:te=>te.preventDefault(),...k,...pe,onPlaced:()=>ge(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:rt(k.onKeyDown,te=>{const he=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!he&&te.key.length===1&&$(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let we=B().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(te.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Ce=te.target,je=we.indexOf(Ce);we=we.slice(je+1)}setTimeout(()=>ie(we)),te.preventDefault()}})})})})})})});yP.displayName=jz;var Oz="SelectItemAlignedPosition",vP=S.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,o=Vo(Ba,t),a=Fo(Ba,t),[c,d]=S.useState(null),[h,m]=S.useState(null),y=wt(e,P=>m(P)),v=tg(t),E=S.useRef(!1),b=S.useRef(!0),{viewport:C,selectedItem:I,selectedItemText:k,focusSelectedItem:R}=a,M=S.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&h&&C&&I&&k){const P=o.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),j=o.valueNode.getBoundingClientRect(),L=k.getBoundingClientRect();if(o.dir!=="rtl"){const Ce=L.left-A.left,je=j.left-Ce,ce=P.left-je,J=P.width+ce,Ae=Math.max(J,A.width),tt=window.innerWidth-ts,dt=Qp(je,[ts,Math.max(ts,tt-Ae)]);c.style.minWidth=J+"px",c.style.left=dt+"px"}else{const Ce=A.right-L.right,je=window.innerWidth-j.right-Ce,ce=window.innerWidth-P.right-je,J=P.width+ce,Ae=Math.max(J,A.width),tt=window.innerWidth-ts,dt=Qp(je,[ts,Math.max(ts,tt-Ae)]);c.style.minWidth=J+"px",c.style.right=dt+"px"}const V=v(),B=window.innerHeight-ts*2,O=C.scrollHeight,ge=window.getComputedStyle(h),de=parseInt(ge.borderTopWidth,10),ie=parseInt(ge.paddingTop,10),se=parseInt(ge.borderBottomWidth,10),z=parseInt(ge.paddingBottom,10),oe=de+ie+O+z+se,le=Math.min(I.offsetHeight*5,oe),$=window.getComputedStyle(C),ee=parseInt($.paddingTop,10),G=parseInt($.paddingBottom,10),ne=P.top+P.height/2-ts,fe=B-ne,pe=I.offsetHeight/2,te=I.offsetTop+pe,he=de+ie+te,_e=oe-he;if(he<=ne){const Ce=V.length>0&&I===V[V.length-1].ref.current;c.style.bottom="0px";const je=h.clientHeight-C.offsetTop-C.offsetHeight,ce=Math.max(fe,pe+(Ce?G:0)+je+se),J=he+ce;c.style.height=J+"px"}else{const Ce=V.length>0&&I===V[0].ref.current;c.style.top="0px";const ce=Math.max(ne,de+C.offsetTop+(Ce?ee:0)+pe)+_e;c.style.height=ce+"px",C.scrollTop=he-ne+C.offsetTop}c.style.margin=`${ts}px 0`,c.style.minHeight=le+"px",c.style.maxHeight=B+"px",r?.(),requestAnimationFrame(()=>E.current=!0)}},[v,o.trigger,o.valueNode,c,h,C,I,k,o.dir,r]);dn(()=>M(),[M]);const[F,W]=S.useState();dn(()=>{h&&W(window.getComputedStyle(h).zIndex)},[h]);const K=S.useCallback(P=>{P&&b.current===!0&&(M(),R?.(),b.current=!1)},[M,R]);return f.jsx(Fz,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:E,onScrollButtonChange:K,children:f.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:f.jsx(Xe.div,{...s,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});vP.displayName=Oz;var Vz="SelectPopperPosition",e0=S.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=ts,...o}=n,a=ng(t);return f.jsx(L9,{...a,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});e0.displayName=Vz;var[Fz,Yw]=Yc(Ba,{}),t0="SelectViewport",_P=S.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,o=Fo(t0,t),a=Yw(t0,t),c=wt(e,o.onViewportChange),d=S.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(eg.Slot,{scope:t,children:f.jsx(Xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:rt(s.onScroll,h=>{const m=h.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=a;if(v?.current&&y){const E=Math.abs(d.current-m.scrollTop);if(E>0){const b=window.innerHeight-ts*2,C=parseFloat(y.style.minHeight),I=parseFloat(y.style.height),k=Math.max(C,I);if(k<b){const R=k+E,M=Math.min(b,R),F=R-M;y.style.height=M+"px",y.style.bottom==="0px"&&(m.scrollTop=F>0?F:0,y.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});_P.displayName=t0;var wP="SelectGroup",[Uz,zz]=Yc(wP),Bz=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=vh();return f.jsx(Uz,{scope:t,id:s,children:f.jsx(Xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Bz.displayName=wP;var xP="SelectLabel",$z=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=zz(xP,t);return f.jsx(Xe.div,{id:s.id,...r,ref:e})});$z.displayName=xP;var tm="SelectItem",[Hz,EP]=Yc(tm),TP=S.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:o,...a}=n,c=Vo(tm,t),d=Fo(tm,t),h=c.value===r,[m,y]=S.useState(o??""),[v,E]=S.useState(!1),b=wt(e,R=>d.itemRefCallback?.(R,r,s)),C=vh(),I=S.useRef("touch"),k=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(Hz,{scope:t,value:r,disabled:s,textId:C,isSelected:h,onItemTextChange:S.useCallback(R=>{y(M=>M||(R?.textContent??"").trim())},[]),children:f.jsx(eg.ItemSlot,{scope:t,value:r,disabled:s,textValue:m,children:f.jsx(Xe.div,{role:"option","aria-labelledby":C,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:b,onFocus:rt(a.onFocus,()=>E(!0)),onBlur:rt(a.onBlur,()=>E(!1)),onClick:rt(a.onClick,()=>{I.current!=="mouse"&&k()}),onPointerUp:rt(a.onPointerUp,()=>{I.current==="mouse"&&k()}),onPointerDown:rt(a.onPointerDown,R=>{I.current=R.pointerType}),onPointerMove:rt(a.onPointerMove,R=>{I.current=R.pointerType,s?d.onItemLeave?.():I.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:rt(a.onPointerLeave,R=>{R.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:rt(a.onKeyDown,R=>{d.searchRef?.current!==""&&R.key===" "||(kz.includes(R.key)&&k(),R.key===" "&&R.preventDefault())})})})})});TP.displayName=tm;var hd="SelectItemText",SP=S.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...o}=n,a=Vo(hd,t),c=Fo(hd,t),d=EP(hd,t),h=Rz(hd,t),[m,y]=S.useState(null),v=wt(e,k=>y(k),d.onItemTextChange,k=>c.itemTextRefCallback?.(k,d.value,d.disabled)),E=m?.textContent,b=S.useMemo(()=>f.jsx("option",{value:d.value,disabled:d.disabled,children:E},d.value),[d.disabled,d.value,E]),{onNativeOptionAdd:C,onNativeOptionRemove:I}=h;return dn(()=>(C(b),()=>I(b)),[C,I,b]),f.jsxs(f.Fragment,{children:[f.jsx(Xe.span,{id:d.textId,...o,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?yh.createPortal(o.children,a.valueNode):null]})});SP.displayName=hd;var CP="SelectItemIndicator",bP=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return EP(CP,t).isSelected?f.jsx(Xe.span,{"aria-hidden":!0,...r,ref:e}):null});bP.displayName=CP;var n0="SelectScrollUpButton",IP=S.forwardRef((n,e)=>{const t=Fo(n0,n.__scopeSelect),r=Yw(n0,n.__scopeSelect),[s,o]=S.useState(!1),a=wt(e,r.onScrollButtonChange);return dn(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollTop>0;o(h)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?f.jsx(AP,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});IP.displayName=n0;var r0="SelectScrollDownButton",kP=S.forwardRef((n,e)=>{const t=Fo(r0,n.__scopeSelect),r=Yw(r0,n.__scopeSelect),[s,o]=S.useState(!1),a=wt(e,r.onScrollButtonChange);return dn(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;o(m)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),s?f.jsx(AP,{...n,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});kP.displayName=r0;var AP=S.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,o=Fo("SelectScrollButton",t),a=S.useRef(null),c=tg(t),d=S.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),dn(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),f.jsx(Xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:rt(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:rt(s.onPointerMove,()=>{o.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:rt(s.onPointerLeave,()=>{d()})})}),Wz="SelectSeparator",qz=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return f.jsx(Xe.div,{"aria-hidden":!0,...r,ref:e})});qz.displayName=Wz;var s0="SelectArrow",Kz=S.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=ng(t),o=Vo(s0,t),a=Fo(s0,t);return o.open&&a.position==="popper"?f.jsx(O9,{...s,...r,ref:e}):null});Kz.displayName=s0;var Gz="SelectBubbleInput",NP=S.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=S.useRef(null),o=wt(r,s),a=Vw(e);return S.useEffect(()=>{const c=s.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&m){const y=new Event("change",{bubbles:!0});m.call(c,e),c.dispatchEvent(y)}},[a,e]),f.jsx(Xe.select,{...t,style:{...JN,...t.style},ref:o,defaultValue:e})});NP.displayName=Gz;function PP(n){return n===""||n===void 0}function RP(n){const e=mi(n),t=S.useRef(""),r=S.useRef(0),s=S.useCallback(a=>{const c=t.current+a;e(c),(function d(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),o=S.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,o]}function DP(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let a=Qz(n,Math.max(o,0));s.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function Qz(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Yz=lP,Xz=uP,Jz=hP,Zz=fP,eB=pP,tB=mP,nB=_P,rB=TP,sB=SP,iB=bP,oB=IP,aB=kP;function fc({...n}){return f.jsx(Yz,{"data-slot":"select",...n})}function pc({...n}){return f.jsx(Jz,{"data-slot":"select-value",...n})}function mc({className:n,size:e="default",children:t,...r}){return f.jsxs(Xz,{"data-slot":"select-trigger","data-size":e,className:Ot("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,f.jsx(Zz,{asChild:!0,children:f.jsx(Rw,{className:"size-4 opacity-50"})})]})}function gc({className:n,children:e,position:t="popper",...r}){return f.jsx(eB,{children:f.jsxs(tB,{"data-slot":"select-content",className:Ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[f.jsx(lB,{}),f.jsx(nB,{className:Ot("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),f.jsx(cB,{})]})})}function La({className:n,children:e,...t}){return f.jsxs(rB,{"data-slot":"select-item",className:Ot("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[f.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:f.jsx(iB,{children:f.jsx(XF,{className:"size-4"})})}),f.jsx(sB,{children:e})]})}function lB({className:n,...e}){return f.jsx(oB,{"data-slot":"select-scroll-up-button",className:Ot("flex cursor-default items-center justify-center py-1",n),...e,children:f.jsx(e3,{className:"size-4"})})}function cB({className:n,...e}){return f.jsx(aB,{"data-slot":"select-scroll-down-button",className:Ot("flex cursor-default items-center justify-center py-1",n),...e,children:f.jsx(Rw,{className:"size-4"})})}const i0=({selectedTool:n,onToolSelect:e,onUndo:t,onRedo:r,onSave:s,onShare:o,onExport:a,onClear:c,onRotate:d,onFlip:h,canUndo:m=!1,canRedo:y=!1,brushSize:v=1,onBrushSizeChange:E,canvasSize:b={width:32,height:32},onCanvasSizeChange:C})=>{const[I,k]=S.useState(!1),[R,M]=S.useState(!1),F=[{id:"pen",icon:K3,label:"Bút vẽ",description:"Vẽ tự do"},{id:"eraser",icon:f3,label:"Tẩy",description:"Xóa pixel"},{id:"fill",icon:$3,label:"Tô màu",description:"Tô vùng cùng màu"},{id:"eyedropper",icon:d3,label:"Chọn màu",description:"Lấy màu từ canvas"},{id:"spray",icon:Sa,label:"Phun sương",description:"Tạo hiệu ứng phun sương"}],W=[{id:"line",icon:V3,label:"Đường thẳng",description:"Vẽ đường thẳng"},{id:"rectangle",icon:g6,label:"Hình chữ nhật",description:"Vẽ hình chữ nhật"},{id:"circle",icon:o3,label:"Hình tròn",description:"Vẽ hình tròn"}],K=[{id:"move",icon:z3,label:"Di chuyển",description:"Di chuyển vùng chọn"}],P=[{value:"16x16",width:16,height:16,label:"16×16 - Nhỏ"},{value:"24x24",width:24,height:24,label:"24×24 - Vừa"},{value:"32x32",width:32,height:32,label:"32×32 - Mặc định"},{value:"48x48",width:48,height:48,label:"48×48 - Lớn"},{value:"64x64",width:64,height:64,label:"64×64 - Rất lớn"},{value:"custom",width:32,height:32,label:"Tùy chỉnh"}],A=L=>{const V=P.find(B=>B.value===L);V&&C&&C({width:V.width,height:V.height})},j=()=>P.find(V=>V.width===b.width&&V.height===b.height)?.value||"32x32";return f.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[f.jsx("h3",{className:"text-center font-medium",children:"Công cụ vẽ"}),f.jsxs("div",{children:[f.jsx(it,{className:"text-sm text-gray-600 mb-2 block",children:"Công cụ cơ bản"}),f.jsx("div",{className:"grid grid-cols-5 gap-1",children:F.map(L=>f.jsx(qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg border-2 transition-colors relative ${n===L.id?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-300 hover:border-gray-400"}`,onClick:()=>e(L.id),title:`${L.label} - ${L.description}`,children:f.jsx(L.icon,{size:16})},L.id))})]}),f.jsxs("div",{children:[f.jsx(it,{className:"text-sm text-gray-600 mb-2 block",children:"Hình học"}),f.jsx("div",{className:"grid grid-cols-3 gap-1",children:W.map(L=>f.jsx(qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg border-2 transition-colors ${n===L.id?"border-green-500 bg-green-50 text-green-600":"border-gray-300 hover:border-gray-400"}`,onClick:()=>e(L.id),title:`${L.label} - ${L.description}`,children:f.jsx(L.icon,{size:16})},L.id))})]}),f.jsxs("div",{children:[f.jsx(it,{className:"text-sm text-gray-600 mb-2 block",children:"Biến đổi"}),f.jsx("div",{className:"grid grid-cols-1 gap-1",children:K.map(L=>f.jsx(qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`p-2 rounded-lg border-2 transition-colors ${n===L.id?"border-purple-500 bg-purple-50 text-purple-600":"border-gray-300 hover:border-gray-400"}`,onClick:()=>e(L.id),title:`${L.label} - ${L.description}`,children:f.jsx(L.icon,{size:16})},L.id))})]}),E&&f.jsxs("div",{children:[f.jsxs(it,{className:"text-sm text-gray-600 mb-2 block",children:["Kích thước bút: ",v,"px"]}),f.jsx(Yp,{value:[v],onValueChange:L=>E(L[0]),max:8,min:1,step:1,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>M(!R),className:"w-full flex items-center gap-2",children:[f.jsx(Kp,{size:16}),"Kích thước canvas"]}),R&&f.jsxs(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[f.jsx(it,{className:"text-sm mb-2 block",children:"Chọn kích thước"}),f.jsxs(fc,{value:j(),onValueChange:A,children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsx(gc,{children:P.map(L=>f.jsx(La,{value:L.value,children:L.label},L.value))})]}),f.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Hiện tại: ",b.width," × ",b.height," pixels"]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Se,{variant:"outline",size:"sm",onClick:t,disabled:!m,className:"flex-1",children:[f.jsx(k6,{size:16,className:"mr-1"}),"Hoàn tác"]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:r,disabled:!y,className:"flex-1",children:[f.jsx(X3,{size:16,className:"mr-1"}),"Làm lại"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>d?.("left"),className:"flex-1",children:[f.jsx(t6,{size:16,className:"mr-1"}),"Xoay trái"]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>d?.("right"),className:"flex-1",children:[f.jsx(r6,{size:16,className:"mr-1"}),"Xoay phải"]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>h?.("horizontal"),className:"flex-1",children:"↔️ Lật ngang"}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>h?.("vertical"),className:"flex-1",children:"↕️ Lật dọc"})]}),f.jsxs(Se,{variant:"default",size:"sm",onClick:s,className:"w-full",children:[f.jsx(qm,{size:16,className:"mr-1"}),"Lưu tranh"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Se,{variant:"outline",size:"sm",onClick:o,className:"flex-1",children:[f.jsx(Xa,{size:16,className:"mr-1"}),"Chia sẻ"]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:a,className:"flex-1",children:[f.jsx(bs,{size:16,className:"mr-1"}),"Xuất file"]})]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:c,className:"w-full text-red-600 hover:text-red-700",children:[f.jsx(C3,{size:16,className:"mr-1"}),"Xóa canvas"]})]})]})};function wn({className:n,type:e,...t}){return f.jsx("input",{type:e,"data-slot":"input",className:Ot("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}const uB=()=>{};var UC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee=function(n,e){if(!n)throw Xc(e)},Xc=function(n){return new Error("Firebase Database ("+MP.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},dB=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],a=n[t++],c=n[t++],d=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Xw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,c=a?n[s+1]:0,d=s+2<n.length,h=d?n[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|h>>6,E=h&63;d||(E=64,a||(v=64)),r.push(t[m],t[y],t[v],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):dB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||h==null||y==null)throw new hB;const v=o<<2|c>>4;if(r.push(v),h!==64){const E=c<<4&240|h>>2;if(r.push(E),y!==64){const b=h<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class hB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LP=function(n){const e=jP(n);return Xw.encodeByteArray(e,!0)},nm=function(n){return LP(n).replace(/\./g,"")},rm=function(n){try{return Xw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fB(n){return OP(void 0,n)}function OP(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!pB(t)||(n[t]=OP(n[t],e[t]));return n}function pB(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=()=>mB().__FIREBASE_DEFAULTS__,yB=()=>{if(typeof process>"u"||typeof UC>"u")return;const n=UC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&rm(n[1]);return e&&JSON.parse(e)},rg=()=>{try{return uB()||gB()||yB()||vB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},VP=n=>rg()?.emulatorHosts?.[n],FP=n=>{const e=VP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},UP=()=>rg()?.config,zP=n=>rg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nm(JSON.stringify(t)),nm(JSON.stringify(a)),""].join(".")}const Sd={};function _B(){const n={prod:[],emulator:[]};for(const e of Object.keys(Sd))Sd[e]?n.emulator.push(e):n.prod.push(e);return n}function wB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zC=!1;function Zw(n,e){if(typeof window>"u"||typeof document>"u"||!Uo(window.location.host)||Sd[n]===e||Sd[n]||zC)return;Sd[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=_B().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zC=!0,a()},v}function m(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=wB(r),E=t("text"),b=document.getElementById(E)||document.createElement("span"),C=t("learnmore"),I=document.getElementById(C)||document.createElement("a"),k=t("preprendIcon"),R=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const M=v.element;c(M),m(I,C);const F=h();d(R,k),M.append(R,b,I,F),document.body.appendChild(M)}o?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ex(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function xB(){const n=rg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TB(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $P(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SB(){const n=Un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CB(){return MP.NODE_ADMIN===!0}function bB(){return!xB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IB(){try{return typeof indexedDB=="object"}catch{return!1}}function kB(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="FirebaseError";class Ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AB,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wh.prototype.create)}}class wh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?NB(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Ti(s,c,r)}}function NB(n,e){return n.replace(PB,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n){return JSON.parse(n)}function cn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=function(n){let e={},t={},r={},s="";try{const o=n.split(".");e=Wd(rm(o[0])||""),t=Wd(rm(o[1])||""),s=o[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},RB=function(n){const e=HP(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},DB=function(n){const e=HP(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function kc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function sm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function im(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function So(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],a=e[s];if(BC(o)&&BC(a)){if(!So(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function BC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function pd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)r[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const v=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(v<<1|v>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],d=this.chain_[4],h,m;for(let y=0;y<80;y++){y<40?y<20?(h=c^o&(a^c),m=1518500249):(h=o^a^c,m=1859775393):y<60?(h=o&a|c&(o|a),m=2400959708):(h=o^a^c,m=3395469782);const v=(s<<5|s>>>27)+h+d+m+r[y]&4294967295;d=c,c=a,a=(o<<30|o>>>2)&4294967295,o=s,s=v}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const o=this.buf_;let a=this.inbuf_;for(;s<t;){if(a===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(o[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}else for(;s<t;)if(o[a]=e[s],++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[s]>>o&255,++r;return e}}function jB(n,e){const t=new LB(n,e);return t.subscribe.bind(t)}class LB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");OB(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=qv),s.error===void 0&&(s.error=qv),s.complete===void 0&&(s.complete=qv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OB(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qv(){}function Ac(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const o=s-55296;r++,Ee(r<n.length,"Surrogate pair missing trail surrogate.");const a=n.charCodeAt(r)-56320;s=65536+(o<<10)+a}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},sg=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class Co{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Cs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zB(e))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ea){return this.instances.has(e)}getOptions(e=Ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ea){return this.component?this.component.multipleInstances?e:Ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UB(n){return n===Ea?void 0:n}function zB(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new FB(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const $B={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},HB=nt.INFO,WB={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},qB=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=WB[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=HB,this._logHandler=qB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$B[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const KB=(n,e)=>e.some(t=>n instanceof t);let $C,HC;function GB(){return $C||($C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QB(){return HC||(HC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WP=new WeakMap,o0=new WeakMap,qP=new WeakMap,Kv=new WeakMap,tx=new WeakMap;function YB(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(ho(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&WP.set(t,n)}).catch(()=>{}),tx.set(e,n),e}function XB(n){if(o0.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});o0.set(n,e)}let a0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return o0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ho(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JB(n){a0=n(a0)}function ZB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Gv(this),e,...t);return qP.set(r,e.sort?e.sort():[e]),ho(r)}:QB().includes(n)?function(...e){return n.apply(Gv(this),e),ho(WP.get(this))}:function(...e){return ho(n.apply(Gv(this),e))}}function e8(n){return typeof n=="function"?ZB(n):(n instanceof IDBTransaction&&XB(n),KB(n,GB())?new Proxy(n,a0):n)}function ho(n){if(n instanceof IDBRequest)return YB(n);if(Kv.has(n))return Kv.get(n);const e=e8(n);return e!==n&&(Kv.set(n,e),tx.set(e,n)),e}const Gv=n=>tx.get(n);function t8(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),c=ho(a);return r&&a.addEventListener("upgradeneeded",d=>{r(ho(a.result),d.oldVersion,d.newVersion,ho(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const n8=["get","getKey","getAll","getAllKeys","count"],r8=["put","add","delete","clear"],Qv=new Map;function WC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qv.get(e))return Qv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=r8.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||n8.includes(t)))return;const o=async function(a,...c){const d=this.transaction(a,s?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&d.done]))[0]};return Qv.set(e,o),o}JB(n=>({...n,get:(e,t,r)=>WC(e,t)||n.get(e,t,r),has:(e,t)=>!!WC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i8(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function i8(n){return n.getComponent()?.type==="VERSION"}const l0="@firebase/app",qC="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new ig("@firebase/app"),o8="@firebase/app-compat",a8="@firebase/analytics-compat",l8="@firebase/analytics",c8="@firebase/app-check-compat",u8="@firebase/app-check",d8="@firebase/auth",h8="@firebase/auth-compat",f8="@firebase/database",p8="@firebase/data-connect",m8="@firebase/database-compat",g8="@firebase/functions",y8="@firebase/functions-compat",v8="@firebase/installations",_8="@firebase/installations-compat",w8="@firebase/messaging",x8="@firebase/messaging-compat",E8="@firebase/performance",T8="@firebase/performance-compat",S8="@firebase/remote-config",C8="@firebase/remote-config-compat",b8="@firebase/storage",I8="@firebase/storage-compat",k8="@firebase/firestore",A8="@firebase/ai",N8="@firebase/firestore-compat",P8="firebase",R8="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="[DEFAULT]",D8={[l0]:"fire-core",[o8]:"fire-core-compat",[l8]:"fire-analytics",[a8]:"fire-analytics-compat",[u8]:"fire-app-check",[c8]:"fire-app-check-compat",[d8]:"fire-auth",[h8]:"fire-auth-compat",[f8]:"fire-rtdb",[p8]:"fire-data-connect",[m8]:"fire-rtdb-compat",[g8]:"fire-fn",[y8]:"fire-fn-compat",[v8]:"fire-iid",[_8]:"fire-iid-compat",[w8]:"fire-fcm",[x8]:"fire-fcm-compat",[E8]:"fire-perf",[T8]:"fire-perf-compat",[S8]:"fire-rc",[C8]:"fire-rc-compat",[b8]:"fire-gcs",[I8]:"fire-gcs-compat",[k8]:"fire-fst",[N8]:"fire-fst-compat",[A8]:"fire-vertex","fire-js":"fire-js",[P8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=new Map,M8=new Map,u0=new Map;function KC(n,e){try{n.container.addComponent(e)}catch(t){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $a(n){const e=n.name;if(u0.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;u0.set(e,n);for(const t of om.values())KC(t,n);for(const t of M8.values())KC(t,n);return!0}function og(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new wh("app","Firebase",j8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=R8;function KP(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:c0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw fo.create("bad-app-name",{appName:String(s)});if(t||(t=UP()),!t)throw fo.create("no-options");const o=om.get(s);if(o){if(So(t,o.options)&&So(r,o.config))return o;throw fo.create("duplicate-app",{appName:s})}const a=new BB(s);for(const d of u0.values())a.addComponent(d);const c=new L8(t,r,a);return om.set(s,c),c}function nx(n=c0){const e=om.get(n);if(!e&&n===c0&&UP())return KP();if(!e)throw fo.create("no-app",{appName:n});return e}function Rs(n,e,t){let r=D8[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(a.join(" "));return}$a(new Co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8="firebase-heartbeat-database",V8=1,qd="firebase-heartbeat-store";let Yv=null;function GP(){return Yv||(Yv=t8(O8,V8,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qd)}catch(t){console.warn(t)}}}}).catch(n=>{throw fo.create("idb-open",{originalErrorMessage:n.message})})),Yv}async function F8(n){try{const t=(await GP()).transaction(qd),r=await t.objectStore(qd).get(QP(n));return await t.done,r}catch(e){if(e instanceof Ti)vi.warn(e.message);else{const t=fo.create("idb-get",{originalErrorMessage:e?.message});vi.warn(t.message)}}}async function GC(n,e){try{const r=(await GP()).transaction(qd,"readwrite");await r.objectStore(qd).put(e,QP(n)),await r.done}catch(t){if(t instanceof Ti)vi.warn(t.message);else{const r=fo.create("idb-set",{originalErrorMessage:t?.message});vi.warn(r.message)}}}function QP(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=1024,z8=30;class B8{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new H8(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=QC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>z8){const s=W8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=QC(),{heartbeatsToSend:t,unsentEntries:r}=$8(this._heartbeatsCache.heartbeats),s=nm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return vi.warn(e),""}}}function QC(){return new Date().toISOString().substring(0,10)}function $8(n,e=U8){const t=[];let r=n.slice();for(const s of n){const o=t.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),YC(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),YC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class H8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IB()?kB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await F8(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function YC(n){return nm(JSON.stringify({version:2,heartbeats:n})).length}function W8(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(n){$a(new Co("platform-logger",e=>new s8(e),"PRIVATE")),$a(new Co("heartbeat",e=>new B8(e),"PRIVATE")),Rs(l0,qC,n),Rs(l0,qC,"esm2020"),Rs("fire-js","")}q8("");function YP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K8=YP,XP=new wh("auth","Firebase",YP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new ig("@firebase/auth");function G8(n,...e){am.logLevel<=nt.WARN&&am.warn(`Auth (${Ja}): ${n}`,...e)}function Pp(n,...e){am.logLevel<=nt.ERROR&&am.error(`Auth (${Ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,...e){throw rx(n,...e)}function Ds(n,...e){return rx(n,...e)}function JP(n,e,t){const r={...K8(),[e]:t};return new wh("auth","Firebase",r).create(e,{appName:n.name})}function ui(n){return JP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rx(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XP.create(n,...e)}function ze(n,e,...t){if(!n)throw rx(e,...t)}function ai(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pp(e),new Error(e)}function _i(n,e){n||ai(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(){return typeof self<"u"&&self.location?.href||""}function Q8(){return XC()==="http:"||XC()==="https:"}function XC(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q8()||TB()||"connection"in navigator)?navigator.onLine:!0}function X8(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,_i(t>e,"Short delay should be less than long delay!"),this.isMobile=ex()||$P()}get(){return Y8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n,e){_i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e$=new xh(3e4,6e4);function zo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Si(n,e,t,r,s={}){return eR(n,s,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const c=Jc({key:n.config.apiKey,...a}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:d,...o};return EB()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Uo(n.emulatorConfig.host)&&(h.credentials="include"),ZP.fetch()(await tR(n,n.config.apiHost,t,c),h)})}async function eR(n,e,t){n._canInitEmulator=!1;const r={...J8,...e};try{const s=new n$(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw hp(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw hp(n,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw hp(n,"email-already-in-use",a);if(d==="USER_DISABLED")throw hp(n,"user-disabled",a);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw JP(n,m,h);us(n,m)}}catch(s){if(s instanceof Ti)throw s;us(n,"network-request-failed",{message:String(s)})}}async function Eh(n,e,t,r,s={}){const o=await Si(n,e,t,r,s);return"mfaPendingCredential"in o&&us(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function tR(n,e,t,r){const s=`${e}${t}?${r}`,o=n,a=o.config.emulator?sx(n.config,s):`${n.config.apiScheme}://${s}`;return Z8.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function t$(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),e$.get())})}}function hp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ds(n,e,r);return s.customData._tokenResponse=t,s}function JC(n){return n!==void 0&&n.enterprise!==void 0}class r${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return t$(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function s$(n,e){return Si(n,"GET","/v2/recaptchaConfig",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i$(n,e){return Si(n,"POST","/v1/accounts:delete",e)}async function lm(n,e){return Si(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o$(n,e=!1){const t=xt(n),r=await t.getIdToken(e),s=ix(r);ze(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o?.sign_in_provider;return{claims:s,token:r,authTime:Cd(Xv(s.auth_time)),issuedAtTime:Cd(Xv(s.iat)),expirationTime:Cd(Xv(s.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Xv(n){return Number(n)*1e3}function ix(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pp("JWT malformed, contained fewer than 3 sections"),null;try{const s=rm(t);return s?JSON.parse(s):(Pp("Failed to decode base64 JWT payload"),null)}catch(s){return Pp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ZC(n){const e=ix(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ti&&a$(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function a$({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cd(this.lastLoginAt),this.creationTime=Cd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cm(n){const e=n.auth,t=await n.getIdToken(),r=await Nc(n,lm(e,{idToken:t}));ze(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?nR(s.providerUserInfo):[],a=u$(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new h0(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,m)}async function c$(n){const e=xt(n);await cm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u$(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d$(n,e){const t=await eR(n,{},async()=>{const r=Jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,a=await tR(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return n.emulatorConfig&&Uo(n.emulatorConfig.host)&&(d.credentials="include"),ZP.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function h$(n,e){return Si(n,"POST","/v2/accounts:revokeToken",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=ZC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await d$(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,a=new yc;return r&&(ze(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ze(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ze(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return ai("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class rs{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new l$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new h0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return o$(this,e)}reload(){return c$(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new rs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await cm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(ui(this.auth));const e=await this.getIdToken();return await Nc(this,i$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,d=t._redirectEventId??void 0,h=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:C}=t;ze(y&&C,e,"internal-error");const I=yc.fromJSON(this.name,C);ze(typeof y=="string",e,"internal-error"),Ji(r,e.name),Ji(s,e.name),ze(typeof v=="boolean",e,"internal-error"),ze(typeof E=="boolean",e,"internal-error"),Ji(o,e.name),Ji(a,e.name),Ji(c,e.name),Ji(d,e.name),Ji(h,e.name),Ji(m,e.name);const k=new rs({uid:y,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:o,tenantId:c,stsTokenManager:I,createdAt:h,lastLoginAt:m});return b&&Array.isArray(b)&&(k.providerData=b.map(R=>({...R}))),d&&(k._redirectEventId=d),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new yc;s.updateFromServerResponse(t);const o=new rs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ze(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?nR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!o?.length,c=new yc;c.updateFromIdToken(r);const d=new rs({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new h0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;function li(n){_i(n instanceof Function,"Expected a class definition");let e=eb.get(n);return e?(_i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rR.type="NONE";const tb=rR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e,t){return`firebase:${n}:${e}:${t}`}class vc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Rp(this.userKey,s.apiKey,o),this.fullPersistenceKey=Rp("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lm(this.auth,{idToken:e}).catch(()=>{});return t?rs._fromGetAccountInfoResponse(this.auth,t,e):null}return rs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vc(li(tb),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||li(tb);const a=Rp(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const m=await h._get(a);if(m){let y;if(typeof m=="string"){const v=await lm(e,{idToken:m}).catch(()=>{});if(!v)break;y=await rs._fromGetAccountInfoResponse(e,v,m)}else y=rs._fromJSON(e,m);h!==o&&(c=y),o=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new vc(o,e,r):(o=d[0],c&&await o._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(a)}catch{}})),new vc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cR(e))return"Blackberry";if(uR(e))return"Webos";if(iR(e))return"Safari";if((e.includes("chrome/")||oR(e))&&!e.includes("edge/"))return"Chrome";if(lR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sR(n=Un()){return/firefox\//i.test(n)}function iR(n=Un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oR(n=Un()){return/crios\//i.test(n)}function aR(n=Un()){return/iemobile/i.test(n)}function lR(n=Un()){return/android/i.test(n)}function cR(n=Un()){return/blackberry/i.test(n)}function uR(n=Un()){return/webos/i.test(n)}function ox(n=Un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f$(n=Un()){return ox(n)&&!!window.navigator?.standalone}function p$(){return SB()&&document.documentMode===10}function dR(n=Un()){return ox(n)||lR(n)||uR(n)||cR(n)||/windows phone/i.test(n)||aR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n,e=[]){let t;switch(n){case"Browser":t=nb(Un());break;case"Worker":t=`${nb(Un())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((a,c)=>{try{const d=e(o);a(d)}catch(d){c(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g$(n,e={}){return Si(n,"GET","/v2/passwordPolicy",zo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=6;class v${constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??y$,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new m$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lm(this,{idToken:e}),r=await rs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(ui(this));const t=e?xt(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g$(this),t=new v$(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await h$(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&li(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await vc.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&G8(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Za(n){return xt(n)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=jB(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w$(n){ag=n}function fR(n){return ag.loadJS(n)}function x$(){return ag.recaptchaEnterpriseScript}function E$(){return ag.gapiScript}function T$(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class S${constructor(){this.enterprise=new C$}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class C${ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const b$="recaptcha-enterprise",pR="NO_RECAPTCHA";class I${constructor(e){this.type=b$,this.auth=Za(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{s$(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new r$(d);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,a(h.siteKey)}}).catch(d=>{c(d)})})}function s(o,a,c){const d=window.grecaptcha;JC(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(h=>{a(h)}).catch(()=>{a(pR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new S$().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(c=>{if(!t&&JC(window.grecaptcha))s(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=x$();d.length!==0&&(d+=c),fR(d).then(()=>{s(c,o,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function sb(n,e,t,r=!1,s=!1){const o=new I$(n);let a;if(s)a=pR;else try{a=await o.verify(t)}catch{a=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function f0(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await sb(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await sb(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(n,e){const t=og(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(So(o,e??{}))return s;us(s,"already-initialized")}return t.initialize({options:e})}function A$(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(li);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function N$(n,e,t){const r=Za(n);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=mR(e),{host:a,port:c}=P$(e),d=c===null?"":`:${c}`,h={url:`${o}//${a}${d}/`},m=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(So(h,r.config.emulator)&&So(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Uo(a)?(Jw(`${o}//${a}${d}`),Zw("Auth",!0)):R$()}function mR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function P$(n){const e=mR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:ib(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:ib(a)}}}function ib(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function R$(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function D$(n,e){return Si(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M$(n,e){return Eh(n,"POST","/v1/accounts:signInWithPassword",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",zo(n,e))}async function L$(n,e){return Eh(n,"POST","/v1/accounts:signInWithEmailLink",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends ax{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Kd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Kd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,t,"signInWithPassword",M$);case"emailLink":return j$(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,r,"signUpPassword",D$);case"emailLink":return L$(e,{idToken:t,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n,e){return Eh(n,"POST","/v1/accounts:signInWithIdp",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$="http://localhost";class Ha extends ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):us("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const a=new Ha(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return _c(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_c(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_c(e,t)}buildRequest(){const e={requestUri:O$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F$(n){const e=fd(pd(n)).link,t=e?fd(pd(e)).deep_link_id:null,r=fd(pd(n)).deep_link_id;return(r?fd(pd(r)).link:null)||r||t||e||n}class lx{constructor(e){const t=fd(pd(e)),r=t.apiKey??null,s=t.oobCode??null,o=V$(t.mode??null);ze(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=F$(e);try{return new lx(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.providerId=Zc.PROVIDER_ID}static credential(e,t){return Kd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lx.parseLink(t);return ze(r,"argument-error"),Kd._fromEmailAndCode(e,r.code,r.tenantId)}}Zc.PROVIDER_ID="password";Zc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends gR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Th{constructor(){super("facebook.com")}static credential(e){return Ha._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Th{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ha._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return io.credential(t,r)}catch{return null}}}io.GOOGLE_SIGN_IN_METHOD="google.com";io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Th{constructor(){super("github.com")}static credential(e){return Ha._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.GITHUB_SIGN_IN_METHOD="github.com";oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Th{constructor(){super("twitter.com")}static credential(e,t){return Ha._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ao.credential(t,r)}catch{return null}}}ao.TWITTER_SIGN_IN_METHOD="twitter.com";ao.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(n,e){return Eh(n,"POST","/v1/accounts:signUp",zo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await rs._fromIdTokenResponse(e,r,s),a=ob(r);return new Wa({user:o,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=ob(r);return new Wa({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function ob(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends Ti{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,um.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new um(e,t,r,s)}}function yR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?um._fromErrorAndOperation(n,o,e,r):o})}async function z$(n,e,t=!1){const r=await Nc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B$(n,e,t=!1){const{auth:r}=n;if(yr(r.app))return Promise.reject(ui(r));const s="reauthenticate";try{const o=await Nc(n,yR(r,s,e,n),t);ze(o.idToken,r,"internal-error");const a=ix(o.idToken);ze(a,r,"internal-error");const{sub:c}=a;return ze(n.uid===c,r,"user-mismatch"),Wa._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&us(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(n,e,t=!1){if(yr(n.app))return Promise.reject(ui(n));const r="signIn",s=await yR(n,r,e),o=await Wa._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function $$(n,e){return vR(Za(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(n){const e=Za(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function H$(n,e,t){if(yr(n.app))return Promise.reject(ui(n));const r=Za(n),a=await f0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U$).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&_R(n),d}),c=await Wa._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function W$(n,e,t){return yr(n.app)?Promise.reject(ui(n)):$$(xt(n),Zc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_R(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q$(n,e){return Si(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K$(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=xt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Nc(r,q$(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function G$(n,e,t,r){return xt(n).onIdTokenChanged(e,t,r)}function Q$(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function Y$(n,e,t,r){return xt(n).onAuthStateChanged(e,t,r)}function X$(n){return xt(n).signOut()}const dm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dm,"1"),this.storage.removeItem(dm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=1e3,Z$=10;class xR extends wR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);p$()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Z$):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},J$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xR.type="LOCAL";const e7=xR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER extends wR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ER.type="SESSION";const TR=ER;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new lg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,o)),d=await t7(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,d)=>{const h=cx("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function r7(n){Ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function s7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i7(){return navigator?.serviceWorker?.controller||null}function o7(){return SR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebaseLocalStorageDb",a7=1,hm="firebaseLocalStorage",bR="fbase_key";class Sh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cg(n,e){return n.transaction([hm],e?"readwrite":"readonly").objectStore(hm)}function l7(){const n=indexedDB.deleteDatabase(CR);return new Sh(n).toPromise()}function p0(){const n=indexedDB.open(CR,a7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hm,{keyPath:bR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hm)?e(r):(r.close(),await l7(),e(await p0()))})})}async function ab(n,e,t){const r=cg(n,!0).put({[bR]:e,value:t});return new Sh(r).toPromise()}async function c7(n,e){const t=cg(n,!1).get(e),r=await new Sh(t).toPromise();return r===void 0?null:r.value}function lb(n,e){const t=cg(n,!0).delete(e);return new Sh(t).toPromise()}const u7=800,d7=3;class IR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await p0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>d7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lg._getInstance(o7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await s7(),!this.activeServiceWorker)return;this.sender=new n7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await p0();return await ab(e,dm,"1"),await lb(e,dm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ab(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>c7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=cg(s,!1).getAll();return new Sh(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IR.type="LOCAL";const h7=IR;new xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(n,e){return e?li(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p7(n){return vR(n.auth,new ux(n),n.bypassAuthState)}function m7(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),B$(t,new ux(n),n.bypassAuthState)}async function g7(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),z$(t,new ux(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p7;case"linkViaPopup":case"linkViaRedirect":return g7;case"reauthViaPopup":case"reauthViaRedirect":return m7;default:us(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=new xh(2e3,1e4);class lc extends kR{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,lc.currentPopupAction&&lc.currentPopupAction.cancel(),lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y7.get())};e()}}lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="pendingRedirect",Dp=new Map;class _7 extends kR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Dp.get(this.auth._key());if(!e){try{const r=await w7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dp.set(this.auth._key(),e)}return this.bypassAuthState||Dp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w7(n,e){const t=T7(e),r=E7(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function x7(n,e){Dp.set(n._key(),e)}function E7(n){return li(n._redirectPersistence)}function T7(n){return Rp(v7,n.config.apiKey,n.name)}async function S7(n,e,t=!1){if(yr(n.app))return Promise.reject(ui(n));const r=Za(n),s=f7(r,e),a=await new _7(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=600*1e3;class b7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!AR(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ds(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C7&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(e))}saveEventToCache(e){this.cachedEventUids.add(cb(e)),this.lastProcessedEventTime=Date.now()}}function cb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function I7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k7(n,e={}){return Si(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N7=/^https?/;async function P7(n){if(n.config.emulator)return;const{authorizedDomains:e}=await k7(n);for(const t of e)try{if(R7(t))return}catch{}us(n,"unauthorized-domain")}function R7(n){const e=d0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!N7.test(t))return!1;if(A7.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=new xh(3e4,6e4);function ub(){const n=Ms().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M7(n){return new Promise((e,t)=>{function r(){ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ub(),t(Ds(n,"network-request-failed"))},timeout:D7.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)r();else{const s=T$("iframefcb");return Ms()[s]=()=>{gapi.load?r():t(Ds(n,"network-request-failed"))},fR(`${E$()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Mp=null,e})}let Mp=null;function j7(n){return Mp=Mp||M7(n),Mp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new xh(5e3,15e3),O7="__/auth/iframe",V7="emulator/auth/iframe",F7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z7(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sx(e,V7):`https://${n.config.authDomain}/${O7}`,r={apiKey:e.apiKey,appName:n.name,v:Ja},s=U7.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Jc(r).slice(1)}`}async function B7(n){const e=await j7(n),t=Ms().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:z7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F7,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=Ds(n,"network-request-failed"),c=Ms().setTimeout(()=>{o(a)},L7.get());function d(){Ms().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H7=500,W7=600,q7="_blank",K7="http://localhost";class db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G7(n,e,t,r=H7,s=W7){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d={...$7,width:r.toString(),height:s.toString(),top:o,left:a},h=Un().toLowerCase();t&&(c=oR(h)?q7:t),sR(h)&&(e=e||K7,d.scrollbars="yes");const m=Object.entries(d).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(f$(h)&&c!=="_self")return Q7(e||"",c),new db(null);const y=window.open(e||"",c,m);ze(y,n,"popup-blocked");try{y.focus()}catch{}return new db(y)}function Q7(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7="__/auth/handler",X7="emulator/auth/handler",J7=encodeURIComponent("fac");async function hb(n,e,t,r,s,o){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ja,eventId:s};if(e instanceof gR){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",sm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))a[m]=y}if(e instanceof Th){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await n._getAppCheckToken(),h=d?`#${J7}=${encodeURIComponent(d)}`:"";return`${Z7(n)}?${Jc(c).slice(1)}${h}`}function Z7({config:n}){return n.emulator?sx(n,X7):`https://${n.authDomain}/${Y7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="webStorageSupport";class eH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TR,this._completeRedirectFn=S7,this._overrideRedirectResult=x7}async _openPopup(e,t,r,s){_i(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await hb(e,t,r,d0(),s);return G7(e,o,cx())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await hb(e,t,r,d0(),s);return r7(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(_i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await B7(e),r=new b7(e);return t.register("authEvent",s=>(ze(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jv,{type:Jv},s=>{const o=s?.[0]?.[Jv];o!==void 0&&t(!!o),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=P7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dR()||iR()||ox()}}const tH=eH;var fb="@firebase/auth",pb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sH(n){$a(new Co("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ze(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hR(n)},h=new _$(r,s,o,d);return A$(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$a(new Co("auth-internal",e=>{const t=Za(e.getProvider("auth").getImmediate());return(r=>new nH(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(fb,pb,rH(n)),Rs(fb,pb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=300,oH=zP("authIdTokenMaxAge")||iH;let mb=null;const aH=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>oH)return;const s=t?.token;mb!==s&&(mb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lH(n=nx()){const e=og(n,"auth");if(e.isInitialized())return e.getImmediate();const t=k$(n,{popupRedirectResolver:tH,persistence:[h7,e7,TR]}),r=zP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=aH(o.toString());Q$(t,a,()=>a(t.currentUser)),G$(t,c=>a(c))}}const s=VP("auth");return s&&N$(t,`http://${s}`),t}function cH(){return document.getElementsByTagName("head")?.[0]??document}w$({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Ds("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",cH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sH("Browser");var uH="firebase",dH="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(uH,dH,"app");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,NR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function j(){}j.prototype=A.prototype,P.D=A.prototype,P.prototype=new j,P.prototype.constructor=P,P.C=function(L,V,B){for(var O=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)O[ge-2]=arguments[ge];return A.prototype[V].apply(L,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,A,j){j||(j=0);var L=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)L[V]=A.charCodeAt(j++)|A.charCodeAt(j++)<<8|A.charCodeAt(j++)<<16|A.charCodeAt(j++)<<24;else for(V=0;16>V;++V)L[V]=A[j++]|A[j++]<<8|A[j++]<<16|A[j++]<<24;A=P.g[0],j=P.g[1],V=P.g[2];var B=P.g[3],O=A+(B^j&(V^B))+L[0]+3614090360&4294967295;A=j+(O<<7&4294967295|O>>>25),O=B+(V^A&(j^V))+L[1]+3905402710&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(j^B&(A^j))+L[2]+606105819&4294967295,V=B+(O<<17&4294967295|O>>>15),O=j+(A^V&(B^A))+L[3]+3250441966&4294967295,j=V+(O<<22&4294967295|O>>>10),O=A+(B^j&(V^B))+L[4]+4118548399&4294967295,A=j+(O<<7&4294967295|O>>>25),O=B+(V^A&(j^V))+L[5]+1200080426&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(j^B&(A^j))+L[6]+2821735955&4294967295,V=B+(O<<17&4294967295|O>>>15),O=j+(A^V&(B^A))+L[7]+4249261313&4294967295,j=V+(O<<22&4294967295|O>>>10),O=A+(B^j&(V^B))+L[8]+1770035416&4294967295,A=j+(O<<7&4294967295|O>>>25),O=B+(V^A&(j^V))+L[9]+2336552879&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(j^B&(A^j))+L[10]+4294925233&4294967295,V=B+(O<<17&4294967295|O>>>15),O=j+(A^V&(B^A))+L[11]+2304563134&4294967295,j=V+(O<<22&4294967295|O>>>10),O=A+(B^j&(V^B))+L[12]+1804603682&4294967295,A=j+(O<<7&4294967295|O>>>25),O=B+(V^A&(j^V))+L[13]+4254626195&4294967295,B=A+(O<<12&4294967295|O>>>20),O=V+(j^B&(A^j))+L[14]+2792965006&4294967295,V=B+(O<<17&4294967295|O>>>15),O=j+(A^V&(B^A))+L[15]+1236535329&4294967295,j=V+(O<<22&4294967295|O>>>10),O=A+(V^B&(j^V))+L[1]+4129170786&4294967295,A=j+(O<<5&4294967295|O>>>27),O=B+(j^V&(A^j))+L[6]+3225465664&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^j&(B^A))+L[11]+643717713&4294967295,V=B+(O<<14&4294967295|O>>>18),O=j+(B^A&(V^B))+L[0]+3921069994&4294967295,j=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(j^V))+L[5]+3593408605&4294967295,A=j+(O<<5&4294967295|O>>>27),O=B+(j^V&(A^j))+L[10]+38016083&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^j&(B^A))+L[15]+3634488961&4294967295,V=B+(O<<14&4294967295|O>>>18),O=j+(B^A&(V^B))+L[4]+3889429448&4294967295,j=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(j^V))+L[9]+568446438&4294967295,A=j+(O<<5&4294967295|O>>>27),O=B+(j^V&(A^j))+L[14]+3275163606&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^j&(B^A))+L[3]+4107603335&4294967295,V=B+(O<<14&4294967295|O>>>18),O=j+(B^A&(V^B))+L[8]+1163531501&4294967295,j=V+(O<<20&4294967295|O>>>12),O=A+(V^B&(j^V))+L[13]+2850285829&4294967295,A=j+(O<<5&4294967295|O>>>27),O=B+(j^V&(A^j))+L[2]+4243563512&4294967295,B=A+(O<<9&4294967295|O>>>23),O=V+(A^j&(B^A))+L[7]+1735328473&4294967295,V=B+(O<<14&4294967295|O>>>18),O=j+(B^A&(V^B))+L[12]+2368359562&4294967295,j=V+(O<<20&4294967295|O>>>12),O=A+(j^V^B)+L[5]+4294588738&4294967295,A=j+(O<<4&4294967295|O>>>28),O=B+(A^j^V)+L[8]+2272392833&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^j)+L[11]+1839030562&4294967295,V=B+(O<<16&4294967295|O>>>16),O=j+(V^B^A)+L[14]+4259657740&4294967295,j=V+(O<<23&4294967295|O>>>9),O=A+(j^V^B)+L[1]+2763975236&4294967295,A=j+(O<<4&4294967295|O>>>28),O=B+(A^j^V)+L[4]+1272893353&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^j)+L[7]+4139469664&4294967295,V=B+(O<<16&4294967295|O>>>16),O=j+(V^B^A)+L[10]+3200236656&4294967295,j=V+(O<<23&4294967295|O>>>9),O=A+(j^V^B)+L[13]+681279174&4294967295,A=j+(O<<4&4294967295|O>>>28),O=B+(A^j^V)+L[0]+3936430074&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^j)+L[3]+3572445317&4294967295,V=B+(O<<16&4294967295|O>>>16),O=j+(V^B^A)+L[6]+76029189&4294967295,j=V+(O<<23&4294967295|O>>>9),O=A+(j^V^B)+L[9]+3654602809&4294967295,A=j+(O<<4&4294967295|O>>>28),O=B+(A^j^V)+L[12]+3873151461&4294967295,B=A+(O<<11&4294967295|O>>>21),O=V+(B^A^j)+L[15]+530742520&4294967295,V=B+(O<<16&4294967295|O>>>16),O=j+(V^B^A)+L[2]+3299628645&4294967295,j=V+(O<<23&4294967295|O>>>9),O=A+(V^(j|~B))+L[0]+4096336452&4294967295,A=j+(O<<6&4294967295|O>>>26),O=B+(j^(A|~V))+L[7]+1126891415&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~j))+L[14]+2878612391&4294967295,V=B+(O<<15&4294967295|O>>>17),O=j+(B^(V|~A))+L[5]+4237533241&4294967295,j=V+(O<<21&4294967295|O>>>11),O=A+(V^(j|~B))+L[12]+1700485571&4294967295,A=j+(O<<6&4294967295|O>>>26),O=B+(j^(A|~V))+L[3]+2399980690&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~j))+L[10]+4293915773&4294967295,V=B+(O<<15&4294967295|O>>>17),O=j+(B^(V|~A))+L[1]+2240044497&4294967295,j=V+(O<<21&4294967295|O>>>11),O=A+(V^(j|~B))+L[8]+1873313359&4294967295,A=j+(O<<6&4294967295|O>>>26),O=B+(j^(A|~V))+L[15]+4264355552&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~j))+L[6]+2734768916&4294967295,V=B+(O<<15&4294967295|O>>>17),O=j+(B^(V|~A))+L[13]+1309151649&4294967295,j=V+(O<<21&4294967295|O>>>11),O=A+(V^(j|~B))+L[4]+4149444226&4294967295,A=j+(O<<6&4294967295|O>>>26),O=B+(j^(A|~V))+L[11]+3174756917&4294967295,B=A+(O<<10&4294967295|O>>>22),O=V+(A^(B|~j))+L[2]+718787259&4294967295,V=B+(O<<15&4294967295|O>>>17),O=j+(B^(V|~A))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(V+(O<<21&4294967295|O>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+B&4294967295}r.prototype.u=function(P,A){A===void 0&&(A=P.length);for(var j=A-this.blockSize,L=this.B,V=this.h,B=0;B<A;){if(V==0)for(;B<=j;)s(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<A;)if(L[V++]=P.charCodeAt(B++),V==this.blockSize){s(this,L),V=0;break}}else for(;B<A;)if(L[V++]=P[B++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=A},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;var j=8*this.o;for(A=P.length-8;A<P.length;++A)P[A]=j&255,j/=256;for(this.u(P),P=Array(16),A=j=0;4>A;++A)for(var L=0;32>L;L+=8)P[j++]=this.g[A]>>>L&255;return P};function o(P,A){var j=c;return Object.prototype.hasOwnProperty.call(j,P)?j[P]:j[P]=A(P)}function a(P,A){this.h=A;for(var j=[],L=!0,V=P.length-1;0<=V;V--){var B=P[V]|0;L&&B==A||(j[V]=B,L=!1)}this.g=j}var c={};function d(P){return-128<=P&&128>P?o(P,function(A){return new a([A|0],0>A?-1:0)}):new a([P|0],0>P?-1:0)}function h(P){if(isNaN(P)||!isFinite(P))return y;if(0>P)return I(h(-P));for(var A=[],j=1,L=0;P>=j;L++)A[L]=P/j|0,j*=4294967296;return new a(A,0)}function m(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return I(m(P.substring(1),A));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=h(Math.pow(A,8)),L=y,V=0;V<P.length;V+=8){var B=Math.min(8,P.length-V),O=parseInt(P.substring(V,V+B),A);8>B?(B=h(Math.pow(A,B)),L=L.j(B).add(h(O))):(L=L.j(j),L=L.add(h(O)))}return L}var y=d(0),v=d(1),E=d(16777216);n=a.prototype,n.m=function(){if(C(this))return-I(this).m();for(var P=0,A=1,j=0;j<this.g.length;j++){var L=this.i(j);P+=(0<=L?L:4294967296+L)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(C(this))return"-"+I(this).toString(P);for(var A=h(Math.pow(P,6)),j=this,L="";;){var V=F(j,A).g;j=k(j,V.j(A));var B=((0<j.g.length?j.g[0]:j.h)>>>0).toString(P);if(j=V,b(j))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function C(P){return P.h==-1}n.l=function(P){return P=k(this,P),C(P)?-1:b(P)?0:1};function I(P){for(var A=P.g.length,j=[],L=0;L<A;L++)j[L]=~P.g[L];return new a(j,~P.h).add(v)}n.abs=function(){return C(this)?I(this):this},n.add=function(P){for(var A=Math.max(this.g.length,P.g.length),j=[],L=0,V=0;V<=A;V++){var B=L+(this.i(V)&65535)+(P.i(V)&65535),O=(B>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);L=O>>>16,B&=65535,O&=65535,j[V]=O<<16|B}return new a(j,j[j.length-1]&-2147483648?-1:0)};function k(P,A){return P.add(I(A))}n.j=function(P){if(b(this)||b(P))return y;if(C(this))return C(P)?I(this).j(I(P)):I(I(this).j(P));if(C(P))return I(this.j(I(P)));if(0>this.l(E)&&0>P.l(E))return h(this.m()*P.m());for(var A=this.g.length+P.g.length,j=[],L=0;L<2*A;L++)j[L]=0;for(L=0;L<this.g.length;L++)for(var V=0;V<P.g.length;V++){var B=this.i(L)>>>16,O=this.i(L)&65535,ge=P.i(V)>>>16,de=P.i(V)&65535;j[2*L+2*V]+=O*de,R(j,2*L+2*V),j[2*L+2*V+1]+=B*de,R(j,2*L+2*V+1),j[2*L+2*V+1]+=O*ge,R(j,2*L+2*V+1),j[2*L+2*V+2]+=B*ge,R(j,2*L+2*V+2)}for(L=0;L<A;L++)j[L]=j[2*L+1]<<16|j[2*L];for(L=A;L<2*A;L++)j[L]=0;return new a(j,0)};function R(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function M(P,A){this.g=P,this.h=A}function F(P,A){if(b(A))throw Error("division by zero");if(b(P))return new M(y,y);if(C(P))return A=F(I(P),A),new M(I(A.g),I(A.h));if(C(A))return A=F(P,I(A)),new M(I(A.g),A.h);if(30<P.g.length){if(C(P)||C(A))throw Error("slowDivide_ only works with positive integers.");for(var j=v,L=A;0>=L.l(P);)j=W(j),L=W(L);var V=K(j,1),B=K(L,1);for(L=K(L,2),j=K(j,2);!b(L);){var O=B.add(L);0>=O.l(P)&&(V=V.add(j),B=O),L=K(L,1),j=K(j,1)}return A=k(P,V.j(A)),new M(V,A)}for(V=y;0<=P.l(A);){for(j=Math.max(1,Math.floor(P.m()/A.m())),L=Math.ceil(Math.log(j)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=h(j),O=B.j(A);C(O)||0<O.l(P);)j-=L,B=h(j),O=B.j(A);b(B)&&(B=v),V=V.add(B),P=k(P,O)}return new M(V,P)}n.A=function(P){return F(this,P).h},n.and=function(P){for(var A=Math.max(this.g.length,P.g.length),j=[],L=0;L<A;L++)j[L]=this.i(L)&P.i(L);return new a(j,this.h&P.h)},n.or=function(P){for(var A=Math.max(this.g.length,P.g.length),j=[],L=0;L<A;L++)j[L]=this.i(L)|P.i(L);return new a(j,this.h|P.h)},n.xor=function(P){for(var A=Math.max(this.g.length,P.g.length),j=[],L=0;L<A;L++)j[L]=this.i(L)^P.i(L);return new a(j,this.h^P.h)};function W(P){for(var A=P.g.length+1,j=[],L=0;L<A;L++)j[L]=P.i(L)<<1|P.i(L-1)>>>31;return new a(j,P.h)}function K(P,A){var j=A>>5;A%=32;for(var L=P.g.length-j,V=[],B=0;B<L;B++)V[B]=0<A?P.i(B+j)>>>A|P.i(B+j+1)<<32-A:P.i(B+j);return new a(V,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,po=a}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PR,md,RR,jp,m0,DR,MR,jR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,w,T){return p==Array.prototype||p==Object.prototype||(p[w]=T.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof fp=="object"&&fp];for(var w=0;w<p.length;++w){var T=p[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(p,w){if(w)e:{var T=r;p=p.split(".");for(var D=0;D<p.length-1;D++){var Q=p[D];if(!(Q in T))break e;T=T[Q]}p=p[p.length-1],D=T[p],w=w(D),w!=D&&w!=null&&e(T,p,{configurable:!0,writable:!0,value:w})}}function o(p,w){p instanceof String&&(p+="");var T=0,D=!1,Q={next:function(){if(!D&&T<p.length){var re=T++;return{value:w(re,p[re]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(p){return p||function(){return o(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(p){var w=typeof p;return w=w!="object"?w:p?Array.isArray(p)?"array":w:"null",w=="array"||w=="object"&&typeof p.length=="number"}function h(p){var w=typeof p;return w=="object"&&p!=null||w=="function"}function m(p,w,T){return p.call.apply(p.bind,arguments)}function y(p,w,T){if(!p)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,D),p.apply(w,Q)}}return function(){return p.apply(w,arguments)}}function v(p,w,T){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,v.apply(null,arguments)}function E(p,w){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),p.apply(this,D)}}function b(p,w){function T(){}T.prototype=w.prototype,p.aa=w.prototype,p.prototype=new T,p.prototype.constructor=p,p.Qb=function(D,Q,re){for(var Te=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Te[gt-2]=arguments[gt];return w.prototype[Q].apply(D,Te)}}function C(p){const w=p.length;if(0<w){const T=Array(w);for(let D=0;D<w;D++)T[D]=p[D];return T}return[]}function I(p,w){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(d(D)){const Q=p.length||0,re=D.length||0;p.length=Q+re;for(let Te=0;Te<re;Te++)p[Q+Te]=D[Te]}else p.push(D)}}class k{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function R(p){return/^[\s\xa0]*$/.test(p)}function M(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function F(p){return F[" "](p),p}F[" "]=function(){};var W=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function K(p,w,T){for(const D in p)w.call(T,p[D],D,p)}function P(p,w){for(const T in p)w.call(void 0,p[T],T,p)}function A(p){const w={};for(const T in p)w[T]=p[T];return w}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(p,w){let T,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(T in D)p[T]=D[T];for(let re=0;re<j.length;re++)T=j[re],Object.prototype.hasOwnProperty.call(D,T)&&(p[T]=D[T])}}function V(p){var w=1;p=p.split(":");const T=[];for(;0<w&&p.length;)T.push(p.shift()),w--;return p.length&&T.push(p.join(":")),T}function B(p){c.setTimeout(()=>{throw p},0)}function O(){var p=oe;let w=null;return p.g&&(w=p.g,p.g=p.g.next,p.g||(p.h=null),w.next=null),w}class ge{constructor(){this.h=this.g=null}add(w,T){const D=de.get();D.set(w,T),this.h?this.h.next=D:this.g=D,this.h=D}}var de=new k(()=>new ie,p=>p.reset());class ie{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,z=!1,oe=new ge,le=()=>{const p=c.Promise.resolve(void 0);se=()=>{p.then($)}};var $=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(T){B(T)}var w=de;w.j(p),100>w.h&&(w.h++,p.next=w.g,w.g=p)}z=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(p,w){this.type=p,this.g=this.target=w,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var ne=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,w=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const T=()=>{};c.addEventListener("test",T,w),c.removeEventListener("test",T,w)}catch{}return p})();function fe(p,w){if(G.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var T=this.type=p.type,D=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=w,w=p.relatedTarget){if(W){e:{try{F(w.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(w=null)}}else T=="mouseover"?w=p.fromElement:T=="mouseout"&&(w=p.toElement);this.relatedTarget=w,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:pe[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&fe.aa.h.call(this)}}b(fe,G);var pe={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),he=0;function _e(p,w,T,D,Q){this.listener=p,this.proxy=null,this.src=w,this.type=T,this.capture=!!D,this.ha=Q,this.key=++he,this.da=this.fa=!1}function we(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ce(p){this.src=p,this.g={},this.h=0}Ce.prototype.add=function(p,w,T,D,Q){var re=p.toString();p=this.g[re],p||(p=this.g[re]=[],this.h++);var Te=ce(p,w,D,Q);return-1<Te?(w=p[Te],T||(w.fa=!1)):(w=new _e(w,this.src,re,!!D,Q),w.fa=T,p.push(w)),w};function je(p,w){var T=w.type;if(T in p.g){var D=p.g[T],Q=Array.prototype.indexOf.call(D,w,void 0),re;(re=0<=Q)&&Array.prototype.splice.call(D,Q,1),re&&(we(w),p.g[T].length==0&&(delete p.g[T],p.h--))}}function ce(p,w,T,D){for(var Q=0;Q<p.length;++Q){var re=p[Q];if(!re.da&&re.listener==w&&re.capture==!!T&&re.ha==D)return Q}return-1}var J="closure_lm_"+(1e6*Math.random()|0),Ae={};function tt(p,w,T,D,Q){if(Array.isArray(w)){for(var re=0;re<w.length;re++)tt(p,w[re],T,D,Q);return null}return T=du(T),p&&p[te]?p.K(w,T,h(D)?!!D.capture:!1,Q):dt(p,w,T,!1,D,Q)}function dt(p,w,T,D,Q,re){if(!w)throw Error("Invalid event type");var Te=h(Q)?!!Q.capture:!!Q,gt=sl(p);if(gt||(p[J]=gt=new Ce(p)),T=gt.add(w,T,D,Te,re),T.proxy)return T;if(D=pt(),T.proxy=D,D.src=p,D.listener=T,p.addEventListener)ne||(Q=Te),Q===void 0&&(Q=!1),p.addEventListener(w.toString(),D,Q);else if(p.attachEvent)p.attachEvent(Gn(w.toString()),D);else if(p.addListener&&p.removeListener)p.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function pt(){function p(T){return w.call(p.src,p.listener,T)}const w=uu;return p}function Vr(p,w,T,D,Q){if(Array.isArray(w))for(var re=0;re<w.length;re++)Vr(p,w[re],T,D,Q);else D=h(D)?!!D.capture:!!D,T=du(T),p&&p[te]?(p=p.i,w=String(w).toString(),w in p.g&&(re=p.g[w],T=ce(re,T,D,Q),-1<T&&(we(re[T]),Array.prototype.splice.call(re,T,1),re.length==0&&(delete p.g[w],p.h--)))):p&&(p=sl(p))&&(w=p.g[w.toString()],p=-1,w&&(p=ce(w,T,D,Q)),(T=-1<p?w[p]:null)&&An(T))}function An(p){if(typeof p!="number"&&p&&!p.da){var w=p.src;if(w&&w[te])je(w.i,p);else{var T=p.type,D=p.proxy;w.removeEventListener?w.removeEventListener(T,D,p.capture):w.detachEvent?w.detachEvent(Gn(T),D):w.addListener&&w.removeListener&&w.removeListener(D),(T=sl(w))?(je(T,p),T.h==0&&(T.src=null,w[J]=null)):we(p)}}}function Gn(p){return p in Ae?Ae[p]:Ae[p]="on"+p}function uu(p,w){if(p.da)p=!0;else{w=new fe(w,this);var T=p.listener,D=p.ha||p.src;p.fa&&An(p),p=T.call(D,w)}return p}function sl(p){return p=p[J],p instanceof Ce?p:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function du(p){return typeof p=="function"?p:(p[il]||(p[il]=function(w){return p.handleEvent(w)}),p[il])}function nn(){ee.call(this),this.i=new Ce(this),this.M=this,this.F=null}b(nn,ee),nn.prototype[te]=!0,nn.prototype.removeEventListener=function(p,w,T,D){Vr(this,p,w,T,D)};function rn(p,w){var T,D=p.F;if(D)for(T=[];D;D=D.F)T.push(D);if(p=p.M,D=w.type||w,typeof w=="string")w=new G(w,p);else if(w instanceof G)w.target=w.target||p;else{var Q=w;w=new G(D,p),L(w,Q)}if(Q=!0,T)for(var re=T.length-1;0<=re;re--){var Te=w.g=T[re];Q=Hs(Te,D,!0,w)&&Q}if(Te=w.g=p,Q=Hs(Te,D,!0,w)&&Q,Q=Hs(Te,D,!1,w)&&Q,T)for(re=0;re<T.length;re++)Te=w.g=T[re],Q=Hs(Te,D,!1,w)&&Q}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var p=this.i,w;for(w in p.g){for(var T=p.g[w],D=0;D<T.length;D++)we(T[D]);delete p.g[w],p.h--}}this.F=null},nn.prototype.K=function(p,w,T,D){return this.i.add(String(p),w,!1,T,D)},nn.prototype.L=function(p,w,T,D){return this.i.add(String(p),w,!0,T,D)};function Hs(p,w,T,D){if(w=p.i.g[String(w)],!w)return!0;w=w.concat();for(var Q=!0,re=0;re<w.length;++re){var Te=w[re];if(Te&&!Te.da&&Te.capture==T){var gt=Te.listener,sn=Te.ha||Te.src;Te.fa&&je(p.i,Te),Q=gt.call(sn,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function hu(p,w,T){if(typeof p=="function")T&&(p=v(p,T));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(p,w||0)}function bi(p){p.g=hu(()=>{p.g=null,p.i&&(p.i=!1,bi(p))},p.l);const w=p.h;p.h=null,p.m.apply(null,w)}class qo extends ee{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:bi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ko(p){ee.call(this),this.h=p,this.g={}}b(Ko,ee);var fu=[];function pu(p){K(p.g,function(w,T){this.g.hasOwnProperty(T)&&An(w)},p),p.g={}}Ko.prototype.N=function(){Ko.aa.N.call(this),pu(this)},Ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mu=c.JSON.stringify,gu=c.JSON.parse,yu=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Go(){}Go.prototype.h=null;function ol(p){return p.h||(p.h=p.i())}function al(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hs(){G.call(this,"d")}b(hs,G);function ll(){G.call(this,"c")}b(ll,G);var fs={},vu=null;function Qo(){return vu=vu||new nn}fs.La="serverreachability";function _u(p){G.call(this,fs.La,p)}b(_u,G);function Ws(p){const w=Qo();rn(w,new _u(w))}fs.STAT_EVENT="statevent";function wu(p,w){G.call(this,fs.STAT_EVENT,p),this.stat=w}b(wu,G);function $t(p){const w=Qo();rn(w,new wu(w,p))}fs.Ma="timingevent";function cl(p,w){G.call(this,fs.Ma,p),this.size=w}b(cl,G);function Fr(p,w){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},w)}function Yo(){this.g=!0}Yo.prototype.xa=function(){this.g=!1};function Xo(p,w,T,D,Q,re){p.info(function(){if(p.g)if(re)for(var Te="",gt=re.split("&"),sn=0;sn<gt.length;sn++){var lt=gt[sn].split("=");if(1<lt.length){var hn=lt[0];lt=lt[1];var Gt=hn.split("_");Te=2<=Gt.length&&Gt[1]=="type"?Te+(hn+"="+lt+"&"):Te+(hn+"=redacted&")}}else Te=null;else Te=re;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+w+`
`+T+`
`+Te})}function ul(p,w,T,D,Q,re,Te){p.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+w+`
`+T+`
`+re+" "+Te})}function Ur(p,w,T,D){p.info(function(){return"XMLHTTP TEXT ("+w+"): "+zg(p,T)+(D?" "+D:"")})}function xu(p,w){p.info(function(){return"TIMEOUT: "+w})}Yo.prototype.info=function(){};function zg(p,w){if(!p.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(p=0;p<T.length;p++)if(Array.isArray(T[p])){var D=T[p];if(!(2>D.length)){var Q=D[1];if(Array.isArray(Q)&&!(1>Q.length)){var re=Q[0];if(re!="noop"&&re!="stop"&&re!="close")for(var Te=1;Te<Q.length;Te++)Q[Te]=""}}}}return mu(T)}catch{return w}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zr;function Jo(){}b(Jo,Go),Jo.prototype.g=function(){return new XMLHttpRequest},Jo.prototype.i=function(){return{}},zr=new Jo;function Br(p,w,T,D){this.j=p,this.i=w,this.l=T,this.R=D||1,this.U=new Ko(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uh}function Uh(){this.i=null,this.g="",this.h=!1}var Eu={},hl={};function fl(p,w,T){p.L=1,p.v=Pi(lr(w)),p.m=T,p.P=!0,Tu(p,null)}function Tu(p,w){p.F=Date.now(),Et(p),p.A=lr(p.v);var T=p.A,D=p.R;Array.isArray(D)||(D=[String(D)]),Di(T.i,"t",D),p.C=0,T=p.j.J,p.h=new Uh,p.g=sf(p.j,T?w:null,!p.m),0<p.O&&(p.M=new qo(v(p.Y,p,p.g),p.O)),w=p.U,T=p.g,D=p.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(fu[0]=Q.toString()),Q=fu);for(var re=0;re<Q.length;re++){var Te=tt(T,Q[re],D||w.handleEvent,!1,w.h||w);if(!Te)break;w.g[Te.key]=Te}w=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,w)):(p.u="GET",p.g.ea(p.A,p.u,null,w)),Ws(),Xo(p.i,p.u,p.A,p.l,p.R,p.m)}Br.prototype.ca=function(p){p=p.target;const w=this.M;w&&Yn(p)==3?w.j():this.Y(p)},Br.prototype.Y=function(p){try{if(p==this.g)e:{const Gt=Yn(this.g);var w=this.g.Ba();const Tr=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Au(this.g)))){this.J||Gt!=4||w==7||(w==8||0>=Tr?Ws(3):Ws(2)),Zo(this);var T=this.g.Z();this.X=T;t:if(zh(this)){var D=Au(this.g);p="";var Q=D.length,re=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),Ii(this);var Te="";break t}this.h.i=new c.TextDecoder}for(w=0;w<Q;w++)this.h.h=!0,p+=this.h.i.decode(D[w],{stream:!(re&&w==Q-1)});D.length=0,this.h.g+=p,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=T==200,ul(this.i,this.u,this.A,this.l,this.R,Gt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,sn=this.g;if((gt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(gt)){var lt=gt;break t}}lt=null}if(T=lt)Ur(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Su(this,T);else{this.o=!1,this.s=3,$t(12),xr(this),Ii(this);break e}}if(this.P){T=!0;let ur;for(;!this.J&&this.C<Te.length;)if(ur=Bg(this,Te),ur==hl){Gt==4&&(this.s=4,$t(14),T=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==Eu){this.s=4,$t(15),Ur(this.i,this.l,Te,"[Invalid Chunk]"),T=!1;break}else Ur(this.i,this.l,ur,null),Su(this,ur);if(zh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||Te.length!=0||this.h.h||(this.s=1,$t(16),T=!1),this.o=this.o&&T,!T)Ur(this.i,this.l,Te,"[Invalid Chunked Response]"),xr(this),Ii(this);else if(0<Te.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),Pu(hn),hn.M=!0,$t(11))}}else Ur(this.i,this.l,Te,null),Su(this,Te);Gt==4&&xr(this),this.o&&!this.J&&(Gt==4?Sl(this.j,this):(this.o=!1,Et(this)))}else _l(this.g),T==400&&0<Te.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),xr(this),Ii(this)}}}catch{}finally{}};function zh(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Bg(p,w){var T=p.C,D=w.indexOf(`
`,T);return D==-1?hl:(T=Number(w.substring(T,D)),isNaN(T)?Eu:(D+=1,D+T>w.length?hl:(w=w.slice(D,D+T),p.C=D+T,w)))}Br.prototype.cancel=function(){this.J=!0,xr(this)};function Et(p){p.S=Date.now()+p.I,Bh(p,p.I)}function Bh(p,w){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Fr(v(p.ba,p),w)}function Zo(p){p.B&&(c.clearTimeout(p.B),p.B=null)}Br.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(xu(this.i,this.A),this.L!=2&&(Ws(),$t(17)),xr(this),this.s=2,Ii(this)):Bh(this,this.S-p)};function Ii(p){p.j.G==0||p.J||Sl(p.j,p)}function xr(p){Zo(p);var w=p.M;w&&typeof w.ma=="function"&&w.ma(),p.M=null,pu(p.U),p.g&&(w=p.g,p.g=null,w.abort(),w.ma())}function Su(p,w){try{var T=p.j;if(T.G!=0&&(T.g==p||zn(T.h,p))){if(!p.K&&zn(T.h,p)&&T.G==3){try{var D=T.Da.g.parse(w)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<p.F)Tl(T),Kr(T);else break e;El(T),$t(18)}}else T.za=Q[1],0<T.za-T.T&&37500>Q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Fr(v(T.Za,T),6e3));if(1>=Hh(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ys(T,11)}else if((p.K||T.g==p)&&Tl(T),!R(w))for(Q=T.Da.g.parse(w),w=0;w<Q.length;w++){let lt=Q[w];if(T.T=lt[0],lt=lt[1],T.G==2)if(lt[0]=="c"){T.K=lt[1],T.ia=lt[2];const hn=lt[3];hn!=null&&(T.la=hn,T.j.info("VER="+T.la));const Gt=lt[4];Gt!=null&&(T.Aa=Gt,T.j.info("SVER="+T.Aa));const Tr=lt[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(D=1.5*Tr,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ur=p.g;if(ur){const oa=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var re=D.h;re.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Cu(re,re.h),re.h=null))}if(D.D){const bl=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;bl&&(D.ya=bl,vt(D.I,D.D,bl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-p.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var Te=p;if(D.qa=rf(D,D.J?D.ia:null,D.W),Te.K){Wh(D.h,Te);var gt=Te,sn=D.L;sn&&(gt.I=sn),gt.B&&(Zo(gt),Et(gt)),D.g=Te}else ia(D);0<T.i.length&&ys(T)}else lt[0]!="stop"&&lt[0]!="close"||Ys(T,7);else T.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Ys(T,7):Tn(T):lt[0]!="noop"&&T.l&&T.l.ta(lt),T.v=0)}}Ws(4)}catch{}}var $h=class{constructor(p,w){this.g=p,this.map=w}};function ea(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ar(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Hh(p){return p.h?1:p.g?p.g.size:0}function zn(p,w){return p.h?p.h==w:p.g?p.g.has(w):!1}function Cu(p,w){p.g?p.g.add(w):p.h=w}function Wh(p,w){p.h&&p.h==w?p.h=null:p.g&&p.g.has(w)&&p.g.delete(w)}ea.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function qh(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let w=p.i;for(const T of p.g.values())w=w.concat(T.D);return w}return C(p.i)}function pl(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(d(p)){for(var w=[],T=p.length,D=0;D<T;D++)w.push(p[D]);return w}w=[],T=0;for(D in p)w[T++]=p[D];return w}function ml(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(d(p)||typeof p=="string"){var w=[];p=p.length;for(var T=0;T<p;T++)w.push(T);return w}w=[],T=0;for(const D in p)w[T++]=D;return w}}}function ki(p,w){if(p.forEach&&typeof p.forEach=="function")p.forEach(w,void 0);else if(d(p)||typeof p=="string")Array.prototype.forEach.call(p,w,void 0);else for(var T=ml(p),D=pl(p),Q=D.length,re=0;re<Q;re++)w.call(void 0,D[re],T&&T[re],p)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $g(p,w){if(p){p=p.split("&");for(var T=0;T<p.length;T++){var D=p[T].indexOf("="),Q=null;if(0<=D){var re=p[T].substring(0,D);Q=p[T].substring(D+1)}else re=p[T];w(re,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function qs(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof qs){this.h=p.h,na(this,p.j),this.o=p.o,this.g=p.g,Ai(this,p.s),this.l=p.l;var w=p.i,T=new ps;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),Ni(this,T),this.m=p.m}else p&&(w=String(p).match(ta))?(this.h=!1,na(this,w[1]||"",!0),this.o=at(w[2]||""),this.g=at(w[3]||"",!0),Ai(this,w[4]),this.l=at(w[5]||"",!0),Ni(this,w[6]||"",!0),this.m=at(w[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}qs.prototype.toString=function(){var p=[],w=this.j;w&&p.push(Ri(w,gl,!0),":");var T=this.g;return(T||w=="file")&&(p.push("//"),(w=this.o)&&p.push(Ri(w,gl,!0),"@"),p.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&p.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&p.push("/"),p.push(Ri(T,T.charAt(0)=="/"?Qh:Gh,!0))),(T=this.i.toString())&&p.push("?",T),(T=this.m)&&p.push("#",Ri(T,bu)),p.join("")};function lr(p){return new qs(p)}function na(p,w,T){p.j=T?at(w,!0):w,p.j&&(p.j=p.j.replace(/:$/,""))}function Ai(p,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);p.s=w}else p.s=null}function Ni(p,w,T){w instanceof ps?(p.i=w,ms(p.i,p.h)):(T||(w=Ri(w,Yh)),p.i=new ps(w,p.h))}function vt(p,w,T){p.i.set(w,T)}function Pi(p){return vt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function at(p,w){return p?w?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ri(p,w,T){return typeof p=="string"?(p=encodeURI(p).replace(w,Kh),T&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Kh(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var gl=/[#\/\?@]/g,Gh=/[#\?:]/g,Qh=/[#\?]/g,Yh=/[#\?@]/g,bu=/#/g;function ps(p,w){this.h=this.g=null,this.i=p||null,this.j=!!w}function En(p){p.g||(p.g=new Map,p.h=0,p.i&&$g(p.i,function(w,T){p.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=ps.prototype,n.add=function(p,w){En(this),this.i=null,p=Er(this,p);var T=this.g.get(p);return T||this.g.set(p,T=[]),T.push(w),this.h+=1,this};function $r(p,w){En(p),w=Er(p,w),p.g.has(w)&&(p.i=null,p.h-=p.g.get(w).length,p.g.delete(w))}function Hr(p,w){return En(p),w=Er(p,w),p.g.has(w)}n.forEach=function(p,w){En(this),this.g.forEach(function(T,D){T.forEach(function(Q){p.call(w,Q,D,this)},this)},this)},n.na=function(){En(this);const p=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let D=0;D<w.length;D++){const Q=p[D];for(let re=0;re<Q.length;re++)T.push(w[D])}return T},n.V=function(p){En(this);let w=[];if(typeof p=="string")Hr(this,p)&&(w=w.concat(this.g.get(Er(this,p))));else{p=Array.from(this.g.values());for(let T=0;T<p.length;T++)w=w.concat(p[T])}return w},n.set=function(p,w){return En(this),this.i=null,p=Er(this,p),Hr(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[w]),this.h+=1,this},n.get=function(p,w){return p?(p=this.V(p),0<p.length?String(p[0]):w):w};function Di(p,w,T){$r(p,w),0<T.length&&(p.i=null,p.g.set(Er(p,w),C(T)),p.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var D=w[T];const re=encodeURIComponent(String(D)),Te=this.V(D);for(D=0;D<Te.length;D++){var Q=re;Te[D]!==""&&(Q+="="+encodeURIComponent(String(Te[D]))),p.push(Q)}}return this.i=p.join("&")};function Er(p,w){return w=String(w),p.j&&(w=w.toLowerCase()),w}function ms(p,w){w&&!p.j&&(En(p),p.i=null,p.g.forEach(function(T,D){var Q=D.toLowerCase();D!=Q&&($r(this,D),Di(this,Q,T))},p)),p.j=w}function Hg(p,w){const T=new Yo;if(c.Image){const D=new Image;D.onload=E(Qn,T,"TestLoadImage: loaded",!0,w,D),D.onerror=E(Qn,T,"TestLoadImage: error",!1,w,D),D.onabort=E(Qn,T,"TestLoadImage: abort",!1,w,D),D.ontimeout=E(Qn,T,"TestLoadImage: timeout",!1,w,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=p}else w(!1)}function Xh(p,w){const T=new Yo,D=new AbortController,Q=setTimeout(()=>{D.abort(),Qn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(p,{signal:D.signal}).then(re=>{clearTimeout(Q),re.ok?Qn(T,"TestPingServer: ok",!0,w):Qn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),Qn(T,"TestPingServer: error",!1,w)})}function Qn(p,w,T,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(T)}catch{}}function Wg(){this.g=new yu}function Jh(p,w,T){const D=T||"";try{ki(p,function(Q,re){let Te=Q;h(Q)&&(Te=mu(Q)),w.push(D+re+"="+encodeURIComponent(Te))})}catch(Q){throw w.push(D+"type="+encodeURIComponent("_badmap")),Q}}function Ks(p){this.l=p.Ub||null,this.j=p.eb||!1}b(Ks,Go),Ks.prototype.g=function(){return new ra(this.l,this.j)},Ks.prototype.i=(function(p){return function(){return p}})({});function ra(p,w){nn.call(this),this.D=p,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ra,nn),n=ra.prototype,n.open=function(p,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=w,this.readyState=1,qr(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(w.body=p),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wr(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zh(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zh(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var w=p.value?p.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!p.done}))&&(this.response=this.responseText+=w)}p.done?Wr(this):qr(this),this.readyState==3&&Zh(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Wr(this))},n.Qa=function(p){this.g&&(this.response=p,Wr(this))},n.ga=function(){this.g&&Wr(this)};function Wr(p){p.readyState=4,p.l=null,p.j=null,p.v=null,qr(p)}n.setRequestHeader=function(p,w){this.u.append(p,w)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,p.push(T[0]+": "+T[1]),T=w.next();return p.join(`\r
`)};function qr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Gs(p){let w="";return K(p,function(T,D){w+=D,w+=":",w+=T,w+=`\r
`}),w}function Mi(p,w,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Gs(T),typeof p=="string"?T!=null&&encodeURIComponent(String(T)):vt(p,w,T))}function At(p){nn.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(At,nn);var qg=/^https?$/i,Iu=["POST","PUT"];n=At.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,w,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);w=w?w.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zr.g(),this.v=this.o?ol(this.o):ol(zr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(w,String(p),!0),this.B=!1}catch(re){sa(this,re);return}if(p=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)T.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),Q=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Iu,w,void 0))||D||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Te]of T)this.g.setRequestHeader(re,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vl(this),this.u=!0,this.g.send(p),this.u=!1}catch(re){sa(this,re)}};function sa(p,w){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=w,p.m=5,yl(p),cr(p)}function yl(p){p.A||(p.A=!0,rn(p,"complete"),rn(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,rn(this,"complete"),rn(this,"abort"),cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),At.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ku(this):this.bb())},n.bb=function(){ku(this)};function ku(p){if(p.h&&typeof a<"u"&&(!p.v[1]||Yn(p)!=4||p.Z()!=2)){if(p.u&&Yn(p)==4)hu(p.Ea,0,p);else if(rn(p,"readystatechange"),Yn(p)==4){p.h=!1;try{const Te=p.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var D;if(D=Te===0){var Q=String(p.D).match(ta)[1]||null;!Q&&c.self&&c.self.location&&(Q=c.self.location.protocol.slice(0,-1)),D=!qg.test(Q?Q.toLowerCase():"")}T=D}if(T)rn(p,"complete"),rn(p,"success");else{p.m=6;try{var re=2<Yn(p)?p.g.statusText:""}catch{re=""}p.l=re+" ["+p.Z()+"]",yl(p)}}finally{cr(p)}}}}function cr(p,w){if(p.g){vl(p);const T=p.g,D=p.v[0]?()=>{}:null;p.g=null,p.v=null,w||rn(p,"ready");try{T.onreadystatechange=D}catch{}}}function vl(p){p.I&&(c.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function Yn(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var w=this.g.responseText;return p&&w.indexOf(p)==0&&(w=w.substring(p.length)),gu(w)}};function Au(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function _l(p){const w={};p=(p.g&&2<=Yn(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<p.length;D++){if(R(p[D]))continue;var T=V(p[D]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=w[Q]||[];w[Q]=re,re.push(T)}P(w,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(p,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[p]||w}function Nu(p){this.Aa=0,this.i=[],this.j=new Yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,p),this.cb=gs("retryDelaySeedMs",1e4,p),this.Wa=gs("forwardChannelMaxRetries",2,p),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new ea(p&&p.concurrentRequestLimit),this.Da=new Wg,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(p,w,T,D){$t(0),this.W=p,this.H=w||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=rf(this,null,this.W),ys(this)};function Tn(p){if(wl(p),p.G==3){var w=p.U++,T=lr(p.I);if(vt(T,"SID",p.K),vt(T,"RID",w),vt(T,"TYPE","terminate"),Qs(p,T),w=new Br(p,p.j,w),w.L=2,w.v=Pi(lr(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&c.Image&&(new Image().src=w.v,T=!0),T||(w.g=sf(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Et(w)}nf(p)}function Kr(p){p.g&&(Pu(p),p.g.cancel(),p.g=null)}function wl(p){Kr(p),p.u&&(c.clearTimeout(p.u),p.u=null),Tl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function ys(p){if(!ar(p.h)&&!p.s){p.s=!0;var w=p.Ga;se||le(),z||(se(),z=!0),oe.add(w,p),p.B=0}}function Kg(p,w){return Hh(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=w.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Fr(v(p.Ga,p,w),tf(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Q=new Br(this,this.j,p);let re=this.o;if(this.S&&(re?(re=A(re),L(re,this.S)):re=this.S),this.m!==null||this.O||(Q.H=re,re=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(w+=D,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=ji(this,Q,w),T=lr(this.I),vt(T,"RID",p),vt(T,"CVER",22),this.D&&vt(T,"X-HTTP-Session-Id",this.D),Qs(this,T),re&&(this.O?w="headers="+encodeURIComponent(String(Gs(re)))+"&"+w:this.m&&Mi(T,this.m,re)),Cu(this.h,Q),this.Ua&&vt(T,"TYPE","init"),this.P?(vt(T,"$req",w),vt(T,"SID","null"),Q.T=!0,fl(Q,T,null)):fl(Q,T,w),this.G=2}}else this.G==3&&(p?xl(this,p):this.i.length==0||ar(this.h)||xl(this))};function xl(p,w){var T;w?T=w.l:T=p.U++;const D=lr(p.I);vt(D,"SID",p.K),vt(D,"RID",T),vt(D,"AID",p.T),Qs(p,D),p.m&&p.o&&Mi(D,p.m,p.o),T=new Br(p,p.j,T,p.B+1),p.m===null&&(T.H=p.o),w&&(p.i=w.D.concat(p.i)),w=ji(p,T,1e3),T.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Cu(p.h,T),fl(T,D,w)}function Qs(p,w){p.H&&K(p.H,function(T,D){vt(w,D,T)}),p.l&&ki({},function(T,D){vt(w,D,T)})}function ji(p,w,T){T=Math.min(p.i.length,T);var D=p.l?v(p.l.Na,p.l,p):null;e:{var Q=p.i;let re=-1;for(;;){const Te=["count="+T];re==-1?0<T?(re=Q[0].g,Te.push("ofs="+re)):re=0:Te.push("ofs="+re);let gt=!0;for(let sn=0;sn<T;sn++){let lt=Q[sn].g;const hn=Q[sn].map;if(lt-=re,0>lt)re=Math.max(0,Q[sn].g-100),gt=!1;else try{Jh(hn,Te,"req"+lt+"_")}catch{D&&D(hn)}}if(gt){D=Te.join("&");break e}}}return p=p.i.splice(0,T),w.D=p,D}function ia(p){if(!p.g&&!p.u){p.Y=1;var w=p.Fa;se||le(),z||(se(),z=!0),oe.add(w,p),p.v=0}}function El(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Fr(v(p.Fa,p),tf(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Fr(v(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Kr(this),ef(this))};function Pu(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function ef(p){p.g=new Br(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var w=lr(p.qa);vt(w,"RID","rpc"),vt(w,"SID",p.K),vt(w,"AID",p.T),vt(w,"CI",p.F?"0":"1"),!p.F&&p.ja&&vt(w,"TO",p.ja),vt(w,"TYPE","xmlhttp"),Qs(p,w),p.m&&p.o&&Mi(w,p.m,p.o),p.L&&(p.g.I=p.L);var T=p.g;p=p.ia,T.L=1,T.v=Pi(lr(w)),T.m=null,T.P=!0,Tu(T,p)}n.Za=function(){this.C!=null&&(this.C=null,Kr(this),El(this),$t(19))};function Tl(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Sl(p,w){var T=null;if(p.g==w){Tl(p),Pu(p),p.g=null;var D=2}else if(zn(p.h,w))T=w.D,Wh(p.h,w),D=1;else return;if(p.G!=0){if(w.o)if(D==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var Q=p.B;D=Qo(),rn(D,new cl(D,T)),ys(p)}else ia(p);else if(Q=w.s,Q==3||Q==0&&0<w.X||!(D==1&&Kg(p,w)||D==2&&El(p)))switch(T&&0<T.length&&(w=p.h,w.i=w.i.concat(T)),Q){case 1:Ys(p,5);break;case 4:Ys(p,10);break;case 3:Ys(p,6);break;default:Ys(p,2)}}}function tf(p,w){let T=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(T*=2),T*w}function Ys(p,w){if(p.j.info("Error code "+w),w==2){var T=v(p.fb,p),D=p.Xa;const Q=!D;D=new qs(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||na(D,"https"),Pi(D),Q?Hg(D.toString(),T):Xh(D.toString(),T)}else $t(2);p.G=0,p.l&&p.l.sa(w),nf(p),wl(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function nf(p){if(p.G=0,p.ka=[],p.l){const w=qh(p.h);(w.length!=0||p.i.length!=0)&&(I(p.ka,w),I(p.ka,p.i),p.h.i.length=0,C(p.i),p.i.length=0),p.l.ra()}}function rf(p,w,T){var D=T instanceof qs?lr(T):new qs(T);if(D.g!="")w&&(D.g=w+"."+D.g),Ai(D,D.s);else{var Q=c.location;D=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;var re=new qs(null);D&&na(re,D),w&&(re.g=w),Q&&Ai(re,Q),T&&(re.l=T),D=re}return T=p.D,w=p.ya,T&&w&&vt(D,T,w),vt(D,"VER",p.la),Qs(p,D),D}function sf(p,w,T){if(w&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=p.Ca&&!p.pa?new At(new Ks({eb:T})):new At(p.pa),w.Ha(p.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}n=Ru.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Cl(){}Cl.prototype.g=function(p,w){return new Bn(p,w)};function Bn(p,w){nn.call(this),this.g=new Nu(w),this.l=p,this.h=w&&w.messageUrlParams||null,p=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(p?p["X-WebChannel-Content-Type"]=w.messageContentType:p={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(p?p["X-WebChannel-Client-Profile"]=w.va:p={"X-WebChannel-Client-Profile":w.va}),this.g.S=p,(p=w&&w.Sb)&&!R(p)&&(this.g.m=p),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!R(w)&&(this.g.D=w,p=this.h,p!==null&&w in p&&(p=this.h,w in p&&delete p[w])),this.j=new vs(this)}b(Bn,nn),Bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bn.prototype.close=function(){Tn(this.g)},Bn.prototype.o=function(p){var w=this.g;if(typeof p=="string"){var T={};T.__data__=p,p=T}else this.u&&(T={},T.__data__=mu(p),p=T);w.i.push(new $h(w.Ya++,p)),w.G==3&&ys(w)},Bn.prototype.N=function(){this.g.l=null,delete this.j,Tn(this.g),delete this.g,Bn.aa.N.call(this)};function of(p){hs.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var w=p.__sm__;if(w){e:{for(const T in w){p=T;break e}p=void 0}(this.i=p)&&(p=this.i,w=w!==null&&p in w?w[p]:void 0),this.data=w}else this.data=p}b(of,hs);function af(){ll.call(this),this.status=1}b(af,ll);function vs(p){this.g=p}b(vs,Ru),vs.prototype.ua=function(){rn(this.g,"a")},vs.prototype.ta=function(p){rn(this.g,new of(p))},vs.prototype.sa=function(p){rn(this.g,new af)},vs.prototype.ra=function(){rn(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Bn.prototype.send=Bn.prototype.o,Bn.prototype.open=Bn.prototype.m,Bn.prototype.close=Bn.prototype.close,jR=function(){return new Cl},MR=function(){return Qo()},DR=fs,m0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,jp=dl,Fh.COMPLETE="complete",RR=Fh,al.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",nn.prototype.listen=nn.prototype.K,md=al,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,PR=At}).apply(typeof fp<"u"?fp:typeof self<"u"?self:typeof window<"u"?window:{});const yb="@firebase/firestore",vb="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new ig("@firebase/firestore");function Zl(){return qa.logLevel}function ke(n,...e){if(qa.logLevel<=nt.DEBUG){const t=e.map(dx);qa.debug(`Firestore (${eu}): ${n}`,...t)}}function wi(n,...e){if(qa.logLevel<=nt.ERROR){const t=e.map(dx);qa.error(`Firestore (${eu}): ${n}`,...t)}}function Pc(n,...e){if(qa.logLevel<=nt.WARN){const t=e.map(dx);qa.warn(`Firestore (${eu}): ${n}`,...t)}}function dx(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LR(n,r,t)}function LR(n,e,t){let r=`FIRESTORE (${eu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw wi(r),new Error(r)}function mt(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||LR(e,s,r)}function Ge(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class fH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pH{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new di,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const d=o;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},c=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new di)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new OR(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class mH{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gH{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new mH(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _b{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yH{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const r=o=>{o.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ke("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _b(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _b(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vH(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function g0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return Zv(s)===Zv(o)?st(s,o):Zv(s)?1:-1}return st(n.length,e.length)}const _H=55296,wH=57343;function Zv(n){const e=n.charCodeAt(0);return e>=_H&&e<=wH}function Rc(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="__name__";class Ts{constructor(e,t,r){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Ts.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return st(e.length,t.length)}static compareSegments(e,t){const r=Ts.isNumericId(e),s=Ts.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ts.extractNumericId(e).compare(Ts.extractNumericId(t)):g0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class Ct extends Ts{construct(e,t,r){return new Ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ct(t)}static emptyPath(){return new Ct([])}}const xH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends Ts{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return xH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wb}static keyField(){return new In([wb])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Ct.fromString(e))}static fromName(e){return new Ve(Ct.fromString(e).popFirst(5))}static empty(){return new Ve(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EH(n,e,t,r){if(e===!0&&r===!0)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xb(n){if(!Ve.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Eb(n){if(Ve.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$e(12329,{type:typeof n})}function Us(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ug(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TH(n,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ch(n,e){if(!FR(n))throw new be(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new be(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=-62135596800,Sb=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Sb);return new kt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tb)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sb}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ch(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:en("string",kt._jsonSchemaVersion),seconds:en("number"),nanoseconds:en("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new kt(0,0))}static max(){return new Ke(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=-1;function SH(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ke.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new bo(s,Ve.empty(),e)}function CH(n){return new bo(n.readTime,n.key,Gd)}class bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bo(Ke.min(),Ve.empty(),Gd)}static max(){return new bo(Ke.max(),Ve.empty(),Gd)}}function bH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(n.documentKey,e.documentKey),t!==0?t:st(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==IH)throw n;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let s=0,o=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++o,a&&o===s&&t()}),(d=>r(d)))})),a=!0,o===s&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((s=>s?ue.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,s)=>{const o=e.length,a=new Array(o);let c=0;for(let d=0;d<o;d++){const h=d;t(e[h]).next((m=>{a[h]=m,++c,c===o&&r(a)}),(m=>s(m)))}}))}static doWhile(e,t){return new ue(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function AH(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=-1;function hg(n){return n==null}function fm(n){return n===0&&1/n==-1/0}function NH(n){return typeof n=="number"&&Number.isInteger(n)&&!fm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="";function PH(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cb(e)),e=RH(n.get(t),e);return Cb(e)}function RH(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case UR:t+="";break;default:t+=o}}return t}function Cb(n){return n+UR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn=class y0{constructor(e,t){this.comparator=e,this.root=t||mo.EMPTY}insert(e,t){return new y0(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new y0(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pp(this.root,e,this.comparator,!0)}},pp=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mo=class oi{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??oi.RED,this.left=s??oi.EMPTY,this.right=o??oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new oi(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return oi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}};mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new mo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ib(this.data.getIterator())}getIteratorFrom(e){return new Ib(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class Ib{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new vr([])}unionWith(e){let t=new un(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new BR("Invalid base64 string: "+o):o}})(e);return new kn(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o})(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const DH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=DH.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(n.seconds),nanos:qt(n.nanos)}}function qt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ko(n){return typeof n=="string"?kn.fromBase64String(n):kn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="server_timestamp",HR="__type__",WR="__previous_value__",qR="__local_write_time__";function px(n){return(n?.mapValue?.fields||{})[HR]?.stringValue===$R}function fg(n){const e=n.mapValue.fields[WR];return px(e)?fg(e):e}function Qd(n){const e=Io(n.mapValue.fields[qR].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,t,r,s,o,a,c,d,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h,this.isUsingEmulator=m}}const pm="(default)";class Yd{constructor(e,t){this.projectId=e,this.database=t||pm}static empty(){return new Yd("","")}get isDefaultDatabase(){return this.database===pm}isEqual(e){return e instanceof Yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="__type__",jH="__max__",mp={mapValue:{}},GR="__vector__",mm="value";function Ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?px(n)?4:OH(n)?9007199254740991:LH(n)?10:11:$e(28295,{value:n})}function zs(n,e){if(n===e)return!0;const t=Ao(n);if(t!==Ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qd(n).isEqual(Qd(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Io(s.timestampValue),c=Io(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ko(s.bytesValue).isEqual(ko(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return qt(s.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(s.geoPointValue.longitude)===qt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return qt(s.integerValue)===qt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=qt(s.doubleValue),c=qt(o.doubleValue);return a===c?fm(a)===fm(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Rc(n.arrayValue.values||[],e.arrayValue.values||[],zs);case 10:case 11:return(function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(bb(a)!==bb(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!zs(a[d],c[d])))return!1;return!0})(n,e);default:return $e(52216,{left:n})}}function Xd(n,e){return(n.values||[]).find((t=>zs(t,e)))!==void 0}function Dc(n,e){if(n===e)return 0;const t=Ao(n),r=Ao(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return(function(o,a){const c=qt(o.integerValue||o.doubleValue),d=qt(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(n,e);case 3:return kb(n.timestampValue,e.timestampValue);case 4:return kb(Qd(n),Qd(e));case 5:return g0(n.stringValue,e.stringValue);case 6:return(function(o,a){const c=ko(o),d=ko(a);return c.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){const c=o.split("/"),d=a.split("/");for(let h=0;h<c.length&&h<d.length;h++){const m=st(c[h],d[h]);if(m!==0)return m}return st(c.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){const c=st(qt(o.latitude),qt(a.latitude));return c!==0?c:st(qt(o.longitude),qt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ab(n.arrayValue,e.arrayValue);case 10:return(function(o,a){const c=o.fields||{},d=a.fields||{},h=c[mm]?.arrayValue,m=d[mm]?.arrayValue,y=st(h?.values?.length||0,m?.values?.length||0);return y!==0?y:Ab(h,m)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===mp.mapValue&&a===mp.mapValue)return 0;if(o===mp.mapValue)return 1;if(a===mp.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),h=a.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const v=g0(d[y],m[y]);if(v!==0)return v;const E=Dc(c[d[y]],h[m[y]]);if(E!==0)return E}return st(d.length,m.length)})(n.mapValue,e.mapValue);default:throw $e(23264,{he:t})}}function kb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return st(n,e);const t=Io(n),r=Io(e),s=st(t.seconds,r.seconds);return s!==0?s:st(t.nanos,r.nanos)}function Ab(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Dc(t[s],r[s]);if(o)return o}return st(t.length,r.length)}function Mc(n){return v0(n)}function v0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Io(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ko(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=v0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${v0(t.fields[a])}`;return s+"}"})(n.mapValue):$e(61005,{value:n})}function Lp(n){switch(Ao(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fg(n);return e?16+Lp(e):16;case 5:return 2*n.stringValue.length;case 6:return ko(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Lp(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Bo(r.fields,((o,a)=>{s+=o.length+Lp(a)})),s})(n.mapValue);default:throw $e(13486,{value:n})}}function Nb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _0(n){return!!n&&"integerValue"in n}function mx(n){return!!n&&"arrayValue"in n}function Pb(n){return!!n&&"nullValue"in n}function Rb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Op(n){return!!n&&"mapValue"in n}function LH(n){return(n?.mapValue?.fields||{})[KR]?.stringValue===GR}function bd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=bd(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bd(n.arrayValue.values[t]);return e}return{...n}}function OH(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bd(t)}setAll(e){let t=In.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=bd(a):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Op(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bo(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new sr(bd(this.value))}}function QR(n){const e=[];return Bo(n.fields,((t,r)=>{const s=new In([t]);if(Op(r)){const o=QR(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)})),new vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,t,r,s,o,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Ln(e,0,Ke.min(),Ke.min(),Ke.min(),sr.empty(),0)}static newFoundDocument(e,t,r,s){return new Ln(e,1,t,Ke.min(),r,s,0)}static newNoDocument(e,t){return new Ln(e,2,t,Ke.min(),Ke.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Ke.min(),Ke.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t){this.position=e,this.inclusive=t}}function Db(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],a=n.position[s];if(o.field.isKeyField()?r=Ve.comparator(Ve.fromName(a.referenceValue),t.key):r=Dc(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function VH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{}class Zt extends YR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new UH(e,t,r):t==="array-contains"?new $H(e,r):t==="in"?new HH(e,r):t==="not-in"?new WH(e,r):t==="array-contains-any"?new qH(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zH(e,r):new BH(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Dc(t,this.value)):t!==null&&Ao(this.value)===Ao(t)&&this.matchesComparison(Dc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends YR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ds(e,t)}matches(e){return XR(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XR(n){return n.op==="and"}function JR(n){return FH(n)&&XR(n)}function FH(n){for(const e of n.filters)if(e instanceof ds)return!1;return!0}function w0(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Mc(n.value);if(JR(n))return n.filters.map((e=>w0(e))).join(",");{const e=n.filters.map((t=>w0(t))).join(",");return`${n.op}(${e})`}}function ZR(n,e){return n instanceof Zt?(function(r,s){return s instanceof Zt&&r.op===s.op&&r.field.isEqual(s.field)&&zs(r.value,s.value)})(n,e):n instanceof ds?(function(r,s){return s instanceof ds&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,a,c)=>o&&ZR(a,s.filters[c])),!0):!1})(n,e):void $e(19439)}function e2(n){return n instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mc(t.value)}`})(n):n instanceof ds?(function(t){return t.op.toString()+" {"+t.getFilters().map(e2).join(" ,")+"}"})(n):"Filter"}class UH extends Zt{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class zH extends Zt{constructor(e,t){super(e,"in",t),this.keys=t2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BH extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=t2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function t2(n,e){return(e.arrayValue?.values||[]).map((t=>Ve.fromName(t.referenceValue)))}class $H extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mx(t)&&Xd(t.arrayValue,this.value)}}class HH extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xd(this.value.arrayValue,t)}}class WH extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xd(this.value.arrayValue,t)}}class qH extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mx(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Xd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,t=null,r=[],s=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.Te=null}}function jb(n,e=null,t=[],r=[],s=null,o=null,a=null){return new KH(n,e,t,r,s,o,a)}function gx(n){const e=Ge(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>w0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),hg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Mc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Mc(r))).join(",")),e.Te=t}return e.Te}function yx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mb(n.startAt,e.startAt)&&Mb(n.endAt,e.endAt)}function x0(n){return Ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t=null,r=[],s=[],o=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GH(n,e,t,r,s,o,a,c){return new ru(n,e,t,r,s,o,a,c)}function vx(n){return new ru(n)}function Lb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n2(n){return n.collectionGroup!==null}function Id(n){const e=Ge(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new un(In.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Jd(o,r))})),t.has(In.keyField().canonicalString())||e.Ie.push(new Jd(In.keyField(),r))}return e.Ie}function js(n){const e=Ge(n);return e.Ee||(e.Ee=QH(e,Id(n))),e.Ee}function QH(n,e){if(n.limitType==="F")return jb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Jd(s.field,o)}));const t=n.endAt?new gm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gm(n.startAt.position,n.startAt.inclusive):null;return jb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function E0(n,e){const t=n.filters.concat([e]);return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ym(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pg(n,e){return yx(js(n),js(e))&&n.limitType===e.limitType}function r2(n){return`${gx(js(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>e2(s))).join(", ")}]`),hg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Mc(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Mc(s))).join(",")),`Target(${r})`})(js(n))}; limitType=${n.limitType})`}function mg(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ve.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Id(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,d){const h=Db(a,c,d);return a.inclusive?h<=0:h<0})(r.startAt,Id(r),s)||r.endAt&&!(function(a,c,d){const h=Db(a,c,d);return a.inclusive?h>=0:h>0})(r.endAt,Id(r),s))})(n,e)}function YH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s2(n){return(e,t)=>{let r=!1;for(const s of Id(n)){const o=XH(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function XH(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):(function(o,a,c){const d=a.data.field(o),h=c.data.field(o);return d!==null&&h!==null?Dc(d,h):$e(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return zR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH=new tn(Ve.comparator);function xi(){return JH}const i2=new tn(Ve.comparator);function gd(...n){let e=i2;for(const t of n)e=e.insert(t.key,t);return e}function o2(n){let e=i2;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ka(){return kd()}function a2(){return kd()}function kd(){return new el((n=>n.toString()),((n,e)=>n.isEqual(e)))}const ZH=new tn(Ve.comparator),eW=new un(Ve.comparator);function ot(...n){let e=eW;for(const t of n)e=e.add(t);return e}const tW=new un(st);function nW(){return tW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fm(e)?"-0":e}}function l2(n){return{integerValue:""+n}}function rW(n,e){return NH(e)?l2(e):_x(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this._=void 0}}function sW(n,e,t){return n instanceof Zd?(function(s,o){const a={fields:{[HR]:{stringValue:$R},[qR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&px(o)&&(o=fg(o)),o&&(a.fields[WR]=o),{mapValue:a}})(t,e):n instanceof eh?u2(n,e):n instanceof th?d2(n,e):(function(s,o){const a=c2(s,o),c=Ob(a)+Ob(s.Ae);return _0(a)&&_0(s.Ae)?l2(c):_x(s.serializer,c)})(n,e)}function iW(n,e,t){return n instanceof eh?u2(n,e):n instanceof th?d2(n,e):t}function c2(n,e){return n instanceof vm?(function(r){return _0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Zd extends gg{}class eh extends gg{constructor(e){super(),this.elements=e}}function u2(n,e){const t=h2(e);for(const r of n.elements)t.some((s=>zs(s,r)))||t.push(r);return{arrayValue:{values:t}}}class th extends gg{constructor(e){super(),this.elements=e}}function d2(n,e){let t=h2(e);for(const r of n.elements)t=t.filter((s=>!zs(s,r)));return{arrayValue:{values:t}}}class vm extends gg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ob(n){return qt(n.integerValue||n.doubleValue)}function h2(n){return mx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,t){this.field=e,this.transform=t}}function aW(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof eh&&s instanceof eh||r instanceof th&&s instanceof th?Rc(r.elements,s.elements,zs):r instanceof vm&&s instanceof vm?zs(r.Ae,s.Ae):r instanceof Zd&&s instanceof Zd})(n.transform,e.transform)}class lW{constructor(e,t){this.version=e,this.transformResults=t}}class is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yg{}function f2(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wx(n.key,is.none()):new bh(n.key,n.data,is.none());{const t=n.data,r=sr.empty();let s=new un(In.comparator);for(let o of e.fields)if(!s.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new $o(n.key,r,new vr(s.toArray()),is.none())}}function cW(n,e,t){n instanceof bh?(function(s,o,a){const c=s.value.clone(),d=Fb(s.fieldTransforms,o,a.transformResults);c.setAll(d),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof $o?(function(s,o,a){if(!Vp(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Fb(s.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(p2(s)),d.setAll(c),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(n,e,t):(function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Ad(n,e,t,r){return n instanceof bh?(function(o,a,c,d){if(!Vp(o.precondition,a))return c;const h=o.value.clone(),m=Ub(o.fieldTransforms,d,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof $o?(function(o,a,c,d){if(!Vp(o.precondition,a))return c;const h=Ub(o.fieldTransforms,d,a),m=a.data;return m.setAll(p2(o)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,a,c){return Vp(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function uW(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=c2(r.transform,s||null);o!=null&&(t===null&&(t=sr.empty()),t.set(r.field,o))}return t||null}function Vb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Rc(r,s,((o,a)=>aW(o,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bh extends yg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $o extends yg{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function p2(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Fb(n,e,t){const r=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],a=o.transform,c=e.data.field(o.field);r.set(o.field,iW(a,c,t[s]))}return r}function Ub(n,e,t){const r=new Map;for(const s of n){const o=s.transform,a=t.data.field(s.field);r.set(s.field,sW(o,a,e))}return r}class wx extends yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dW extends yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&cW(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=a2();return this.mutations.forEach((s=>{const o=e.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=t.has(s.key)?null:c;const d=f2(a,c);d!==null&&r.set(s.key,d),a.isValidDocument()||a.convertToNoDocument(Ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&Rc(this.mutations,e.mutations,((t,r)=>Vb(t,r)))&&Rc(this.baseMutations,e.baseMutations,((t,r)=>Vb(t,r)))}}class xx{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return ZH})();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new xx(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,ct;function mW(n){switch(n){case ae.OK:return $e(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return $e(15467,{code:n})}}function m2(n){if(n===void 0)return wi("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Yt.OK:return ae.OK;case Yt.CANCELLED:return ae.CANCELLED;case Yt.UNKNOWN:return ae.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ae.INTERNAL;case Yt.UNAVAILABLE:return ae.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ae.NOT_FOUND;case Yt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Yt.ABORTED:return ae.ABORTED;case Yt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Yt.DATA_LOSS:return ae.DATA_LOSS;default:return $e(39323,{code:n})}}(ct=Yt||(Yt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW=new po([4294967295,4294967295],0);function zb(n){const e=gW().encode(n),t=new NR;return t.update(e),new Uint8Array(t.digest())}function Bb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new po([t,r],0),new po([s,o],0)]}class Ex{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yd(`Invalid padding: ${t}`);if(r<0)throw new yd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=po.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(po.fromNumber(r)));return s.compare(yW)===1&&(s=new po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zb(e),[r,s]=Bb(t);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Ex(o,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=zb(e),[r,s]=Bb(t);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class yd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vg(Ke.min(),s,new tn(st),xi(),ot())}}class Ih{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ih(r,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class g2{constructor(e,t){this.targetId=e,this.Ce=t}}class y2{constructor(e,t,r=kn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class $b{constructor(){this.ve=0,this.Fe=Hb(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),r=ot();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:$e(38017,{changeType:o})}})),new Ih(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Hb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vW{constructor(e){this.Ge=e,this.ze=new Map,this.je=xi(),this.Je=gp(),this.He=gp(),this.Ye=new tn(st)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(x0(o))if(r===0){const a=new Ve(o.path);this.et(t,a,Ln.newNoDocument(a,Ke.min()))}else mt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),d=c?this.ct(c,e,a):1;if(d!==0){this.it(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let a,c;try{a=ko(r).toUint8Array()}catch(d){if(d instanceof BR)return Pc("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Ex(a,s,o)}catch(d){return Pc(d instanceof yd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,a)=>{const c=this.ot(a);if(c){if(o.current&&x0(c.target)){const d=new Ve(c.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,Ln.newNoDocument(d,e))}o.Be&&(t.set(a,o.ke()),o.qe())}}));let r=ot();this.He.forEach(((o,a)=>{let c=!0;a.forEachWhile((d=>{const h=this.ot(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,a)=>a.setReadTime(e)));const s=new vg(e,t,this.Ye,this.je,r);return this.je=xi(),this.Je=gp(),this.He=gp(),this.Ye=new tn(st),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $b,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new un(st),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new un(st),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $b),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gp(){return new tn(Ve.comparator)}function Hb(){return new tn(Ve.comparator)}const _W={asc:"ASCENDING",desc:"DESCENDING"},wW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xW={and:"AND",or:"OR"};class EW{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function T0(n,e){return n.useProto3Json||hg(e)?e:{value:e}}function _m(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TW(n,e){return _m(n,e.toTimestamp())}function Ls(n){return mt(!!n,49232),Ke.fromTimestamp((function(t){const r=Io(t);return new kt(r.seconds,r.nanos)})(n))}function Tx(n,e){return S0(n,e).canonicalString()}function S0(n,e){const t=(function(s){return new Ct(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _2(n){const e=Ct.fromString(n);return mt(S2(e),10190,{key:e.toString()}),e}function C0(n,e){return Tx(n.databaseId,e.path)}function e_(n,e){const t=_2(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(x2(t))}function w2(n,e){return Tx(n.databaseId,e)}function SW(n){const e=_2(n);return e.length===4?Ct.emptyPath():x2(e)}function b0(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function x2(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wb(n,e,t){return{name:C0(n,e),fields:t.value.mapValue.fields}}function CW(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:$e(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(h,m){return h.useProto3Json?(mt(m===void 0||typeof m=="string",58123),kn.fromBase64String(m||"")):(mt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),kn.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const m=h.code===void 0?ae.UNKNOWN:m2(h.code);return new be(m,h.message||"")})(a);t=new y2(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=e_(n,r.document.name),o=Ls(r.document.updateTime),a=r.document.createTime?Ls(r.document.createTime):Ke.min(),c=new sr({mapValue:{fields:r.document.fields}}),d=Ln.newFoundDocument(s,o,a,c),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Fp(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=e_(n,r.document),o=r.readTime?Ls(r.readTime):Ke.min(),a=Ln.newNoDocument(s,o),c=r.removedTargetIds||[];t=new Fp([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=e_(n,r.document),o=r.removedTargetIds||[];t=new Fp([],o,s,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new pW(s,o),c=r.targetId;t=new g2(c,a)}}return t}function bW(n,e){let t;if(e instanceof bh)t={update:Wb(n,e.key,e.value)};else if(e instanceof wx)t={delete:C0(n,e.key)};else if(e instanceof $o)t={update:Wb(n,e.key,e.data),updateMask:jW(e.fieldMask)};else{if(!(e instanceof dW))return $e(16599,{Vt:e.type});t={verify:C0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,a){const c=a.transform;if(c instanceof Zd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof th)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof vm)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw $e(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:TW(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$e(27497)})(n,e.precondition)),t}function IW(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map((t=>(function(s,o){let a=s.updateTime?Ls(s.updateTime):Ls(o);return a.isEqual(Ke.min())&&(a=Ls(o)),new lW(a,s.transformResults||[])})(t,e)))):[]}function kW(n,e){return{documents:[w2(n,e.path)]}}function AW(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=w2(n,s);const o=(function(h){if(h.length!==0)return T2(ds.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const a=(function(h){if(h.length!==0)return h.map((m=>(function(v){return{field:tc(v.field),direction:RW(v.dir)}})(m)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=T0(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function NW(n){let e=SW(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){mt(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const v=E2(y);return v instanceof ds&&JR(v)?v.getFilters():[v]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map((v=>(function(b){return new Jd(nc(b.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let v;return v=typeof y=="object"?y.value:y,hg(v)?null:v})(t.limit));let d=null;t.startAt&&(d=(function(y){const v=!!y.before,E=y.values||[];return new gm(E,v)})(t.startAt));let h=null;return t.endAt&&(h=(function(y){const v=!y.before,E=y.values||[];return new gm(E,v)})(t.endAt)),GH(e,s,a,o,c,"F",d,h)}function PW(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function E2(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=nc(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nc(t.unaryFilter.field);return Zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nc(t.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=nc(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Zt.create(nc(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ds.create(t.compositeFilter.filters.map((r=>E2(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(n):$e(30097,{filter:n})}function RW(n){return _W[n]}function DW(n){return wW[n]}function MW(n){return xW[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return In.fromServerFormat(n.fieldPath)}function T2(n){return n instanceof Zt?(function(t){if(t.op==="=="){if(Rb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(Pb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(Pb(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:DW(t.op),value:t.value}}})(n):n instanceof ds?(function(t){const r=t.getFilters().map((s=>T2(s)));return r.length===1?r[0]:{compositeFilter:{op:MW(t.op),filters:r}}})(n):$e(54877,{filter:n})}function jW(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function S2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,r,s,o=Ke.min(),a=Ke.min(),c=kn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.yt=e}}function OW(n){const e=NW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(){this.Cn=new FW}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(bo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class FW{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new un(Ct.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new un(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C2=41943040;class rr{static withCacheSize(e){return new rr(e,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr.DEFAULT_COLLECTION_PERCENTILE=10,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rr.DEFAULT=new rr(C2,rr.DEFAULT_COLLECTION_PERCENTILE,rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rr.DISABLED=new rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jc(0)}static cr(){return new jc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="LruGarbageCollector",UW=1048576;function Gb([n,e],[t,r]){const s=st(n,t);return s===0?st(e,r):s}class zW{constructor(e){this.Ir=e,this.buffer=new un(Gb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(Kb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nu(t)?ke(Kb,"Ignoring IndexedDB error during garbage collection: ",t):await tu(t)}await this.Vr(3e5)}))}}class $W{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(dg.ce);const r=new zW(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(qb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,a,c,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,a=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,c=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(h=Date.now(),Zl()<=nt.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function HW(n,e){return new $W(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.changes=new el((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ad(r.mutation,s,vr.empty(),kt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ot()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ot()){const s=ka();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let a=gd();return o.forEach(((c,d)=>{a=a.insert(c,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=ka();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ot())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let o=xi();const a=kd(),c=(function(){return kd()})();return t.forEach(((d,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof $o)?o=o.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Ad(m.mutation,h,m.mutation.getFieldMask(),kt.now())):a.set(h.key,vr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((h,m)=>a.set(h,m))),t.forEach(((h,m)=>c.set(h,new qW(m,a.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=kd();let s=new tn(((a,c)=>a-c)),o=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||vr.empty();m=c.applyToLocalView(h,m),r.set(d,m);const y=(s.get(c.batchId)||ot()).add(d);s=s.insert(c.batchId,y)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,m=d.value,y=a2();m.forEach((v=>{if(!o.has(v)){const E=f2(t.get(v),r.get(v));E!==null&&y.set(v,E),o=o.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,y))}return ue.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(a){return Ve.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ue.resolve(ka());let c=Gd,d=o;return a.next((h=>ue.forEach(h,((m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?ue.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{d=d.insert(m,v)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,d,h,ot()))).next((m=>({batchId:c,changes:o2(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((r=>{let s=gd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let a=gd();return this.indexManager.getCollectionParents(e,o).next((c=>ue.forEach(c,(d=>{const h=(function(y,v){return new ru(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((m=>{m.forEach(((y,v)=>{a=a.insert(y,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((a=>{o.forEach(((d,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,Ln.newInvalidDocument(m)))}));let c=gd();return a.forEach(((d,h)=>{const m=o.get(d);m!==void 0&&Ad(m.mutation,h,vr.empty(),kt.now()),mg(t,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ls(s.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:OW(s.bundledQuery),readTime:Ls(s.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(){this.overlays=new tn(Ve.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ka();return ue.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=ka(),o=t.length+1,a=new Ve(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new tn(((h,m)=>h-m));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=o.get(h.largestBatchId);m===null&&(m=ka(),o=o.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=ka(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,m)=>c.set(h,m))),!(c.size()>=s)););return ue.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fW(t,r));let o=this.qr.get(t);o===void 0&&(o=ot(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.Qr=new un(yn.$r),this.Ur=new un(yn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new yn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new yn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ve(new Ct([])),r=new yn(t,e),s=new yn(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ve(new Ct([])),r=new yn(t,e),s=new yn(t,e+1);let o=ot();return this.Ur.forEachInRange([r,s],(a=>{o=o.add(a.key)})),o}containsKey(e){const t=new yn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ve.comparator(e.key,t.key)||st(e.Yr,t.Yr)}static Kr(e,t){return st(e.Yr,t.Yr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new un(yn.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hW(o,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new yn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return ue.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?fx:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),s=new yn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(a=>{const c=this.Xr(a.Yr);o.push(c)})),ue.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(st);return t.forEach((s=>{const o=new yn(s,0),a=new yn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(c=>{r=r.add(c.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ve.isDocumentKey(o)||(o=o.child(""));const a=new yn(new Ve(o),0);let c=new un(st);return this.Zr.forEachWhile((d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(d.Yr)),!0)}),a),ue.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(s=>{const o=new yn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new yn(t,0),s=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e){this.ri=e,this.docs=(function(){return new tn(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=xi();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ln.newInvalidDocument(s))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=xi();const a=t.path,c=new Ve(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||bH(CH(m),r)<=0||(s.has(m.key)||mg(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ue.resolve(o)}getAllFromCollectionGroup(e,t,r,s){$e(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new ZW(this)}getSize(e){return ue.resolve(this.size)}}class ZW extends WW{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{constructor(e){this.persistence=e,this.si=new el((t=>gx(t)),yx),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Sx,this.targetCount=0,this.ai=jc.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ue.waitFor(o).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((a=>{o.push(s.markPotentiallyOrphaned(e,a))})),ue.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.ui={},this.overlays={},this.ci=new dg(0),this.li=!1,this.li=!0,this.hi=new YW,this.referenceDelegate=e(this),this.Pi=new eq(this),this.indexManager=new VW,this.remoteDocumentCache=(function(s){return new JW(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new LW(t),this.Ii=new GW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new XW(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const s=new tq(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class tq extends kH{constructor(e){super(),this.currentSequenceNumber=e}}class Cx{constructor(e){this.persistence=e,this.Ri=new Sx,this.Vi=null}static mi(e){return new Cx(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const s=Ve.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wm{constructor(e,t){this.persistence=e,this.pi=new el((r=>PH(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=HW(this,t)}static mi(e,t){return new wm(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?ue.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,o.removeEntry(a,Ke.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lp(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ue.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=ot(),s=ot();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new bx(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bB()?8:AH(Un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;const a=new nq;return this.Ss(e,t,a).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Zl()<=nt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Zl()<=nt.DEBUG&&ke("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Zl()<=nt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(t))):ue.resolve())}ys(e,t){if(Lb(t))return ue.resolve(null);let r=js(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=ym(t,null,"F"),r=js(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const a=ot(...o);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((d=>{const h=this.Ds(t,c);return this.Cs(t,h,a,d.readTime)?this.ys(e,ym(t,null,"F")):this.vs(e,h,t,d)}))))})))))}ws(e,t,r,s){return Lb(t)||s.isEqual(Ke.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((o=>{const a=this.Ds(t,o);return this.Cs(t,a,r,s)?ue.resolve(null):(Zl()<=nt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ec(t)),this.vs(e,a,t,SH(s,Gd)).next((c=>c)))}))}Ds(e,t){let r=new un(s2(e));return t.forEach(((s,o)=>{mg(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return Zl()<=nt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ec(t)),this.ps.getDocumentsMatchingQuery(e,t,bo.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((a=>{o=o.insert(a.key,a)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="LocalStore",sq=3e8;class iq{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new tn(st),this.xs=new el((o=>gx(o)),yx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oq(n,e,t,r){return new iq(n,e,t,r)}async function I2(n,e){const t=Ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const a=[],c=[];let d=ot();for(const h of s){a.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of o){c.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function aq(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,m){const y=h.batch,v=y.keys();let E=ue.resolve();return v.forEach((b=>{E=E.next((()=>m.getEntry(d,b))).next((C=>{const I=h.docVersions.get(b);mt(I!==null,48541),C.version.compareTo(I)<0&&(y.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),m.addEntry(C)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let d=ot();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function k2(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function lq(n,e){const t=Ge(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((m,y)=>{const v=s.get(y);if(!v)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y))));let E=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(kn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,r)),s=s.insert(y,E),(function(C,I,k){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=sq?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(v,E,m)&&c.push(t.Pi.updateTargetData(o,E))}));let d=xi(),h=ot();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(cq(o,a,e.documentUpdates).next((m=>{d=m.ks,h=m.qs}))),!r.isEqual(Ke.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(m)}return ue.waitFor(c).next((()=>a.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,d,h))).next((()=>d))})).then((o=>(t.Ms=s,o)))}function cq(n,e,t){let r=ot(),s=ot();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let a=xi();return t.forEach(((c,d)=>{const h=o.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(Ke.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):ke(Ix,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{ks:a,qs:s}}))}function uq(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dq(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,ue.resolve(s)):t.Pi.allocateTargetId(r).next((a=>(s=new lo(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function I0(n,e,t){const r=Ge(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!nu(a))throw a;ke(Ix,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Qb(n,e,t){const r=Ge(n);let s=Ke.min(),o=ot();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,h,m){const y=Ge(d),v=y.xs.get(m);return v!==void 0?ue.resolve(y.Ms.get(v)):y.Pi.getTargetData(h,m)})(r,a,js(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((d=>{o=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?s:Ke.min(),t?o:ot()))).next((c=>(hq(r,YH(e),c),{documents:c,Qs:o})))))}function hq(n,e,t){let r=n.Os.get(e)||Ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class Yb{constructor(){this.activeTargetIds=nW()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fq{constructor(){this.Mo=new Yb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="ConnectivityMonitor";class Jb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(Xb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(Xb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp=null;function k0(){return yp===null?yp=(function(){return 268435456+Math.round(2147483648*Math.random())})():yp++,"0x"+yp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="RestConnection",mq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===pm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const a=k0(),c=this.zo(e,t.toUriEncodedString());ke(t_,`Sending RPC '${e}' ${a}:`,c,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,o);const{host:h}=new URL(c),m=Uo(h);return this.Jo(e,c,d,r,m).then((y=>(ke(t_,`Received RPC '${e}' ${a}: `,y),y)),(y=>{throw Pc(t_,`RPC '${e}' ${a} failed with error: `,y,"url: ",c,"request:",r),y}))}Ho(e,t,r,s,o,a){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+eu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=mq[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="WebChannelConnection";class vq extends gq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const a=k0();return new Promise(((c,d)=>{const h=new PR;h.setWithCredentials(!0),h.listenOnce(RR.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case jp.NO_ERROR:const y=h.getResponseJson();ke(Mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),c(y);break;case jp.TIMEOUT:ke(Mn,`RPC '${e}' ${a} timed out`),d(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case jp.HTTP_ERROR:const v=h.getStatus();if(ke(Mn,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E?.error;if(b&&b.status&&b.message){const C=(function(k){const R=k.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(R)>=0?R:ae.UNKNOWN})(b.status);d(new be(C,b.message))}else d(new be(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new be(ae.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ke(Mn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);ke(Mn,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=k0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jR(),c=MR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=o.join("");ke(Mn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=a.createWebChannel(m,d);this.I_(y);let v=!1,E=!1;const b=new yq({Yo:I=>{E?ke(Mn,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(v||(ke(Mn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),v=!0),ke(Mn,`RPC '${e}' stream ${s} sending:`,I),y.send(I))},Zo:()=>y.close()}),C=(I,k,R)=>{I.listen(k,(M=>{try{R(M)}catch(F){setTimeout((()=>{throw F}),0)}}))};return C(y,md.EventType.OPEN,(()=>{E||(ke(Mn,`RPC '${e}' stream ${s} transport opened.`),b.o_())})),C(y,md.EventType.CLOSE,(()=>{E||(E=!0,ke(Mn,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(y))})),C(y,md.EventType.ERROR,(I=>{E||(E=!0,Pc(Mn,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),b.a_(new be(ae.UNAVAILABLE,"The operation could not be completed")))})),C(y,md.EventType.MESSAGE,(I=>{if(!E){const k=I.data[0];mt(!!k,16349);const R=k,M=R?.error||R[0]?.error;if(M){ke(Mn,`RPC '${e}' stream ${s} received error:`,M);const F=M.status;let W=(function(A){const j=Yt[A];if(j!==void 0)return m2(j)})(F),K=M.message;W===void 0&&(W=ae.INTERNAL,K="Unknown error status: "+F+" with message "+M.message),E=!0,b.a_(new be(W,K)),y.close()}else ke(Mn,`RPC '${e}' stream ${s} received:`,k),b.u_(k)}})),C(c,DR.STAT_EVENT,(I=>{I.stat===m0.PROXY?ke(Mn,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===m0.NOPROXY&&ke(Mn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function n_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n){return new EW(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="PersistentStream";class N2{constructor(e,t,r,s,o,a,c,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(wi(t.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(Zb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ke(Zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _q extends N2{constructor(e,t,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CW(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ke.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ke.min():a.readTime?Ls(a.readTime):Ke.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=b0(this.serializer),t.addTarget=(function(o,a){let c;const d=a.target;if(c=x0(d)?{documents:kW(o,d)}:{query:AW(o,d).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=v2(o,a.resumeToken);const h=T0(o,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Ke.min())>0){c.readTime=_m(o,a.snapshotVersion.toTimestamp());const h=T0(o,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=PW(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=b0(this.serializer),t.removeTarget=e,this.q_(t)}}class wq extends N2{constructor(e,t,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IW(e.writeResults,e.commitTime),r=Ls(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=b0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>bW(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{}class Eq extends xq{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(e,S0(t,r),s,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(ae.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,S0(t,r),s,a,c,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ae.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Tq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wi(t),this.aa=!1):ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class Sq{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{tl(this)&&(ke(Ka,"Restarting streams for network reachability change."),await(async function(d){const h=Ge(d);h.Ea.add(4),await kh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await wg(h)})(this))}))})),this.Ra=new Tq(r,s)}}async function wg(n){if(tl(n))for(const e of n.da)await e(!0)}async function kh(n){for(const e of n.da)await e(!1)}function P2(n,e){const t=Ge(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Px(t)?Nx(t):su(t).O_()&&Ax(t,e))}function kx(n,e){const t=Ge(n),r=su(t);t.Ia.delete(e),r.O_()&&R2(t,e),t.Ia.size===0&&(r.O_()?r.L_():tl(t)&&t.Ra.set("Unknown"))}function Ax(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}su(n).Y_(e)}function R2(n,e){n.Va.Ue(e),su(n).Z_(e)}function Nx(n){n.Va=new vW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),su(n).start(),n.Ra.ua()}function Px(n){return tl(n)&&!su(n).x_()&&n.Ia.size>0}function tl(n){return Ge(n).Ea.size===0}function D2(n){n.Va=void 0}async function Cq(n){n.Ra.set("Online")}async function bq(n){n.Ia.forEach(((e,t)=>{Ax(n,e)}))}async function Iq(n,e){D2(n),Px(n)?(n.Ra.ha(e),Nx(n)):n.Ra.set("Unknown")}async function kq(n,e,t){if(n.Ra.set("Online"),e instanceof y2&&e.state===2&&e.cause)try{await(async function(s,o){const a=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){ke(Ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xm(n,r)}else if(e instanceof Fp?n.Va.Ze(e):e instanceof g2?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ke.min()))try{const r=await k2(n.localStore);t.compareTo(r)>=0&&await(function(o,a){const c=o.Va.Tt(a);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ia.get(h);m&&o.Ia.set(h,m.withResumeToken(d.resumeToken,a))}})),c.targetMismatches.forEach(((d,h)=>{const m=o.Ia.get(d);if(!m)return;o.Ia.set(d,m.withResumeToken(kn.EMPTY_BYTE_STRING,m.snapshotVersion)),R2(o,d);const y=new lo(m.target,d,h,m.sequenceNumber);Ax(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){ke(Ka,"Failed to raise snapshot:",r),await xm(n,r)}}async function xm(n,e,t){if(!nu(e))throw e;n.Ea.add(1),await kh(n),n.Ra.set("Offline"),t||(t=()=>k2(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ke(Ka,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await wg(n)}))}function M2(n,e){return e().catch((t=>xm(n,t,e)))}async function xg(n){const e=Ge(n),t=No(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fx;for(;Aq(e);)try{const s=await uq(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,Nq(e,s)}catch(s){await xm(e,s)}j2(e)&&L2(e)}function Aq(n){return tl(n)&&n.Ta.length<10}function Nq(n,e){n.Ta.push(e);const t=No(n);t.O_()&&t.X_&&t.ea(e.mutations)}function j2(n){return tl(n)&&!No(n).x_()&&n.Ta.length>0}function L2(n){No(n).start()}async function Pq(n){No(n).ra()}async function Rq(n){const e=No(n);for(const t of n.Ta)e.ea(t.mutations)}async function Dq(n,e,t){const r=n.Ta.shift(),s=xx.from(r,e,t);await M2(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await xg(n)}async function Mq(n,e){e&&No(n).X_&&await(async function(r,s){if((function(a){return mW(a)&&a!==ae.ABORTED})(s.code)){const o=r.Ta.shift();No(r).B_(),await M2(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await xg(r)}})(n,e),j2(n)&&L2(n)}async function eI(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke(Ka,"RemoteStore received new credentials");const r=tl(t);t.Ea.add(3),await kh(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wg(t)}async function jq(n,e){const t=Ge(n);e?(t.Ea.delete(2),await wg(t)):e||(t.Ea.add(2),await kh(t),t.Ra.set("Unknown"))}function su(n){return n.ma||(n.ma=(function(t,r,s){const o=Ge(t);return o.sa(),new _q(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Cq.bind(null,n),t_:bq.bind(null,n),r_:Iq.bind(null,n),H_:kq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Px(n)?Nx(n):n.Ra.set("Unknown")):(await n.ma.stop(),D2(n))}))),n.ma}function No(n){return n.fa||(n.fa=(function(t,r,s){const o=Ge(t);return o.sa(),new wq(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Pq.bind(null,n),r_:Mq.bind(null,n),ta:Rq.bind(null,n),na:Dq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xg(n)):(await n.fa.stop(),n.Ta.length>0&&(ke(Ka,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const a=Date.now()+r,c=new Rx(e,t,a,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dx(n,e){if(wi("AsyncQueue",`${e}: ${n}`),nu(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{static emptySet(e){return new wc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=gd(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.ga=new tn(Ve.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Lc{constructor(e,t,r,s,o,a,c,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,o){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new Lc(e,t,wc.emptySet(t),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Oq{constructor(){this.queries=nI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Ge(t),o=s.queries;s.queries=nI(),o.forEach(((a,c)=>{for(const d of c.Sa)d.onError(r)}))})(this,new be(ae.ABORTED,"Firestore shutting down"))}}function nI(){return new el((n=>r2(n)),pg)}async function O2(n,e){const t=Ge(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new Lq,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=Dx(a,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Mx(t)}async function V2(n,e){const t=Ge(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Vq(n,e){const t=Ge(n);let r=!1;for(const s of e){const o=s.query,a=t.queries.get(o);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&Mx(t)}function Fq(n,e,t){const r=Ge(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function Mx(n){n.Ca.forEach((e=>{e.next()}))}var A0,rI;(rI=A0||(A0={})).Ma="default",rI.Cache="cache";class F2{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==A0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class Uq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ot(),this.mutatedKeys=ot(),this.eu=s2(e),this.tu=new wc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new tI,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const v=s.get(m),E=mg(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),C=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;v&&E?v.data.isEqual(E.data)?b!==C&&(r.track({type:3,doc:E}),I=!0):this.su(v,E)||(r.track({type:2,doc:E}),I=!0,(d&&this.eu(E,d)>0||h&&this.eu(E,h)<0)&&(c=!0)):!v&&E?(r.track({type:0,doc:E}),I=!0):v&&!E&&(r.track({type:1,doc:v}),I=!0,(d||h)&&(c=!0)),I&&(E?(a=a.add(E),o=C?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((m,y)=>(function(E,b){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:I})}};return C(E)-C(b)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,h=d!==this.Za;return this.Za=d,a.length!==0||h?{snapshot:new Lc(this.query,e.tu,o,a,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ot(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new z2(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new U2(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jx="SyncEngine";class zq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Bq{constructor(e){this.key=e,this.hu=!1}}class $q{constructor(e,t,r,s,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new el((c=>r2(c)),pg),this.Iu=new Map,this.Eu=new Set,this.du=new tn(Ve.comparator),this.Au=new Map,this.Ru=new Sx,this.Vu={},this.mu=new Map,this.fu=jc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Hq(n,e,t=!0){const r=K2(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await B2(r,e,t,!0),s}async function Wq(n,e){const t=K2(n);await B2(t,e,!0,!1)}async function B2(n,e,t,r){const s=await dq(n.localStore,js(e)),o=s.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await qq(n,e,o,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&P2(n.remoteStore,s),c}async function qq(n,e,t,r,s){n.pu=(y,v,E)=>(async function(C,I,k,R){let M=I.view.ru(k);M.Cs&&(M=await Qb(C.localStore,I.query,!1).then((({documents:P})=>I.view.ru(P,M))));const F=R&&R.targetChanges.get(I.targetId),W=R&&R.targetMismatches.get(I.targetId)!=null,K=I.view.applyChanges(M,C.isPrimaryClient,F,W);return iI(C,I.targetId,K.au),K.snapshot})(n,y,v,E);const o=await Qb(n.localStore,e,!0),a=new Uq(e,o.Qs),c=a.ru(o.documents),d=Ih.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,d);iI(n,t,h.au);const m=new zq(e,t,a);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function Kq(n,e,t){const r=Ge(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((a=>!pg(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await I0(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&kx(r.remoteStore,s.targetId),N0(r,s.targetId)})).catch(tu)):(N0(r,s.targetId),await I0(r.localStore,s.targetId,!0))}async function Gq(n,e){const t=Ge(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kx(t.remoteStore,r.targetId))}async function Qq(n,e,t){const r=nK(n);try{const s=await(function(a,c){const d=Ge(a),h=kt.now(),m=c.reduce(((E,b)=>E.add(b.key)),ot());let y,v;return d.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=xi(),C=ot();return d.Ns.getEntries(E,m).next((I=>{b=I,b.forEach(((k,R)=>{R.isValidDocument()||(C=C.add(k))}))})).next((()=>d.localDocuments.getOverlayedDocuments(E,b))).next((I=>{y=I;const k=[];for(const R of c){const M=uW(R,y.get(R.key).overlayedDocument);M!=null&&k.push(new $o(R.key,M,QR(M.value.mapValue),is.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,k,c)})).next((I=>{v=I;const k=I.applyToLocalDocumentSet(y,C);return d.documentOverlayCache.saveOverlays(E,I.batchId,k)}))})).then((()=>({batchId:v.batchId,changes:o2(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,c,d){let h=a.Vu[a.currentUser.toKey()];h||(h=new tn(st)),h=h.insert(c,d),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,t),await Ah(r,s.changes),await xg(r.remoteStore)}catch(s){const o=Dx(s,"Failed to persist write");t.reject(o)}}async function $2(n,e){const t=Ge(n);try{const r=await lq(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const a=t.Au.get(o);a&&(mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?mt(a.hu,14607):s.removedDocuments.size>0&&(mt(a.hu,42227),a.hu=!1))})),await Ah(t,r,e)}catch(r){await tu(r)}}function sI(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const d=Ge(a);d.onlineState=c;let h=!1;d.queries.forEach(((m,y)=>{for(const v of y.Sa)v.va(c)&&(h=!0)})),h&&Mx(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yq(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let a=new tn(Ve.comparator);a=a.insert(o,Ln.newNoDocument(o,Ke.min()));const c=ot().add(o),d=new vg(Ke.min(),new Map,new tn(st),a,c);await $2(r,d),r.du=r.du.remove(o),r.Au.delete(e),Lx(r)}else await I0(r.localStore,e,!1).then((()=>N0(r,e,t))).catch(tu)}async function Xq(n,e){const t=Ge(n),r=e.batch.batchId;try{const s=await aq(t.localStore,e);W2(t,r,null),H2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ah(t,s)}catch(s){await tu(s)}}async function Jq(n,e,t){const r=Ge(n);try{const s=await(function(a,c){const d=Ge(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let m;return d.mutationQueue.lookupMutationBatch(h,c).next((y=>(mt(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(h,y)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m))).next((()=>d.localDocuments.getDocuments(h,m)))}))})(r.localStore,e);W2(r,e,t),H2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ah(r,s)}catch(s){await tu(s)}}function H2(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function W2(n,e,t){const r=Ge(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function N0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||q2(n,r)}))}function q2(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(kx(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lx(n))}function iI(n,e,t){for(const r of t)r instanceof U2?(n.Ru.addReference(r.key,e),Zq(n,r)):r instanceof z2?(ke(jx,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||q2(n,r.key)):$e(19791,{wu:r})}function Zq(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ke(jx,"New document in limbo: "+t),n.Eu.add(r),Lx(n))}function Lx(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ve(Ct.fromString(e)),r=n.fu.next();n.Au.set(r,new Bq(t)),n.du=n.du.insert(t,r),P2(n.remoteStore,new lo(js(vx(t.path)),r,"TargetPurposeLimboResolution",dg.ce))}}async function Ah(n,e,t){const r=Ge(n),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,d)=>{a.push(r.pu(d,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){s.push(h);const m=bx.As(d.targetId,h);o.push(m)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(d,h){const m=Ge(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ue.forEach(h,(v=>ue.forEach(v.Es,(E=>m.persistence.referenceDelegate.addReference(y,v.targetId,E))).next((()=>ue.forEach(v.ds,(E=>m.persistence.referenceDelegate.removeReference(y,v.targetId,E)))))))))}catch(y){if(!nu(y))throw y;ke(Ix,"Failed to update sequence numbers: "+y)}for(const y of h){const v=y.targetId;if(!y.fromCache){const E=m.Ms.get(v),b=E.snapshotVersion,C=E.withLastLimboFreeSnapshotVersion(b);m.Ms=m.Ms.insert(v,C)}}})(r.localStore,o))}async function eK(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke(jx,"User change. New user:",e.toKey());const r=await I2(t.localStore,e);t.currentUser=e,(function(o,a){o.mu.forEach((c=>{c.forEach((d=>{d.reject(new be(ae.CANCELLED,a))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ah(t,r.Ls)}}function tK(n,e){const t=Ge(n),r=t.Au.get(e);if(r&&r.hu)return ot().add(r.key);{let s=ot();const o=t.Iu.get(e);if(!o)return s;for(const a of o){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function K2(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yq.bind(null,e),e.Pu.H_=Vq.bind(null,e.eventManager),e.Pu.yu=Fq.bind(null,e.eventManager),e}function nK(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jq.bind(null,e),e}class Em{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_g(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oq(this.persistence,new rq,e.initialUser,this.serializer)}Cu(e){return new b2(Cx.mi,this.serializer)}Du(e){return new fq}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Em.provider={build:()=>new Em};class rK extends Em{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof wm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BW(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rr.withCacheSize(this.cacheSizeBytes):rr.DEFAULT;return new b2((r=>wm.mi(r,t)),this.serializer)}}class P0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eK.bind(null,this.syncEngine),await jq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Oq})()}createDatastore(e){const t=_g(e.databaseInfo.databaseId),r=(function(o){return new vq(o)})(e.databaseInfo);return(function(o,a,c,d){return new Eq(o,a,c,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,a,c){return new Sq(r,s,o,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>sI(this.syncEngine,t,0)),(function(){return Jb.v()?new Jb:new pq})())}createSyncEngine(e,t){return(function(s,o,a,c,d,h,m){const y=new $q(s,o,a,c,d,h);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ge(t);ke(Ka,"RemoteStore shutting down."),r.Ea.add(5),await kh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}P0.provider={build:()=>new P0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="FirestoreClient";class sK{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=hx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async a=>{ke(Po,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ke(Po,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Dx(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function r_(n,e){n.asyncQueue.verifyOperationInProgress(),ke(Po,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await I2(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function oI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await iK(n);ke(Po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>eI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>eI(e.remoteStore,s))),n._onlineComponents=e}async function iK(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ke(Po,"Using user provided OfflineComponentProvider");try{await r_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Pc("Error using user provided cache. Falling back to memory cache: "+t),await r_(n,new Em)}}else ke(Po,"Using default OfflineComponentProvider"),await r_(n,new rK(void 0));return n._offlineComponents}async function Q2(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ke(Po,"Using user provided OnlineComponentProvider"),await oI(n,n._uninitializedComponentsProvider._online)):(ke(Po,"Using default OnlineComponentProvider"),await oI(n,new P0))),n._onlineComponents}function oK(n){return Q2(n).then((e=>e.syncEngine))}async function Y2(n){const e=await Q2(n),t=e.eventManager;return t.onListen=Hq.bind(null,e.syncEngine),t.onUnlisten=Kq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Gq.bind(null,e.syncEngine),t}function aK(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((async()=>(function(o,a,c,d,h){const m=new G2({next:v=>{m.Nu(),a.enqueueAndForget((()=>V2(o,y)));const E=v.docs.has(c);!E&&v.fromCache?h.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&d&&d.source==="server"?h.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new F2(vx(c.path),m,{includeMetadataChanges:!0,qa:!0});return O2(o,y)})(await Y2(n),n.asyncQueue,e,t,r))),r.promise}function lK(n,e,t={}){const r=new di;return n.asyncQueue.enqueueAndForget((async()=>(function(o,a,c,d,h){const m=new G2({next:v=>{m.Nu(),a.enqueueAndForget((()=>V2(o,y))),v.fromCache&&d.source==="server"?h.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),y=new F2(c,m,{includeMetadataChanges:!0,qa:!0});return O2(o,y)})(await Y2(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="firestore.googleapis.com",lI=!0;class cI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J2,this.ssl=lI}else this.host=e.host,this.ssl=e.ssl??lI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UW)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eg{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new hH;switch(r.type){case"firstParty":return new gH(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=aI.get(t);r&&(ke("ComponentProvider","Removing Datastore"),aI.delete(t),r.terminate())})(this),Promise.resolve()}}function cK(n,e,t,r={}){n=Us(n,Eg);const s=Uo(e),o=n._getSettings(),a={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Jw(`https://${c}`),Zw("Firestore",!0)),o.host!==J2&&o.host!==c&&Pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:c,ssl:s,emulatorOptions:r};if(!So(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=jn.MOCK_USER;else{h=BP(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new jn(y)}n._authCredentials=new fH(new OR(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ch(t,Kt._jsonSchema))return new Kt(e,r||null,new Ve(Ct.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:en("string",Kt._jsonSchemaVersion),referencePath:en("string")};class go extends Ho{constructor(e,t,r){super(e,t,vx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Ve(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function R0(n,e,...t){if(n=xt(n),VR("collection","path",e),n instanceof Eg){const r=Ct.fromString(e,...t);return Eb(r),new go(n,null,r)}{if(!(n instanceof Kt||n instanceof go))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return Eb(r),new go(n.firestore,null,r)}}function On(n,e,...t){if(n=xt(n),arguments.length===1&&(e=hx.newId()),VR("doc","path",e),n instanceof Eg){const r=Ct.fromString(e,...t);return xb(r),new Kt(n,null,new Ve(r))}{if(!(n instanceof Kt||n instanceof go))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ct.fromString(e,...t));return xb(r),new Kt(n.firestore,n instanceof go?n.converter:null,new Ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="AsyncQueue";class dI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A2(this,"async_queue_retry"),this._c=()=>{const r=n_();r&&ke(uI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=n_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=n_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nu(e))throw e;ke(uI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wi("INTERNAL UNHANDLED ERROR: ",hI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Rx.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&$e(47125,{Pc:hI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class iu extends Eg{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new dI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dI(e),this._firestoreClient=void 0,await e}}}function uK(n,e){const t=typeof n=="object"?n:nx(),r=typeof n=="string"?n:pm,s=og(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=FP("firestore");o&&cK(s,...o)}return s}function Ox(n){if(n._terminated)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||dK(n),n._firestoreClient}function dK(n){const e=n._freezeSettings(),t=(function(s,o,a,c){return new MH(s,o,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,X2(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new sK(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(kn.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rr(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ch(e,Rr._jsonSchema))return Rr.fromBase64String(e.bytes)}}Rr._jsonSchemaVersion="firestore/bytes/1.0",Rr._jsonSchema={type:en("string",Rr._jsonSchemaVersion),bytes:en("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(e){if(Ch(e,Os._jsonSchema))return new Os(e.latitude,e.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:en("string",Os._jsonSchemaVersion),latitude:en("number"),longitude:en("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ch(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vs(e.vectorValues);throw new be(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:en("string",Vs._jsonSchemaVersion),vectorValues:en("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK=/^__.*__$/;class fK{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $o(e,this.data,this.fieldMask,t,this.fieldTransforms):new bh(e,this.data,t,this.fieldTransforms)}}class Z2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:n})}}class Vx{constructor(e,t,r,s,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eD(this.Ac)&&hK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pK{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_g(e)}Cc(e,t,r,s=!1){return new Vx({Ac:e,methodName:t,Dc:r,path:In.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fx(n){const e=n._freezeSettings(),t=_g(n._databaseId);return new pK(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mK(n,e,t,r,s,o={}){const a=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);zx("Data must be an object, but it was:",a,r);const c=tD(r,a);let d,h;if(o.merge)d=new vr(a.fieldMask),h=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const v=D0(e,y,t);if(!a.contains(v))throw new be(ae.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);rD(m,v)||m.push(v)}d=new vr(m),h=a.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,h=a.fieldTransforms;return new fK(new sr(c),d,h)}class Cg extends Sg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cg}}class Ux extends Sg{_toFieldTransform(e){return new oW(e.path,new Zd)}isEqual(e){return e instanceof Ux}}function gK(n,e,t,r){const s=n.Cc(1,e,t);zx("Data must be an object, but it was:",s,r);const o=[],a=sr.empty();Bo(r,((d,h)=>{const m=Bx(e,d,t);h=xt(h);const y=s.yc(m);if(h instanceof Cg)o.push(m);else{const v=Nh(h,y);v!=null&&(o.push(m),a.set(m,v))}}));const c=new vr(o);return new Z2(a,c,s.fieldTransforms)}function yK(n,e,t,r,s,o){const a=n.Cc(1,e,t),c=[D0(e,r,t)],d=[s];if(o.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(D0(e,o[v])),d.push(o[v+1]);const h=[],m=sr.empty();for(let v=c.length-1;v>=0;--v)if(!rD(h,c[v])){const E=c[v];let b=d[v];b=xt(b);const C=a.yc(E);if(b instanceof Cg)h.push(E);else{const I=Nh(b,C);I!=null&&(h.push(E),m.set(E,I))}}const y=new vr(h);return new Z2(m,y,a.fieldTransforms)}function vK(n,e,t,r=!1){return Nh(t,n.Cc(r?4:3,e))}function Nh(n,e){if(nD(n=xt(n)))return zx("Unsupported field value:",e,n),tD(n,e);if(n instanceof Sg)return(function(r,s){if(!eD(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let a=0;for(const c of r){let d=Nh(c,s.wc(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rW(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=kt.fromDate(r);return{timestampValue:_m(s.serializer,o)}}if(r instanceof kt){const o=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_m(s.serializer,o)}}if(r instanceof Os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:v2(s.serializer,r._byteString)};if(r instanceof Kt){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vs)return(function(a,c){return{mapValue:{fields:{[KR]:{stringValue:GR},[mm]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return _x(c.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${ug(r)}`)})(n,e)}function tD(n,e){const t={};return zR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,((r,s)=>{const o=Nh(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function nD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof Os||n instanceof Rr||n instanceof Kt||n instanceof Sg||n instanceof Vs)}function zx(n,e,t){if(!nD(t)||!FR(t)){const r=ug(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function D0(n,e,t){if((e=xt(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return Bx(n,e);throw Tm("Field path arguments must be of type string or ",n,!1,void 0,t)}const _K=new RegExp("[~\\*/\\[\\]]");function Bx(n,e,t){if(e.search(_K)>=0)throw Tm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tg(...e.split("."))._internalPath}catch{throw Tm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tm(n,e,t,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${s}`),d+=")"),new be(ae.INVALID_ARGUMENT,c+n+d)}function rD(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wK extends sD{data(){return super.data()}}function bg(n,e){return typeof e=="string"?Bx(n,e):e instanceof Tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class Hx extends $x{}function M0(n,e,...t){let r=[];e instanceof $x&&r.push(e),r=r.concat(t),(function(o){const a=o.filter((d=>d instanceof Wx)).length,c=o.filter((d=>d instanceof Ig)).length;if(a>1||a>0&&c>0)throw new be(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Ig extends Hx{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ig(e,t,r)}_apply(e){const t=this._parse(e);return iD(e._query,t),new Ho(e.firestore,e.converter,E0(e._query,t))}_parse(e){const t=Fx(e.firestore);return(function(o,a,c,d,h,m,y){let v;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){mI(y,m);const b=[];for(const C of y)b.push(pI(d,o,C));v={arrayValue:{values:b}}}else v=pI(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||mI(y,m),v=vK(c,a,y,m==="in"||m==="not-in");return Zt.create(h,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function j0(n,e,t){const r=e,s=bg("where",n);return Ig._create(s,r,t)}class Wx extends $x{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wx(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ds.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let a=s;const c=o.getFlattenedFilters();for(const d of c)iD(a,d),a=E0(a,d)})(e._query,t),new Ho(e.firestore,e.converter,E0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qx extends Hx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qx(e,t)}_apply(e){const t=(function(s,o,a){if(s.startAt!==null)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jd(o,a)})(e._query,this._field,this._direction);return new Ho(e.firestore,e.converter,(function(s,o){const a=s.explicitOrderBy.concat([o]);return new ru(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function fI(n,e="asc"){const t=e,r=bg("orderBy",n);return qx._create(r,t)}class Kx extends Hx{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Kx(e,t,r)}_apply(e){return new Ho(e.firestore,e.converter,ym(e._query,this._limit,this._limitType))}}function EK(n){return TH("limit",n),Kx._create("limit",n,"F")}function pI(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n2(e)&&t.indexOf("/")!==-1)throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ct.fromString(t));if(!Ve.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nb(n,new Ve(r))}if(t instanceof Kt)return Nb(n,t._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(t)}.`)}function mI(n,e){if(!Array.isArray(n)||n.length===0)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iD(n,e){const t=(function(s,o){for(const a of s)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TK{convertValue(e,t="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bo(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[mm].arrayValue?.values?.map((r=>qt(r.doubleValue)));return new Vs(t)}convertGeoPoint(e){return new Os(qt(e.latitude),qt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qd(e));default:return null}}convertTimestamp(e){const t=Io(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ct.fromString(e);mt(S2(r),9688,{name:e});const s=new Yd(r.get(1),r.get(3)),o=new Ve(r.popFirst(5));return s.isEqual(t)||wi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oa extends sD{constructor(e,t,r,s,o,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Up(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oa._jsonSchema={type:en("string",Oa._jsonSchemaVersion),bundleSource:en("string","DocumentSnapshot"),bundleName:en("string"),bundle:en("string")};class Up extends Oa{data(e={}){return super.data(e)}}class xc{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new vd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Up(this._firestore,this._userDataWriter,r.key,r,new vd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const d=new Up(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const d=new Up(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vd(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:CK(c.type),doc:d,oldIndex:h,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n){n=Us(n,Kt);const e=Us(n.firestore,iu);return aK(Ox(e),n._key).then((t=>IK(e,n,t)))}xc._jsonSchemaVersion="firestore/querySnapshot/1.0",xc._jsonSchema={type:en("string",xc._jsonSchemaVersion),bundleSource:en("string","QuerySnapshot"),bundleName:en("string"),bundle:en("string")};class oD extends TK{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function L0(n){n=Us(n,Ho);const e=Us(n.firestore,iu),t=Ox(e),r=new oD(e);return xK(n._query),lK(t,n._query).then((s=>new xc(e,r,n,s)))}function Sm(n,e,t){n=Us(n,Kt);const r=Us(n.firestore,iu),s=SK(n.converter,e,t);return Gx(r,[mK(Fx(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,is.none())])}function Va(n,e,t,...r){n=Us(n,Kt);const s=Us(n.firestore,iu),o=Fx(s);let a;return a=typeof(e=xt(e))=="string"||e instanceof Tg?yK(o,"updateDoc",n._key,e,t,r):gK(o,"updateDoc",n._key,e),Gx(s,[a.toMutation(n._key,is.exists(!0))])}function bK(n){return Gx(Us(n.firestore,iu),[new wx(n._key,is.none())])}function Gx(n,e){return(function(r,s){const o=new di;return r.asyncQueue.enqueueAndForget((async()=>Qq(await oK(r),s,o))),o.promise})(Ox(n),e)}function IK(n,e,t){const r=t.docs.get(e._key),s=new oD(n);return new Oa(n,s,e._key,r,new vd(t.hasPendingWrites,t.fromCache),e.converter)}function Dr(){return new Ux("serverTimestamp")}(function(e,t=!0){(function(s){eu=s})(Ja),$a(new Co("firestore",((r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new iu(new pH(r.getProvider("auth-internal")),new yH(a,r.getProvider("app-check-internal")),(function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yd(h.options.projectId,m)})(a,s),a);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Rs(yb,vb,e),Rs(yb,vb,"esm2020")})();var gI={};const yI="@firebase/database",vI="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aD="";function kK(n){aD=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),cn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Wd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return $s(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new AK(e)}}catch{}return new NK},Aa=lD("localStorage"),PK=lD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new ig("@firebase/database"),RK=(function(){let n=1;return function(){return n++}})(),cD=function(n){const e=VB(n),t=new MB;t.update(e);const r=t.digest();return Xw.encodeByteArray(r)},Ph=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ph.apply(null,r):typeof r=="object"?e+=cn(r):e+=r,e+=" "}return e};let Nd=null,_I=!0;const DK=function(n,e){Ee(!0,"Can't turn on custom loggers persistently."),Ec.logLevel=nt.VERBOSE,Nd=Ec.log.bind(Ec)},_n=function(...n){if(_I===!0&&(_I=!1,Nd===null&&PK.get("logging_enabled")===!0&&DK()),Nd){const e=Ph.apply(null,n);Nd(e)}},Rh=function(n){return function(...e){_n(n,...e)}},O0=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ph(...n);Ec.error(e)},Ei=function(...n){const e=`FIREBASE FATAL ERROR: ${Ph(...n)}`;throw Ec.error(e),new Error(e)},Kn=function(...n){const e="FIREBASE WARNING: "+Ph(...n);Ec.warn(e)},MK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kg=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jK=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Oc="[MIN_NAME]",Ga="[MAX_NAME]",nl=function(n,e){if(n===e)return 0;if(n===Oc||e===Ga)return-1;if(e===Oc||n===Ga)return 1;{const t=wI(n),r=wI(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},LK=function(n,e){return n===e?0:n<e?-1:1},id=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+cn(e))},Qx=function(n){if(typeof n!="object"||n===null)return cn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=cn(e[r]),t+=":",t+=Qx(n[e[r]]);return t+="}",t},uD=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dD=function(n){Ee(!kg(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,o,a,c,d;n===0?(o=0,a=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=c+r,a=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,a=Math.round(n/Math.pow(2,1-r-t))));const h=[];for(d=t;d;d-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(d=e;d;d-=1)h.push(o%2?1:0),o=Math.floor(o/2);h.push(s?1:0),h.reverse();const m=h.join("");let y="";for(d=0;d<64;d+=8){let v=parseInt(m.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},OK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function FK(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}const UK=new RegExp("^-?(0*)\\d{1,10}$"),zK=-2147483648,BK=2147483647,wI=function(n){if(UK.test(n)){const e=Number(n);if(e>=zK&&e<=BK)return e}return null},ou=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Kn("Exception was thrown by user callback.",t),e},Math.floor(0))}},$K=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pd=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(_n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(e)}}class zp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="5",hD="v",fD="s",pD="r",mD="f",gD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yD="ls",vD="p",V0="ac",_D="websocket",wD="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,t,r,s,o=!1,a="",c=!1,d=!1,h=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=d,this.emulatorOptions=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Aa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Aa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function qK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function ED(n,e,t){Ee(typeof e=="string","typeof type must == string"),Ee(typeof t=="object","typeof params must == object");let r;if(e===_D)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===wD)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qK(n)&&(t.ns=n.namespace);const s=[];return xn(t,(o,a)=>{s.push(o+"="+a)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(){this.counters_={}}incrementCounter(e,t=1){$s(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return fB(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={},i_={};function Xx(n){const e=n.toString();return s_[e]||(s_[e]=new KK),s_[e]}function GK(n,e){const t=n.toString();return i_[t]||(i_[t]=e()),i_[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ou(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="start",YK="close",XK="pLPCommand",JK="pRTLPCB",TD="id",SD="pw",CD="ser",ZK="cb",eG="seg",tG="ts",nG="d",rG="dframe",bD=1870,ID=30,sG=bD-ID,iG=25e3,oG=3e4;class cc{constructor(e,t,r,s,o,a,c){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.transportSessionId=a,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rh(e),this.stats_=Xx(t),this.urlFn=d=>(this.appCheckToken&&(d[V0]=this.appCheckToken),ED(t,wD,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new QK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(oG)),jK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jx((...o)=>{const[a,c,d,h,m]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===xI)this.id=c,this.password=d;else if(a===YK)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[xI]="t",r[CD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[ZK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hD]=Yx,this.transportSessionId&&(r[fD]=this.transportSessionId),this.lastSessionId&&(r[yD]=this.lastSessionId),this.applicationId&&(r[vD]=this.applicationId),this.appCheckToken&&(r[V0]=this.appCheckToken),typeof location<"u"&&location.hostname&&gD.test(location.hostname)&&(r[pD]=mD);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cc.forceAllow_=!0}static forceDisallow(){cc.forceDisallow_=!0}static isAvailable(){return cc.forceAllow_?!0:!cc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!OK()&&!VK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=LP(t),s=uD(r,sG);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[rG]="t",r[TD]=e,r[SD]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=cn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Jx{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RK(),window[XK+this.uniqueCallbackIdentifier]=e,window[JK+this.uniqueCallbackIdentifier]=t,this.myIFrame=Jx.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(c){_n("frame writing exception"),c.stack&&_n(c.stack),_n(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_n("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[TD]=this.myID,e[SD]=this.myPW,e[CD]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ID+r.length<=bD;){const a=this.pendingSegs.shift();r=r+"&"+eG+s+"="+a.seg+"&"+tG+s+"="+a.ts+"&"+nG+s+"="+a.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(iG)),o=()=>{clearTimeout(s),r()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{_n("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=16384,lG=45e3;let Cm=null;typeof MozWebSocket<"u"?Cm=MozWebSocket:typeof WebSocket<"u"&&(Cm=WebSocket);class ns{constructor(e,t,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rh(this.connId),this.stats_=Xx(t),this.connURL=ns.connectionURL_(t,a,c,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,o){const a={};return a[hD]=Yx,typeof location<"u"&&location.hostname&&gD.test(location.hostname)&&(a[pD]=mD),t&&(a[fD]=t),r&&(a[yD]=r),s&&(a[V0]=s),o&&(a[vD]=o),ED(e,_D,a)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Aa.set("previous_websocket_failure",!0);try{let r;CB(),this.mySock=new Cm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ns.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Cm!==null&&!ns.forceDisallow_}static previouslyFailed(){return Aa.isInMemoryStorage||Aa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Aa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Wd(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=cn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=uD(t,aG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lG))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ns.responsesRequiredToBeHealthy=2;ns.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{static get ALL_TRANSPORTS(){return[cc,ns]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ns&&ns.isAvailable();let r=t&&!ns.previouslyFailed();if(e.webSocketOnly&&(t||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ns];else{const s=this.transports_=[];for(const o of nh.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);nh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}nh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG=6e4,uG=5e3,dG=10*1024,hG=100*1024,o_="t",EI="d",fG="s",TI="r",pG="e",SI="o",CI="a",bI="n",II="p",mG="h";class gG{constructor(e,t,r,s,o,a,c,d,h,m){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=a,this.onReady_=c,this.onDisconnect_=d,this.onKill_=h,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rh("c:"+this.id+":"),this.transportManager_=new nh(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Pd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(o_ in e){const t=e[o_];t===CI?this.upgradeIfSecondaryHealthy_():t===TI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===SI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=id("t",e),r=id("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:II,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:CI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=id("t",e),r=id("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=id(o_,e);if(EI in e){const r=e[EI];if(t===mG){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===bI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===fG?this.onConnectionShutdown_(r):t===TI?this.onReset_(r):t===pG?O0("Server Error: "+r):t===SI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Yx!==r&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Pd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(cG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:II,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Aa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!r||r===s[o].context)){s.splice(o,1);return}}validateEventType_(e){Ee(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends AD{static getInstance(){return new bm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ex()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=32,AI=768;class yt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ft(){return new yt("")}function Ye(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ro(n){return n.pieces_.length-n.pieceNum_}function _t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new yt(n.pieces_,e)}function Zx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function yG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function rh(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ND(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new yt(e,0)}function jt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof yt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new yt(t,0)}function Ze(n){return n.pieceNum_>=n.pieces_.length}function qn(n,e){const t=Ye(n),r=Ye(e);if(t===null)return e;if(t===r)return qn(_t(n),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vG(n,e){const t=rh(n,0),r=rh(e,0);for(let s=0;s<t.length&&s<r.length;s++){const o=nl(t[s],r[s]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function eE(n,e){if(Ro(n)!==Ro(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Mr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ro(n)>Ro(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _G{constructor(e,t){this.errorPrefix_=t,this.parts_=rh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=sg(this.parts_[r]);PD(this)}}function wG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=sg(e),PD(n)}function xG(n){const e=n.parts_.pop();n.byteLength_-=sg(e),n.parts_.length>0&&(n.byteLength_-=1)}function PD(n){if(n.byteLength_>AI)throw new Error(n.errorPrefix_+"has a key path longer than "+AI+" bytes ("+n.byteLength_+").");if(n.parts_.length>kI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kI+") or object contains a cycle "+Ta(n))}function Ta(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE extends AD{static getInstance(){return new tE}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=1e3,EG=300*1e3,NI=30*1e3,TG=1.3,SG=3e4,CG="server_kill",PI=3;class hi extends kD{constructor(e,t,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=hi.nextPersistentConnectionId_++,this.log_=Rh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=od,this.maxReconnectDelay_=EG,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&bm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(cn(o)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new Cs,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const c=a.d;a.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,r,s){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const c={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r},a="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{const d=c.d,h=c.s;hi.warnOnListenWarnings_(d,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(h,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&$s(e,"w")){const r=kc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||DB(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=NI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=RB(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,o){this.initConnection_();const a={p:t,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+cn(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):O0("Unrecognized action received from server: "+cn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=od,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=od,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SG&&(this.reconnectDelay_=od),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TG)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+hi.nextConnectionId_++,o=this.lastSessionId;let a=!1,c=null;const d=function(){c?c.close():(a=!0,r())},h=function(y){Ee(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)};this.realtime_={close:d,sendRequest:h};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?_n("getToken() completed but was canceled"):(_n("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,c=new gG(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,E=>{Kn(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(CG)},o))}catch(y){this.log_("Failed to get token: "+y),a||(this.repoInfo_.nodeAdmin&&Kn(y),d())}}}interrupt(e){_n("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_n("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sm(this.interruptReasons_)&&(this.reconnectDelay_=od,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(o=>Qx(o)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new yt(e).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){_n("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=PI&&(this.reconnectDelay_=NI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_n("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=PI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+aD.replace(/\./g,"-")]=1,ex()?e["framework.cordova"]=1:$P()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=bm.getInstance().currentlyOnline();return sm(this.interruptReasons_)&&e}}hi.nextPersistentConnectionId_=0;hi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new et(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new et(Oc,e),s=new et(Oc,t);return this.compare(r,s)!==0}minPost(){return et.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp;class RD extends Ag{static get __EMPTY_NODE(){return vp}static set __EMPTY_NODE(e){vp=e}compare(e,t){return nl(e.name,t.name)}isDefinedOn(e){throw Xc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return et.MIN}maxPost(){return new et(Ga,vp)}makePost(e,t){return Ee(typeof e=="string","KeyIndex indexValue must always be a string."),new et(e,vp)}toString(){return".key"}}const Tc=new RD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,r,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=t?r(e.key,t):1,s&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class vn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??vn.RED,this.left=s??or.EMPTY_NODE,this.right=o??or.EMPTY_NODE}copy(e,t,r,s,o){return new vn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return or.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return or.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}vn.RED=!0;vn.BLACK=!1;class bG{copy(e,t,r,s,o){return this}insert(e,t,r){return new vn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class or{constructor(e,t=or.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new or(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(e){return new or(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _p(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _p(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _p(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _p(this.root_,null,this.comparator_,!0,e)}}or.EMPTY_NODE=new bG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IG(n,e){return nl(n.name,e.name)}function nE(n,e){return nl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0;function kG(n){F0=n}const DD=function(n){return typeof n=="number"?"number:"+dD(n):"string:"+n},MD=function(n){if(n.isLeafNode()){const e=n.val();Ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$s(e,".sv"),"Priority must be a string or number.")}else Ee(n===F0||n.isEmpty(),"priority of unexpected type.");Ee(n===F0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RI;class gn{static set __childrenNodeConstructor(e){RI=e}static get __childrenNodeConstructor(){return RI}constructor(e,t=gn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ze(e)?this:Ye(e)===".priority"?this.priorityNode_:gn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:gn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=Ye(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(Ee(r!==".priority"||Ro(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,gn.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DD(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=dD(this.value_):e+=this.value_,this.lazyHash_=cD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gn.__childrenNodeConstructor?-1:(Ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=gn.VALUE_TYPE_ORDER.indexOf(t),o=gn.VALUE_TYPE_ORDER.indexOf(r);return Ee(s>=0,"Unknown leaf type: "+t),Ee(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}gn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD,LD;function AG(n){jD=n}function NG(n){LD=n}class PG extends Ag{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),o=r.compareTo(s);return o===0?nl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return et.MIN}maxPost(){return new et(Ga,new gn("[PRIORITY-POST]",LD))}makePost(e,t){const r=jD(e);return new et(t,new gn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Lt=new PG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=Math.log(2);class DG{constructor(e){const t=o=>parseInt(Math.log(o)/RG,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Im=function(n,e,t,r){n.sort(e);const s=function(d,h){const m=h-d;let y,v;if(m===0)return null;if(m===1)return y=n[d],v=t?t(y):y,new vn(v,y.node,vn.BLACK,null,null);{const E=parseInt(m/2,10)+d,b=s(d,E),C=s(E+1,h);return y=n[E],v=t?t(y):y,new vn(v,y.node,vn.BLACK,b,C)}},o=function(d){let h=null,m=null,y=n.length;const v=function(b,C){const I=y-b,k=y;y-=b;const R=s(I+1,k),M=n[I],F=t?t(M):M;E(new vn(F,M.node,C,null,R))},E=function(b){h?(h.left=b,h=b):(m=b,h=b)};for(let b=0;b<d.count;++b){const C=d.nextBitIsOne(),I=Math.pow(2,d.count-(b+1));C?v(I,vn.BLACK):(v(I,vn.BLACK),v(I,vn.RED))}return m},a=new DG(n.length),c=o(a);return new or(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a_;const Xl={};class ci{static get Default(){return Ee(Xl&&Lt,"ChildrenNode.ts has not been loaded"),a_=a_||new ci({".priority":Xl},{".priority":Lt}),a_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=kc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof or?t:null}hasIndex(e){return $s(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==Tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const o=t.getIterator(et.Wrap);let a=o.getNext();for(;a;)s=s||e.isDefinedOn(a.node),r.push(a),a=o.getNext();let c;s?c=Im(r,e.getCompare()):c=Xl;const d=e.toString(),h={...this.indexSet_};h[d]=e;const m={...this.indexes_};return m[d]=c,new ci(m,h)}addToIndexes(e,t){const r=im(this.indexes_,(s,o)=>{const a=kc(this.indexSet_,o);if(Ee(a,"Missing index implementation for "+o),s===Xl)if(a.isDefinedOn(e.node)){const c=[],d=t.getIterator(et.Wrap);let h=d.getNext();for(;h;)h.name!==e.name&&c.push(h),h=d.getNext();return c.push(e),Im(c,a.getCompare())}else return Xl;else{const c=t.get(e.name);let d=s;return c&&(d=d.remove(new et(e.name,c))),d.insert(e,e.node)}});return new ci(r,this.indexSet_)}removeFromIndexes(e,t){const r=im(this.indexes_,s=>{if(s===Xl)return s;{const o=t.get(e.name);return o?s.remove(new et(e.name,o)):s}});return new ci(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad;class Be{static get EMPTY_NODE(){return ad||(ad=new Be(new or(nE),null,ci.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&MD(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ad}updatePriority(e){return this.children_.isEmpty()?this:new Be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ad:t}}getChild(e){const t=Ye(e);return t===null?this:this.getImmediateChild(t).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Ee(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new et(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?ad:this.priorityNode_;return new Be(s,a,o)}}updateChild(e,t){const r=Ye(e);if(r===null)return t;{Ee(Ye(e)!==".priority"||Ro(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(_t(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(Lt,(a,c)=>{t[a]=c.val(e),r++,o&&Be.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){const a=[];for(const c in t)a[c]=t[c];return a}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+DD(this.getPriority().val())+":"),this.forEachChild(Lt,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":cD(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new et(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new et(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new et(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,et.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,et.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Dh?-1:0}withIndex(e){if(e===Tc||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Tc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Lt),s=t.getIterator(Lt);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Tc?null:this.indexMap_.get(e.toString())}}Be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MG extends Be{constructor(){super(new or(nE),Be.EMPTY_NODE,ci.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Be.EMPTY_NODE}isEmpty(){return!1}}const Dh=new MG;Object.defineProperties(et,{MIN:{value:new et(Oc,Be.EMPTY_NODE)},MAX:{value:new et(Ga,Dh)}});RD.__EMPTY_NODE=Be.EMPTY_NODE;gn.__childrenNodeConstructor=Be;kG(Dh);NG(Dh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG=!0;function Bt(n,e=null){if(n===null)return Be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new gn(t,Bt(e))}if(!(n instanceof Array)&&jG){const t=[];let r=!1;if(xn(n,(a,c)=>{if(a.substring(0,1)!=="."){const d=Bt(c);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),t.push(new et(a,d)))}}),t.length===0)return Be.EMPTY_NODE;const o=Im(t,IG,a=>a.name,nE);if(r){const a=Im(t,Lt.getCompare());return new Be(o,Bt(e),new ci({".priority":a},{".priority":Lt}))}else return new Be(o,Bt(e),ci.Default)}else{let t=Be.EMPTY_NODE;return xn(n,(r,s)=>{if($s(n,r)&&r.substring(0,1)!=="."){const o=Bt(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Bt(e))}}AG(Bt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG extends Ag{constructor(e){super(),this.indexPath_=e,Ee(!Ze(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),o=r.compareTo(s);return o===0?nl(e.name,t.name):o}makePost(e,t){const r=Bt(e),s=Be.EMPTY_NODE.updateChild(this.indexPath_,r);return new et(t,s)}maxPost(){const e=Be.EMPTY_NODE.updateChild(this.indexPath_,Dh);return new et(Ga,e)}toString(){return rh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG extends Ag{compare(e,t){const r=e.node.compareTo(t.node);return r===0?nl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return et.MIN}maxPost(){return et.MAX}makePost(e,t){const r=Bt(e);return new et(t,r)}toString(){return".value"}}const VG=new OG;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){return{type:"value",snapshotNode:n}}function Vc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ih(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function FG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.index_=e}updateChild(e,t,r,s,o,a){Ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(s).equals(r.getChild(s))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(t)?a.trackChildChange(sh(t,c)):Ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(Vc(t,r)):a.trackChildChange(ih(t,r,c))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Lt,(s,o)=>{t.hasChild(s)||r.trackChildChange(sh(s,o))}),t.isLeafNode()||t.forEachChild(Lt,(s,o)=>{if(e.hasChild(s)){const a=e.getImmediateChild(s);a.equals(o)||r.trackChildChange(ih(s,o,a))}else r.trackChildChange(Vc(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.indexedFilter_=new rE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=oh.getStartPost_(e),this.endPost_=oh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,s,o,a){return this.matches(new et(t,r))||(r=Be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,s,o,a)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Be.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(Be.EMPTY_NODE);const o=this;return t.forEachChild(Lt,(a,c)=>{o.matches(new et(a,c))||(s=s.updateImmediateChild(a,Be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new oh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,s,o,a){return this.rangedFilter_.matches(new et(t,r))||(r=Be.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,s,o,a):this.fullLimitUpdateChild_(e,t,r,o,a)}updateFullNode(e,t,r){let s;if(t.isLeafNode()||t.isEmpty())s=Be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=Be.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))s=s.updateImmediateChild(c.name,c.node),a++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(Be.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let a=0;for(;o.hasNext();){const c=o.getNext();a<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?a++:s=s.updateImmediateChild(c.name,Be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,s,o){let a;if(this.reverse_){const y=this.index_.getCompare();a=(v,E)=>y(E,v)}else a=this.index_.getCompare();const c=e;Ee(c.numChildren()===this.limit_,"");const d=new et(t,r),h=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),m=this.rangedFilter_.matches(d);if(c.hasChild(t)){const y=c.getImmediateChild(t);let v=s.getChildAfterChild(this.index_,h,this.reverse_);for(;v!=null&&(v.name===t||c.hasChild(v.name));)v=s.getChildAfterChild(this.index_,v,this.reverse_);const E=v==null?1:a(v,d);if(m&&!r.isEmpty()&&E>=0)return o?.trackChildChange(ih(t,r,y)),c.updateImmediateChild(t,r);{o?.trackChildChange(sh(t,y));const C=c.updateImmediateChild(t,Be.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o?.trackChildChange(Vc(v.name,v.node)),C.updateImmediateChild(v.name,v.node)):C}}else return r.isEmpty()?e:m&&a(h,d)>=0?(o!=null&&(o.trackChildChange(sh(h.name,h.node)),o.trackChildChange(Vc(t,r))),c.updateImmediateChild(t,r).updateImmediateChild(h.name,Be.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oc}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ga}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lt}copy(){const e=new sE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zG(n){return n.loadsAllData()?new rE(n.getIndex()):n.hasLimit()?new UG(n):new oh(n)}function DI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Lt?t="$priority":n.index_===VG?t="$value":n.index_===Tc?t="$key":(Ee(n.index_ instanceof LG,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=cn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=cn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+cn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=cn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+cn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function MI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Lt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends kD{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Rh("p:rest:"),this.listens_={}}listen(e,t,r,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const a=km.getListenId_(e,r),c={};this.listens_[a]=c;const d=DI(e._queryParams);this.restRequest_(o+".json",d,(h,m)=>{let y=m;if(h===404&&(y=null,h=null),h===null&&this.onDataUpdate_(o,y,!1,r),kc(this.listens_,a)===c){let v;h?h===401?v="permission_denied":v="rest_error:"+h:v="ok",s(v,null)}})}unlisten(e,t){const r=km.getListenId_(e,t);delete this.listens_[r]}get(e){const t=DI(e._queryParams),r=e._path.toString(),s=new Cs;return this.restRequest_(r+".json",t,(o,a)=>{let c=a;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(r,c,!1,null),s.resolve(c)):s.reject(new Error(c))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Jc(t);this.log_("Sending REST request for "+a);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+a+" received. status:",c.status,"response:",c.responseText);let d=null;if(c.status>=200&&c.status<300){try{d=Wd(c.responseText)}catch{Kn("Failed to parse JSON response for "+a+": "+c.responseText)}r(null,d)}else c.status!==401&&c.status!==404&&Kn("Got unsuccessful REST response for "+a+" Status: "+c.status),r(c.status);r=null}},c.open("GET",a,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(){this.rootNode_=Be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){return{value:null,children:new Map}}function au(n,e,t){if(Ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=Ye(e);n.children.has(r)||n.children.set(r,Am());const s=n.children.get(r);e=_t(e),au(s,e,t)}}function U0(n,e){if(Ze(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Lt,(r,s)=>{au(n,new yt(r),s)}),U0(n,e)}}else if(n.children.size>0){const t=Ye(e);return e=_t(e),n.children.has(t)&&U0(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function z0(n,e,t){n.value!==null?t(e,n.value):$G(n,(r,s)=>{const o=new yt(e.toString()+"/"+r);z0(s,o,t)})}function $G(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&xn(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=10*1e3,WG=30*1e3,qG=300*1e3;class KG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new HG(e);const r=jI+(WG-jI)*Math.random();Pd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xn(e,(s,o)=>{o>0&&$s(this.statsToReport_,s)&&(t[s]=o,r=!0)}),r&&this.server_.reportStats(t),Pd(this.reportStats_.bind(this),Math.floor(Math.random()*2*qG))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ss||(ss={}));function iE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function aE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ss.ACK_USER_WRITE,this.source=iE()}operationForChild(e){if(Ze(this.path)){if(this.affectedTree.value!=null)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new yt(e));return new Nm(ft(),t,this.revert)}}else return Ee(Ye(this.path)===e,"operationForChild called for unrelated child."),new Nm(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t){this.source=e,this.path=t,this.type=ss.LISTEN_COMPLETE}operationForChild(e){return Ze(this.path)?new ah(this.source,ft()):new ah(this.source,_t(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ss.OVERWRITE}operationForChild(e){return Ze(this.path)?new Qa(this.source,ft(),this.snap.getImmediateChild(e)):new Qa(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ss.MERGE}operationForChild(e){if(Ze(this.path)){const t=this.children.subtree(new yt(e));return t.isEmpty()?null:t.value?new Qa(this.source,ft(),t.value):new Fc(this.source,ft(),t)}else return Ee(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fc(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function QG(n,e,t,r){const s=[],o=[];return e.forEach(a=>{a.type==="child_changed"&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(FG(a.childName,a.snapshotNode))}),ld(n,s,"child_removed",e,r,t),ld(n,s,"child_added",e,r,t),ld(n,s,"child_moved",o,r,t),ld(n,s,"child_changed",e,r,t),ld(n,s,"value",e,r,t),s}function ld(n,e,t,r,s,o){const a=r.filter(c=>c.type===t);a.sort((c,d)=>XG(n,c,d)),a.forEach(c=>{const d=YG(n,c,o);s.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(d,n.query_))})})}function YG(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function XG(n,e,t){if(e.childName==null||t.childName==null)throw Xc("Should only compare child_ events.");const r=new et(e.childName,e.snapshotNode),s=new et(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n,e){return{eventCache:n,serverCache:e}}function Rd(n,e,t,r){return Ng(new Do(e,t,r),n.serverCache)}function VD(n,e,t,r){return Ng(n.eventCache,new Do(e,t,r))}function Pm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ya(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l_;const JG=()=>(l_||(l_=new or(LK)),l_);class St{static fromObject(e){let t=new St(null);return xn(e,(r,s)=>{t=t.set(new yt(r),s)}),t}constructor(e,t=JG()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ft(),value:this.value};if(Ze(e))return null;{const r=Ye(e),s=this.children.get(r);if(s!==null){const o=s.findRootMostMatchingPathAndValue(_t(e),t);return o!=null?{path:jt(new yt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ze(e))return this;{const t=Ye(e),r=this.children.get(t);return r!==null?r.subtree(_t(e)):new St(null)}}set(e,t){if(Ze(e))return new St(t,this.children);{const r=Ye(e),o=(this.children.get(r)||new St(null)).set(_t(e),t),a=this.children.insert(r,o);return new St(this.value,a)}}remove(e){if(Ze(e))return this.children.isEmpty()?new St(null):new St(null,this.children);{const t=Ye(e),r=this.children.get(t);if(r){const s=r.remove(_t(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new St(null):new St(this.value,o)}else return this}}get(e){if(Ze(e))return this.value;{const t=Ye(e),r=this.children.get(t);return r?r.get(_t(e)):null}}setTree(e,t){if(Ze(e))return t;{const r=Ye(e),o=(this.children.get(r)||new St(null)).setTree(_t(e),t);let a;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new St(this.value,a)}}fold(e){return this.fold_(ft(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,o)=>{r[s]=o.fold_(jt(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ft(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Ze(e))return null;{const o=Ye(e),a=this.children.get(o);return a?a.findOnPath_(_t(e),jt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ft(),t)}foreachOnPath_(e,t,r){if(Ze(e))return this;{this.value&&r(t,this.value);const s=Ye(e),o=this.children.get(s);return o?o.foreachOnPath_(_t(e),jt(t,s),r):new St(null)}}foreach(e){this.foreach_(ft(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(jt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.writeTree_=e}static empty(){return new os(new St(null))}}function Dd(n,e,t){if(Ze(e))return new os(new St(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let o=r.value;const a=qn(s,e);return o=o.updateChild(a,t),new os(n.writeTree_.set(s,o))}else{const s=new St(t),o=n.writeTree_.setTree(e,s);return new os(o)}}}function B0(n,e,t){let r=n;return xn(t,(s,o)=>{r=Dd(r,jt(e,s),o)}),r}function LI(n,e){if(Ze(e))return os.empty();{const t=n.writeTree_.setTree(e,new St(null));return new os(t)}}function $0(n,e){return rl(n,e)!=null}function rl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(qn(t.path,e)):null}function OI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Lt,(r,s)=>{e.push(new et(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new et(r,s.value))}),e}function yo(n,e){if(Ze(e))return n;{const t=rl(n,e);return t!=null?new os(new St(t)):new os(n.writeTree_.subtree(e))}}function H0(n){return n.writeTree_.isEmpty()}function Uc(n,e){return FD(ft(),n.writeTree_,e)}function FD(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(Ee(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=FD(jt(n,s),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(jt(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(n,e){return $D(e,n)}function ZG(n,e,t,r,s){Ee(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=Dd(n.visibleWrites,e,t)),n.lastWriteId=r}function eQ(n,e,t,r){Ee(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=B0(n.visibleWrites,e,t),n.lastWriteId=r}function tQ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function nQ(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);Ee(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,o=!1,a=n.allWrites.length-1;for(;s&&a>=0;){const c=n.allWrites[a];c.visible&&(a>=t&&rQ(c,r.path)?s=!1:Mr(r.path,c.path)&&(o=!0)),a--}if(s){if(o)return sQ(n),!0;if(r.snap)n.visibleWrites=LI(n.visibleWrites,r.path);else{const c=r.children;xn(c,d=>{n.visibleWrites=LI(n.visibleWrites,jt(r.path,d))})}return!0}else return!1}function rQ(n,e){if(n.snap)return Mr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Mr(jt(n.path,t),e))return!0;return!1}function sQ(n){n.visibleWrites=UD(n.allWrites,iQ,ft()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function iQ(n){return n.visible}function UD(n,e,t){let r=os.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const a=o.path;let c;if(o.snap)Mr(t,a)?(c=qn(t,a),r=Dd(r,c,o.snap)):Mr(a,t)&&(c=qn(a,t),r=Dd(r,ft(),o.snap.getChild(c)));else if(o.children){if(Mr(t,a))c=qn(t,a),r=B0(r,c,o.children);else if(Mr(a,t))if(c=qn(a,t),Ze(c))r=B0(r,ft(),o.children);else{const d=kc(o.children,Ye(c));if(d){const h=d.getChild(_t(c));r=Dd(r,ft(),h)}}}else throw Xc("WriteRecord should have .snap or .children")}}return r}function zD(n,e,t,r,s){if(!r&&!s){const o=rl(n.visibleWrites,e);if(o!=null)return o;{const a=yo(n.visibleWrites,e);if(H0(a))return t;if(t==null&&!$0(a,ft()))return null;{const c=t||Be.EMPTY_NODE;return Uc(a,c)}}}else{const o=yo(n.visibleWrites,e);if(!s&&H0(o))return t;if(!s&&t==null&&!$0(o,ft()))return null;{const a=function(h){return(h.visible||s)&&(!r||!~r.indexOf(h.writeId))&&(Mr(h.path,e)||Mr(e,h.path))},c=UD(n.allWrites,a,e),d=t||Be.EMPTY_NODE;return Uc(c,d)}}}function oQ(n,e,t){let r=Be.EMPTY_NODE;const s=rl(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Lt,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(t){const o=yo(n.visibleWrites,e);return t.forEachChild(Lt,(a,c)=>{const d=Uc(yo(o,new yt(a)),c);r=r.updateImmediateChild(a,d)}),OI(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const o=yo(n.visibleWrites,e);return OI(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function aQ(n,e,t,r,s){Ee(r||s,"Either existingEventSnap or existingServerSnap must exist");const o=jt(e,t);if($0(n.visibleWrites,o))return null;{const a=yo(n.visibleWrites,o);return H0(a)?s.getChild(t):Uc(a,s.getChild(t))}}function lQ(n,e,t,r){const s=jt(e,t),o=rl(n.visibleWrites,s);if(o!=null)return o;if(r.isCompleteForChild(t)){const a=yo(n.visibleWrites,s);return Uc(a,r.getNode().getImmediateChild(t))}else return null}function cQ(n,e){return rl(n.visibleWrites,e)}function uQ(n,e,t,r,s,o,a){let c;const d=yo(n.visibleWrites,e),h=rl(d,ft());if(h!=null)c=h;else if(t!=null)c=Uc(d,t);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){const m=[],y=a.getCompare(),v=o?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a);let E=v.getNext();for(;E&&m.length<s;)y(E,r)!==0&&m.push(E),E=v.getNext();return m}else return[]}function dQ(){return{visibleWrites:os.empty(),allWrites:[],lastWriteId:-1}}function Rm(n,e,t,r){return zD(n.writeTree,n.treePath,e,t,r)}function lE(n,e){return oQ(n.writeTree,n.treePath,e)}function VI(n,e,t,r){return aQ(n.writeTree,n.treePath,e,t,r)}function Dm(n,e){return cQ(n.writeTree,jt(n.treePath,e))}function hQ(n,e,t,r,s,o){return uQ(n.writeTree,n.treePath,e,t,r,s,o)}function cE(n,e,t){return lQ(n.writeTree,n.treePath,e,t)}function BD(n,e){return $D(jt(n.treePath,e),n.writeTree)}function $D(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ee(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,ih(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,sh(r,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Vc(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,ih(r,e.snapshotNode,s.oldSnap));else throw Xc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const HD=new pQ;class uE{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Do(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cE(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ya(this.viewCache_),o=hQ(this.writes_,s,t,1,r,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(n){return{filter:n}}function gQ(n,e){Ee(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ee(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function yQ(n,e,t,r,s){const o=new fQ;let a,c;if(t.type===ss.OVERWRITE){const h=t;h.source.fromUser?a=W0(n,e,h.path,h.snap,r,s,o):(Ee(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!Ze(h.path),a=Mm(n,e,h.path,h.snap,r,s,c,o))}else if(t.type===ss.MERGE){const h=t;h.source.fromUser?a=_Q(n,e,h.path,h.children,r,s,o):(Ee(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),a=q0(n,e,h.path,h.children,r,s,c,o))}else if(t.type===ss.ACK_USER_WRITE){const h=t;h.revert?a=EQ(n,e,h.path,r,s,o):a=wQ(n,e,h.path,h.affectedTree,r,s,o)}else if(t.type===ss.LISTEN_COMPLETE)a=xQ(n,e,t.path,r,o);else throw Xc("Unknown operation type: "+t.type);const d=o.getChanges();return vQ(e,a,d),{viewCache:a,changes:d}}function vQ(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Pm(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(OD(Pm(e)))}}function WD(n,e,t,r,s,o){const a=e.eventCache;if(Dm(r,t)!=null)return e;{let c,d;if(Ze(t))if(Ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=Ya(e),m=h instanceof Be?h:Be.EMPTY_NODE,y=lE(r,m);c=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const h=Rm(r,Ya(e));c=n.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{const h=Ye(t);if(h===".priority"){Ee(Ro(t)===1,"Can't have a priority with additional path components");const m=a.getNode();d=e.serverCache.getNode();const y=VI(r,t,m,d);y!=null?c=n.filter.updatePriority(m,y):c=a.getNode()}else{const m=_t(t);let y;if(a.isCompleteForChild(h)){d=e.serverCache.getNode();const v=VI(r,t,a.getNode(),d);v!=null?y=a.getNode().getImmediateChild(h).updateChild(m,v):y=a.getNode().getImmediateChild(h)}else y=cE(r,h,e.serverCache);y!=null?c=n.filter.updateChild(a.getNode(),h,y,m,s,o):c=a.getNode()}}return Rd(e,c,a.isFullyInitialized()||Ze(t),n.filter.filtersNodes())}}function Mm(n,e,t,r,s,o,a,c){const d=e.serverCache;let h;const m=a?n.filter:n.filter.getIndexedFilter();if(Ze(t))h=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){const E=d.getNode().updateChild(t,r);h=m.updateFullNode(d.getNode(),E,null)}else{const E=Ye(t);if(!d.isCompleteForPath(t)&&Ro(t)>1)return e;const b=_t(t),I=d.getNode().getImmediateChild(E).updateChild(b,r);E===".priority"?h=m.updatePriority(d.getNode(),I):h=m.updateChild(d.getNode(),E,I,b,HD,null)}const y=VD(e,h,d.isFullyInitialized()||Ze(t),m.filtersNodes()),v=new uE(s,y,o);return WD(n,y,t,s,v,c)}function W0(n,e,t,r,s,o,a){const c=e.eventCache;let d,h;const m=new uE(s,e,o);if(Ze(t))h=n.filter.updateFullNode(e.eventCache.getNode(),r,a),d=Rd(e,h,!0,n.filter.filtersNodes());else{const y=Ye(t);if(y===".priority")h=n.filter.updatePriority(e.eventCache.getNode(),r),d=Rd(e,h,c.isFullyInitialized(),c.isFiltered());else{const v=_t(t),E=c.getNode().getImmediateChild(y);let b;if(Ze(v))b=r;else{const C=m.getCompleteChild(y);C!=null?Zx(v)===".priority"&&C.getChild(ND(v)).isEmpty()?b=C:b=C.updateChild(v,r):b=Be.EMPTY_NODE}if(E.equals(b))d=e;else{const C=n.filter.updateChild(c.getNode(),y,b,v,m,a);d=Rd(e,C,c.isFullyInitialized(),n.filter.filtersNodes())}}}return d}function FI(n,e){return n.eventCache.isCompleteForChild(e)}function _Q(n,e,t,r,s,o,a){let c=e;return r.foreach((d,h)=>{const m=jt(t,d);FI(e,Ye(m))&&(c=W0(n,c,m,h,s,o,a))}),r.foreach((d,h)=>{const m=jt(t,d);FI(e,Ye(m))||(c=W0(n,c,m,h,s,o,a))}),c}function UI(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function q0(n,e,t,r,s,o,a,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,h;Ze(t)?h=r:h=new St(null).setTree(t,r);const m=e.serverCache.getNode();return h.children.inorderTraversal((y,v)=>{if(m.hasChild(y)){const E=e.serverCache.getNode().getImmediateChild(y),b=UI(n,E,v);d=Mm(n,d,new yt(y),b,s,o,a,c)}}),h.children.inorderTraversal((y,v)=>{const E=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!m.hasChild(y)&&!E){const b=e.serverCache.getNode().getImmediateChild(y),C=UI(n,b,v);d=Mm(n,d,new yt(y),C,s,o,a,c)}}),d}function wQ(n,e,t,r,s,o,a){if(Dm(s,t)!=null)return e;const c=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(Ze(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Mm(n,e,t,d.getNode().getChild(t),s,o,c,a);if(Ze(t)){let h=new St(null);return d.getNode().forEachChild(Tc,(m,y)=>{h=h.set(new yt(m),y)}),q0(n,e,t,h,s,o,c,a)}else return e}else{let h=new St(null);return r.foreach((m,y)=>{const v=jt(t,m);d.isCompleteForPath(v)&&(h=h.set(m,d.getNode().getChild(v)))}),q0(n,e,t,h,s,o,c,a)}}function xQ(n,e,t,r,s){const o=e.serverCache,a=VD(e,o.getNode(),o.isFullyInitialized()||Ze(t),o.isFiltered());return WD(n,a,t,r,HD,s)}function EQ(n,e,t,r,s,o){let a;if(Dm(r,t)!=null)return e;{const c=new uE(r,e,s),d=e.eventCache.getNode();let h;if(Ze(t)||Ye(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Rm(r,Ya(e));else{const y=e.serverCache.getNode();Ee(y instanceof Be,"serverChildren would be complete if leaf node"),m=lE(r,y)}m=m,h=n.filter.updateFullNode(d,m,o)}else{const m=Ye(t);let y=cE(r,m,e.serverCache);y==null&&e.serverCache.isCompleteForChild(m)&&(y=d.getImmediateChild(m)),y!=null?h=n.filter.updateChild(d,m,y,_t(t),c,o):e.eventCache.getNode().hasChild(m)?h=n.filter.updateChild(d,m,Be.EMPTY_NODE,_t(t),c,o):h=d,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Rm(r,Ya(e)),a.isLeafNode()&&(h=n.filter.updateFullNode(h,a,o)))}return a=e.serverCache.isFullyInitialized()||Dm(r,ft())!=null,Rd(e,h,a,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new rE(r.getIndex()),o=zG(r);this.processor_=mQ(o);const a=t.serverCache,c=t.eventCache,d=s.updateFullNode(Be.EMPTY_NODE,a.getNode(),null),h=o.updateFullNode(Be.EMPTY_NODE,c.getNode(),null),m=new Do(d,a.isFullyInitialized(),s.filtersNodes()),y=new Do(h,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ng(y,m),this.eventGenerator_=new GG(this.query_)}get query(){return this.query_}}function SQ(n){return n.viewCache_.serverCache.getNode()}function CQ(n){return Pm(n.viewCache_)}function bQ(n,e){const t=Ya(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ze(e)&&!t.getImmediateChild(Ye(e)).isEmpty())?t.getChild(e):null}function zI(n){return n.eventRegistrations_.length===0}function IQ(n,e){n.eventRegistrations_.push(e)}function BI(n,e,t){const r=[];if(t){Ee(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(t,s);a&&r.push(a)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const a=n.eventRegistrations_[o];if(!a.matches(e))s.push(a);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return r}function $I(n,e,t,r){e.type===ss.MERGE&&e.source.queryId!==null&&(Ee(Ya(n.viewCache_),"We should always have a full cache before handling merges"),Ee(Pm(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=yQ(n.processor_,s,e,t,r);return gQ(n.processor_,o.viewCache),Ee(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,qD(n,o.changes,o.viewCache.eventCache.getNode(),null)}function kQ(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Lt,(o,a)=>{r.push(Vc(o,a))}),t.isFullyInitialized()&&r.push(OD(t.getNode())),qD(n,r,t.getNode(),e)}function qD(n,e,t,r){const s=r?[r]:n.eventRegistrations_;return QG(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm;class KD{constructor(){this.views=new Map}}function AQ(n){Ee(!jm,"__referenceConstructor has already been defined"),jm=n}function NQ(){return Ee(jm,"Reference.ts has not been loaded"),jm}function PQ(n){return n.views.size===0}function dE(n,e,t,r){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return Ee(o!=null,"SyncTree gave us an op for an invalid query."),$I(o,e,t,r)}else{let o=[];for(const a of n.views.values())o=o.concat($I(a,e,t,r));return o}}function GD(n,e,t,r,s){const o=e._queryIdentifier,a=n.views.get(o);if(!a){let c=Rm(t,s?r:null),d=!1;c?d=!0:r instanceof Be?(c=lE(t,r),d=!1):(c=Be.EMPTY_NODE,d=!1);const h=Ng(new Do(c,d,!1),new Do(r,s,!1));return new TQ(e,h)}return a}function RQ(n,e,t,r,s,o){const a=GD(n,e,r,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),IQ(a,t),kQ(a,t)}function DQ(n,e,t,r){const s=e._queryIdentifier,o=[];let a=[];const c=Mo(n);if(s==="default")for(const[d,h]of n.views.entries())a=a.concat(BI(h,t,r)),zI(h)&&(n.views.delete(d),h.query._queryParams.loadsAllData()||o.push(h.query));else{const d=n.views.get(s);d&&(a=a.concat(BI(d,t,r)),zI(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||o.push(d.query)))}return c&&!Mo(n)&&o.push(new(NQ())(e._repo,e._path)),{removed:o,events:a}}function QD(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function vo(n,e){let t=null;for(const r of n.views.values())t=t||bQ(r,e);return t}function YD(n,e){if(e._queryParams.loadsAllData())return Rg(n);{const r=e._queryIdentifier;return n.views.get(r)}}function XD(n,e){return YD(n,e)!=null}function Mo(n){return Rg(n)!=null}function Rg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm;function MQ(n){Ee(!Lm,"__referenceConstructor has already been defined"),Lm=n}function jQ(){return Ee(Lm,"Reference.ts has not been loaded"),Lm}let LQ=1;class HI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new St(null),this.pendingWriteTree_=dQ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JD(n,e,t,r,s){return ZG(n.pendingWriteTree_,e,t,r,s),s?lu(n,new Qa(iE(),e,t)):[]}function OQ(n,e,t,r){eQ(n.pendingWriteTree_,e,t,r);const s=St.fromObject(t);return lu(n,new Fc(iE(),e,s))}function uo(n,e,t=!1){const r=tQ(n.pendingWriteTree_,e);if(nQ(n.pendingWriteTree_,e)){let o=new St(null);return r.snap!=null?o=o.set(ft(),!0):xn(r.children,a=>{o=o.set(new yt(a),!0)}),lu(n,new Nm(r.path,o,t))}else return[]}function Mh(n,e,t){return lu(n,new Qa(oE(),e,t))}function VQ(n,e,t){const r=St.fromObject(t);return lu(n,new Fc(oE(),e,r))}function FQ(n,e){return lu(n,new ah(oE(),e))}function UQ(n,e,t){const r=fE(n,t);if(r){const s=pE(r),o=s.path,a=s.queryId,c=qn(o,e),d=new ah(aE(a),c);return mE(n,o,d)}else return[]}function Om(n,e,t,r,s=!1){const o=e._path,a=n.syncPointTree_.get(o);let c=[];if(a&&(e._queryIdentifier==="default"||XD(a,e))){const d=DQ(a,e,t,r);PQ(a)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const h=d.removed;if(c=d.events,!s){const m=h.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=n.syncPointTree_.findOnPath(o,(v,E)=>Mo(E));if(m&&!y){const v=n.syncPointTree_.subtree(o);if(!v.isEmpty()){const E=$Q(v);for(let b=0;b<E.length;++b){const C=E[b],I=C.query,k=nM(n,C);n.listenProvider_.startListening(Md(I),lh(n,I),k.hashFn,k.onComplete)}}}!y&&h.length>0&&!r&&(m?n.listenProvider_.stopListening(Md(e),null):h.forEach(v=>{const E=n.queryToTagMap.get(Dg(v));n.listenProvider_.stopListening(Md(v),E)}))}HQ(n,h)}return c}function ZD(n,e,t,r){const s=fE(n,r);if(s!=null){const o=pE(s),a=o.path,c=o.queryId,d=qn(a,e),h=new Qa(aE(c),d,t);return mE(n,a,h)}else return[]}function zQ(n,e,t,r){const s=fE(n,r);if(s){const o=pE(s),a=o.path,c=o.queryId,d=qn(a,e),h=St.fromObject(t),m=new Fc(aE(c),d,h);return mE(n,a,m)}else return[]}function K0(n,e,t,r=!1){const s=e._path;let o=null,a=!1;n.syncPointTree_.foreachOnPath(s,(v,E)=>{const b=qn(v,s);o=o||vo(E,b),a=a||Mo(E)});let c=n.syncPointTree_.get(s);c?(a=a||Mo(c),o=o||vo(c,ft())):(c=new KD,n.syncPointTree_=n.syncPointTree_.set(s,c));let d;o!=null?d=!0:(d=!1,o=Be.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((E,b)=>{const C=vo(b,ft());C&&(o=o.updateImmediateChild(E,C))}));const h=XD(c,e);if(!h&&!e._queryParams.loadsAllData()){const v=Dg(e);Ee(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const E=WQ();n.queryToTagMap.set(v,E),n.tagToQueryMap.set(E,v)}const m=Pg(n.pendingWriteTree_,s);let y=RQ(c,e,t,m,o,d);if(!h&&!a&&!r){const v=YD(c,e);y=y.concat(qQ(n,e,v))}return y}function hE(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(a,c)=>{const d=qn(a,e),h=vo(c,d);if(h)return h});return zD(s,e,o,t,!0)}function BQ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(h,m)=>{const y=qn(h,t);r=r||vo(m,y)});let s=n.syncPointTree_.get(t);s?r=r||vo(s,ft()):(s=new KD,n.syncPointTree_=n.syncPointTree_.set(t,s));const o=r!=null,a=o?new Do(r,!0,!1):null,c=Pg(n.pendingWriteTree_,e._path),d=GD(s,e,c,o?a.getNode():Be.EMPTY_NODE,o);return CQ(d)}function lu(n,e){return eM(e,n.syncPointTree_,null,Pg(n.pendingWriteTree_,ft()))}function eM(n,e,t,r){if(Ze(n.path))return tM(n,e,t,r);{const s=e.get(ft());t==null&&s!=null&&(t=vo(s,ft()));let o=[];const a=Ye(n.path),c=n.operationForChild(a),d=e.children.get(a);if(d&&c){const h=t?t.getImmediateChild(a):null,m=BD(r,a);o=o.concat(eM(c,d,h,m))}return s&&(o=o.concat(dE(s,n,r,t))),o}}function tM(n,e,t,r){const s=e.get(ft());t==null&&s!=null&&(t=vo(s,ft()));let o=[];return e.children.inorderTraversal((a,c)=>{const d=t?t.getImmediateChild(a):null,h=BD(r,a),m=n.operationForChild(a);m&&(o=o.concat(tM(m,c,d,h)))}),s&&(o=o.concat(dE(s,n,r,t))),o}function nM(n,e){const t=e.query,r=lh(n,t);return{hashFn:()=>(SQ(e)||Be.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?UQ(n,t._path,r):FQ(n,t._path);{const o=FK(s,t);return Om(n,t,null,o)}}}}function lh(n,e){const t=Dg(e);return n.queryToTagMap.get(t)}function Dg(n){return n._path.toString()+"$"+n._queryIdentifier}function fE(n,e){return n.tagToQueryMap.get(e)}function pE(n){const e=n.indexOf("$");return Ee(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new yt(n.substr(0,e))}}function mE(n,e,t){const r=n.syncPointTree_.get(e);Ee(r,"Missing sync point for query tag that we're tracking");const s=Pg(n.pendingWriteTree_,e);return dE(r,t,s,null)}function $Q(n){return n.fold((e,t,r)=>{if(t&&Mo(t))return[Rg(t)];{let s=[];return t&&(s=QD(t)),xn(r,(o,a)=>{s=s.concat(a)}),s}})}function Md(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(jQ())(n._repo,n._path):n}function HQ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const s=Dg(r),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function WQ(){return LQ++}function qQ(n,e,t){const r=e._path,s=lh(n,e),o=nM(n,t),a=n.listenProvider_.startListening(Md(e),s,o.hashFn,o.onComplete),c=n.syncPointTree_.subtree(r);if(s)Ee(!Mo(c.value),"If we're adding a query, it shouldn't be shadowed");else{const d=c.fold((h,m,y)=>{if(!Ze(h)&&m&&Mo(m))return[Rg(m).query];{let v=[];return m&&(v=v.concat(QD(m).map(E=>E.query))),xn(y,(E,b)=>{v=v.concat(b)}),v}});for(let h=0;h<d.length;++h){const m=d[h];n.listenProvider_.stopListening(Md(m),lh(n,m))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gE(t)}node(){return this.node_}}class yE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jt(this.path_,e);return new yE(this.syncTree_,t)}node(){return hE(this.syncTree_,this.path_)}}const KQ=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},WI=function(n,e,t){if(!n||typeof n!="object")return n;if(Ee(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return GQ(n[".sv"],e,t);if(typeof n[".sv"]=="object")return QQ(n[".sv"],e);Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},GQ=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Ee(!1,"Unexpected server value: "+n)}},QQ=function(n,e,t){n.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&Ee(!1,"Unexpected increment value: "+r);const s=e.node();if(Ee(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const a=s.getValue();return typeof a!="number"?r:a+r},rM=function(n,e,t,r){return vE(e,new yE(t,n),r)},sM=function(n,e,t){return vE(n,new gE(e),t)};function vE(n,e,t){const r=n.getPriority().val(),s=WI(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const a=n,c=WI(a.getValue(),e,t);return c!==a.getValue()||s!==a.getPriority().val()?new gn(c,Bt(s)):n}else{const a=n;return o=a,s!==a.getPriority().val()&&(o=o.updatePriority(new gn(s))),a.forEachChild(Lt,(c,d)=>{const h=vE(d,e.getImmediateChild(c),t);h!==d&&(o=o.updateImmediateChild(c,h))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wE(n,e){let t=e instanceof yt?e:new yt(e),r=n,s=Ye(t);for(;s!==null;){const o=kc(r.node.children,s)||{children:{},childCount:0};r=new _E(s,r,o),t=_t(t),s=Ye(t)}return r}function cu(n){return n.node.value}function iM(n,e){n.node.value=e,G0(n)}function oM(n){return n.node.childCount>0}function YQ(n){return cu(n)===void 0&&!oM(n)}function Mg(n,e){xn(n.node.children,(t,r)=>{e(new _E(t,n,r))})}function aM(n,e,t,r){t&&e(n),Mg(n,s=>{aM(s,e,!0)})}function XQ(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jh(n){return new yt(n.parent===null?n.name:jh(n.parent)+"/"+n.name)}function G0(n){n.parent!==null&&JQ(n.parent,n.name,n)}function JQ(n,e,t){const r=YQ(t),s=$s(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,G0(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,G0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZQ=/[\[\].#$\/\u0000-\u001F\u007F]/,eY=/[\[\].#$\u0000-\u001F\u007F]/,c_=10*1024*1024,xE=function(n){return typeof n=="string"&&n.length!==0&&!ZQ.test(n)},lM=function(n){return typeof n=="string"&&n.length!==0&&!eY.test(n)},tY=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lM(n)},cM=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!kg(n)||n&&typeof n=="object"&&$s(n,".sv")},Vm=function(n,e,t,r){r&&e===void 0||jg(Ac(n,"value"),e,t)},jg=function(n,e,t){const r=t instanceof yt?new _G(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ta(r));if(typeof e=="function")throw new Error(n+"contains a function "+Ta(r)+" with contents = "+e.toString());if(kg(e))throw new Error(n+"contains "+e.toString()+" "+Ta(r));if(typeof e=="string"&&e.length>c_/3&&sg(e)>c_)throw new Error(n+"contains a string greater than "+c_+" utf8 bytes "+Ta(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(xn(e,(a,c)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!xE(a)))throw new Error(n+" contains an invalid key ("+a+") "+Ta(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wG(r,a),jg(n,c,r),xG(r)}),s&&o)throw new Error(n+' contains ".value" child '+Ta(r)+" in addition to actual children.")}},nY=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=rh(r);for(let a=0;a<o.length;a++)if(!(o[a]===".priority"&&a===o.length-1)){if(!xE(o[a]))throw new Error(n+"contains an invalid key ("+o[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(vG);let s=null;for(t=0;t<e.length;t++){if(r=e[t],s!==null&&Mr(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},uM=function(n,e,t,r){const s=Ac(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const o=[];xn(e,(a,c)=>{const d=new yt(a);if(jg(s,c,jt(t,d)),Zx(d)===".priority"&&!cM(c))throw new Error(s+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),nY(s,o)},rY=function(n,e,t){if(kg(e))throw new Error(Ac(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!cM(e))throw new Error(Ac(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},dM=function(n,e,t,r){if(!lM(t))throw new Error(Ac(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sY=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dM(n,e,t)},Na=function(n,e){if(Ye(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},iY=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!tY(t))throw new Error(Ac(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lg(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],o=s.getPath();t!==null&&!eE(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function hM(n,e,t){Lg(n,t),fM(n,r=>eE(r,e))}function Or(n,e,t){Lg(n,t),fM(n,r=>Mr(r,e)||Mr(e,r))}function fM(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const o=s.path;e(o)?(aY(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function aY(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Nd&&_n("event: "+t.toString()),ou(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY="repo_interrupt",cY=25;class uY{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Am(),this.transactionQueueTree_=new _E,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dY(n,e,t){if(n.stats_=Xx(n.repoInfo_),n.forceRestClient_||$K())n.server_=new km(n.repoInfo_,(r,s,o,a)=>{qI(n,r,s,o,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>KI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{cn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new hi(n.repoInfo_,e,(r,s,o,a)=>{qI(n,r,s,o,a)},r=>{KI(n,r)},r=>{hY(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=GK(n.repoInfo_,()=>new KG(n.stats_,n.server_)),n.infoData_=new BG,n.infoSyncTree_=new HI({startListening:(r,s,o,a)=>{let c=[];const d=n.infoData_.getNode(r._path);return d.isEmpty()||(c=Mh(n.infoSyncTree_,r._path,d),setTimeout(()=>{a("ok")},0)),c},stopListening:()=>{}}),EE(n,"connected",!1),n.serverSyncTree_=new HI({startListening:(r,s,o,a)=>(n.server_.listen(r,o,s,(c,d)=>{const h=a(c,d);Or(n.eventQueue_,r._path,h)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function pM(n){const t=n.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Og(n){return KQ({timestamp:pM(n)})}function qI(n,e,t,r,s){n.dataUpdateCount++;const o=new yt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(s)if(r){const d=im(t,h=>Bt(h));a=zQ(n.serverSyncTree_,o,d,s)}else{const d=Bt(t);a=ZD(n.serverSyncTree_,o,d,s)}else if(r){const d=im(t,h=>Bt(h));a=VQ(n.serverSyncTree_,o,d)}else{const d=Bt(t);a=Mh(n.serverSyncTree_,o,d)}let c=o;a.length>0&&(c=zc(n,o)),Or(n.eventQueue_,c,a)}function KI(n,e){EE(n,"connected",e),e===!1&&gY(n)}function hY(n,e){xn(e,(t,r)=>{EE(n,t,r)})}function EE(n,e,t){const r=new yt("/.info/"+e),s=Bt(t);n.infoData_.updateSnapshot(r,s);const o=Mh(n.infoSyncTree_,r,s);Or(n.eventQueue_,r,o)}function TE(n){return n.nextWriteId_++}function fY(n,e,t){const r=BQ(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(s=>{const o=Bt(s).withIndex(e._queryParams.getIndex());K0(n.serverSyncTree_,e,t,!0);let a;if(e._queryParams.loadsAllData())a=Mh(n.serverSyncTree_,e._path,o);else{const c=lh(n.serverSyncTree_,e);a=ZD(n.serverSyncTree_,e._path,o,c)}return Or(n.eventQueue_,e._path,a),Om(n.serverSyncTree_,e,t,null,!0),o},s=>(Lh(n,"get for query "+cn(e)+" failed: "+s),Promise.reject(new Error(s))))}function pY(n,e,t,r,s){Lh(n,"set",{path:e.toString(),value:t,priority:r});const o=Og(n),a=Bt(t,r),c=hE(n.serverSyncTree_,e),d=sM(a,c,o),h=TE(n),m=JD(n.serverSyncTree_,e,d,h,!0);Lg(n.eventQueue_,m),n.server_.put(e.toString(),a.val(!0),(v,E)=>{const b=v==="ok";b||Kn("set at "+e+" failed: "+v);const C=uo(n.serverSyncTree_,h,!b);Or(n.eventQueue_,e,C),jo(n,s,v,E)});const y=CE(n,e);zc(n,y),Or(n.eventQueue_,y,[])}function mY(n,e,t,r){Lh(n,"update",{path:e.toString(),value:t});let s=!0;const o=Og(n),a={};if(xn(t,(c,d)=>{s=!1,a[c]=rM(jt(e,c),Bt(d),n.serverSyncTree_,o)}),s)_n("update() called with empty data.  Don't do anything."),jo(n,r,"ok",void 0);else{const c=TE(n),d=OQ(n.serverSyncTree_,e,a,c);Lg(n.eventQueue_,d),n.server_.merge(e.toString(),t,(h,m)=>{const y=h==="ok";y||Kn("update at "+e+" failed: "+h);const v=uo(n.serverSyncTree_,c,!y),E=v.length>0?zc(n,e):e;Or(n.eventQueue_,E,v),jo(n,r,h,m)}),xn(t,h=>{const m=CE(n,jt(e,h));zc(n,m)}),Or(n.eventQueue_,e,[])}}function gY(n){Lh(n,"onDisconnectEvents");const e=Og(n),t=Am();z0(n.onDisconnect_,ft(),(s,o)=>{const a=rM(s,o,n.serverSyncTree_,e);au(t,s,a)});let r=[];z0(t,ft(),(s,o)=>{r=r.concat(Mh(n.serverSyncTree_,s,o));const a=CE(n,s);zc(n,a)}),n.onDisconnect_=Am(),Or(n.eventQueue_,ft(),r)}function yY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&U0(n.onDisconnect_,e),jo(n,t,r,s)})}function GI(n,e,t,r){const s=Bt(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&au(n.onDisconnect_,e,s),jo(n,r,o,a)})}function vY(n,e,t,r,s){const o=Bt(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(a,c)=>{a==="ok"&&au(n.onDisconnect_,e,o),jo(n,s,a,c)})}function _Y(n,e,t,r){if(sm(t)){_n("onDisconnect().update() called with empty data.  Don't do anything."),jo(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(s,o)=>{s==="ok"&&xn(t,(a,c)=>{const d=Bt(c);au(n.onDisconnect_,jt(e,a),d)}),jo(n,r,s,o)})}function wY(n,e,t){let r;Ye(e._path)===".info"?r=K0(n.infoSyncTree_,e,t):r=K0(n.serverSyncTree_,e,t),hM(n.eventQueue_,e._path,r)}function mM(n,e,t){let r;Ye(e._path)===".info"?r=Om(n.infoSyncTree_,e,t):r=Om(n.serverSyncTree_,e,t),hM(n.eventQueue_,e._path,r)}function xY(n){n.persistentConnection_&&n.persistentConnection_.interrupt(lY)}function Lh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_n(t,...e)}function jo(n,e,t,r){e&&ou(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let o=s;r&&(o+=": "+r);const a=new Error(o);a.code=s,e(a)}})}function gM(n,e,t){return hE(n.serverSyncTree_,e,t)||Be.EMPTY_NODE}function SE(n,e=n.transactionQueueTree_){if(e||Vg(n,e),cu(e)){const t=vM(n,e);Ee(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&EY(n,jh(e),t)}else oM(e)&&Mg(e,t=>{SE(n,t)})}function EY(n,e,t){const r=t.map(h=>h.currentWriteId),s=gM(n,e,r);let o=s;const a=s.hash();for(let h=0;h<t.length;h++){const m=t[h];Ee(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const y=qn(e,m.path);o=o.updateChild(y,m.currentOutputSnapshotRaw)}const c=o.val(!0),d=e;n.server_.put(d.toString(),c,h=>{Lh(n,"transaction put response",{path:d.toString(),status:h});let m=[];if(h==="ok"){const y=[];for(let v=0;v<t.length;v++)t[v].status=2,m=m.concat(uo(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&y.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();Vg(n,wE(n.transactionQueueTree_,e)),SE(n,n.transactionQueueTree_),Or(n.eventQueue_,e,m);for(let v=0;v<y.length;v++)ou(y[v])}else{if(h==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{Kn("transaction at "+d.toString()+" failed: "+h);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=h}zc(n,e)}},a)}function zc(n,e){const t=yM(n,e),r=jh(t),s=vM(n,t);return TY(n,s,r),r}function TY(n,e,t){if(e.length===0)return;const r=[];let s=[];const a=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const d=e[c],h=qn(t,d.path);let m=!1,y;if(Ee(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,y=d.abortReason,s=s.concat(uo(n.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=cY)m=!0,y="maxretry",s=s.concat(uo(n.serverSyncTree_,d.currentWriteId,!0));else{const v=gM(n,d.path,a);d.currentInputSnapshot=v;const E=e[c].update(v.val());if(E!==void 0){jg("transaction failed: Data returned ",E,d.path);let b=Bt(E);typeof E=="object"&&E!=null&&$s(E,".priority")||(b=b.updatePriority(v.getPriority()));const I=d.currentWriteId,k=Og(n),R=sM(b,v,k);d.currentOutputSnapshotRaw=b,d.currentOutputSnapshotResolved=R,d.currentWriteId=TE(n),a.splice(a.indexOf(I),1),s=s.concat(JD(n.serverSyncTree_,d.path,R,d.currentWriteId,d.applyLocally)),s=s.concat(uo(n.serverSyncTree_,I,!0))}else m=!0,y="nodata",s=s.concat(uo(n.serverSyncTree_,d.currentWriteId,!0))}Or(n.eventQueue_,t,s),s=[],m&&(e[c].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[c].unwatcher),e[c].onComplete&&(y==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(y),!1,null))))}Vg(n,n.transactionQueueTree_);for(let c=0;c<r.length;c++)ou(r[c]);SE(n,n.transactionQueueTree_)}function yM(n,e){let t,r=n.transactionQueueTree_;for(t=Ye(e);t!==null&&cu(r)===void 0;)r=wE(r,t),e=_t(e),t=Ye(e);return r}function vM(n,e){const t=[];return _M(n,e,t),t.sort((r,s)=>r.order-s.order),t}function _M(n,e,t){const r=cu(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);Mg(e,s=>{_M(n,s,t)})}function Vg(n,e){const t=cu(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,iM(e,t.length>0?t:void 0)}Mg(e,r=>{Vg(n,r)})}function CE(n,e){const t=jh(yM(n,e)),r=wE(n.transactionQueueTree_,e);return XQ(r,s=>{u_(n,s)}),u_(n,r),aM(r,s=>{u_(n,s)}),t}function u_(n,e){const t=cu(e);if(t){const r=[];let s=[],o=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(Ee(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=3,t[a].abortReason="set"):(Ee(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),s=s.concat(uo(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&r.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?iM(e,void 0):t.length=o+1,Or(n.eventQueue_,jh(e),s);for(let a=0;a<r.length;a++)ou(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function CY(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Kn(`Invalid query segment '${t}' in query '${n}'`)}return e}const QI=function(n,e){const t=bY(n),r=t.namespace;t.domain==="firebase.com"&&Ei(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||MK();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new xD(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new yt(t.pathString)}},bY=function(n){let e="",t="",r="",s="",o="",a=!0,c="https",d=443;if(typeof n=="string"){let h=n.indexOf("//");h>=0&&(c=n.substring(0,h-1),n=n.substring(h+2));let m=n.indexOf("/");m===-1&&(m=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(m,y)),m<y&&(s=SY(n.substring(m,y)));const v=CY(n.substring(Math.min(n.length,y)));h=e.indexOf(":"),h>=0?(a=c==="https"||c==="wss",d=parseInt(e.substring(h+1),10)):h=e.length;const E=e.slice(0,h);if(E.toLowerCase()==="localhost")t="localhost";else if(E.split(".").length<=2)t=E;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),o=r}"ns"in v&&(o=v.ns)}return{host:e,port:d,domain:t,subdomain:r,secure:a,scheme:c,pathString:s,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",IY=(function(){let n=0;const e=[];return function(t){const r=t===n;n=t;let s;const o=new Array(8);for(s=7;s>=0;s--)o[s]=YI.charAt(t%64),t=Math.floor(t/64);Ee(t===0,"Cannot push at time == 0");let a=o.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)a+=YI.charAt(e[s]);return Ee(a.length===20,"nextPushId: Length should be 20."),a}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,t,r,s){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+cn(this.snapshot.exportVal())}}class AY{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Cs;return yY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Na("OnDisconnect.remove",this._path);const e=new Cs;return GI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Na("OnDisconnect.set",this._path),Vm("OnDisconnect.set",e,this._path,!1);const t=new Cs;return GI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Na("OnDisconnect.setWithPriority",this._path),Vm("OnDisconnect.setWithPriority",e,this._path,!1),rY("OnDisconnect.setWithPriority",t);const r=new Cs;return vY(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Na("OnDisconnect.update",this._path),uM("OnDisconnect.update",e,this._path);const t=new Cs;return _Y(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Ze(this._path)?null:Zx(this._path)}get ref(){return new Ci(this._repo,this._path)}get _queryIdentifier(){const e=MI(this._queryParams),t=Qx(e);return t==="{}"?"default":t}get _queryObject(){return MI(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof IE))return!1;const t=this._repo===e._repo,r=eE(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+yG(this._path)}}class Ci extends IE{constructor(e,t){super(e,t,new sE,!1)}get parent(){const e=ND(this._path);return e===null?null:new Ci(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ch{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new yt(e),r=uh(this.ref,e);return new ch(this._node.getChild(t),r,Lt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ch(s,uh(this.ref,r),Lt)))}hasChild(e){const t=new yt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ft(n,e){return n=xt(n),n._checkNotDeleted("ref"),e!==void 0?uh(n._root,e):n._root}function uh(n,e){return n=xt(n),Ye(n._path)===null?sY("child","path",e):dM("child","path",e),new Ci(n._repo,jt(n._path,e))}function PY(n){return n=xt(n),new NY(n._repo,n._path)}function wp(n,e){n=xt(n),Na("push",n._path),Vm("push",e,n._path,!0);const t=pM(n._repo),r=IY(t),s=uh(n,r),o=uh(n,r);let a;return a=Promise.resolve(o),s.then=a.then.bind(a),s.catch=a.then.bind(a,void 0),s}function cd(n){return Na("remove",n._path),no(n,null)}function no(n,e){n=xt(n),Na("set",n._path),Vm("set",e,n._path,!1);const t=new Cs;return pY(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function xp(n,e){uM("update",e,n._path);const t=new Cs;return mY(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ud(n){n=xt(n);const e=new bE(()=>{}),t=new Oh(e);return fY(n._repo,n,t).then(r=>new ch(r,new Ci(n._repo,n._path),n._queryParams.getIndex()))}class Oh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const r=t._queryParams.getIndex();return new kY("value",this,new ch(e.snapshotNode,new Ci(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AY(this,e,t):null}matches(e){return e instanceof Oh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function RY(n,e,t,r,s){const o=new bE(t,void 0),a=new Oh(o);return wY(n._repo,n,a),()=>mM(n._repo,n,a)}function d_(n,e,t,r){return RY(n,"value",e)}function h_(n,e,t){let r=null;const s=t?new bE(t):null;r=new Oh(s),mM(n._repo,n,r)}AQ(Ci);MQ(Ci);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY="FIREBASE_DATABASE_EMULATOR_HOST",Q0={};let MY=!1;function jY(n,e,t,r){const s=e.lastIndexOf(":"),o=e.substring(0,s),a=Uo(o);n.repoInfo_=new xD(e,a,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function LY(n,e,t,r,s){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_n("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let a=QI(o,s),c=a.repoInfo,d;typeof process<"u"&&gI&&(d=gI[DY]),d?(o=`http://${d}?ns=${c.namespace}`,a=QI(o,s),c=a.repoInfo):a.repoInfo.secure;const h=new WK(n.name,n.options,e);iY("Invalid Firebase Database URL",a),Ze(a.path)||Ei("Database URL must point to the root of a Firebase Database (not including a child path).");const m=VY(c,n,h,new HK(n,t));return new FY(m,n)}function OY(n,e){const t=Q0[e];(!t||t[n.key]!==n)&&Ei(`Database ${e}(${n.repoInfo_}) has already been deleted.`),xY(n),delete t[n.key]}function VY(n,e,t,r){let s=Q0[e.name];s||(s={},Q0[e.name]=s);let o=s[n.toURLString()];return o&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new uY(n,MY,t,r),s[n.toURLString()]=o,o}class FY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dY(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ci(this._repo,ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OY(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ei("Cannot call "+e+" on a deleted database.")}}function UY(n=nx(),e){const t=og(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=FP("database");r&&zY(t,...r)}return t}function zY(n,e,t,r={}){n=xt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&So(r,o.repoInfo_.emulatorOptions))return;Ei("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zp(zp.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:BP(r.mockUserToken,n.app.options.projectId);a=new zp(c)}Uo(e)&&(Jw(e),Zw("Database",!0)),jY(o,s,r,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BY(n){kK(Ja),$a(new Co("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return LY(r,s,o,t)},"PUBLIC").setMultipleInstances(!0)),Rs(yI,vI,n),Rs(yI,vI,"esm2020")}hi.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};hi.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};BY();const $Y={apiKey:"AIzaSyBMMw1PL_xxk-H87OfD2FpQanjI2-S8eQQ",authDomain:"pixel-app-draw.firebaseapp.com",projectId:"pixel-app-draw",storageBucket:"pixel-app-draw.firebasestorage.app",messagingSenderId:"58568347140",appId:"1:58568347140:web:4420b617fc47acea3f6f51",measurementId:"G-QSW4FZCT5J",databaseURL:"https://pixel-app-draw-default-rtdb.asia-southeast1.firebasedatabase.app/"},kE=KP($Y),mr=lH(kE),Jt=uK(kE),Ut=UY(kE);class Ep{static COLLECTION_NAME="users";static async createUser(e){try{console.log("UserService: Starting to create user document..."),console.log("UserService: User data:",e),console.log("UserService: Database instance:",Jt);const t=On(Jt,this.COLLECTION_NAME,e.uid);console.log("UserService: Document reference created:",t);const r={email:e.email,displayName:e.displayName,createdAt:Dr(),updatedAt:Dr(),totalArtworks:0,totalLikes:0,preferences:{theme:"light",language:"vi",notifications:!0,autoSave:!0,gridLines:!0,soundEffects:!1,highContrast:!1}};console.log("UserService: About to write to Firestore..."),await Sm(t,r),console.log("UserService: Document written successfully to Firestore"),console.log("User created successfully:",e.uid)}catch(t){throw console.error("UserService: Error creating user:",t),console.error("UserService: Error details:",{code:t.code,message:t.message,stack:t.stack}),new Error("Không thể tạo tài khoản. Vui lòng thử lại.")}}static async getUser(e){try{const t=On(Jt,this.COLLECTION_NAME,e),r=await co(t);if(r.exists()){const s=r.data();return{uid:e,...s,createdAt:s.createdAt?.toDate()||new Date,updatedAt:s.updatedAt?.toDate()||new Date}}else return console.log("No user document found"),null}catch(t){throw console.error("Error getting user:",t),new Error("Không thể lấy thông tin người dùng.")}}static async updateUser(e,t){try{const r=On(Jt,this.COLLECTION_NAME,e);await Va(r,{...t,updatedAt:Dr()}),console.log("User updated successfully:",e)}catch(r){throw console.error("Error updating user:",r),new Error("Không thể cập nhật thông tin người dùng.")}}static async userExists(e){try{const t=On(Jt,this.COLLECTION_NAME,e);return(await co(t)).exists()}catch(t){return console.error("Error checking user existence:",t),!1}}static async getUserByEmail(e){try{const t=R0(Jt,this.COLLECTION_NAME),r=M0(t,j0("email","==",e)),s=await L0(r);if(!s.empty){const o=s.docs[0],a=o.data();return{uid:o.id,...a,createdAt:a.createdAt?.toDate()||new Date,updatedAt:a.updatedAt?.toDate()||new Date}}return null}catch(t){throw console.error("Error getting user by email:",t),new Error("Không thể tìm người dùng.")}}static async updateArtworkCount(e,t=1){try{const r=On(Jt,this.COLLECTION_NAME,e),s=await co(r);if(s.exists()){const o=s.data().totalArtworks||0;await Va(r,{totalArtworks:o+t,updatedAt:Dr()})}}catch(r){console.error("Error updating artwork count:",r)}}static async updateLikesCount(e,t=1){try{const r=On(Jt,this.COLLECTION_NAME,e),s=await co(r);if(s.exists()){const o=s.data().totalLikes||0;await Va(r,{totalLikes:o+t,updatedAt:Dr()})}}catch(r){console.error("Error updating likes count:",r)}}}const wM=S.createContext(void 0),Wo=()=>{const n=S.useContext(wM);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},HY=({children:n})=>{const[e,t]=S.useState(null),[r,s]=S.useState(null),[o,a]=S.useState(!0),c=async(b,C,I)=>{try{console.log("Starting registration process...");const k=await H$(mr,b,C);console.log("Firebase Auth user created:",k.user.uid),await K$(k.user,{displayName:I}),console.log("Display name updated in Firebase Auth"),await Ep.createUser({uid:k.user.uid,email:b,displayName:I}),console.log("User document created in Firestore"),console.log("User registered successfully:",k.user)}catch(k){throw console.error("Registration error details:",k),console.error("Error code:",k.code),console.error("Error message:",k.message),k.code?new Error(v(k.code)):new Error(k.message||"Có lỗi xảy ra. Vui lòng thử lại.")}},d=async(b,C)=>{try{const I=await W$(mr,b,C);console.log("User logged in successfully:",I.user)}catch(I){throw console.error("Login error:",I),new Error(v(I.code))}},h=async()=>{try{await X$(mr),s(null),console.log("User logged out successfully")}catch(b){throw console.error("Logout error:",b),new Error("Có lỗi xảy ra khi đăng xuất")}},m=async b=>{if(!e)throw new Error("Người dùng chưa đăng nhập");try{await Ep.updateUser(e.uid,b),await y()}catch(C){throw console.error("Update user data error:",C),C}},y=async()=>{if(!e){s(null);return}try{const b=await Ep.getUser(e.uid);s(b)}catch(b){console.error("Refresh user data error:",b),s(null)}},v=b=>{switch(b){case"auth/email-already-in-use":return"Email này đã được sử dụng";case"auth/weak-password":return"Mật khẩu quá yếu (ít nhất 6 ký tự)";case"auth/invalid-email":return"Email không hợp lệ";case"auth/user-not-found":return"Không tìm thấy tài khoản với email này";case"auth/wrong-password":return"Mật khẩu không đúng";case"auth/too-many-requests":return"Quá nhiều lần thử. Vui lòng thử lại sau";case"auth/network-request-failed":return"Lỗi kết nối mạng";case"auth/operation-not-allowed":return"Phương thức đăng nhập này không được phép";case"auth/invalid-credential":return"Thông tin đăng nhập không hợp lệ";case"auth/user-disabled":return"Tài khoản này đã bị vô hiệu hóa";case"auth/requires-recent-login":return"Vui lòng đăng nhập lại để thực hiện thao tác này";default:return`Có lỗi xảy ra: ${b}. Vui lòng thử lại`}};S.useEffect(()=>Y$(mr,async C=>{if(t(C),C)try{const I=await Ep.getUser(C.uid);s(I)}catch(I){console.error("Error loading user data:",I),s(null)}else s(null);a(!1)}),[]);const E={currentUser:e,userData:r,login:d,register:c,logout:h,updateUserData:m,refreshUserData:y,loading:o};return f.jsx(wM.Provider,{value:E,children:!o&&n})},WY=({isOpen:n,onClose:e})=>{const{login:t,register:r}=Wo(),[s,o]=S.useState(!0),[a,c]=S.useState(!1),[d,h]=S.useState(!1),[m,y]=S.useState(""),[v,E]=S.useState({username:"",email:"",password:"",confirmPassword:""}),b=async I=>{I.preventDefault(),y(""),h(!0);try{if(s)await t(v.email,v.password);else{if(v.password!==v.confirmPassword){y("Mật khẩu xác nhận không khớp"),h(!1);return}if(v.password.length<6){y("Mật khẩu phải có ít nhất 6 ký tự"),h(!1);return}await r(v.email,v.password,v.username)}E({username:"",email:"",password:"",confirmPassword:""}),e()}catch(k){y(k.message)}finally{h(!1)}},C=(I,k)=>{E(R=>({...R,[I]:k})),m&&y("")};return f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-md",onClick:I=>I.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h2",{className:"text-xl",children:s?"Đăng nhập":"Đăng ký"}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,children:f.jsx(Lr,{size:20})})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[m&&f.jsxs(qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[f.jsx(Dw,{size:16}),m]}),!s&&f.jsxs("div",{children:[f.jsx(it,{htmlFor:"username",children:"Tên người dùng"}),f.jsxs("div",{className:"relative",children:[f.jsx(Ia,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{id:"username",type:"text",placeholder:"Nhập tên người dùng",value:v.username,onChange:I=>C("username",I.target.value),className:"pl-10",required:!s})]})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"email",children:"Email"}),f.jsxs("div",{className:"relative",children:[f.jsx($A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{id:"email",type:"email",placeholder:"Nhập email",value:v.email,onChange:I=>C("email",I.target.value),className:"pl-10",required:!0})]})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"password",children:"Mật khẩu"}),f.jsxs("div",{className:"relative",children:[f.jsx(cC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{id:"password",type:a?"text":"password",placeholder:"Nhập mật khẩu",value:v.password,onChange:I=>C("password",I.target.value),className:"pl-10 pr-10",required:!0}),f.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:a?f.jsx(Wm,{size:18}):f.jsx(mh,{size:18})})]})]}),!s&&f.jsxs("div",{children:[f.jsx(it,{htmlFor:"confirmPassword",children:"Xác nhận mật khẩu"}),f.jsxs("div",{className:"relative",children:[f.jsx(cC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{id:"confirmPassword",type:"password",placeholder:"Nhập lại mật khẩu",value:v.confirmPassword,onChange:I=>C("confirmPassword",I.target.value),className:"pl-10",required:!s})]})]}),f.jsx(Se,{type:"submit",className:"w-full",disabled:d,children:d?"Đang xử lý...":s?"Đăng nhập":"Đăng ký"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("button",{type:"button",onClick:()=>o(!s),className:"text-blue-600 hover:underline",children:s?"Chưa có tài khoản? Đăng ký ngay":"Đã có tài khoản? Đăng nhập"})})]})})})};function AE({className:n,...e}){return f.jsx("textarea",{"data-slot":"textarea",className:Ot("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}const qY=JA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Fn({className:n,variant:e,asChild:t=!1,...r}){const s=t?QA:"span";return f.jsx(s,{"data-slot":"badge",className:Ot(qY({variant:e}),n),...r})}var Fg="Switch",[KY,PJ]=Oo(Fg),[GY,QY]=KY(Fg),xM=S.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:o,required:a,disabled:c,value:d="on",onCheckedChange:h,form:m,...y}=n,[v,E]=S.useState(null),b=wt(e,M=>E(M)),C=S.useRef(!1),I=v?m||!!v.closest("form"):!0,[k,R]=bc({prop:s,defaultProp:o??!1,onChange:h,caller:Fg});return f.jsxs(GY,{scope:t,checked:k,disabled:c,children:[f.jsx(Xe.button,{type:"button",role:"switch","aria-checked":k,"aria-required":a,"data-state":CM(k),"data-disabled":c?"":void 0,disabled:c,value:d,...y,ref:b,onClick:rt(n.onClick,M=>{R(F=>!F),I&&(C.current=M.isPropagationStopped(),C.current||M.stopPropagation())})}),I&&f.jsx(SM,{control:v,bubbles:!C.current,name:r,value:d,checked:k,required:a,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});xM.displayName=Fg;var EM="SwitchThumb",TM=S.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=QY(EM,t);return f.jsx(Xe.span,{"data-state":CM(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});TM.displayName=EM;var YY="SwitchBubbleInput",SM=S.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...s},o)=>{const a=S.useRef(null),c=wt(a,o),d=Vw(t),h=Fw(e);return S.useEffect(()=>{const m=a.current;if(!m)return;const y=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(y,"checked").set;if(d!==t&&E){const b=new Event("click",{bubbles:r});E.call(m,t),m.dispatchEvent(b)}},[d,t,r]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SM.displayName=YY;function CM(n){return n?"checked":"unchecked"}var XY=xM,JY=TM;function ro({className:n,...e}){return f.jsx(XY,{"data-slot":"switch",className:Ot("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:f.jsx(JY,{"data-slot":"switch-thumb",className:Ot("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function XI(n){return n.flat()}function f_(n,e,t){const r=[];for(let s=0;s<t;s++){r[s]=[];for(let o=0;o<e;o++)r[s][o]=n[s*e+o]||"#ffffff"}return r}class NE{static COLLECTION_NAME="pictures";static async createArtwork(e,t,r){try{console.log("ArtworkService: Starting to create artwork...");const s=`${e}_${Date.now()}_${Math.random().toString(36).substring(2,8)}`,o=this.createThumbnail(r.pixels,r.width,r.height),a=XI(r.pixels),c={id:s,title:r.title,description:r.description||"",pixels:a,width:r.width,height:r.height,pixelSize:r.pixelSize,authorId:e,authorName:t,tags:r.tags,isPublic:r.isPublic,likes:0,views:0,createdAt:Dr(),updatedAt:Dr(),thumbnail:o},d=On(Jt,this.COLLECTION_NAME,s);return await Sm(d,c),console.log("Artwork created successfully:",s),s}catch(s){throw console.error("ArtworkService: Error creating artwork:",s),new Error("Không thể lưu tác phẩm. Vui lòng thử lại.")}}static async getArtwork(e){try{const t=On(Jt,this.COLLECTION_NAME,e),r=await co(t);if(r.exists()){const s=r.data(),o=f_(s.pixels,s.width,s.height);return{...s,pixels:o,createdAt:s.createdAt?.toDate()||new Date,updatedAt:s.updatedAt?.toDate()||new Date}}else return console.log("No artwork found with ID:",e),null}catch(t){throw console.error("Error getting artwork:",t),new Error("Không thể lấy tác phẩm.")}}static async getUserArtworks(e){try{const t=R0(Jt,this.COLLECTION_NAME),r=M0(t,j0("authorId","==",e),fI("updatedAt","desc")),s=await L0(r),o=[];return s.forEach(a=>{const c=a.data(),d=f_(c.pixels,c.width,c.height);o.push({...c,pixels:d,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date})}),o}catch(t){throw console.error("Error getting user artworks:",t),new Error("Không thể lấy danh sách tác phẩm.")}}static async getPublicArtworks(e=20){try{const t=R0(Jt,this.COLLECTION_NAME),r=M0(t,j0("isPublic","==",!0),fI("createdAt","desc"),EK(e)),s=await L0(r),o=[];return s.forEach(a=>{const c=a.data(),d=f_(c.pixels,c.width,c.height);o.push({...c,pixels:d,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date})}),o}catch(t){throw console.error("Error getting public artworks:",t),new Error("Không thể lấy danh sách tác phẩm công khai.")}}static async updateArtwork(e,t){try{const r=On(Jt,this.COLLECTION_NAME,e),s={...t,updatedAt:Dr()};t.pixels&&(s.thumbnail=this.createThumbnail(t.pixels,t.width||32,t.height||32),s.pixels=XI(t.pixels)),await Va(r,s),console.log("Artwork updated successfully:",e)}catch(r){throw console.error("Error updating artwork:",r),new Error("Không thể cập nhật tác phẩm.")}}static async deleteArtwork(e){try{const t=On(Jt,this.COLLECTION_NAME,e);await bK(t),console.log("Artwork deleted successfully:",e)}catch(t){throw console.error("Error deleting artwork:",t),new Error("Không thể xóa tác phẩm.")}}static async incrementViews(e){try{const t=On(Jt,this.COLLECTION_NAME,e),r=await co(t);if(r.exists()){const s=r.data().views||0;await Va(t,{views:s+1,updatedAt:Dr()})}}catch(t){console.error("Error incrementing views:",t)}}static async incrementLikes(e){try{const t=On(Jt,this.COLLECTION_NAME,e),r=await co(t);if(r.exists()){const s=r.data().likes||0;await Va(t,{likes:s+1,updatedAt:Dr()})}}catch(t){console.error("Error incrementing likes:",t)}}static createThumbnail(e,t,r){try{const s=document.createElement("canvas"),o=s.getContext("2d");if(!o)return"";const a=64,c=Math.min(a/t,a/r),d=Math.floor(t*c),h=Math.floor(r*c);s.width=d,s.height=h;for(let m=0;m<r;m++)for(let y=0;y<t;y++)o.fillStyle=e[m][y],o.fillRect(Math.floor(y*c),Math.floor(m*c),Math.ceil(c),Math.ceil(c));return s.toDataURL("image/png",.8)}catch(s){return console.error("Error creating thumbnail:",s),""}}static exportAsPNG(e,t,r,s=12){const o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return"";o.width=t*s,o.height=r*s;for(let c=0;c<r;c++)for(let d=0;d<t;d++)a.fillStyle=e[c][d],a.fillRect(d*s,c*s,s,s);return o.toDataURL("image/png")}static exportAsJPEG(e,t,r,s=12,o=.9){const a=document.createElement("canvas"),c=a.getContext("2d");if(!c)return"";a.width=t*s,a.height=r*s,c.fillStyle="#ffffff",c.fillRect(0,0,a.width,a.height);for(let d=0;d<r;d++)for(let h=0;h<t;h++)c.fillStyle=e[d][h],c.fillRect(h*s,d*s,s,s);return a.toDataURL("image/jpeg",o)}}const p_=Object.freeze(Object.defineProperty({__proto__:null,ArtworkService:NE},Symbol.toStringTag,{value:"Module"})),ZY=["động vật","dễ thương","game","fantasy","robot","sci-fi","hoa","mùa xuân","phong cảnh","hoàng hôn","không gian","character","retro","8-bit","pixel","anime","chibi","food","nature","abstract","portrait","landscape"],eX=({isOpen:n,onClose:e,onSave:t,pixels:r,width:s,height:o,pixelSize:a})=>{const{currentUser:c,userData:d}=Wo(),[h,m]=S.useState(!1),[y,v]=S.useState(""),[E,b]=S.useState({title:"",description:"",tags:[],isPublic:!0}),[C,I]=S.useState(""),k=async K=>{if(K.preventDefault(),!c||!d){v("Vui lòng đăng nhập để lưu tác phẩm");return}if(!E.title.trim()){v("Vui lòng nhập tên tác phẩm");return}v(""),m(!0);try{const P={title:E.title.trim(),description:E.description.trim(),pixels:r,width:s,height:o,pixelSize:a,tags:E.tags,isPublic:E.isPublic},A=await NE.createArtwork(c.uid,d.displayName,P);t(A),e(),b({title:"",description:"",tags:[],isPublic:!0})}catch(P){v(P.message)}finally{m(!1)}},R=K=>{const P=K.trim().toLowerCase();P&&!E.tags.includes(P)&&E.tags.length<10&&b(A=>({...A,tags:[...A.tags,P]}))},M=K=>{b(P=>({...P,tags:P.tags.filter(A=>A!==K)}))},F=(K,P)=>{b(A=>({...A,[K]:P})),y&&v("")},W=K=>{K.preventDefault(),R(C),I("")};return f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:K=>K.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h2",{className:"text-xl flex items-center gap-2",children:[f.jsx(qm,{className:"text-blue-600",size:24}),"Lưu tác phẩm"]}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,children:f.jsx(Lr,{size:20})})]}),f.jsxs("form",{onSubmit:k,className:"space-y-6",children:[y&&f.jsxs(qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[f.jsx(Dw,{size:16}),y]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"title",children:"Tên tác phẩm *"}),f.jsx(wn,{id:"title",type:"text",placeholder:"Nhập tên tác phẩm...",value:E.title,onChange:K=>F("title",K.target.value),required:!0})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"description",children:"Mô tả"}),f.jsx(AE,{id:"description",placeholder:"Mô tả về tác phẩm của bạn...",value:E.description,onChange:K=>F("description",K.target.value),rows:3})]}),f.jsxs("div",{children:[f.jsx(it,{children:"Tags"}),f.jsxs("div",{className:"space-y-3",children:[E.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2",children:E.tags.map(K=>f.jsxs(Fn,{variant:"secondary",className:"flex items-center gap-1",children:[K,f.jsx("button",{type:"button",onClick:()=>M(K),className:"ml-1 hover:text-red-600",children:f.jsx(Lr,{size:12})})]},K))}),f.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[f.jsx(wn,{placeholder:"Thêm tag mới...",value:C,onChange:K=>I(K.target.value),disabled:E.tags.length>=10}),f.jsx(Se,{type:"submit",variant:"outline",disabled:!C.trim()||E.tags.length>=10,children:f.jsx(w6,{size:16})})]}),f.jsxs("div",{children:[f.jsx(it,{className:"text-sm text-gray-600 mb-2 block",children:"Tags phổ biến:"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:ZY.map(K=>f.jsx("button",{type:"button",onClick:()=>R(K),disabled:E.tags.includes(K)||E.tags.length>=10,className:`px-3 py-1 rounded-full text-sm border transition-colors ${E.tags.includes(K)?"bg-blue-100 border-blue-300 text-blue-700 cursor-not-allowed":E.tags.length>=10?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":"bg-gray-100 border-gray-300 hover:bg-gray-200"}`,children:K},K))})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[E.isPublic?f.jsx(mh,{size:20,className:"text-green-600"}):f.jsx(Wm,{size:20,className:"text-gray-600"}),f.jsxs("div",{children:[f.jsx(it,{className:"text-base",children:"Công khai"}),f.jsx("p",{className:"text-sm text-gray-600",children:E.isPublic?"Tác phẩm sẽ hiển thị trong thư viện công khai":"Chỉ bạn mới có thể xem tác phẩm này"})]})]}),f.jsx(ro,{checked:E.isPublic,onCheckedChange:K=>F("isPublic",K)})]}),f.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[f.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Thông tin canvas:"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-blue-700",children:[f.jsxs("div",{children:["Kích thước: ",s," × ",o," pixels"]}),f.jsxs("div",{children:["Pixel size: ",a,"px"]})]})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Se,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Hủy"}),f.jsx(Se,{type:"submit",disabled:h,className:"flex-1",children:h?"Đang lưu...":"Lưu tác phẩm"})]})]})]})})})},tX=[{value:"png",label:"PNG",description:"Chất lượng cao, hỗ trợ trong suốt",icon:f.jsx(zA,{size:16})},{value:"jpeg",label:"JPEG",description:"Kích thước nhỏ, phù hợp chia sẻ",icon:f.jsx(y3,{size:16})}],nX=[{value:8,label:"8px - Nhỏ gọn"},{value:12,label:"12px - Mặc định"},{value:16,label:"16px - Vừa phải"},{value:24,label:"24px - Lớn"},{value:32,label:"32px - Rất lớn"},{value:48,label:"48px - Khổng lồ"}],rX=({isOpen:n,onClose:e,onExport:t,currentPixelSize:r})=>{const[s,o]=S.useState("png"),[a,c]=S.useState(r),[d,h]=S.useState(90),m=()=>{s==="jpeg"?t(s,a,d):t(s,a),e()},y=()=>{const E=1024*a*a;if(s==="png")return`~${Math.round(E/1e3)}KB`;{const b=d/100;return`~${Math.round(E*b/1e3)}KB`}},v=()=>{const E=32*a,b=32*a;return`${E} × ${b}px`};return f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-md",onClick:E=>E.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h2",{className:"text-xl flex items-center gap-2",children:[f.jsx(bs,{className:"text-green-600",size:24}),"Xuất tác phẩm"]}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,children:f.jsx(Lr,{size:20})})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx(it,{className:"mb-3 block",children:"Định dạng file"}),f.jsx("div",{className:"space-y-2",children:tX.map(E=>f.jsx(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(E.value),className:`w-full p-4 rounded-lg border-2 text-left transition-colors ${s===E.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:f.jsxs("div",{className:"flex items-center gap-3",children:[E.icon,f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:E.label}),f.jsx("div",{className:"text-sm text-gray-600",children:E.description})]})]})},E.value))})]}),f.jsxs("div",{children:[f.jsx(it,{className:"mb-3 block",children:"Kích thước pixel"}),f.jsxs(fc,{value:a.toString(),onValueChange:E=>c(Number(E)),children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsx(gc,{children:nX.map(E=>f.jsx(La,{value:E.value.toString(),children:E.label},E.value))})]})]}),s==="jpeg"&&f.jsxs("div",{children:[f.jsxs(it,{className:"mb-3 block flex items-center gap-2",children:[f.jsx(Kp,{size:16}),"Chất lượng JPEG: ",d,"%"]}),f.jsx(Yp,{value:[d],onValueChange:E=>h(E[0]),max:100,min:10,step:5,className:"w-full"}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[f.jsx("span",{children:"Nhỏ hơn"}),f.jsx("span",{children:"Lớn hơn"})]})]}),f.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-800 mb-2",children:"Thông tin xuất file:"}),f.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[f.jsxs("div",{children:["Kích thước: ",v()]}),f.jsxs("div",{children:["Định dạng: ",s.toUpperCase()]}),f.jsxs("div",{children:["Kích thước file: ",y()]}),s==="jpeg"&&f.jsxs("div",{children:["Chất lượng: ",d,"%"]})]})]}),s==="jpeg"&&d<80&&f.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:f.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 text-sm",children:[f.jsx(Kp,{size:16}),f.jsx("span",{children:"Chất lượng thấp có thể làm giảm độ sắc nét của tác phẩm"})]})}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Se,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Hủy"}),f.jsxs(Se,{onClick:m,className:"flex-1",children:[f.jsx(bs,{size:16,className:"mr-2"}),"Tải xuống"]})]})]})]})})})},sX=[{id:"1",title:"Pixel Cat",artist:"NguyenArt",thumbnail:"https://via.placeholder.com/150x150/FF6B6B/FFFFFF?text=🐱",likes:124,comments:23,isLiked:!1,tags:["động vật","dễ thương"],difficulty:"Dễ",rank:1},{id:"2",title:"Sunset City",artist:"PixelMaster",thumbnail:"https://via.placeholder.com/150x150/4ECDC4/FFFFFF?text=🏙️",likes:89,comments:15,isLiked:!0,tags:["phong cảnh","hoàng hôn"],difficulty:"Trung bình",rank:2},{id:"3",title:"Dragon Warrior",artist:"GameArtist",thumbnail:"https://via.placeholder.com/150x150/45B7D1/FFFFFF?text=🐉",likes:256,comments:42,isLiked:!1,tags:["game","fantasy"],difficulty:"Khó",rank:3},{id:"4",title:"Cute Robot",artist:"TechDrawer",thumbnail:"https://via.placeholder.com/150x150/96CEB4/FFFFFF?text=🤖",likes:67,comments:8,isLiked:!1,tags:["robot","sci-fi"],difficulty:"Dễ"},{id:"5",title:"Cherry Blossom",artist:"NaturePixel",thumbnail:"https://via.placeholder.com/150x150/FECA57/FFFFFF?text=🌸",likes:143,comments:31,isLiked:!0,tags:["hoa","mùa xuân"],difficulty:"Trung bình"},{id:"6",title:"Space Ship",artist:"CosmicArt",thumbnail:"https://via.placeholder.com/150x150/6C5CE7/FFFFFF?text=🚀",likes:98,comments:19,isLiked:!1,tags:["không gian","tàu vũ trụ"],difficulty:"Khó"}],iX=({onCreateNew:n})=>{const[e,t]=S.useState(sX),[r,s]=S.useState("all"),o=h=>{t(m=>m.map(y=>y.id===h?{...y,isLiked:!y.isLiked,likes:y.isLiked?y.likes-1:y.likes+1}:y))},a=h=>{switch(h){case"Dễ":return"bg-green-100 text-green-800";case"Trung bình":return"bg-yellow-100 text-yellow-800";case"Khó":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=h=>h?h===1?f.jsx(UA,{className:"text-yellow-500",size:16}):h===2?f.jsx(xo,{className:"text-gray-400",size:16}):h===3?f.jsx(Lw,{className:"text-orange-500",size:16}):null:null,d=e.filter(h=>{switch(r){case"easy":return h.difficulty==="Dễ";case"medium":return h.difficulty==="Trung bình";case"hard":return h.difficulty==="Khó";case"trending":return h.likes>100;default:return!0}});return f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h2",{children:"Thư viện tranh"}),f.jsx(Se,{onClick:n,children:"+ Tạo tranh mới"})]}),f.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{key:"all",label:"Tất cả"},{key:"trending",label:"Xu hướng"},{key:"easy",label:"Dễ"},{key:"medium",label:"Trung bình"},{key:"hard",label:"Khó"}].map(h=>f.jsx(Se,{variant:r===h.key?"default":"outline",size:"sm",onClick:()=>s(h.key),className:"whitespace-nowrap",children:h.label},h.key))}),r==="all"&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"mb-3",children:"🏆 Bảng xếp hạng"}),f.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:e.filter(h=>h.rank).sort((h,m)=>(h.rank||0)-(m.rank||0)).slice(0,3).map(h=>f.jsxs(qe.div,{className:"flex-shrink-0 bg-white rounded-lg p-3 border-2 border-yellow-200 min-w-48",whileHover:{scale:1.02},children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c(h.rank),f.jsxs("span",{className:"text-sm",children:["#",h.rank]})]}),f.jsx("img",{src:h.thumbnail,alt:h.title,className:"w-full h-24 object-cover rounded mb-2"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("div",{children:h.title}),f.jsxs("div",{className:"text-gray-600",children:["bởi ",h.artist]}),f.jsxs("div",{className:"text-red-500",children:["❤️ ",h.likes]})]})]},h.id))})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map((h,m)=>f.jsxs(qe.div,{className:"bg-white rounded-lg overflow-hidden shadow-sm",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},whileHover:{scale:1.02,shadow:"0 8px 25px rgba(0,0,0,0.1)"},children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:h.thumbnail,alt:h.title,className:"w-full h-32 object-cover"}),h.rank&&f.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1 bg-white/90 rounded-full px-2 py-1",children:[c(h.rank),f.jsxs("span",{className:"text-xs",children:["#",h.rank]})]}),f.jsx(Fn,{className:`absolute top-2 right-2 text-xs ${a(h.difficulty)}`,children:h.difficulty})]}),f.jsxs("div",{className:"p-3",children:[f.jsx("h4",{className:"text-sm truncate mb-1",children:h.title}),f.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["bởi ",h.artist]}),f.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:h.tags.slice(0,2).map(y=>f.jsx(Fn,{variant:"secondary",className:"text-xs",children:y},y))}),f.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:()=>o(h.id),className:`flex items-center gap-1 ${h.isLiked?"text-red-500":"hover:text-red-500"}`,children:[f.jsx(gh,{size:14,fill:h.isLiked?"currentColor":"none"}),h.likes]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Mw,{size:14}),h.comments]})]}),f.jsx("button",{className:"hover:text-blue-500",children:f.jsx(Xa,{size:14})})]})]})]},h.id))})]})};var m_={exports:{}},g_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JI;function oX(){if(JI)return g_;JI=1;var n=Um();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,a=n.useDebugValue;function c(y,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),C=b[0].inst,I=b[1];return o(function(){C.value=E,C.getSnapshot=v,d(C)&&I({inst:C})},[y,E,v]),s(function(){return d(C)&&I({inst:C}),y(function(){d(C)&&I({inst:C})})},[y]),a(E),E}function d(y){var v=y.getSnapshot;y=y.value;try{var E=v();return!t(y,E)}catch{return!0}}function h(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return g_.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,g_}var ZI;function aX(){return ZI||(ZI=1,m_.exports=oX()),m_.exports}var lX=aX();function cX(){return lX.useSyncExternalStore(uX,()=>!0,()=>!1)}function uX(){return()=>{}}var PE="Avatar",[dX,RJ]=Oo(PE),[hX,bM]=dX(PE),IM=S.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,o]=S.useState("idle");return f.jsx(hX,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:f.jsx(Xe.span,{...r,ref:e})})});IM.displayName=PE;var kM="AvatarImage",fX=S.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...o}=n,a=bM(kM,t),c=mX(r,o),d=mi(h=>{s(h),a.onImageLoadingStatusChange(h)});return dn(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?f.jsx(Xe.img,{...o,ref:e,src:r}):null});fX.displayName=kM;var AM="AvatarFallback",pX=S.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,o=bM(AM,t),[a,c]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&o.imageLoadingStatus!=="loaded"?f.jsx(Xe.span,{...s,ref:e}):null});pX.displayName=AM;function ek(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function mX(n,{referrerPolicy:e,crossOrigin:t}){const r=cX(),s=S.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,c]=S.useState(()=>ek(o,n));return dn(()=>{c(ek(o,n))},[o,n]),dn(()=>{const d=y=>()=>{c(y)};if(!o)return;const h=d("loaded"),m=d("error");return o.addEventListener("load",h),o.addEventListener("error",m),e&&(o.referrerPolicy=e),typeof t=="string"&&(o.crossOrigin=t),()=>{o.removeEventListener("load",h),o.removeEventListener("error",m)}},[o,t,e]),a}var gX=IM;function Fm({className:n,...e}){return f.jsx(gX,{"data-slot":"avatar",className:Ot("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}const yX=({username:n,onLogout:e,onViewProfile:t,onViewAchievements:r,onViewSharedArts:s,onOpenSettings:o})=>{const[a,c]=S.useState(!1),d=[{icon:Ia,label:"Hồ sơ cá nhân",action:t||(()=>console.log("Profile"))},{icon:xo,label:"Thành tích",action:r||(()=>console.log("Achievements"))},{icon:Xa,label:"Tranh đã chia sẻ",action:s||(()=>console.log("Shared art"))},{icon:Kp,label:"Cài đặt",action:o||(()=>console.log("Settings"))},{icon:BA,label:"Đăng xuất",action:e}];return f.jsxs("div",{className:"relative",children:[f.jsxs(Se,{variant:"ghost",onClick:()=>c(!a),className:"flex items-center gap-2",children:[f.jsx(Fm,{className:"w-8 h-8",children:f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white text-sm",children:n.charAt(0).toUpperCase()})}),f.jsx("span",{className:"hidden sm:inline",children:n}),f.jsx(Rw,{size:16,className:`transition-transform ${a?"rotate-180":""}`})]}),f.jsx(as,{children:a&&f.jsxs(qe.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border z-50",children:[f.jsx("div",{className:"p-3 border-b",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Fm,{className:"w-10 h-10",children:f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white",children:n.charAt(0).toUpperCase()})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm",children:n}),f.jsx("div",{className:"text-xs text-gray-600",children:"Nghệ sĩ pixel"})]})]})}),f.jsx("div",{className:"p-2",children:d.map((h,m)=>f.jsxs("button",{onClick:()=>{h.action(),c(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-gray-100 rounded-md transition-colors",children:[f.jsx(h.icon,{size:16}),h.label]},m))})]})}),a&&f.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})};var vX="Separator",tk="horizontal",_X=["horizontal","vertical"],NM=S.forwardRef((n,e)=>{const{decorative:t,orientation:r=tk,...s}=n,o=wX(r)?r:tk,c=t?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return f.jsx(Xe.div,{"data-orientation":o,...c,...s,ref:e})});NM.displayName=vX;function wX(n){return _X.includes(n)}var xX=NM;function Jl({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return f.jsx(xX,{"data-slot":"separator-root",decorative:t,orientation:e,className:Ot("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}class jd{static COLLECTION_NAME="settings";static async saveSettings(e,t){try{const r=On(Jt,this.COLLECTION_NAME,e);await Sm(r,{...t,updatedAt:Dr()},{merge:!0}),console.log("Settings saved successfully for user:",e)}catch(r){throw console.error("Error saving settings:",r),new Error("Không thể lưu cài đặt. Vui lòng thử lại.")}}static async getSettings(e){try{const t=On(Jt,this.COLLECTION_NAME,e),r=await co(t);if(r.exists()){const s=r.data();return{theme:s.theme||"light",language:s.language||"vi",notifications:s.notifications!==!1,autoSave:s.autoSave!==!1,gridLines:s.gridLines!==!1,soundEffects:s.soundEffects||!1,highContrast:s.highContrast||!1}}else return{theme:"light",language:"vi",notifications:!0,autoSave:!0,gridLines:!0,soundEffects:!1,highContrast:!1}}catch(t){throw console.error("Error getting settings:",t),new Error("Không thể tải cài đặt.")}}static async updateSettings(e,t){try{const r=On(Jt,this.COLLECTION_NAME,e);await Va(r,{...t,updatedAt:Dr()}),console.log("Settings updated successfully for user:",e)}catch(r){throw console.error("Error updating settings:",r),new Error("Không thể cập nhật cài đặt. Vui lòng thử lại.")}}static async deleteSettings(e){try{const t=On(Jt,this.COLLECTION_NAME,e);await Sm(t,{},{merge:!1}),console.log("Settings deleted successfully for user:",e)}catch(t){throw console.error("Error deleting settings:",t),new Error("Không thể xóa cài đặt.")}}}const PM=S.createContext(void 0),RE=()=>{const n=S.useContext(PM);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},EX=({children:n})=>{const{currentUser:e}=Wo(),[t,r]=S.useState("light"),[s,o]=S.useState("vi");S.useEffect(()=>{(async()=>{if(e)try{const y=await jd.getSettings(e.uid);y&&(r(y.theme),o(y.language))}catch(y){console.error("Error loading theme settings:",y)}else r("light"),o("vi")})()},[e]),S.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const a=async m=>{if(r(m),e)try{await jd.updateSettings(e.uid,{theme:m})}catch(y){console.error("Error updating theme:",y),r(t)}},h={theme:t,language:s,setTheme:a,setLanguage:async m=>{if(o(m),e)try{await jd.updateSettings(e.uid,{language:m})}catch(y){console.error("Error updating language:",y),o(s)}},toggleTheme:()=>{a(t==="light"?"dark":"light")}};return f.jsx(PM.Provider,{value:h,children:n})},TX={"nav.draw":{vi:"Vẽ tranh",en:"Draw"},"nav.gallery":{vi:"Thư viện",en:"Gallery"},"nav.myArts":{vi:"Tranh của tôi",en:"My Arts"},"nav.collaborative":{vi:"Vẽ chung",en:"Collaborative"},"nav.aiFeatures":{vi:"AI Studio",en:"AI Studio"},"nav.competitions":{vi:"Cuộc thi",en:"Competitions"},"common.login":{vi:"Đăng nhập",en:"Login"},"common.logout":{vi:"Đăng xuất",en:"Logout"},"common.save":{vi:"Lưu",en:"Save"},"common.cancel":{vi:"Hủy",en:"Cancel"},"common.close":{vi:"Đóng",en:"Close"},"common.loading":{vi:"Đang tải...",en:"Loading..."},"common.error":{vi:"Có lỗi xảy ra",en:"An error occurred"},"settings.title":{vi:"Cài đặt",en:"Settings"},"settings.language":{vi:"Ngôn ngữ",en:"Language"},"settings.theme":{vi:"Giao diện",en:"Theme"},"settings.darkMode":{vi:"Chế độ tối",en:"Dark Mode"},"settings.lightMode":{vi:"Chế độ sáng",en:"Light Mode"},"settings.notifications":{vi:"Thông báo",en:"Notifications"},"settings.drawing":{vi:"Cài đặt vẽ",en:"Drawing Settings"},"settings.autoSave":{vi:"Tự động lưu",en:"Auto Save"},"settings.gridLines":{vi:"Hiển thị lưới",en:"Show Grid"},"settings.soundEffects":{vi:"Hiệu ứng âm thanh",en:"Sound Effects"},"settings.highContrast":{vi:"Độ tương phản cao",en:"High Contrast"},"settings.pushNotifications":{vi:"Thông báo push",en:"Push notifications"},"settings.dataManagement":{vi:"Quản lý dữ liệu",en:"Data Management"},"settings.exportData":{vi:"Xuất dữ liệu",en:"Export data"},"settings.account":{vi:"Tài khoản",en:"Account"},"settings.deleteAccount":{vi:"Xóa tài khoản",en:"Delete account"},"settings.help":{vi:"Trợ giúp",en:"Help"},"settings.reportIssue":{vi:"Báo lỗi & Góp ý",en:"Report issues & Feedback"},"profile.title":{vi:"Hồ sơ",en:"Profile"},"profile.edit":{vi:"Chỉnh sửa",en:"Edit"},"profile.bio":{vi:"Giới thiệu",en:"Bio"},"profile.location":{vi:"Vị trí",en:"Location"},"profile.joinDate":{vi:"Tham gia từ",en:"Joined"},"profile.artworks":{vi:"Tác phẩm",en:"Artworks"},"profile.likes":{vi:"Lượt thích",en:"Likes"},"canvas.title":{vi:"Tạo tác phẩm pixel art của bạn",en:"Create your pixel art"},"canvas.tip":{vi:"Mẹo: Sử dụng chuột hoặc chạm để vẽ. Giữ và kéo để vẽ liên tục.",en:"Tip: Use mouse or touch to draw. Hold and drag to draw continuously."},"tools.pen":{vi:"Bút vẽ",en:"Pen"},"tools.eraser":{vi:"Tẩy",en:"Eraser"},"tools.fill":{vi:"Tô màu",en:"Fill"},"tools.eyedropper":{vi:"Chọn màu",en:"Eyedropper"},"tools.spray":{vi:"Phun sương",en:"Spray"},"tools.line":{vi:"Đường thẳng",en:"Line"},"tools.rectangle":{vi:"Hình chữ nhật",en:"Rectangle"},"tools.circle":{vi:"Hình tròn",en:"Circle"},"tools.undo":{vi:"Hoàn tác",en:"Undo"},"tools.redo":{vi:"Làm lại",en:"Redo"},"tools.clear":{vi:"Xóa canvas",en:"Clear Canvas"},"tools.save":{vi:"Lưu tranh",en:"Save Art"},"tools.export":{vi:"Xuất file",en:"Export"},"tools.share":{vi:"Chia sẻ",en:"Share"}},SX=()=>{const{language:n}=RE();return{t:t=>{const r=TX[t];return r?r[n]||r.vi:(console.warn(`Translation missing for key: ${t}`),t)},language:n}},CX=({isOpen:n,onClose:e})=>{const{currentUser:t}=Wo(),{theme:r,language:s,setTheme:o,setLanguage:a}=RE(),{t:c}=SX(),[d,h]=S.useState({language:"vi",theme:"light",notifications:!0,autoSave:!0,gridLines:!0,soundEffects:!1,highContrast:!1}),[m,y]=S.useState(!1),[v,E]=S.useState(!0);S.useEffect(()=>{n&&(async()=>{if(t)try{E(!0);const M=await jd.getSettings(t.uid);M&&h(M)}catch(M){console.error("Error loading settings:",M),h(F=>({...F,theme:r,language:s}))}finally{E(!1)}})()},[t,n,r,s]);const b=async()=>{try{y(!0),d.theme!==r&&await o(d.theme),d.language!==s&&await a(d.language),t&&await jd.saveSettings(t.uid,d),e()}catch(R){console.error("Error saving settings:",R),alert("Có lỗi xảy ra khi lưu cài đặt. Vui lòng thử lại.")}finally{y(!1)}},C=(R,M)=>{h(F=>({...F,[R]:M}))},I=()=>{alert("Tính năng xuất dữ liệu sẽ được triển khai sớm!")},k=()=>{confirm("Bạn có chắc chắn muốn xóa tài khoản? Hành động này không thể hoàn tác!")&&alert("Tính năng xóa tài khoản sẽ được triển khai sớm!")};return f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto",onClick:R=>R.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h3",{className:"text-lg font-semibold dark:text-white",children:c("settings.title")}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,disabled:m,children:f.jsx(Lr,{size:18})})]}),v?f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:c("common.loading")})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(T3,{className:"text-blue-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.language")})]}),f.jsxs(fc,{value:d.language,onValueChange:R=>C("language",R),children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsxs(gc,{children:[f.jsx(La,{value:"vi",children:"🇻🇳 Tiếng Việt"}),f.jsx(La,{value:"en",children:"🇺🇸 English"})]})]})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Fa,{className:"text-purple-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.theme")})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[d.theme==="dark"?f.jsx(HA,{size:16}):f.jsx(qA,{size:16}),f.jsx("span",{className:"text-sm dark:text-gray-300",children:d.theme==="dark"?c("settings.darkMode"):c("settings.lightMode")})]}),f.jsx(ro,{checked:d.theme==="dark",onCheckedChange:R=>C("theme",R?"dark":"light")})]})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(GF,{className:"text-green-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.notifications")})]}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm dark:text-gray-300",children:c("settings.pushNotifications")}),f.jsx(ro,{checked:d.notifications,onCheckedChange:R=>C("notifications",R)})]})})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Fa,{className:"text-orange-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.drawing")})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm dark:text-gray-300",children:c("settings.autoSave")}),f.jsx(ro,{checked:d.autoSave,onCheckedChange:R=>C("autoSave",R)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm dark:text-gray-300",children:c("settings.gridLines")}),f.jsx(ro,{checked:d.gridLines,onCheckedChange:R=>C("gridLines",R)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm dark:text-gray-300",children:c("settings.soundEffects")}),f.jsx(ro,{checked:d.soundEffects,onCheckedChange:R=>C("soundEffects",R)})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm dark:text-gray-300",children:c("settings.highContrast")}),f.jsx(ro,{checked:d.highContrast,onCheckedChange:R=>C("highContrast",R)})]})]})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(bs,{className:"text-indigo-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.dataManagement")})]}),f.jsx("div",{className:"space-y-2",children:f.jsxs(Se,{variant:"outline",size:"sm",onClick:I,className:"w-full justify-start",children:[f.jsx(bs,{size:16,className:"mr-2"}),c("settings.exportData")]})})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(d6,{className:"text-red-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.account")})]}),f.jsx("div",{className:"space-y-2",children:f.jsxs(Se,{variant:"outline",size:"sm",onClick:k,className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",children:[f.jsx(KA,{size:16,className:"mr-2"}),c("settings.deleteAccount")]})})]}),f.jsx(Jl,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(lC,{className:"text-gray-500",size:18}),f.jsx(it,{className:"text-sm font-medium dark:text-white",children:c("settings.help")})]}),f.jsx("div",{className:"space-y-2",children:f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>window.open("https://github.com/kqhuy04/Pixel-App-Drawing/issues","_blank"),className:"w-full justify-start",children:[f.jsx(lC,{size:16,className:"mr-2"}),c("settings.reportIssue")]})})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t dark:border-gray-700",children:[f.jsx(Se,{variant:"outline",onClick:e,disabled:m,children:c("common.cancel")}),f.jsx(Se,{onClick:b,disabled:m,children:c(m?"common.loading":"common.save")})]})]})]})})})},bX=[{id:1,title:"Bức tranh đầu tiên",desc:"Lưu một tác phẩm đầu tiên",points:10},{id:2,title:"Họa sĩ chăm chỉ",desc:"Tạo 10 tác phẩm",points:50},{id:3,title:"Họa sĩ cộng đồng",desc:"Chia sẻ 1 tác phẩm công khai",points:20}],IX=({isOpen:n,onClose:e})=>f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",onClick:e,children:f.jsxs(qe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"bg-white rounded-xl w-full max-w-md p-6",onClick:t=>t.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[f.jsx(xo,{size:18})," Thành tích"]}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,children:f.jsx(Lr,{size:18})})]}),f.jsx("div",{className:"space-y-3",children:bX.map(t=>f.jsxs("div",{className:"p-3 border rounded-lg flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-medium",children:t.title}),f.jsx("div",{className:"text-sm text-gray-600",children:t.desc})]}),f.jsxs("div",{className:"text-sm text-purple-600",children:["+",t.points," điểm"]})]},t.id))})]})})}),kX=[{id:"1",title:"Cuộc thi Pixel Art mùa Xuân",theme:"Hoa anh đào và thiên nhiên",timeLeft:"3 ngày 14 giờ",participants:1247,prize:"1.000.000 VNĐ",difficulty:"Trung bình",progress:65},{id:"2",title:"Character Design Challenge",theme:"Nhân vật game retro",timeLeft:"1 ngày 8 giờ",participants:892,prize:"500.000 VNĐ",difficulty:"Khó",progress:80},{id:"3",title:"Beginner Pixel Contest",theme:"Động vật dễ thương",timeLeft:"5 ngày 2 giờ",participants:2156,prize:"200.000 VNĐ",difficulty:"Dễ",progress:45}],y_=()=>{const n=t=>{switch(t){case"Dễ":return"bg-green-100 text-green-800";case"Trung bình":return"bg-yellow-100 text-yellow-800";case"Khó":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},e=t=>t>=80?"bg-red-500":t>=60?"bg-yellow-500":"bg-green-500";return f.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 p-4 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(xo,{className:"text-yellow-600",size:24}),f.jsx("h3",{children:"🏆 Cuộc thi đang diễn ra"})]}),f.jsx("div",{className:"space-y-4",children:kX.map((t,r)=>f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"bg-white rounded-lg p-4 shadow-sm border-l-4 border-l-purple-500",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"mb-1",children:t.title}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.theme}),f.jsx(Fn,{className:n(t.difficulty),children:t.difficulty})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-lg text-purple-600 mb-1",children:t.prize}),f.jsx("div",{className:"text-xs text-gray-500",children:"Giải thưởng"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(FA,{size:16,className:"text-orange-500"}),f.jsxs("span",{children:["Còn lại: ",t.timeLeft]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gp,{size:16,className:"text-blue-500"}),f.jsxs("span",{children:[t.participants.toLocaleString()," người tham gia"]})]})]}),f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-xs text-gray-600",children:"Thời gian còn lại"}),f.jsxs("span",{className:"text-xs text-gray-600",children:[t.progress,"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx(qe.div,{initial:{width:0},animate:{width:`${t.progress}%`},transition:{duration:1,delay:r*.2},className:`h-2 rounded-full ${e(t.progress)}`})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Se,{size:"sm",className:"flex-1",children:"Tham gia ngay"}),f.jsx(Se,{variant:"outline",size:"sm",children:"Chi tiết"})]})]},t.id))}),f.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Lw,{className:"text-yellow-600",size:20}),f.jsx("span",{className:"text-sm",children:"Mẹo thành công"})]}),f.jsx("p",{className:"text-xs text-gray-700",children:"Tham gia cuộc thi thường xuyên để nâng cao kỹ năng và có cơ hội nhận giải thưởng hấp dẫn!"})]})]})};function Pa({className:n,...e}){return f.jsx("div",{"data-slot":"card",className:Ot("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}var v_="rovingFocusGroup.onEntryFocus",AX={bubbles:!1,cancelable:!0},Vh="RovingFocusGroup",[Y0,RM,NX]=Uw(Vh),[PX,DM]=Oo(Vh,[NX]),[RX,DX]=PX(Vh),MM=S.forwardRef((n,e)=>f.jsx(Y0.Provider,{scope:n.__scopeRovingFocusGroup,children:f.jsx(Y0.Slot,{scope:n.__scopeRovingFocusGroup,children:f.jsx(MX,{...n,ref:e})})}));MM.displayName=Vh;var MX=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...y}=n,v=S.useRef(null),E=wt(e,v),b=Km(o),[C,I]=bc({prop:a,defaultProp:c??null,onChange:d,caller:Vh}),[k,R]=S.useState(!1),M=mi(h),F=RM(t),W=S.useRef(!1),[K,P]=S.useState(0);return S.useEffect(()=>{const A=v.current;if(A)return A.addEventListener(v_,M),()=>A.removeEventListener(v_,M)},[M]),f.jsx(RX,{scope:t,orientation:r,dir:b,loop:s,currentTabStopId:C,onItemFocus:S.useCallback(A=>I(A),[I]),onItemShiftTab:S.useCallback(()=>R(!0),[]),onFocusableItemAdd:S.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:S.useCallback(()=>P(A=>A-1),[]),children:f.jsx(Xe.div,{tabIndex:k||K===0?-1:0,"data-orientation":r,...y,ref:E,style:{outline:"none",...n.style},onMouseDown:rt(n.onMouseDown,()=>{W.current=!0}),onFocus:rt(n.onFocus,A=>{const j=!W.current;if(A.target===A.currentTarget&&j&&!k){const L=new CustomEvent(v_,AX);if(A.currentTarget.dispatchEvent(L),!L.defaultPrevented){const V=F().filter(ie=>ie.focusable),B=V.find(ie=>ie.active),O=V.find(ie=>ie.id===C),de=[B,O,...V].filter(Boolean).map(ie=>ie.ref.current);OM(de,m)}}W.current=!1}),onBlur:rt(n.onBlur,()=>R(!1))})})}),jM="RovingFocusGroupItem",LM=S.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...c}=n,d=vh(),h=o||d,m=DX(jM,t),y=m.currentTabStopId===h,v=RM(t),{onFocusableItemAdd:E,onFocusableItemRemove:b,currentTabStopId:C}=m;return S.useEffect(()=>{if(r)return E(),()=>b()},[r,E,b]),f.jsx(Y0.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:f.jsx(Xe.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...c,ref:e,onMouseDown:rt(n.onMouseDown,I=>{r?m.onItemFocus(h):I.preventDefault()}),onFocus:rt(n.onFocus,()=>m.onItemFocus(h)),onKeyDown:rt(n.onKeyDown,I=>{if(I.key==="Tab"&&I.shiftKey){m.onItemShiftTab();return}if(I.target!==I.currentTarget)return;const k=OX(I,m.orientation,m.dir);if(k!==void 0){if(I.metaKey||I.ctrlKey||I.altKey||I.shiftKey)return;I.preventDefault();let M=v().filter(F=>F.focusable).map(F=>F.ref.current);if(k==="last")M.reverse();else if(k==="prev"||k==="next"){k==="prev"&&M.reverse();const F=M.indexOf(I.currentTarget);M=m.loop?VX(M,F+1):M.slice(F+1)}setTimeout(()=>OM(M))}}),children:typeof a=="function"?a({isCurrentTabStop:y,hasTabStop:C!=null}):a})})});LM.displayName=jM;var jX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LX(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function OX(n,e,t){const r=LX(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jX[r]}function OM(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function VX(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var FX=MM,UX=LM;function zX(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var VM=n=>{const{present:e,children:t}=n,r=BX(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),o=wt(r.ref,$X(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:o}):null};VM.displayName="Presence";function BX(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),o=S.useRef("none"),a=n?"mounted":"unmounted",[c,d]=zX(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=Tp(r.current);o.current=c==="mounted"?h:"none"},[c]),dn(()=>{const h=r.current,m=s.current;if(m!==n){const v=o.current,E=Tp(h);n?d("MOUNT"):E==="none"||h?.display==="none"?d("UNMOUNT"):d(m&&v!==E?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),dn(()=>{if(e){let h;const m=e.ownerDocument.defaultView??window,y=E=>{const C=Tp(r.current).includes(CSS.escape(E.animationName));if(E.target===e&&C&&(d("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",h=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},v=E=>{E.target===e&&(o.current=Tp(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",y),e.addEventListener("animationend",y),()=>{m.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",y),e.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:S.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function Tp(n){return n?.animationName||"none"}function $X(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ug="Tabs",[HX,DJ]=Oo(Ug,[DM]),FM=DM(),[WX,DE]=HX(Ug),UM=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:c,activationMode:d="automatic",...h}=n,m=Km(c),[y,v]=bc({prop:r,onChange:s,defaultProp:o??"",caller:Ug});return f.jsx(WX,{scope:t,baseId:vh(),value:y,onValueChange:v,orientation:a,dir:m,activationMode:d,children:f.jsx(Xe.div,{dir:m,"data-orientation":a,...h,ref:e})})});UM.displayName=Ug;var zM="TabsList",BM=S.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,o=DE(zM,t),a=FM(t);return f.jsx(FX,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:f.jsx(Xe.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});BM.displayName=zM;var $M="TabsTrigger",HM=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...o}=n,a=DE($M,t),c=FM(t),d=KM(a.baseId,r),h=GM(a.baseId,r),m=r===a.value;return f.jsx(UX,{asChild:!0,...c,focusable:!s,active:m,children:f.jsx(Xe.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...o,ref:e,onMouseDown:rt(n.onMouseDown,y=>{!s&&y.button===0&&y.ctrlKey===!1?a.onValueChange(r):y.preventDefault()}),onKeyDown:rt(n.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&a.onValueChange(r)}),onFocus:rt(n.onFocus,()=>{const y=a.activationMode!=="manual";!m&&!s&&y&&a.onValueChange(r)})})})});HM.displayName=$M;var WM="TabsContent",qM=S.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:o,...a}=n,c=DE(WM,t),d=KM(c.baseId,r),h=GM(c.baseId,r),m=r===c.value,y=S.useRef(m);return S.useEffect(()=>{const v=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(v)},[]),f.jsx(VM,{present:s||m,children:({present:v})=>f.jsx(Xe.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:h,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:y.current?"0s":void 0},children:v&&o})})});qM.displayName=WM;function KM(n,e){return`${n}-trigger-${e}`}function GM(n,e){return`${n}-content-${e}`}var qX=UM,KX=BM,GX=HM,QX=qM;function QM({className:n,...e}){return f.jsx(qX,{"data-slot":"tabs",className:Ot("flex flex-col gap-2",n),...e})}function YM({className:n,...e}){return f.jsx(KX,{"data-slot":"tabs-list",className:Ot("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",n),...e})}function Ra({className:n,...e}){return f.jsx(GX,{"data-slot":"tabs-trigger",className:Ot("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}function Da({className:n,...e}){return f.jsx(QX,{"data-slot":"tabs-content",className:Ot("flex-1 outline-none",n),...e})}const YX=[{id:"1",title:"Nghệ sĩ mới",description:"Tạo tác phẩm đầu tiên",icon:f.jsx(Lw,{className:"text-yellow-500",size:20}),earned:!0,date:"2024-01-15"},{id:"2",title:"Người chia sẻ",description:"Chia sẻ 5 tác phẩm",icon:f.jsx(Xa,{className:"text-blue-500",size:20}),earned:!0,date:"2024-02-01"},{id:"3",title:"Tay đua cuộc thi",description:"Tham gia 3 cuộc thi",icon:f.jsx(xo,{className:"text-gold-500",size:20}),earned:!1},{id:"4",title:"Nghệ sĩ được yêu thích",description:"Nhận 100 like",icon:f.jsx(gh,{className:"text-red-500",size:20}),earned:!0,date:"2024-02-10"}],XX=({onUpdateProfile:n})=>{const{currentUser:e,userData:t,updateUserData:r}=Wo(),[s,o]=S.useState(!1),[a,c]=S.useState(!0),[d,h]=S.useState({username:"",email:"",bio:"",joinDate:"",location:""}),[m,y]=S.useState({totalArtworks:0,totalLikes:0,totalComments:0,totalShares:0,totalCompetitions:0,rank:0}),[v,E]=S.useState([]);S.useEffect(()=>{(async()=>{if(e)try{c(!0),t&&h({username:t.displayName||e.displayName||e.email||"User",email:t.email||e.email||"",bio:t.bio||"",joinDate:t.createdAt?t.createdAt.toISOString().split("T")[0]:"",location:t.location||""});const R=await NE.getUserArtworks(e.uid);E(R);const M=R.reduce((W,K)=>W+(K.likes||0),0),F=R.reduce((W,K)=>W+(K.views||0),0);y({totalArtworks:R.length,totalLikes:M,totalComments:0,totalShares:0,totalCompetitions:0,rank:Math.max(1,Math.floor(Math.random()*100))})}catch(R){console.error("Error loading user data:",R)}finally{c(!1)}})()},[e,t]);const b=async()=>{if(e)try{await r({displayName:d.username,bio:d.bio,location:d.location}),o(!1),n?.(d)}catch(k){console.error("Error updating profile:",k),alert("Có lỗi xảy ra khi cập nhật thông tin. Vui lòng thử lại.")}},C=(k,R)=>{h(M=>({...M,[k]:R}))},I=k=>{const M=new Date().getTime()-k.getTime(),F=Math.floor(M/6e4),W=Math.floor(M/36e5),K=Math.floor(M/864e5);return F<1?"Vừa xong":F<60?`${F} phút trước`:W<24?`${W} giờ trước`:K<7?`${K} ngày trước`:k.toLocaleDateString("vi-VN")};return a?f.jsx("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:f.jsx(Pa,{className:"p-6",children:f.jsx("div",{className:"flex items-center justify-center py-8",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-600",children:"Đang tải thông tin cá nhân..."})]})})})}):f.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[f.jsx(Pa,{className:"p-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[f.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[f.jsx(Fm,{className:"w-24 h-24 mb-4",children:f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white text-2xl",children:d.username.charAt(0).toUpperCase()})}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>o(!s),className:"flex items-center gap-2",children:[f.jsx(WA,{size:16}),s?"Hủy":"Chỉnh sửa"]})]}),f.jsx("div",{className:"flex-1",children:s?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"username",children:"Tên người dùng"}),f.jsx(wn,{id:"username",value:d.username,onChange:k=>C("username",k.target.value)})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"email",children:"Email"}),f.jsx(wn,{id:"email",type:"email",value:d.email,onChange:k=>C("email",k.target.value)})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"location",children:"Vị trí"}),f.jsx(wn,{id:"location",value:d.location,onChange:k=>C("location",k.target.value)})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"bio",children:"Giới thiệu"}),f.jsx(wn,{id:"bio",value:d.bio,onChange:k=>C("bio",k.target.value),placeholder:"Viết một chút về bản thân..."})]}),f.jsx(Se,{onClick:b,children:"Lưu thay đổi"})]}):f.jsxs("div",{children:[f.jsx("h2",{className:"mb-2",children:d.username}),f.jsx("p",{className:"text-gray-600 mb-4",children:d.bio}),f.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Pw,{size:16}),"Tham gia: ",new Date(d.joinDate).toLocaleDateString("vi-VN")]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Ia,{size:16}),d.location]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(xo,{size:16}),"Hạng #",m.rank]})]})]})})]})}),f.jsxs(QM,{defaultValue:"stats",className:"w-full",children:[f.jsxs(YM,{className:"grid w-full grid-cols-3",children:[f.jsx(Ra,{value:"stats",children:"Thống kê"}),f.jsx(Ra,{value:"achievements",children:"Thành tích"}),f.jsx(Ra,{value:"activity",children:"Hoạt động"})]}),f.jsx(Da,{value:"stats",className:"space-y-4",children:f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[{label:"Tác phẩm",value:m.totalArtworks,icon:f.jsx(Ia,{className:"text-blue-500",size:20})},{label:"Lượt thích",value:m.totalLikes,icon:f.jsx(gh,{className:"text-red-500",size:20})},{label:"Bình luận",value:m.totalComments,icon:f.jsx(Mw,{className:"text-green-500",size:20})},{label:"Chia sẻ",value:m.totalShares,icon:f.jsx(Xa,{className:"text-purple-500",size:20})},{label:"Cuộc thi",value:m.totalCompetitions,icon:f.jsx(xo,{className:"text-yellow-500",size:20})},{label:"Xếp hạng",value:`#${m.rank}`,icon:f.jsx(qF,{className:"text-orange-500",size:20})}].map((k,R)=>f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.1},className:"bg-white p-4 rounded-lg border text-center",children:[f.jsx("div",{className:"flex justify-center mb-2",children:k.icon}),f.jsx("div",{className:"text-2xl mb-1",children:k.value}),f.jsx("div",{className:"text-sm text-gray-600",children:k.label})]},k.label))})}),f.jsx(Da,{value:"achievements",className:"space-y-4",children:f.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:YX.map((k,R)=>f.jsx(qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:R*.1},className:`p-4 rounded-lg border ${k.earned?"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:`p-2 rounded-lg ${k.earned?"bg-white":"bg-gray-200"}`,children:k.icon}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:k.earned?"text-yellow-800":"text-gray-500",children:k.title}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:k.description}),k.earned?f.jsxs(Fn,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:["Đã đạt được ",k.date&&`• ${new Date(k.date).toLocaleDateString("vi-VN")}`]}):f.jsx(Fn,{variant:"outline",className:"text-gray-500",children:"Chưa đạt được"})]})]})},k.id))})}),f.jsx(Da,{value:"activity",className:"space-y-4",children:f.jsx("div",{className:"space-y-3",children:v.length>0?v.slice(0,10).map((k,R)=>{const M=I(k.createdAt);return f.jsxs(qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:R*.1},className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:f.jsx(Ia,{className:"text-white",size:14})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"text-sm",children:['Đã tạo tác phẩm "',k.title,'"']}),f.jsx("p",{className:"text-xs text-gray-500",children:M})]}),f.jsxs("div",{className:"text-xs text-gray-500",children:[k.likes||0," ❤️"]})]},k.id)}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Ia,{className:"mx-auto mb-2",size:32}),f.jsx("p",{children:"Chưa có hoạt động nào"}),f.jsx("p",{className:"text-sm",children:"Hãy tạo tác phẩm đầu tiên của bạn!"})]})})})]})]})},JX=[{id:"1",title:"My Pixel Cat",thumbnail:"https://via.placeholder.com/150x150/FF6B6B/FFFFFF?text=🐱",createdAt:"2024-01-15",updatedAt:"2024-01-16",likes:45,comments:8,views:123,isPublic:!0,tags:["động vật","dễ thương"],status:"published"},{id:"2",title:"Work in Progress",thumbnail:"https://via.placeholder.com/150x150/CCCCCC/FFFFFF?text=WIP",createdAt:"2024-02-01",updatedAt:"2024-02-01",likes:0,comments:0,views:5,isPublic:!1,tags:["draft"],status:"draft"},{id:"3",title:"Contest Entry - Spring",thumbnail:"https://via.placeholder.com/150x150/4ECDC4/FFFFFF?text=🌸",createdAt:"2024-02-10",updatedAt:"2024-02-12",likes:89,comments:15,views:234,isPublic:!0,tags:["cuộc thi","mùa xuân"],status:"in_contest"},{id:"4",title:"Robot Character",thumbnail:"https://via.placeholder.com/150x150/96CEB4/FFFFFF?text=🤖",createdAt:"2024-01-20",updatedAt:"2024-01-25",likes:67,comments:12,views:156,isPublic:!0,tags:["robot","character"],status:"published"}],ZX=({onCreateNew:n,onEditArt:e,initialFilter:t="all"})=>{const[r,s]=S.useState(JX),[o,a]=S.useState(""),[c,d]=S.useState(t),h=k=>{s(R=>R.map(M=>M.id===k?{...M,isPublic:!M.isPublic}:M))},m=k=>{confirm("Bạn có chắc chắn muốn xóa tác phẩm này?")&&s(R=>R.filter(M=>M.id!==k))},y=k=>{alert(`Đã chia sẻ tác phẩm "${k.title}"!`)},v=k=>{alert(`Đang tải xuống "${k.title}"...`)},E=k=>{switch(k){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"in_contest":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},b=k=>{switch(k){case"published":return"Đã xuất bản";case"draft":return"Bản nháp";case"in_contest":return"Thi đấu";default:return k}},C=r.filter(k=>{const R=k.title.toLowerCase().includes(o.toLowerCase())||k.tags.some(F=>F.toLowerCase().includes(o.toLowerCase())),M=c==="all"||k.status===c;return R&&M}),I={total:r.length,published:r.filter(k=>k.status==="published").length,draft:r.filter(k=>k.status==="draft").length,in_contest:r.filter(k=>k.status==="in_contest").length,totalLikes:r.reduce((k,R)=>k+R.likes,0),totalViews:r.reduce((k,R)=>k+R.views,0)};return f.jsxs("div",{className:"p-4 space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"🎨 Tác phẩm của tôi"}),f.jsx("p",{className:"text-gray-600",children:"Quản lý và theo dõi tất cả tác phẩm của bạn"})]}),f.jsxs(Se,{onClick:n,className:"flex items-center gap-2",children:[f.jsx(z_,{size:18}),"Tạo tranh mới"]})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[{label:"Tổng cộng",value:I.total,color:"text-blue-600"},{label:"Đã xuất bản",value:I.published,color:"text-green-600"},{label:"Bản nháp",value:I.draft,color:"text-gray-600"},{label:"Thi đấu",value:I.in_contest,color:"text-purple-600"},{label:"Tổng like",value:I.totalLikes,color:"text-red-600"},{label:"Tổng view",value:I.totalViews,color:"text-orange-600"}].map((k,R)=>f.jsxs(Pa,{className:"p-4 text-center",children:[f.jsx("div",{className:`text-2xl ${k.color} mb-1`,children:k.value}),f.jsx("div",{className:"text-sm text-gray-600",children:k.label})]},k.label))}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(jw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{placeholder:"Tìm kiếm theo tên hoặc tag...",value:o,onChange:k=>a(k.target.value),className:"pl-10"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(Se,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>d("all"),children:"Tất cả"}),f.jsx(Se,{variant:c==="published"?"default":"outline",size:"sm",onClick:()=>d("published"),children:"Đã xuất bản"}),f.jsx(Se,{variant:c==="draft"?"default":"outline",size:"sm",onClick:()=>d("draft"),children:"Bản nháp"}),f.jsx(Se,{variant:c==="in_contest"?"default":"outline",size:"sm",onClick:()=>d("in_contest"),children:"Thi đấu"})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.map((k,R)=>f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:R*.1},className:"bg-white rounded-lg overflow-hidden shadow-sm border hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:k.thumbnail,alt:k.title,className:"w-full h-40 object-cover"}),f.jsx("div",{className:"absolute top-2 left-2",children:f.jsx(Fn,{className:E(k.status),children:b(k.status)})}),f.jsx("div",{className:"absolute top-2 right-2",children:f.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>h(k.id),className:"bg-white/80 hover:bg-white",children:k.isPublic?f.jsx(mh,{size:16}):f.jsx(Wm,{size:16})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h4",{className:"mb-2 truncate",children:k.title}),f.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[k.tags.slice(0,2).map(M=>f.jsx(Fn,{variant:"secondary",className:"text-xs",children:M},M)),k.tags.length>2&&f.jsxs(Fn,{variant:"secondary",className:"text-xs",children:["+",k.tags.length-2]})]}),f.jsxs("div",{className:"text-xs text-gray-600 mb-3 space-y-1",children:[f.jsxs("div",{children:["Tạo: ",new Date(k.createdAt).toLocaleDateString("vi-VN")]}),f.jsxs("div",{children:["Cập nhật: ",new Date(k.updatedAt).toLocaleDateString("vi-VN")]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{children:["👀 ",k.views]}),f.jsxs("span",{children:["❤️ ",k.likes]}),f.jsxs("span",{children:["💬 ",k.comments]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>e(k.id),className:"flex-1",children:[f.jsx(WA,{size:14,className:"mr-1"}),"Sửa"]}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>y(k),children:f.jsx(Xa,{size:14})}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>v(k),children:f.jsx(bs,{size:14})}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>m(k.id),className:"text-red-600 hover:text-red-700",children:f.jsx(KA,{size:14})})]})]})]},k.id))}),C.length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),f.jsx("h3",{className:"mb-2",children:"Không tìm thấy tác phẩm nào"}),f.jsx("p",{className:"text-gray-600 mb-4",children:o||c!=="all"?"Thử thay đổi từ khóa tìm kiếm hoặc bộ lọc":"Bạn chưa có tác phẩm nào. Hãy tạo tác phẩm đầu tiên!"}),f.jsxs(Se,{onClick:n,children:[f.jsx(z_,{size:18,className:"mr-2"}),"Tạo tranh mới"]})]})]})},eJ=({user:n,pixelSize:e})=>{if(!n.cursor)return null;const{x:t,y:r}=n.cursor,s=t*e,o=r*e;return f.jsxs(qe.div,{className:"absolute pointer-events-none z-10",style:{left:s,top:o,transform:"translate(-2px, -2px)"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white shadow-lg",style:{backgroundColor:n.color,clipPath:"polygon(0 0, 0 100%, 100% 0)"}}),f.jsx("div",{className:"absolute top-6 left-0 px-2 py-1 rounded text-xs font-medium text-white shadow-lg whitespace-nowrap",style:{backgroundColor:n.color},children:n.username})]})},tJ=({width:n,height:e,pixelSize:t,selectedColor:r,tool:s,brushSize:o=1,onPixelChange:a,onStateChange:c,onColorPick:d,onCursorMove:h,initialPixels:m,otherUsers:y=[],roomId:v})=>{const E=S.useRef(null),[b,C]=S.useState(!1),[I,k]=S.useState(null),[R,M]=S.useState(()=>{const ge=m||Array(e).fill(null).map(()=>Array(n).fill("#ffffff")),de={pixels:ge.map(ie=>[...ie]),timestamp:Date.now()};return{pixels:ge,history:[de],historyIndex:0,canUndo:!1,canRedo:!1}});S.useEffect(()=>{if(m){const ge={pixels:m.map(de=>[...de]),timestamp:Date.now()};M({pixels:m.map(de=>[...de]),history:[ge],historyIndex:0,canUndo:!1,canRedo:!1})}},[m]);const{pixels:F,history:W,historyIndex:K}=R,P=S.useCallback((ge,de,ie)=>{const se=F[de][ge];if(se===ie)return;const z=[[ge,de]],oe=new Set,le=F.map($=>[...$]);for(;z.length>0;){const[$,ee]=z.pop(),G=`${$},${ee}`;oe.has(G)||$<0||$>=n||ee<0||ee>=e||le[ee][$]===se&&(oe.add(G),le[ee][$]=ie,z.push([$+1,ee],[$-1,ee],[$,ee+1],[$,ee-1]))}return le},[F,n,e]),A=S.useCallback((ge,de=!0)=>{const ie={pixels:ge.map(z=>[...z]),timestamp:Date.now()},se={pixels:ge,history:de?[...W.slice(0,K+1),ie]:[ie],historyIndex:de?K+1:0,canUndo:!!de,canRedo:!1};M(se),c?.(se)},[W,K,c]),j=S.useCallback(ge=>{const de=E.current;if(!de)return{x:0,y:0};const ie=de.getBoundingClientRect(),se=Math.floor((ge.clientX-ie.left)/t),z=Math.floor((ge.clientY-ie.top)/t);return{x:Math.max(0,Math.min(se,n-1)),y:Math.max(0,Math.min(z,e-1))}},[t,n,e]),L=S.useCallback(ge=>{const{x:de,y:ie}=j(ge);if(C(!0),k({x:de,y:ie}),s==="eyedropper"){const z=F[ie][de];d?.(z);return}if(s==="fill"){const z=P(de,ie,r);A(z);return}const se=F.map(z=>[...z]);if(s==="pen")for(let z=0;z<o;z++)for(let oe=0;oe<o;oe++){const le=de+oe,$=ie+z;le<n&&$<e&&(se[$][le]=r)}else if(s==="eraser")for(let z=0;z<o;z++)for(let oe=0;oe<o;oe++){const le=de+oe,$=ie+z;le<n&&$<e&&(se[$][le]="#ffffff")}A(se)},[j,s,F,r,o,n,e,P,d,A]),V=S.useCallback(ge=>{const{x:de,y:ie}=j(ge);if(h?.(de,ie),!b||!I)return;const se=F.map(z=>[...z]);if(s==="pen"){const z=Math.abs(de-I.x),oe=Math.abs(ie-I.y),le=I.x<de?1:-1,$=I.y<ie?1:-1;let ee=z-oe,G=I.x,ne=I.y;for(;;){for(let pe=0;pe<o;pe++)for(let te=0;te<o;te++){const he=G+te,_e=ne+pe;he<n&&_e<e&&(se[_e][he]=r)}if(G===de&&ne===ie)break;const fe=2*ee;fe>-oe&&(ee-=oe,G+=le),fe<z&&(ee+=z,ne+=$)}}else if(s==="eraser"){const z=Math.abs(de-I.x),oe=Math.abs(ie-I.y),le=I.x<de?1:-1,$=I.y<ie?1:-1;let ee=z-oe,G=I.x,ne=I.y;for(;;){for(let pe=0;pe<o;pe++)for(let te=0;te<o;te++){const he=G+te,_e=ne+pe;he<n&&_e<e&&(se[_e][he]="#ffffff")}if(G===de&&ne===ie)break;const fe=2*ee;fe>-oe&&(ee-=oe,G+=le),fe<z&&(ee+=z,ne+=$)}}A(se,!1)},[b,I,j,s,F,r,o,n,e,h,A]),B=S.useCallback(()=>{b&&(C(!1),k(null),A(F,!0))},[b,F,A]),O=S.useCallback(()=>{C(!1),k(null),h?.(null,null)},[h]);return S.useEffect(()=>{const ge=E.current;if(!ge)return;const de=ge.getContext("2d");if(de){de.clearRect(0,0,ge.width,ge.height);for(let ie=0;ie<e;ie++)for(let se=0;se<n;se++)de.fillStyle=F[ie][se],de.fillRect(se*t,ie*t,t,t);de.strokeStyle="#e5e7eb",de.lineWidth=.5;for(let ie=0;ie<=n;ie++)de.beginPath(),de.moveTo(ie*t,0),de.lineTo(ie*t,e*t),de.stroke();for(let ie=0;ie<=e;ie++)de.beginPath(),de.moveTo(0,ie*t),de.lineTo(n*t,ie*t),de.stroke()}},[F,n,e,t]),f.jsxs("div",{className:"relative inline-block",children:[f.jsx("canvas",{ref:E,width:n*t,height:e*t,className:"border border-gray-300 cursor-crosshair",onMouseDown:L,onMouseMove:V,onMouseUp:B,onMouseLeave:O,style:{imageRendering:"pixelated"}}),f.jsx(as,{children:y.map(ge=>f.jsx(eJ,{user:ge,pixelSize:t},ge.id))})]})},nJ="modulepreload",rJ=function(n){return"/"+n},nk={},__=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let a=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");s=a(t.map(h=>{if(h=rJ(h),h in nk)return;nk[h]=!0;const m=h.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":nJ,m||(v.as="script"),v.crossOrigin="",v.href=h,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((E,b)=>{v.addEventListener("load",E),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};class pr{static ROOMS_PATH="collaboration_rooms";static USERS_PATH="collaboration_users";static CHAT_PATH="collaboration_chat";static CANVAS_PATH="collaboration_canvas";static ACTIONS_PATH="collaboration_actions";static async createRoom(e){try{console.log("🔍 Starting room creation...");const t=mr.currentUser;if(!t)throw console.error("❌ No current user"),new Error("Người dùng chưa đăng nhập");console.log("👤 Current user:",t.uid),console.log("📊 Room data:",e);const r=wp(Ft(Ut,this.ROOMS_PATH)),s=r.key;console.log("🆔 Generated room ID:",s);const o={id:s,name:e.name,description:e.description||"",ownerId:t.uid,ownerName:t.displayName||t.email||"Anonymous",maxUsers:e.maxUsers||10,currentUsers:0,isPublic:e.isPublic!==!1,createdAt:Date.now(),lastActivity:Date.now(),canvasData:{pixels:Array(32).fill(null).map(()=>Array(32).fill("#ffffff")),width:32,height:32,pixelSize:12}};return console.log("📝 Room object to save:",o),console.log("🔥 Attempting to save to Realtime Database..."),await no(r,o),console.log("✅ Room created successfully!"),s}catch(t){throw console.error("❌ Error creating room:",t),console.error("❌ Error code:",t.code),console.error("❌ Error message:",t.message),t.code==="PERMISSION_DENIED"?new Error("Không có quyền tạo phòng. Vui lòng kiểm tra Firebase Realtime Database rules."):t.code==="UNAVAILABLE"?new Error("Firebase Realtime Database không khả dụng. Vui lòng kiểm tra kết nối."):t.message.includes("database")?new Error("Lỗi kết nối database. Vui lòng kiểm tra cấu hình Firebase."):new Error(`Không thể tạo phòng vẽ chung: ${t.message}`)}}static async getPublicRooms(){try{const e=Ft(Ut,this.ROOMS_PATH),t=await ud(e);if(t.exists()){const r=[];return t.forEach(s=>{const o=s.val();o.isPublic&&o.currentUsers<o.maxUsers&&r.push(o)}),r.sort((s,o)=>o.lastActivity-s.lastActivity)}return[]}catch(e){throw console.error("Error getting public rooms:",e),new Error("Không thể lấy danh sách phòng")}}static async joinRoom(e){try{const t=mr.currentUser;if(!t)throw new Error("Người dùng chưa đăng nhập");const r=Ft(Ut,`${this.ROOMS_PATH}/${e}`),s=await ud(r);if(!s.exists())throw new Error("Phòng không tồn tại");const o=s.val();if(o.currentUsers>=o.maxUsers)throw new Error("Phòng đã đầy");await xp(r,{currentUsers:o.currentUsers+1,lastActivity:Date.now()});const a=Ft(Ut,`${this.USERS_PATH}/${e}/${t.uid}`),c={id:t.uid,username:t.displayName||t.email||"Anonymous",email:t.email||"",color:this.generateUserColor(),cursor:null,lastActive:Date.now(),isOnline:!0,currentTool:"pen",selectedColor:"#000000"};await no(a,c);const d=Ft(Ut,`${this.USERS_PATH}/${e}/${t.uid}/isOnline`);return PY(d).set(!1),o}catch(t){throw console.error("Error joining room:",t),t}}static async leaveRoom(e){try{const t=mr.currentUser;if(!t)return;const r=Ft(Ut,`${this.USERS_PATH}/${e}/${t.uid}`);await cd(r);const s=Ft(Ut,`${this.ROOMS_PATH}/${e}`),o=await ud(s);if(o.exists()){const a=o.val(),c=Math.max(0,a.currentUsers-1);await xp(s,{currentUsers:c,lastActivity:Date.now()}),c===0&&(await cd(s),await cd(Ft(Ut,`${this.CHAT_PATH}/${e}`)),await cd(Ft(Ut,`${this.CANVAS_PATH}/${e}`)),await cd(Ft(Ut,`${this.ACTIONS_PATH}/${e}`)))}}catch(t){console.error("Error leaving room:",t)}}static onUsersChange(e,t){const r=Ft(Ut,`${this.USERS_PATH}/${e}`),s=d_(r,o=>{if(o.exists()){const a=[];o.forEach(c=>{const d=c.val();d.isOnline&&a.push(d)}),t(a)}else t([])});return()=>h_(r,"value",s)}static onCanvasChange(e,t){const r=Ft(Ut,`${this.CANVAS_PATH}/${e}`),s=d_(r,o=>{o.exists()&&t(o.val())});return()=>h_(r,"value",s)}static onChatMessages(e,t){const r=Ft(Ut,`${this.CHAT_PATH}/${e}`),s=d_(r,o=>{if(o.exists()){const a=[];o.forEach(c=>{a.push(c.val())}),a.sort((c,d)=>c.timestamp-d.timestamp),t(a)}else t([])});return()=>h_(r,"value",s)}static async sendMessage(e,t){try{const r=mr.currentUser;if(!r)throw new Error("Người dùng chưa đăng nhập");const s=wp(Ft(Ut,`${this.CHAT_PATH}/${e}`)),o={id:s.key,userId:r.uid,username:r.displayName||r.email||"Anonymous",message:t.trim(),timestamp:Date.now(),type:"message"};await no(s,o)}catch(r){throw console.error("Error sending message:",r),new Error("Không thể gửi tin nhắn")}}static async updateCanvas(e,t){try{const r=Ft(Ut,`${this.CANVAS_PATH}/${e}`);await no(r,{...t,lastUpdated:Date.now()});const s=Ft(Ut,`${this.ROOMS_PATH}/${e}`);await xp(s,{lastActivity:Date.now()})}catch(r){throw console.error("Error updating canvas:",r),new Error("Không thể cập nhật canvas")}}static async updateCursor(e,t){try{const r=mr.currentUser;if(!r)return;const s=Ft(Ut,`${this.USERS_PATH}/${e}/${r.uid}/cursor`);await no(s,t)}catch(r){console.error("Error updating cursor:",r)}}static async updateUserTool(e,t,r){try{const s=mr.currentUser;if(!s)return;const o=Ft(Ut,`${this.USERS_PATH}/${e}/${s.uid}`);await xp(o,{currentTool:t,selectedColor:r,lastActive:Date.now()})}catch(s){console.error("Error updating user tool:",s)}}static async recordAction(e,t){try{if(!mr.currentUser)return;const s=wp(Ft(Ut,`${this.ACTIONS_PATH}/${e}`)),o={...t,id:s.key,timestamp:Date.now()};await no(s,o)}catch(r){console.error("Error recording action:",r)}}static generateUserColor(){const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3","#FF9F43","#10AC84","#EE5A24","#0984E3","#A29BFE","#FD79A8"];return e[Math.floor(Math.random()*e.length)]}static async getRoom(e){try{const t=Ft(Ut,`${this.ROOMS_PATH}/${e}`),r=await ud(t);return r.exists()?r.val():null}catch(t){return console.error("Error getting room:",t),null}}static async saveCollaborationArtwork(e,t){try{const r=mr.currentUser;if(!r)throw new Error("Người dùng chưa đăng nhập");const s=Ft(Ut,`${this.CANVAS_PATH}/${e}`),o=await ud(s);if(!o.exists())throw new Error("Không tìm thấy canvas data");const a=o.val(),{ArtworkService:c}=await __(async()=>{const{ArtworkService:h}=await Promise.resolve().then(()=>p_);return{ArtworkService:h}},void 0);return await c.createArtwork(r.uid,r.displayName||r.email||"Anonymous",{title:t.title,description:t.description||"",pixels:a.pixels,width:a.width,height:a.height,pixelSize:a.pixelSize,tags:t.tags,isPublic:t.isPublic})}catch(r){throw console.error("Error saving collaboration artwork:",r),new Error("Không thể lưu tác phẩm collaboration")}}static async getCollaborationArtworks(){try{const{ArtworkService:e}=await __(async()=>{const{ArtworkService:s}=await Promise.resolve().then(()=>p_);return{ArtworkService:s}},void 0),t=mr.currentUser;if(!t)throw new Error("Người dùng chưa đăng nhập");return(await e.getUserArtworks(t.uid)).filter(s=>s.tags.includes("collaboration")||s.description?.includes("collaboration"))}catch(e){throw console.error("Error getting collaboration artworks:",e),new Error("Không thể lấy danh sách tranh collaboration")}}static async loadArtworkToRoom(e,t){try{const{ArtworkService:r}=await __(async()=>{const{ArtworkService:o}=await Promise.resolve().then(()=>p_);return{ArtworkService:o}},void 0),s=await r.getArtwork(t);if(!s)throw new Error("Không tìm thấy tác phẩm");await this.updateCanvas(e,{pixels:s.pixels,width:s.width,height:s.height,pixelSize:s.pixelSize}),await this.sendSystemMessage(e,`Đã load tác phẩm: ${s.title}`)}catch(r){throw console.error("Error loading artwork to room:",r),new Error("Không thể load tác phẩm vào phòng")}}static async sendSystemMessage(e,t){try{const r=wp(Ft(Ut,`${this.CHAT_PATH}/${e}`)),s={id:r.key,userId:"system",username:"System",message:t,timestamp:Date.now(),type:"system"};await no(r,s)}catch(r){console.error("Error sending system message:",r)}}}const sJ=()=>{const[n,e]=S.useState([]),t=S.useCallback(h=>{const m=Math.random().toString(36).substring(2,9),y={...h,id:m};return e(v=>[...v,y]),m},[]),r=S.useCallback(h=>{e(m=>m.filter(y=>y.id!==h))},[]),s=S.useCallback(()=>{e([])},[]),o=S.useCallback((h,m,y)=>t({type:"success",title:h,message:m,duration:y}),[t]),a=S.useCallback((h,m,y)=>t({type:"error",title:h,message:m,duration:y}),[t]),c=S.useCallback((h,m,y)=>t({type:"info",title:h,message:m,duration:y}),[t]),d=S.useCallback((h,m,y)=>t({type:"warning",title:h,message:m,duration:y}),[t]);return{toasts:n,addToast:t,removeToast:r,clearAllToasts:s,success:o,error:a,info:c,warning:d}},iJ={success:r3,error:Dw,info:A3,warning:C6},oJ={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",info:"bg-blue-50 border-blue-200 text-blue-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800"},aJ=({id:n,type:e,title:t,message:r,duration:s=5e3,onClose:o})=>{const[a,c]=S.useState(!0),d=iJ[e];S.useEffect(()=>{const m=setTimeout(()=>{c(!1),setTimeout(()=>o(n),300)},s);return()=>clearTimeout(m)},[n,s,o]);const h=()=>{c(!1),setTimeout(()=>o(n),300)};return f.jsx(as,{children:a&&f.jsx(qe.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:`max-w-sm w-full border rounded-lg shadow-lg p-4 ${oJ[e]}`,children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(d,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h4",{className:"font-medium text-sm",children:t}),r&&f.jsx("p",{className:"text-sm mt-1 opacity-90",children:r})]}),f.jsx("button",{onClick:h,className:"flex-shrink-0 p-1 hover:bg-black/10 rounded-full transition-colors",children:f.jsx(Lr,{className:"w-4 h-4"})})]})})})},lJ=({toasts:n,onClose:e})=>f.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(t=>f.jsx(aJ,{...t,onClose:e},t.id))}),cJ=["collaboration","teamwork","creative","pixel-art","art","động vật","dễ thương","game","fantasy","robot","sci-fi","hoa","mùa xuân","phong cảnh","hoàng hôn","không gian","character","retro","8-bit","pixel","anime","chibi"],uJ=({isOpen:n,onClose:e,onSave:t,loading:r=!1})=>{const[s,o]=S.useState({title:"",description:"",tags:[],isPublic:!0}),[a,c]=S.useState(""),d=v=>{v.preventDefault(),s.title.trim()&&t({title:s.title.trim(),description:s.description.trim(),tags:s.tags,isPublic:s.isPublic})},h=v=>{v&&!s.tags.includes(v)&&s.tags.length<10&&o(E=>({...E,tags:[...E.tags,v]}))},m=v=>{o(E=>({...E,tags:E.tags.filter(b=>b!==v)}))},y=v=>{v.preventDefault(),a.trim()&&(h(a.trim()),c(""))};return f.jsx(as,{children:n&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:e,children:f.jsxs(qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-md",onClick:v=>v.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h2",{className:"text-xl flex items-center gap-2",children:[f.jsx(qm,{className:"text-green-600",size:24}),"Lưu tác phẩm collaboration"]}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:e,children:f.jsx(Lr,{size:20})})]}),f.jsxs("form",{onSubmit:d,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"title",children:"Tên tác phẩm *"}),f.jsx(wn,{id:"title",value:s.title,onChange:v=>o(E=>({...E,title:v.target.value})),placeholder:"Nhập tên tác phẩm...",required:!0})]}),f.jsxs("div",{children:[f.jsx(it,{htmlFor:"description",children:"Mô tả"}),f.jsx(AE,{id:"description",value:s.description,onChange:v=>o(E=>({...E,description:v.target.value})),placeholder:"Mô tả tác phẩm...",rows:3})]}),f.jsxs("div",{children:[f.jsx(it,{children:"Tags"}),f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.tags.map(v=>f.jsxs(Fn,{variant:"secondary",className:"flex items-center gap-1",children:[v,f.jsx("button",{type:"button",onClick:()=>m(v),className:"ml-1 hover:text-red-500",children:f.jsx(Lr,{size:12})})]},v))}),f.jsxs("form",{onSubmit:y,className:"flex gap-2",children:[f.jsx(wn,{value:a,onChange:v=>c(v.target.value),placeholder:"Thêm tag...",className:"flex-1"}),f.jsx(Se,{type:"submit",size:"sm",disabled:!a.trim(),children:"Thêm"})]}),f.jsxs("div",{className:"mt-2",children:[f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Tags phổ biến:"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:cJ.map(v=>f.jsx("button",{type:"button",onClick:()=>h(v),disabled:s.tags.includes(v)||s.tags.length>=10,className:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:v},v))})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ro,{id:"isPublic",checked:s.isPublic,onCheckedChange:v=>o(E=>({...E,isPublic:v}))}),f.jsxs(it,{htmlFor:"isPublic",className:"flex items-center gap-2",children:[s.isPublic?f.jsx(mh,{size:16}):f.jsx(Wm,{size:16}),s.isPublic?"Công khai":"Riêng tư"]})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Se,{type:"submit",disabled:r||!s.title.trim(),className:"flex-1",children:r?"Đang lưu...":"Lưu tác phẩm"}),f.jsx(Se,{type:"button",variant:"outline",onClick:e,children:"Hủy"})]})]})]})})})},dJ=({roomId:n,onCreateRoom:e,onJoinRoom:t})=>{const{currentUser:r}=Wo(),{toasts:s,removeToast:o,success:a,error:c}=sJ(),[d,h]=S.useState("rooms"),[m,y]=S.useState(null),[v,E]=S.useState([]),[b,C]=S.useState([]),[I,k]=S.useState([]),[R,M]=S.useState(!1),[F,W]=S.useState(""),[K,P]=S.useState("#000000"),[A,j]=S.useState("pen"),[L,V]=S.useState(1),[B,O]=S.useState(null),[ge,de]=S.useState(""),ie=S.useRef(null),[se,z]=S.useState({name:"",description:"",maxUsers:10,isPublic:!0}),[oe,le]=S.useState(!1);S.useEffect(()=>{d==="create-room"&&(M(!1),W(""))},[d]),S.useEffect(()=>{$()},[]),S.useEffect(()=>{n&&r&&G(n)},[n,r]);const $=async()=>{try{M(!0);const J=await pr.getPublicRooms();k(J)}catch(J){W(J.message)}finally{M(!1)}},ee=async()=>{if(!r){c("Lỗi","Vui lòng đăng nhập để tạo phòng");return}if(!se.name.trim()){c("Lỗi","Vui lòng nhập tên phòng");return}try{M(!0),W(""),console.log("🚀 Attempting to create room...");const J=await pr.createRoom({name:se.name.trim(),description:se.description.trim(),maxUsers:se.maxUsers,isPublic:se.isPublic});console.log("✅ Room created, joining..."),await G(J),a("Thành công","Phòng đã được tạo và bạn đã tham gia!"),e?.()}catch(J){console.error("❌ Create room error:",J),W(J.message),c("Lỗi",J.message)}finally{M(!1)}},G=async J=>{if(!r){c("Lỗi","Vui lòng đăng nhập để tham gia phòng");return}try{M(!0),W("");const Ae=await pr.joinRoom(J);Ae&&(y(Ae),h("canvas"),t?.(J),a("Thành công",`Đã tham gia phòng "${Ae.name}"`),fe(J))}catch(Ae){W(Ae.message),c("Lỗi",Ae.message)}finally{M(!1)}},ne=async()=>{if(m)try{await pr.leaveRoom(m.id),y(null),E([]),C([]),h("rooms"),O(null)}catch(J){W(J.message)}},fe=J=>{const Ae=pr.onUsersChange(J,pt=>{E(pt)}),tt=pr.onChatMessages(J,pt=>{C(pt),setTimeout(()=>{ie.current?.scrollIntoView({behavior:"smooth"})},100)}),dt=pr.onCanvasChange(J,pt=>{if(pt&&pt.pixels){const Vr={pixels:pt.pixels,history:[{pixels:pt.pixels.map(An=>[...An]),timestamp:Date.now()}],historyIndex:0,canUndo:!1,canRedo:!1};O(Vr)}});return()=>{Ae(),tt(),dt()}},pe=async()=>{if(!(!ge.trim()||!m))try{await pr.sendMessage(m.id,ge),de("")}catch(J){W(J.message)}},te=S.useCallback(async J=>{m&&(O(J),await pr.updateCanvas(m.id,{pixels:J.pixels,width:32,height:32,pixelSize:12}))},[m]),he=S.useCallback(J=>{P(J),m&&pr.updateUserTool(m.id,A,J)},[A,m]),_e=S.useCallback(J=>{j(J),m&&pr.updateUserTool(m.id,J,K)},[K,m]),we=()=>{if(m){const J=`${window.location.origin}${window.location.pathname}?room=${m.id}`;navigator.clipboard.writeText(J),a("Đã sao chép","Link phòng đã được sao chép vào clipboard")}},Ce=async J=>{if(m)try{M(!0);const Ae=await pr.saveCollaborationArtwork(m.id,{title:J.title,description:J.description,tags:[...J.tags,"collaboration"],isPublic:J.isPublic});a("Thành công",`Tác phẩm đã được lưu với ID: ${Ae}`),le(!1)}catch(Ae){c("Lỗi",Ae.message)}finally{M(!1)}},je=J=>new Date(J).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),ce=J=>{const tt=Date.now()-J,dt=Math.floor(tt/6e4);if(dt<1)return"Vừa xong";if(dt<60)return`${dt} phút trước`;const pt=Math.floor(dt/60);return pt<24?`${pt} giờ trước`:`${Math.floor(pt/24)} ngày trước`};return d==="rooms"?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🎨 Phòng vẽ chung"}),f.jsx("p",{className:"text-gray-600",children:"Tham gia hoặc tạo phòng để vẽ cùng bạn bè"})]}),f.jsxs("div",{className:"flex gap-4 justify-center",children:[f.jsxs(Se,{onClick:()=>h("create-room"),className:"flex items-center gap-2",children:[f.jsx(z_,{size:20}),"Tạo phòng mới"]}),f.jsxs(Se,{variant:"outline",onClick:$,className:"flex items-center gap-2",children:[f.jsx(jw,{size:20}),"Làm mới"]})]}),F&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:F}),f.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:I.map(J=>f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg",children:J.name}),J.description&&f.jsx("p",{className:"text-gray-600 text-sm mt-1",children:J.description})]}),f.jsxs(Fn,{variant:"secondary",children:[J.currentUsers,"/",J.maxUsers]})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(UA,{size:14}),J.ownerName]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(FA,{size:14}),ce(J.lastActivity)]})]}),f.jsx(Se,{onClick:()=>G(J.id),className:"w-full",disabled:J.currentUsers>=J.maxUsers,children:J.currentUsers>=J.maxUsers?"Phòng đã đầy":"Tham gia"})]},J.id))}),I.length===0&&!R&&f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Gp,{size:48,className:"mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"Chưa có phòng nào. Hãy tạo phòng đầu tiên!"})]})]}):d==="create-room"?f.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Tạo phòng mới"}),f.jsx("p",{className:"text-gray-600",children:"Tạo phòng để vẽ cùng bạn bè"})]}),f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tên phòng *"}),f.jsx(wn,{value:se.name,onChange:J=>z(Ae=>({...Ae,name:J.target.value})),placeholder:"Nhập tên phòng..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mô tả"}),f.jsx(wn,{value:se.description,onChange:J=>z(Ae=>({...Ae,description:J.target.value})),placeholder:"Mô tả phòng (tùy chọn)..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"Số người tối đa"}),f.jsxs("select",{value:se.maxUsers,onChange:J=>z(Ae=>({...Ae,maxUsers:parseInt(J.target.value)})),className:"w-full p-2 border rounded-md",children:[f.jsx("option",{value:5,children:"5 người"}),f.jsx("option",{value:10,children:"10 người"}),f.jsx("option",{value:15,children:"15 người"}),f.jsx("option",{value:20,children:"20 người"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"isPublic",checked:se.isPublic,onChange:J=>z(Ae=>({...Ae,isPublic:J.target.checked})),className:"rounded"}),f.jsx("label",{htmlFor:"isPublic",className:"text-sm",children:"Phòng công khai"})]}),F&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:F}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Se,{onClick:ee,disabled:R||!se.name.trim(),className:"flex-1",children:R?"Đang tạo...":"Tạo phòng"}),f.jsx(Se,{variant:"outline",onClick:()=>{h("rooms"),M(!1),W("")},disabled:R,children:"Hủy"})]})]})]}):d==="canvas"&&m?f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("div",{className:"bg-white border-b p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold",children:m.name}),f.jsxs("p",{className:"text-sm text-gray-600",children:[v.length," người đang online"]})]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:()=>le(!0),className:"flex items-center gap-2",children:[f.jsx(qm,{size:16}),"Lưu tranh"]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:we,className:"flex items-center gap-2",children:[f.jsx(Xa,{size:16}),"Chia sẻ"]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(Fn,{variant:"secondary",children:[v.length,"/",m.maxUsers]}),f.jsxs(Se,{variant:"outline",size:"sm",onClick:ne,className:"flex items-center gap-2",children:[f.jsx(BA,{size:16}),"Rời phòng"]})]})]})}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("div",{className:"w-80 bg-white border-r flex flex-col",children:[f.jsx("div",{className:"p-4 border-b",children:f.jsx(W_,{selectedColor:K,onColorSelect:he})}),f.jsx("div",{className:"p-4 flex-1",children:f.jsx(i0,{selectedTool:A,onToolSelect:_e,brushSize:L,onBrushSizeChange:V,canvasSize:{width:32,height:32}})})]}),f.jsx("div",{className:"flex-1 flex flex-col",children:f.jsx("div",{className:"flex-1 p-4 bg-gray-50 overflow-auto",children:f.jsx("div",{className:"h-full flex items-center justify-center",children:f.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[f.jsxs("div",{className:"text-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Canvas chung"}),f.jsxs("p",{className:"text-sm text-gray-600",children:["Vẽ cùng ",v.length-1," người khác"]})]}),f.jsx(tJ,{width:32,height:32,pixelSize:12,selectedColor:K,tool:A,brushSize:L,onStateChange:te,onColorPick:he,onCursorMove:(J,Ae)=>{m&&J!==null&&Ae!==null&&pr.updateCursor(m.id,{x:J,y:Ae})},initialPixels:B?.pixels,otherUsers:v.filter(J=>J.id!==r?.uid),roomId:m?.id})]})})})}),f.jsxs("div",{className:"w-80 bg-white border-l flex flex-col",children:[f.jsxs("div",{className:"p-4 border-b",children:[f.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[f.jsx(Gp,{size:18}),"Thành viên (",v.length,")"]}),f.jsx("div",{className:"space-y-2",children:v.map(J=>f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Fm,{className:"w-8 h-8",children:f.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center text-white text-sm font-medium",style:{backgroundColor:J.color},children:J.username.charAt(0).toUpperCase()})}),f.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-white",style:{backgroundColor:J.isOnline?"#10B981":"#6B7280"}})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium truncate",children:J.username}),f.jsxs("p",{className:"text-xs text-gray-500",children:[J.currentTool," • ",J.selectedColor]})]})]},J.id))})]}),f.jsxs("div",{className:"flex-1 flex flex-col",children:[f.jsx("div",{className:"p-4 border-b",children:f.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[f.jsx(Mw,{size:18}),"Chat"]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[b.map(J=>f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium",style:{color:v.find(Ae=>Ae.id===J.userId)?.color},children:J.username}),f.jsx("span",{className:"text-xs text-gray-500",children:je(J.timestamp)})]}),f.jsx("p",{className:"text-sm text-gray-700",children:J.message})]},J.id)),f.jsx("div",{ref:ie})]}),f.jsx("div",{className:"p-4 border-t",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx(wn,{value:ge,onChange:J=>de(J.target.value),placeholder:"Nhập tin nhắn...",onKeyPress:J=>J.key==="Enter"&&pe()}),f.jsx(Se,{onClick:pe,size:"sm",children:f.jsx(a6,{size:16})})]})})]})]})]})]}):f.jsxs(f.Fragment,{children:[null,f.jsx(lJ,{toasts:s,onClose:o}),f.jsx(uJ,{isOpen:oe,onClose:()=>le(!1),onSave:Ce,loading:R})]})},hJ=()=>{const[n,e]=S.useState(null);return S.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("room");o&&e(o)},[]),{currentRoomId:n,joinRoom:s=>{e(s);const o=new URL(window.location.href);o.searchParams.set("room",s),window.history.pushState({},"",o.toString())},leaveRoom:()=>{e(null);const s=new URL(window.location.href);s.searchParams.delete("room"),window.history.pushState({},"",s.toString())}}},fJ=[{id:"anime",label:"Anime",preview:"🎌"},{id:"pixel",label:"Pixel Art",preview:"🎮"},{id:"watercolor",label:"Watercolor",preview:"🎨"},{id:"oil",label:"Oil Painting",preview:"🖼️"},{id:"sketch",label:"Sketch",preview:"✏️"},{id:"cartoon",label:"Cartoon",preview:"🎪"}],pJ=[{id:"retro",label:"Retro 8-bit",preview:"👾"},{id:"rpg",label:"RPG Fantasy",preview:"⚔️"},{id:"platformer",label:"Platformer",preview:"🏃"},{id:"puzzle",label:"Puzzle Game",preview:"🧩"},{id:"fighting",label:"Fighting Game",preview:"🥊"},{id:"racing",label:"Racing Game",preview:"🏎️"}],mJ=[{id:"idle",label:"Đứng yên",preview:"🧍"},{id:"walk",label:"Đi bộ",preview:"🚶"},{id:"run",label:"Chạy",preview:"🏃"},{id:"jump",label:"Nhảy",preview:"🦘"},{id:"attack",label:"Tấn công",preview:"⚔️"},{id:"wave",label:"Vẫy tay",preview:"👋"}],gJ=({currentArtwork:n,onApplyResult:e})=>{const[t,r]=S.useState(!1),[s,o]=S.useState(""),[a,c]=S.useState(""),[d,h]=S.useState(""),[m,y]=S.useState(""),[v,E]=S.useState(null),b=async(F=3e3)=>{r(!0),await new Promise(W=>setTimeout(W,F)),r(!1),E("https://via.placeholder.com/300x300/4ECDC4/FFFFFF?text=AI+Result")},C=async()=>{if(!n){alert("Vui lòng vẽ một phác thảo trước khi sử dụng tính năng này");return}await b()},I=async()=>{if(!n||!s){alert("Vui lòng chọn phong cách và có tác phẩm để chuyển đổi");return}await b()},k=async()=>{if(!n||!d){alert("Vui lòng chọn loại hoạt ảnh và có tác phẩm để tạo animation");return}await b(5e3)},R=async()=>{if(!m||!a){alert("Vui lòng nhập mô tả và chọn phong cách game");return}await b()},M=()=>{v&&(e?.(v),alert("Đã áp dụng kết quả AI vào canvas!"))};return f.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(Sa,{className:"text-white",size:24})}),f.jsx("h2",{className:"mb-2",children:"🤖 AI Creative Studio"}),f.jsx("p",{className:"text-gray-600",children:"Sử dụng sức mạnh AI để nâng cao và biến đổi tác phẩm nghệ thuật của bạn"})]}),f.jsxs(QM,{defaultValue:"sketch",className:"w-full",children:[f.jsxs(YM,{className:"grid w-full grid-cols-4",children:[f.jsx(Ra,{value:"sketch",children:"Hoàn thiện"}),f.jsx(Ra,{value:"style",children:"Phong cách"}),f.jsx(Ra,{value:"animation",children:"Hoạt ảnh"}),f.jsx(Ra,{value:"game",children:"Game Style"})]}),f.jsx(Da,{value:"sketch",className:"space-y-6",children:f.jsxs(Pa,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(D6,{className:"text-purple-600",size:20}),f.jsx("h3",{children:"AI Hoàn thiện phác thảo"})]}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Vẽ những nét cơ bản, AI sẽ tự động hoàn thiện thành tranh chi tiết và đẹp mắt"}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Tác phẩm hiện tại"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:n?f.jsx("img",{src:n,alt:"Current artwork",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Mv,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Chưa có tác phẩm"})]})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Kết quả AI"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:t?f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(Yi,{className:"animate-spin text-purple-600 mb-2",size:32}),f.jsx("p",{className:"text-purple-600",children:"AI đang xử lý..."})]}):v?f.jsx("img",{src:v,alt:"AI result",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Sa,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Kết quả sẽ hiển thị ở đây"})]})})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsxs(Se,{onClick:C,disabled:t||!n,className:"flex items-center gap-2",children:[t?f.jsx(Yi,{className:"animate-spin",size:16}):f.jsx(Sa,{size:16}),"Hoàn thiện với AI"]}),v&&f.jsxs(Se,{variant:"outline",onClick:M,children:[f.jsx(bs,{size:16,className:"mr-1"}),"Áp dụng kết quả"]})]})]})}),f.jsx(Da,{value:"style",className:"space-y-6",children:f.jsxs(Pa,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Fa,{className:"text-blue-600",size:20}),f.jsx("h3",{children:"AI Chuyển đổi phong cách"})]}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Biến đổi tác phẩm của bạn sang nhiều phong cách nghệ thuật khác nhau"}),f.jsxs("div",{className:"mb-6",children:[f.jsx(it,{className:"mb-3 block",children:"Chọn phong cách nghệ thuật"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:fJ.map(F=>f.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(F.id),className:`p-4 rounded-lg border-2 text-center transition-colors ${s===F.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[f.jsx("div",{className:"text-2xl mb-2",children:F.preview}),f.jsx("div",{className:"text-sm",children:F.label})]},F.id))})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Tác phẩm gốc"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:n?f.jsx("img",{src:n,alt:"Original artwork",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Mv,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Chưa có tác phẩm"})]})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Phong cách mới"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:t?f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(Yi,{className:"animate-spin text-blue-600 mb-2",size:32}),f.jsx("p",{className:"text-blue-600",children:"Đang chuyển đổi phong cách..."})]}):v?f.jsx("img",{src:v,alt:"Styled artwork",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Fa,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Kết quả sẽ hiển thị ở đây"})]})})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsxs(Se,{onClick:I,disabled:t||!n||!s,className:"flex items-center gap-2",children:[t?f.jsx(Yi,{className:"animate-spin",size:16}):f.jsx(Z3,{size:16}),"Chuyển đổi phong cách"]}),v&&f.jsxs(Se,{variant:"outline",onClick:M,children:[f.jsx(bs,{size:16,className:"mr-1"}),"Áp dụng kết quả"]})]})]})}),f.jsx(Da,{value:"animation",className:"space-y-6",children:f.jsxs(Pa,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(Dv,{className:"text-green-600",size:20}),f.jsx("h3",{children:"AI Tạo hoạt ảnh 2D"})]}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Từ một bức tranh tĩnh, AI sẽ tạo ra những chuyển động sinh động"}),f.jsxs("div",{className:"mb-6",children:[f.jsx(it,{className:"mb-3 block",children:"Chọn loại hoạt ảnh"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:mJ.map(F=>f.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(F.id),className:`p-4 rounded-lg border-2 text-center transition-colors ${d===F.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[f.jsx("div",{className:"text-2xl mb-2",children:F.preview}),f.jsx("div",{className:"text-sm",children:F.label})]},F.id))})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Tranh gốc"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:n?f.jsx("img",{src:n,alt:"Static artwork",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Mv,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Chưa có tác phẩm"})]})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Hoạt ảnh (GIF)"}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:t?f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(Yi,{className:"animate-spin text-green-600 mb-2",size:32}),f.jsx("p",{className:"text-green-600",children:"Đang tạo hoạt ảnh..."}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Có thể mất 30-60 giây"})]}):v?f.jsx("img",{src:v,alt:"Animated result",className:"max-w-full h-auto mx-auto"}):f.jsxs("div",{children:[f.jsx(Dv,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Hoạt ảnh sẽ hiển thị ở đây"})]})})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsxs(Se,{onClick:k,disabled:t||!n||!d,className:"flex items-center gap-2",children:[t?f.jsx(Yi,{className:"animate-spin",size:16}):f.jsx(Dv,{size:16}),"Tạo hoạt ảnh"]}),v&&f.jsxs(Se,{variant:"outline",onClick:()=>{const F=document.createElement("a");F.href=v,F.download="animation.gif",F.click()},children:[f.jsx(bs,{size:16,className:"mr-1"}),"Tải về GIF"]})]})]})}),f.jsx(Da,{value:"game",className:"space-y-6",children:f.jsxs(Pa,{className:"p-6",children:[f.jsx("div",{className:"flex items-center gap-2 mb-4",children:f.jsx(Fn,{className:"bg-orange-100 text-orange-800",children:"🎮 AI Tạo tranh game"})}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Mô tả ý tưởng của bạn, AI sẽ tạo ra nhân vật/vật thể theo phong cách game"}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx(it,{htmlFor:"prompt",className:"mb-2 block",children:"Mô tả chi tiết"}),f.jsx(AE,{id:"prompt",placeholder:"Ví dụ: Một chiến binh có áo giáp màu xanh, cầm kiếm và khiên, phong cách fantasy RPG...",value:m,onChange:F=>y(F.target.value),rows:3})]}),f.jsxs("div",{children:[f.jsx(it,{className:"mb-3 block",children:"Phong cách game"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:pJ.map(F=>f.jsxs(qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(F.id),className:`p-4 rounded-lg border-2 text-center transition-colors ${a===F.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[f.jsx("div",{className:"text-2xl mb-2",children:F.preview}),f.jsx("div",{className:"text-sm",children:F.label})]},F.id))})]}),f.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:t?f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx(Yi,{className:"animate-spin text-orange-600 mb-2",size:32}),f.jsx("p",{className:"text-orange-600",children:"AI đang tạo tranh..."})]}):v?f.jsxs("div",{children:[f.jsx("img",{src:v,alt:"Generated game art",className:"max-w-full h-auto mx-auto mb-4"}),f.jsx(Fn,{variant:"secondary",children:"Tạo thành công!"})]}):f.jsxs("div",{children:[f.jsx(Sa,{className:"mx-auto text-gray-400 mb-2",size:32}),f.jsx("p",{className:"text-gray-500",children:"Tranh được tạo sẽ hiển thị ở đây"})]})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(Se,{onClick:R,disabled:t||!m||!a,className:"flex items-center gap-2",children:[t?f.jsx(Yi,{className:"animate-spin",size:16}):f.jsx(Sa,{size:16}),"Tạo tranh game"]}),v&&f.jsxs(Se,{variant:"outline",onClick:M,children:[f.jsx(bs,{size:16,className:"mr-1"}),"Áp dụng kết quả"]})]})]})]})})]})]})},yJ=["động vật","dễ thương","game","fantasy","robot","sci-fi","hoa","mùa xuân","phong cảnh","hoàng hôn","không gian","character","retro","8-bit","pixel","anime","chibi"],vJ=[{value:"all",label:"Tất cả độ khó"},{value:"easy",label:"Dễ"},{value:"medium",label:"Trung bình"},{value:"hard",label:"Khó"}],_J=[{value:"newest",label:"Mới nhất"},{value:"oldest",label:"Cũ nhất"},{value:"most_liked",label:"Nhiều like nhất"},{value:"most_viewed",label:"Nhiều view nhất"},{value:"trending",label:"Xu hướng"},{value:"random",label:"Ngẫu nhiên"}],wJ=[{value:"all",label:"Mọi thời gian"},{value:"today",label:"Hôm nay"},{value:"week",label:"7 ngày qua"},{value:"month",label:"30 ngày qua"},{value:"year",label:"Năm nay"}],xJ=({onFiltersChange:n,onClearFilters:e})=>{const[t,r]=S.useState(!1),[s,o]=S.useState({query:"",tags:[],difficulty:"all",likes:[0,1e3],views:[0,5e3],dateRange:"all",sortBy:"newest",artist:""}),a=y=>{const v={...s,...y};o(v),n(v)},c=y=>{s.tags.includes(y)||a({tags:[...s.tags,y]})},d=y=>{a({tags:s.tags.filter(v=>v!==y)})},h=()=>{o({query:"",tags:[],difficulty:"all",likes:[0,1e3],views:[0,5e3],dateRange:"all",sortBy:"newest",artist:""}),e()},m=s.query||s.tags.length>0||s.difficulty!=="all"||s.dateRange!=="all"||s.artist||s.sortBy!=="newest";return f.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(jw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),f.jsx(wn,{placeholder:"Tìm kiếm tác phẩm, tag, nghệ sĩ...",value:s.query,onChange:y=>a({query:y.target.value}),className:"pl-10"})]}),f.jsxs(Se,{variant:"outline",onClick:()=>r(!t),className:"flex items-center gap-2",children:[f.jsx(f6,{size:16}),"Bộ lọc",m&&f.jsx(Fn,{variant:"destructive",className:"ml-1 text-xs",children:[s.tags.length,s.difficulty!=="all"?1:0,s.dateRange!=="all"?1:0,s.artist?1:0,s.sortBy!=="newest"?1:0].reduce((y,v)=>y+v,0)})]}),m&&f.jsx(Se,{variant:"ghost",onClick:h,children:f.jsx(Lr,{size:16})})]}),s.tags.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.tags.map(y=>f.jsxs(Fn,{variant:"secondary",className:"flex items-center gap-1",children:[y,f.jsx("button",{onClick:()=>d(y),children:f.jsx(Lr,{size:12})})]},y))})]}),t&&f.jsx(qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t",children:f.jsxs("div",{className:"p-4 space-y-6",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"mb-3 flex items-center gap-2",children:[f.jsx(x3,{size:16}),"Tag phổ biến"]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:yJ.map(y=>f.jsx("button",{onClick:()=>c(y),disabled:s.tags.includes(y),className:`px-3 py-1 rounded-full text-sm border transition-colors ${s.tags.includes(y)?"bg-blue-100 border-blue-300 text-blue-700 cursor-not-allowed":"bg-gray-100 border-gray-300 hover:bg-gray-200"}`,children:y},y))})]}),f.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-2",children:"Độ khó"}),f.jsxs(fc,{value:s.difficulty,onValueChange:y=>a({difficulty:y}),children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsx(gc,{children:vJ.map(y=>f.jsx(La,{value:y.value,children:y.label},y.value))})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm mb-2 flex items-center gap-1",children:[f.jsx(Pw,{size:14}),"Thời gian"]}),f.jsxs(fc,{value:s.dateRange,onValueChange:y=>a({dateRange:y}),children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsx(gc,{children:wJ.map(y=>f.jsx(La,{value:y.value,children:y.label},y.value))})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm mb-2 flex items-center gap-1",children:[f.jsx(T6,{size:14}),"Sắp xếp theo"]}),f.jsxs(fc,{value:s.sortBy,onValueChange:y=>a({sortBy:y}),children:[f.jsx(mc,{children:f.jsx(pc,{})}),f.jsx(gc,{children:_J.map(y=>f.jsx(La,{value:y.value,children:y.label},y.value))})]})]})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm mb-3 flex items-center gap-1",children:[f.jsx(gh,{size:14}),"Số lượng like: ",s.likes[0]," - ",s.likes[1]]}),f.jsx(Yp,{value:s.likes,onValueChange:y=>a({likes:y}),max:1e3,step:10,className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm mb-3 flex items-center gap-1",children:[f.jsx(mh,{size:14}),"Số lượng view: ",s.views[0]," - ",s.views[1]]}),f.jsx(Yp,{value:s.views,onValueChange:y=>a({views:y}),max:5e3,step:50,className:"w-full"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm mb-2",children:"Nghệ sĩ"}),f.jsx(wn,{placeholder:"Tên nghệ sĩ...",value:s.artist,onChange:y=>a({artist:y.target.value})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"mb-3",children:"Bộ lọc nhanh"}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>a({sortBy:"trending",dateRange:"week",likes:[50,1e3]}),children:"🔥 Xu hướng tuần"}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>a({sortBy:"most_liked",dateRange:"month",likes:[100,1e3]}),children:"⭐ Được yêu thích"}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>a({difficulty:"easy",sortBy:"newest"}),children:"🌱 Cho người mới"}),f.jsx(Se,{variant:"outline",size:"sm",onClick:()=>a({difficulty:"hard",sortBy:"most_liked"}),children:"🎯 Thử thách"})]})]})]})})]})},EJ=()=>{const{userData:n,currentUser:e}=Wo();return!n||!e?null:f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-4 rounded-lg shadow-sm",children:[f.jsx("h3",{className:"mb-3 text-center",children:"Thông tin cá nhân"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ia,{className:"text-gray-500",size:18}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-600",children:"Tên hiển thị"}),f.jsx("div",{className:"font-medium",children:n.displayName})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx($A,{className:"text-gray-500",size:18}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-600",children:"Email"}),f.jsx("div",{className:"font-medium",children:n.email})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Pw,{className:"text-gray-500",size:18}),f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-600",children:"Tham gia từ"}),f.jsx("div",{className:"font-medium",children:n.createdAt.toLocaleDateString("vi-VN")})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t",children:[f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[f.jsx(Fa,{className:"text-blue-500",size:16}),f.jsx("span",{className:"text-sm text-gray-600",children:"Tác phẩm"})]}),f.jsx("div",{className:"text-xl font-bold text-blue-600",children:n.totalArtworks||0})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[f.jsx(gh,{className:"text-red-500",size:16}),f.jsx("span",{className:"text-sm text-gray-600",children:"Lượt thích"})]}),f.jsx("div",{className:"text-xl font-bold text-red-600",children:n.totalLikes||0})]})]}),(n.bio||n.location)&&f.jsxs("div",{className:"pt-3 border-t space-y-2",children:[n.bio&&f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Giới thiệu"}),f.jsx("div",{className:"text-sm",children:n.bio})]}),n.location&&f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Vị trí"}),f.jsx("div",{className:"text-sm",children:n.location})]})]})]})]})},TJ=()=>{const{theme:n,toggleTheme:e}=RE();return f.jsxs(Se,{variant:"ghost",size:"sm",onClick:e,className:"relative",children:[f.jsx(qe.div,{initial:!1,animate:{rotate:n==="dark"?180:0},transition:{duration:.3},children:n==="dark"?f.jsx(HA,{className:"h-4 w-4"}):f.jsx(qA,{className:"h-4 w-4"})}),f.jsx("span",{className:"sr-only",children:n==="dark"?"Chuyển sang chế độ sáng":"Chuyển sang chế độ tối"})]})};function SJ(){const{currentUser:n,userData:e,logout:t}=Wo(),{currentRoomId:r,joinRoom:s}=hJ(),[o,a]=S.useState("canvas"),[c,d]=S.useState("#000000"),[h,m]=S.useState("pen"),[y,v]=S.useState(1),[E,b]=S.useState({width:32,height:32}),[C,I]=S.useState(!1),[k,R]=S.useState(!1),[M,F]=S.useState(!1),[W,K]=S.useState(!1),[P,A]=S.useState(!1),[j,L]=S.useState(!1),[V,B]=S.useState(null),O=async()=>{try{await t(),a("canvas")}catch(ce){console.error("Logout error:",ce)}},ge=()=>{if(!n){I(!0);return}F(!0)},de=()=>{if(!n){I(!0);return}if(V){const ce=document.createElement("canvas"),J=ce.getContext("2d");if(J){ce.width=384,ce.height=384;for(let Ae=0;Ae<32;Ae++)for(let tt=0;tt<32;tt++)J.fillStyle=V.pixels[Ae][tt],J.fillRect(tt*12,Ae*12,12,12);ce.toBlob(Ae=>{Ae&&navigator.clipboard.write([new ClipboardItem({"image/png":Ae})]).then(()=>{alert("Tác phẩm đã được sao chép vào clipboard!")}).catch(()=>{alert("Không thể sao chép tác phẩm. Vui lòng thử lại.")})})}}},ie=()=>{K(!0)},se=()=>{window.canvasUndo&&window.canvasUndo()},z=()=>{window.canvasRedo&&window.canvasRedo()},oe=()=>{if(confirm("Bạn có chắc chắn muốn xóa toàn bộ canvas?")){const ce=Array(E.height).fill(null).map(()=>Array(E.width).fill("#ffffff")),J={pixels:ce.map(Ae=>[...Ae]),timestamp:Date.now()};B({pixels:ce,history:[J],historyIndex:0,canUndo:!1,canRedo:!1})}},le=ce=>{if(V){const J=ce==="left"?ne(V.pixels):fe(V.pixels),Ae={pixels:J.map(tt=>[...tt]),timestamp:Date.now()};B({...V,pixels:J,history:[...V.history.slice(0,V.historyIndex+1),Ae],historyIndex:V.historyIndex+1,canUndo:!0,canRedo:!1})}},$=ce=>{if(V){const J=ce==="horizontal"?pe(V.pixels):te(V.pixels),Ae={pixels:J.map(tt=>[...tt]),timestamp:Date.now()};B({...V,pixels:J,history:[...V.history.slice(0,V.historyIndex+1),Ae],historyIndex:V.historyIndex+1,canUndo:!0,canRedo:!1})}},ee=ce=>{d(ce)},G=ce=>{b(ce);const J=Array(ce.height).fill(null).map(()=>Array(ce.width).fill("#ffffff")),Ae={pixels:J.map(tt=>[...tt]),timestamp:Date.now()};B({pixels:J,history:[Ae],historyIndex:0,canUndo:!1,canRedo:!1})},ne=ce=>{const J=ce.length,Ae=ce[0].length,tt=Array(Ae).fill(null).map(()=>Array(J).fill(""));for(let dt=0;dt<J;dt++)for(let pt=0;pt<Ae;pt++)tt[pt][J-1-dt]=ce[dt][pt];return tt},fe=ce=>{const J=ce.length,Ae=ce[0].length,tt=Array(Ae).fill(null).map(()=>Array(J).fill(""));for(let dt=0;dt<J;dt++)for(let pt=0;pt<Ae;pt++)tt[Ae-1-pt][dt]=ce[dt][pt];return tt},pe=ce=>ce.map(J=>[...J].reverse()),te=ce=>[...ce].reverse(),he=(ce,J,Ae)=>{if(V){const tt=document.createElement("canvas"),dt=tt.getContext("2d");if(dt){tt.width=32*J,tt.height=32*J,ce==="jpeg"&&(dt.fillStyle="#ffffff",dt.fillRect(0,0,tt.width,tt.height));for(let An=0;An<32;An++)for(let Gn=0;Gn<32;Gn++)dt.fillStyle=V.pixels[An][Gn],dt.fillRect(Gn*J,An*J,J,J);const pt=document.createElement("a"),Vr=ce==="png"?"image/png":"image/jpeg";pt.download=`pixel-art-${Date.now()}.${ce}`,pt.href=tt.toDataURL(Vr,Ae),pt.click()}}},_e=ce=>{alert(`Tác phẩm đã được lưu thành công với ID: ${ce}`)},we=(ce,J)=>{if(J&&!n){I(!0);return}a(ce)},Ce=[{id:"canvas",icon:Fa,label:"Vẽ tranh",view:"canvas"},{id:"gallery",icon:zA,label:"Thư viện",view:"gallery"},{id:"my-arts",icon:_3,label:"Tranh của tôi",view:"my-arts",requireAuth:!0},{id:"collaborative",icon:Gp,label:"Vẽ chung",view:"collaborative"},{id:"ai-features",icon:Sa,label:"AI Studio",view:"ai-features"},{id:"competitions",icon:xo,label:"Cuộc thi",view:"competitions"}],je=()=>f.jsx(as,{children:k&&f.jsx(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 lg:hidden",onClick:()=>R(!1),children:f.jsxs(qe.div,{initial:{x:-300},animate:{x:0},exit:{x:-300},className:"w-72 h-full bg-white shadow-xl",onClick:ce=>ce.stopPropagation(),children:[f.jsx("div",{className:"p-4 border-b",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{children:"Pixel Art Studio"}),f.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>R(!1),children:f.jsx(Lr,{size:20})})]})}),f.jsx("div",{className:"p-4 space-y-2",children:Ce.map(ce=>f.jsxs("button",{onClick:()=>{we(ce.view,ce.requireAuth),R(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${o===ce.view?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,children:[f.jsx(ce.icon,{size:20}),ce.label,ce.requireAuth&&!n&&f.jsx("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full ml-auto",children:"Cần đăng nhập"})]},ce.id))}),o==="canvas"&&f.jsxs("div",{className:"p-4 space-y-4",children:[f.jsx(W_,{selectedColor:c,onColorSelect:d}),f.jsx(i0,{selectedTool:h,onToolSelect:m,onUndo:se,onRedo:z,onSave:ge,onShare:de,onExport:ie,onClear:oe,onRotate:le,onFlip:$,canUndo:V?.canUndo||!1,canRedo:V?.canRedo||!1,brushSize:y,onBrushSizeChange:v,canvasSize:E,onCanvasSizeChange:b})]}),o==="competitions"&&f.jsx("div",{className:"p-4",children:f.jsx(y_,{})})]})})});return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-900 dark:to-black",children:[f.jsx("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b sticky top-0 z-40",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>R(!0),className:"lg:hidden",children:f.jsx(j3,{size:20})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center",children:f.jsx(Fa,{className:"text-white",size:18})}),f.jsx("h1",{className:"text-xl hidden sm:block dark:text-white",children:"Pixel Art Studio"})]})]}),f.jsx("nav",{className:"hidden lg:flex items-center gap-2",children:Ce.map(ce=>f.jsxs(Se,{variant:o===ce.view?"default":"ghost",onClick:()=>we(ce.view,ce.requireAuth),className:"flex items-center gap-2 relative",children:[f.jsx(ce.icon,{size:18}),ce.label,ce.requireAuth&&!n&&f.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-orange-500 rounded-full"})]},ce.id))}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(TJ,{}),n?f.jsx(yX,{username:e?.displayName||n.displayName||n.email||"User",onLogout:O,onViewProfile:()=>a("profile"),onViewAchievements:()=>L(!0),onViewSharedArts:()=>a("my-arts"),onOpenSettings:()=>A(!0)}):f.jsx(Se,{onClick:()=>I(!0),children:"Đăng nhập"})]})]})})}),f.jsx("main",{className:"max-w-7xl mx-auto p-4",children:f.jsxs("div",{className:"grid lg:grid-cols-12 gap-6",children:[f.jsxs("div",{className:"hidden lg:block lg:col-span-3 space-y-6",children:[o==="canvas"&&f.jsxs(f.Fragment,{children:[f.jsx(W_,{selectedColor:c,onColorSelect:d}),f.jsx(i0,{selectedTool:h,onToolSelect:m,onUndo:se,onRedo:z,onSave:ge,onShare:de,onExport:ie,onClear:oe,onRotate:le,onFlip:$,canUndo:V?.canUndo||!1,canRedo:V?.canRedo||!1,brushSize:y,onBrushSizeChange:v,canvasSize:E,onCanvasSizeChange:G})]}),o==="gallery"&&f.jsx(xJ,{onFiltersChange:ce=>console.log("Filters changed:",ce),onClearFilters:()=>console.log("Filters cleared")}),o==="competitions"&&f.jsx(y_,{}),n&&f.jsx(EJ,{})]}),f.jsx("div",{className:"lg:col-span-9",children:f.jsxs(as,{mode:"wait",children:[o==="canvas"&&f.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("h2",{className:"mb-2",children:"🎨 Tạo tác phẩm pixel art của bạn"}),f.jsxs("p",{className:"text-gray-600",children:["Canvas: ",E.width," × ",E.height," pixels"]})]}),f.jsx(x5,{width:E.width,height:E.height,pixelSize:12,selectedColor:c,tool:h,brushSize:y,onStateChange:B,onColorPick:ee}),f.jsxs("div",{className:"text-center text-sm text-gray-600",children:[f.jsx("p",{children:"💡 Mẹo: Sử dụng chuột hoặc chạm để vẽ. Giữ và kéo để vẽ liên tục."}),f.jsx("p",{children:"🛠️ Công cụ mới: Đường thẳng, hình chữ nhật, hình tròn, chọn màu, phun sương"})]})]},"canvas"),o==="gallery"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:f.jsx(iX,{onCreateNew:()=>a("canvas")})},"gallery"),o==="my-arts"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:f.jsx(ZX,{onCreateNew:()=>a("canvas"),onEditArt:ce=>{console.log("Edit art:",ce),a("canvas")},initialFilter:"published"})},"my-arts"),o==="profile"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:f.jsx(XX,{onUpdateProfile:ce=>console.log("Profile updated:",ce)})},"profile"),o==="collaborative"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:f.jsx(dJ,{roomId:r||void 0,onCreateRoom:()=>console.log("Create room"),onJoinRoom:ce=>s(ce)})},"collaborative"),o==="ai-features"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:f.jsx(gJ,{currentArtwork:"https://via.placeholder.com/300x300/FF6B6B/FFFFFF?text=Current+Art",onApplyResult:ce=>console.log("Apply AI result:",ce)})},"ai-features"),o==="competitions"&&f.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"lg:hidden",children:f.jsx(y_,{})},"competitions")]})})]})}),f.jsx(je,{}),f.jsx(WY,{isOpen:C,onClose:()=>I(!1)}),V&&f.jsx(eX,{isOpen:M,onClose:()=>F(!1),onSave:_e,pixels:V.pixels,width:32,height:32,pixelSize:12}),f.jsx(rX,{isOpen:W,onClose:()=>K(!1),onExport:he,currentPixelSize:12}),f.jsx(CX,{isOpen:P,onClose:()=>A(!1)}),f.jsx(IX,{isOpen:j,onClose:()=>L(!1)}),!n&&f.jsxs("div",{className:"fixed bottom-4 right-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white p-4 rounded-lg shadow-lg max-w-sm",children:[f.jsx("h4",{className:"mb-2",children:"🎉 Chào mừng đến với Pixel Art Studio!"}),f.jsx("p",{className:"text-sm mb-3",children:"Đăng nhập để lưu trữ tác phẩm, tham gia cuộc thi và chia sẻ với cộng đồng."}),f.jsx(Se,{variant:"secondary",size:"sm",onClick:()=>I(!0),className:"w-full",children:"Đăng nhập ngay"})]})]})}function CJ(){return f.jsx(HY,{children:f.jsx(EX,{children:f.jsx(SJ,{})})})}lL.createRoot(document.getElementById("root")).render(f.jsx(CJ,{}));
